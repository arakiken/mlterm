2025-07-21  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.[ch]: Adjust the trigger to enter flick scroll mode.

	* sdl2/ui.h: Define FLICK_SCROLL.

	* sdl2/ui_display.c:
	  - Ignore SDL_CLIPBOARDUPDATE event.
	  - Process SDL_FINGERDOWN, SDL_FINGERUP and SDL_FINGERMOTION events.

	* sdl2/ui.h: Add Button10 for touch finger events.

2025-05-31  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: Add null character to the color response sequence
	  in report_char_attr_status().
	  (https://github.com/arakiken/mlterm/issues/143)

	* */ui.h: Add SELECTION_STYLE_CHANGEABLE macro.

	* ui_selection.h: Remove SELECTION_STYLE_CHANGEABLE macro.

	* vte.c: Add vte 0.80 apis.

2025-05-25  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c:
	  - RIS doesn't reset DECMODE_40, like xterm.
	  - VTMODE_33 is on by default.

	* vt_pty_ssh.c: Fix the previous commit.

2025-05-24  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_ssh.c: Fix compiling error.

	* man/mlterm.1, README.ja: Updated.

	* ui_im_{candidate|status}_screen.[ch]: Process window_resized event.

	* ui_screen.c: Regard "default" value of screen->input_method as "xim".

	* ui_main_config.c: Add "default" as a value of "input_method" option.

2025-05-07  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: Call ui_inline_picture_clear_transparent_flag() in entering
	  backscroll mode.

	* ui_picture.[ch]: Add ui_inline_picture_clear_transparent_flag().

2025-05-06  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.[ch], ui_screen.c:
	  - Add MOUSE_REPORT_BY_PIXEL to vt_mouse_report_mode_t.
	  - LOCATOR_CHARCELL_REPORT -> LOCATOR_REPORT
	    LOCATOR_PIXEL_REPORT -> LOCATOR_REPORT|MOUSE_REPORT_BY_PIXEL
	  - Add EXTENDED_MOUSE_REPORT_SGR_PIXEL to vt_extended_mouse_report_mode_t.
	  - Add DECMODE_1016 to vtmode_t.
	  - Unreset mouse report mode in DECSTR.

	* ui_font_manager.[ch]: Define ui_get_type_engine() and ui_get_font_present()
	  as macros instead of functions.

2025-05-05  Araki Ken  <arakiken@users.sf.net>

	* ui_draw_str.c:
	  - If updated_width == NULL, use ui_window_draw_string() instead of
	    ui_window_draw_image_string().
	  - ui_draw_str_to_eol() calls ui_window_clear() before xcore_draw_str()
	    only if font_man->use_ot_layout is true.

	* ui_screen.c: Hide the cursor if it is at the transparent sixel graphics.
	  (https://misskey.io/notes/a6r6iux7xawb0gt3)

2025-05-03  Araki Ken  <arakiken@users.sf.net>

	* ui_connect_dialog.c: Fix incompatible pointer type error in compiling.

	* ui_window.h, ui_screen.c: Add get_line_height to ui_xim_event_listener_t.

	* ui_display.[ch], ui.h:
	  - Add 'u_int line_height' to arguments of ui_display_set_text_input_spot().
	  - Call zwp_text_input_v3_set_cursor_rectangle() in input_enter().
	  - Add text_input_x, text_input_y, text_input_line_height to Display.

2025-04-27  Araki Ken  <arakiken@users.sf.net>

	* bl_map.h: Use bl_hash_func_t in bl_map_erase().

	* wayland/ui.h, wayland/ui_display.c: Draw preediting text only if it was changed.

2025-04-20  Araki Ken  <arakiken@users.sf.net>

	* quartz/ui_color.c, win32/ui_color.c: Cast u_int8_t to u_int32_t in
	  shifting bits by <<.
	  (https://github.com/arakiken/mlterm/issues/139)

	* ui_screen_manager.c, vt_term_manager.c: 0x1 -> 0x1u
	  (https://github.com/arakiken/mlterm/issues/139)

	* install.sh, main-cocoa.m: Move config files to mlterm.app/Contents/Resources/mlterm
	  instead of mlterm.app/mlterm.
	  (https://github.com/arakiken/mlterm/issues/141)

2025-04-19  Araki Ken  <arakiken@users.sf.net>

	* cocoa.m: Add main_loop_final() declaration to fix implicit function
	  declaration error.
	  (https://github.com/arakiken/mlterm/issues/138)

	* fb/ui_window.c, ui_xic.c, wayland/ui.h, wayland/ui_display.[ch],
	  wayland/ui_xic.c: Support text-input-unstable-v3.

	* text-input-unstable-v3-client-protocol.[ch]: Added.

	* rescanproto.sh: Add text-input-unstable-v3.xml.

	* version.h: 3.9.4 -> 3.9.4post

2025-03-30  Araki Ken  <arakiken@users.sf.net>

	* 3.9.4 released.
	  (tag "3.9.4")

	* configure.in, mlterm.spec, main/version.h.in,
	  mlterm.c, android/jni/version.h, vt_parser.c:
	  updated for 3.9.4.

2025-03-30  Araki Ken  <arakiken@users.sf.net>

	* w3mmlconfig: Fix.

	* README.ja, README.android, etc/main, etc/main.ja: Updated.

2025-03-29  Araki Ken  <arakiken@users.sf.net>

	* README.ja, doc/{ja,en}/README.win32, etc/main, etc/main.ja: Updated.

	* ui_screen.c: Add "use_clipping" to OSC 5379 - 5381.

	* ui_draw_str.[ch]: Add ui_get_use_clipping()

	* vt_config_menu.c: Fix segfault in exiting mlconfig in using conpty.

2025-03-25  Araki Ken  <arakiken@users.sf.net>

	* bl_path.c: Execute tests using IsDBCSLeadByte() only if GetACP() == 932.

2025-03-23  Araki Ken  <arakiken@users.sf.net>

	* bl_path.c: Add a test case to TEST_bl_basename().

2025-03-23  Araki Ken  <arakiken@users.sf.net>

	* vt_shape.c: Fix illegal memory access in convert_text_to_glyphs().

2025-03-22  Araki Ken  <arakiken@users.sf.net>

	* ui_screen_manager.c: Fix compiling error.

	* bl_file.c, test.c: Add TEST_bl_file().

	* ci.yml: Add --enable-debug to ./configure in build-mingw.

2025-03-20  Araki Ken  <arakiken@users.sf.net>

	* configure.in, bl_config.h.in: Remove HAVE_GNU_SOURCE.

2025-03-20  Araki Ken  <arakiken@users.sf.net>

	* configure.in: Add -D_GNU_SOURCE to CFLAGS if glibc is installed.

2025-03-16  Araki Ken  <arakiken@users.sf.net>

	* configure.in: Add -lfontconfig and -lfreetype to XFT_LIBS.

2025-03-16  Araki Ken  <arakiken@users.sf.net>

	* ui_picture.c: Move "#undef HAVE_WINDOWS_H" first.

	* configure.in: Add -lfontconfig and -lfreetype to CAIRO_LIBS.

	* vt_pty_ssh.c: Include <pobl/bl_locale.h> after including
	  "libptyssh/vt_pty_ssh.c" to fix compiling error in mingw.

2025-03-15  Araki Ken  <arakiken@users.sf.net>

	* libptyssh/vt_pty_ssh.c: Define USE_LARGEFILE_FLAGS before including
	  <pobl/bl_def.h>.

	* bl_config.h.in: _FILE_OFFSET_BITS and _LARGE_FILES macros are defined
	  only if USE_LARGE_FILE_FLAGS is defined.

	* mlcc/main.c, mlfc/main.c: #ifdef __sunos -> #if defined(__sunos) || defined(__sun)

	* vt_char.c: Remove return for functions which do not return values.

	* libind/Makefile: Add $(TBL_OBJ) to all: target.

2025-03-13  Araki Ken  <arakiken@users.sf.net>

	* bl_map.h: Add bl_hash_func_t with the use of typeof.

	* bl_config.h: Add HAVE_TYPEOF and typeof.

	* configure.in, baselib/configure.in: Add AC_C_TYPEOF.

2025-03-10  Araki Ken  <arakiken@users.sf.net>

	* configure.in: Copy contrib/icon to gui/*/contrib/icon for win32 or sdl2/win32.

2025-03-09  Araki Ken  <arakiken@users.sf.net>

	* bl_path.h: Include <winnls.h> for IsDBCSLeadByte().

	* ci.yml: --with-gui=win32 -> --with-gui=win32,sdl2 in build-mingw.

	* ui_screen.c: Fix compiling error in sdl2/win32.

	* README, doc/en/README.{console|sdl2|win32}, doc/ja/README.win32,
	  PLATFORMS.old: Updated.

	* uitoolkit/wayland/*-protocol.[ch]: Updated by rescanproto.sh.

2025-03-02  Araki Ken  <arakiken@users.sf.net>

	* ci.yml:
	  - build-msys2 -> build-mingw, build-msys2-with-mosh -> build-mingw-with-mosh,
	  - Add build-msys2.

	* README, README.beos: Updated.

	* config.sub, config.guess: Updated.

2025-03-01  Araki Ken  <arakiken@users.sf.net>

	* cocoatouch.m: Fix compiling error in old Xcode (3.2.6).

	* doc/en/README.{android|ssh|win32}, doc/ja/README.win32, Usage.win32:
	  Updated.

2025-02-24  Araki Ken  <arakiken@users.sf.net>

	* ci.yml: Add build-linux-min.

	* vt_termcap.c: Fix memory leaks in TEST_vt_termcap().

	* vt_shape.c: Add TEST_vt_shape().

	* test.c: Execute TEST_vt_shape() if BL_DEBUG is defined.

	* ui_main_config.[ch]: Change the type of parent_window from u_int to u_long.

2025-02-23  Araki Ken  <arakiken@users.sf.net>

	* vt_pty.h: OPEN_PTY_ASYNC is not defined in platforms except win32api
	  because executing xauth can freeze if OPEN_PTY_ASYNC is defined.

	* libptyssh/vt_pty_ssh.c: vt_search_ssh_session() doesn't return
	  suspended session.

	* cocoatouch.m:
	  - Show connection dialog in startup if libssh2 is supported.
	  - Add autocapitalizationType and keyboardType to MLTermView.

	* cocoa.[mh], cocoatouch.m:
	  cocoa_dialog_password() -> cocoa_dialog_connection().

	* README.cocoatouch: Updated.

	* configure.in: Define NO_XAUTH in building for iOS where
	  system() is probihited.

	* ci.yml: Add libssh2 to build-macos and build-ios.

2025-02-16  Araki Ken  <arakiken@users.sf.net>

	* ui_main_config.c: Add --clp/use_clipping option.

	* ui_draw_str.[ch]: Add ui_set_use_clipping().

2025-02-11  Araki Ken  <arakiken@users.sf.net>

	* vt_shape.c: Fix drawing glyphs in incorrect position.

	* doc/ja/README.*: Add "coding:euc-jp" to the header.

2025-02-09  Araki Ken  <arakiken@users.sf.net>

	* README, README.cocoa, README.indic: Updated.

	* tool/mlconfig/po/*.po: Updated.

2025-02-08  Araki Ken  <arakiken@users.sf.net>

	* cocoatouch.m: Remove IBOutlet.

2025-02-07  Araki Ken  <arakiken@users.sf.net>

	* cocoatouch.m:
	  - Set self.window.rootViewController.
	  - Fix segfault in TextRange::dealloc.

	* mlterm-Info.plist: Add 414x896 to UILaunchImages.

2025-02-01  Araki Ken  <arakiken@users.sf.net>

	* cocoatouch.m: Add cast.

2025-01-31  Araki Ken  <arakiken@users.sf.net>

	* ci.yml: Add build-ios.

2025-01-30  Araki Ken  <arakiken@users.sf.net>

	* prepare-gradle.sh: Add ocb_internal.cc instead of ocb.cc to CRYPTO_FILES
	  if the version of mosh is 1.4.0 or later.

	* Android.mk: Add -DMOSH_VERSION=10302 to MOSH_INCLUDES if the version
	  of mosh is less than 1.4.0.

2025-01-29  Araki Ken  <arakiken@users.sf.net>

	* ci.yml: Build protobuf for not only armv7a but also x86.

2025-01-28  Araki Ken  <arakiken@users.sf.net>

	* ci.yml:
	  - Build libotf to build-android.
	  - mlterm-android/jni -> mlterm-android/app/src/main/jni

2025-01-26  Araki Ken  <arakiken@users.sf.net>

	* ci.yml: Build fribidi, freetype2, libressl and libssh2.

2025-01-25  Araki Ken  <arakiken@users.sf.net>

	* jni/main.c: Add "#include "main_loop.h"" for main_loop_{init|start}().

	* jni/ui_event_source.c:
	  Add "#include "ui_screen_manager.h"" for ui_close_dead_screens().

	* main_loop.c: Add --test option in debug mode.

	* jni/ui_display.c, jni/ui_event_source.c, jni/main.c:
	  ALooper_pollAll (deprecated) -> ALooper_pollOnce

	* prepare-gradle.sh: Add [plugin version] option.

	* ui_event_source.c: Fix error in 1c823122018564c0fffa010abefaf0273914296d.

	* vt_pty.h: Revive OPEN_PTY_ASYNC in win32.

2025-01-22  Araki Ken  <arakiken@users.sf.net>

	* ci.yml: Add "Upload artifacts" to build-android.

	* build-ant.sh, build-gradle.sh: Execute "adb install" and "adb logcat"
	  only if "install" argument is specified.

	* vt_transfer.c: Change the return value of dl_zmodem_cancel from QBOOL
	  to void.

2025-01-21  Araki Ken  <arakiken@users.sf.net>

	* Android.mk: JNI_PATH: src/main/jni/ -> $(LOCAL_PATH)/

2025-01-20  Araki Ken  <arakiken@users.sf.net>

	* AndroidManifest.xml: android:minSdkVersion: 9 -> 21

	* build.gradle:
	  - minSdkVersion: 14 -> 21
	  - abiFilters: x86 -> x86_64

	* AndroidManifest.xml, build.gradle: Remove package and add namespace.

	* bl_path.c: Remove #include <sys/stat.h> if USE_WIN32API is defined.

2025-01-19  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_mosh.cpp: Add const.

	* ci.yml: build-msys2 -> build-msys2 and build-msys2-with-mosh

	* ci.yml: Add --with-mosh in build-msys2.

	* prepare-gradle.sh: Add --scan and --overwrite options to gradle.

	* ci.yml:
	  - Add --with-mosh in build-linux.
	  - Add build-android.

2025-01-18  Araki Ken  <arakiken@users.sf.net>

	* ui_font_config.[ch], ui_screen.c, mlterm.[ch], vt_color.[ch],
	  vt_parser.h, java/MLTermPty.c: Add const.

	* ci.yml: Build mlterm for java in build-linux.

	* ci.yml: Search mt.exe in build-msys2.

2025-01-17  Araki Ken  <arakiken@users.sf.net>

	* ci.yml: Remove mingw-w64-ucrt-x86_64-llvm

2025-01-16  Araki Ken  <arakiken@users.sf.net>

	* ci.yml: Execute llvm-mt in build-msys2.

2025-01-15  Araki Ken  <arakiken@users.sf.net>

	* ci.yml: Add macos-13 to build-macos.

2025-01-14  Araki Ken  <arakiken@users.sf.net>

	* ci.yml: Add "rm tool/mlconfig/po/Makefile" to build-macosx to avoid
	  compiling error.

2025-01-13  Araki Ken  <arakiken@users.sf.net>

	* configure.in: mkdir -p ${MAKE_DIRS} -> (cd encodefilter; mkdir -p ${MAKE_DIRS})

	* ci.yml: Add "Upload artifacts" to build-macos.

	* ci.yml: Add "Upload artifacts" to build-msys2.

	* vte.c: vt_term_destroy() -> vt_destroy_term() to remove a zombie term
	  in a terms list of vt_term_manager.

	* vt_term_manager.c:
	  Don't execute "terms[idx * MTU + count] = terms[--num_terms]"
	  if zombie_pty is 1.
	  (Revert 8f0bffe45c7db21d9af32bf696d57c9e47e6de0c commit)

	* vt_term.h: Add vt_term_is_zombie().

2025-01-12  Araki Ken  <arakiken@users.sf.net>

	* vte.c: Add type casting between pid_t (== integer) and
	  GPid (== HANDLE in win32)

	* vte_win32.c: Add type casting to suppress compiling error.

	* bl_map.c, bl_path.c, c_imagelib.c, data_entry_radio.c,
	  ef_xct_conv.c, im_kbd.c, vterm.c, mc_io_file.c,
	  beos/ui_imagelib.c, console/ui_imagelib.c,
	  fb/ui_font.c, fb/ui_imagelib.c, quartz/ui_imagelib.c,
	  ui_picture.c, win32/ui_imagelib.c, vt_char_encoding.c,
	  vt_parser.c:
	  Add "#include <strings.h>" for strcasecmp.
	  (https://github.com/arakiken/mlterm/issues/129)

	* ci.yml: Add "(cd gtk && make && make install)" to build-netbsd,
	  build-freebsd and build-msys2 targets.

2025-01-11  Araki Ken  <arakiken@users.sf.net>

	* ui_sample_sb_view_lib_win32.c:
	  Add type casting to suppress compiling errors.

	* win32/ui_font.c, ui_screen.c, win32/ui.h, win32/ui_dnd.c,
	  beos/ui_font.c, win32/ui_imagelib.c:
	  Add type casting to suppress compiling errors.

	* win32/ui_connect.c, win32/ui_selection_encoding.c,
	  win32/ui_window.c, libptyssh/vt_pty_ssh.c:
	  Add type casting to suppress compiling errors.

2025-01-07  Araki Ken  <arakiken@users.sf.net>

	* ui_picture.c, win32/ui_window.c, vt_term.c: Add type casting from
	  uintptr_t to HANDLE for the return value of _beginthreadex.

	* libptyssh/vt_pty_ssh.c: Add type casting from vt_pty_t* to vt_pty_ssh_t*
	  in calling scp_stop().

	* libptyssh/vt_pty_ssh.c: Add type casting from uintptr_t to HANDLE for
	  the return value of _beginthreadex.

	* libptyssh/vt_pty_ssh.c: Add const.

	* win32/ui_display.c: Change the type of 'timerid' argument of
	  timer_proc() from UINT to UINT_PTR.

	* zmodem.c: Fix implicit declaration of function 'dirname' in win32.

	* bl_def.h: Fix SSIZE_MAX macro.
	  (https://github.com/arakiken/mlterm/issues/128)

	* vt_pty_win32.c: Add const to write_to_pty().

	* vt_config_menu.c: Change the type of write_len in vt_config_menu_write()
	  from ssize_t to DWORD if USE_WIN32API is defined.

	* ci.yml: Add build-msys2.

2025-01-05  Araki Ken  <arakiken@users.sf.net>

	* gtk/vte_win32.c: "mlterm" -> L"mlterm" if UTF16_IME_CHAR is defined.

	* vt_parser.c: Fix https://github.com/arakiken/mlterm/issues/127

	* ui_emoji.c: Fix segfault in win32.

	* ci.yml: Remove  -Wno-error=incompatible-pointer-types-discards-qualifiers
	  from CFLAGS in freebsd.

	* bl_path.h: Fix bl_basename_simple().
	  (enbugged at a3dc30011fdab2d102b1b4ba17dbd88f90c504a1)

2025-01-04  Araki Ken  <arakiken@users.sf.net>

	* vt_term_manager.c: Excecute "terms[idx * MTU + count] = terms[--num_terms]"
	  not only if zombie_pty is 0 but also if zombie_pty is 1.
	  (enbugged at 5696c69e9ffaec38884b2d16574d97df873af47d)

	* ui_im_status_screen.c: Add const.

	* c_sixel.c: Add cast from pixel_t* to u_char** in TEST_sixel_realloc_pixels().

2025-01-03  Araki Ken  <arakiken@users.sf.net>

	* ui_window.[ch]:
	  - Fix illegal memory access by ui_window_set_icon().
	    (u_int32_t -> u_long)
	    (enbugged at 3d38b723e0e4a6dd434af2d49aca53890982a828)

	  - Execute initialization code for a root window in ui_window_show()
	    even if --parent option is specified.
	    (Related to https://github.com/arakiken/mlterm/issues/118)

	  - Add HINT_CHILD_WINDOW_ATTR for libvte compatible libraray.

2025-01-02  Araki Ken  <arakiken@users.sf.net>

	* ci.yml: Add build-freebsd.

	* fb/ui_display_freebsd.c: Fix conflict of vt_font in FreeBSD 13 or later.

	* cocoa.m, ui_screen.c, ui_window.h: Add const.

	* quartz/ui_scrollbar.c, ui_layout.c: Add const.

	* ui_color.h, */ui_color.c, cocoa.m, ui_bel_mode.[ch],
	  ui_color_cache.[ch], ui_color_manager.[ch], ui_layout.c,
	  ui_mod_meta_mode.[ch], ui_sb_mode.[ch], ui_screen.[ch],
	  ui_scrollbar.[ch], ui_type_engine.[ch], ui_im_status_screen.c,
	  ui_window.h, vt_char_encoding.[ch], vt_ot_layout.[ch],
	  vt_parser.[ch], vt_pty.[ch], vt_term.[ch]: Add const.

	* quartz/ui_im_status_screen-cocoa.m, im_wnn.c: Add const.

	* im_ibus.c, im_common.h, skk/ef_str_parser.c, gtkxlfdsel.[ch],
	  mc_combo.[ch], mc_im.c, mc_opentype.c, fb/ui_font.c, ui_brltty.c,
	  ui_copymode.[ch], ui_im.h, ui_im_candidate_screen.[ch],
	  ui_im_status_screen.[ch], ui_screen.c, libptyssh/vt_pty_ssh.c,
	  vt_str_parser.c: Add const.

	* vte.c, ui_screen.c, vt_screen.c: Disable searching functions of vte while
	  "OSC 5379 search_next", "OSC 5379 search_prev" or searching in copy mode
	  is activated.

	* encodefilter/ef_*_parser.[ch]: Add const to the 2nd argument of *_set_str().

	* bl_path.[ch]: Add bl_basename_simple()

2024-12-08  Araki Ken  <arakiken@users.sf.net>

	* vte.c: Add vte 0.76 and 0.78 apis.

2024-11-11  SATOH Fumiyasu  <fumiyas@osstech.co.jp>

	* tool/mlconfig/main.c: Save trim_trailing_newline_in_pasting and broadcast flags

2024-11-02  Araki Ken  <arakiken@users.sf.net>

	* configure.in, baselib/configure.in:
	  Remove AC_RUN_IFELSE() checking if posix_openpt() works.
	  (https://github.com/arakiken/mlterm/issues/113)

2024-10-19  Araki Ken  <arakiken@users.sf.net>

	* configure.in: Show $UTMP_NAME instead of $utmp for "utmp support" message.

	* libind/libind_lex.split.c -> lex.split.c

2024-09-29  Araki Ken  <arakiken@users.sf.net>

	* cocoa.m: window_dealloc() calls [window close] instead of [window release].

2024-09-08  Araki Ken  <arakiken@users.sf.net>

	* im_fcitx.c:
	  - Add declaration of fcitx_client_{enable|close}_ic().
	  - Undefine USE_IM_CANDIDATE_SCREEN in wayland.
	  - event->keycode - 8 -> event->keycode
	  - print_candate -> print_candidate

	* wayland/ui_display.c: Set ev.keycode to 'key + 8' instead of 0
	  in keyboard_key().

	* ui_draw_str.c: Add 'int draw_bg' to arguments of draw_picture().

	* vt_parser.c: show_picture() calls interrupt_vt100_cmd() if
	  vt_screen_line_feed() returns 2.

	* vt_edit.c: vt_edit_go_downward() returns 2 if screen scrolling occurs.

2024-08-17  Araki Ken  <arakiken@users.sf.net>

	* configure.in, tool/mlconfig/Makefile.in: Set X_LIBS_FOR_MLCONFIG
	  if the version of gtk+ is 2.x to build gtkxlfdsel.c.

2024-08-16  Araki Ken  <arakiken@users.sf.net>

	* Merge https://github.com/arakiken/mlterm/issues/107

2024-08-14  Araki Ken  <arakiken@users.sf.net>

	* registobmp/main.c, vte.c, wayland/ui_display.c:
	  Fix errors in -Werror=incompatible-pointer-types.

2024-08-13  Araki Ken  <arakiken@users.sf.net>

	* im_canna.c: Fix "pointer type mismatch in conditional expression" error.
	  (https://github.com/arakiken/mlterm/issues/92#issuecomment-2282176739)

	* vt_parser.c: Make Pcmh and Pcss of DECDLD omittable.

	* vtetypebuiltins.c, reaper.c: Fix errors in -Werror=incompatible-pointer-types.

2024-08-12  Araki Ken  <arakiken@users.sf.net>

	* ui_im_status_screen-cocoa.m: Fix errors in -Werror=incompatible-pointer-types.

	* cocoa.m, cocoatouch.m: Fix errors in -Werror=incompatible-pointer-types.

	* im_canna.c, quartz/ui_imagelib.c: Fix errors in -Werror=incompatible-pointer-types.

	* im_wnn.c, quartz/ui_font.c: Fix errors in -Werror=incompatible-pointer-types.

	* ci.yml: Add -Wno-incompatible-pointer-types-discards-qualifiers option
	  in MacOS.

	* wnnlib.c: Fix errors in -Werror=incompatible-pointer-types.

2024-08-11  Araki Ken  <arakiken@users.sf.net>

	* Fix errors in -Werror=incompatible-pointer-types.

2024-08-05  Araki Ken  <arakiken@users.sf.net>

	* Support -Werror=incompatible-pointer-types option of gcc.

2024-07-27  Araki Ken  <arakiken@users.sf.net>

	* README, doc/ja/README.ja: Updated.

	* uitoolkit/ui_copymode.c: Replace the first character of input text
	  by '/' or '?' in starting the copy mode every time.

	* configure.in: Check libpng if gdk-pixbuf is not found.

	* tool/mlimgloader/libpng.c, stb_image_resize2.h: Added.

2024-05-07  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_imagelib.c: Remove 'disp->depth < 8' in load_sixel().

2024-05-06  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_imagelib.c: load_sixel() supports less than 8 depth.
	  (https://github.com/arakiken/mlterm/issues/93)

2024-05-05  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  - Add vte_terminal_{get|set}_font_options(),
	    vte_terminal_get_text_selected{_full}(), vte_terminal_get_text_range_format()
	    and vte_terminal_check_{match|hyperlink|regex_array|regex_simple}_at().
	  - vte_terminal_paste_clipboard() pastes text from clipboard instead of
	    primary selection.
	  - Emit "selection-changed" signal in vte-0.18.x or before.

	* vtetypebuiltins.c: Support vte 0.16.14 or before.

2024-05-03  Araki Ken  <arakiken@users.sf.net>

	* libind/Makefile.in: Remove %.
	  (https://github.com/arakiken/mlterm/issues/88)

	* Rename tables files in libind from *.c to libind_*.c.

2024-02-26  Araki Ken  <arakiken@users.sf.net>

	* c_imagelib.c: Fix compiling error.

2024-02-24  Araki Ken  <arakiken@users.sf.net>

	* cocoa.[hm], cocoatouch.m:
	  Add hasAlpha to arguments of MLTermView::copyArea and view_copy_area().
	  If hasAlpha is true, call CGCOntextSetBlendMode(kCGBlendModeNormal).

	* quartz/ui_window.c:
	  ui_window_copy_area() calls view_copy_area() with hasAlpha=1 if mask is not NULL.

	* encodefilter/module/Makefile.in, configure.in:
	  Link ../src/libmef.la to libmef_XXXX.la instead of @EF_CHARA_LO@.

	* MLTermPty.java: Load MLTermPty.dll from ~/.mlterm/java all the time.

2024-02-17  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c:
	  - Support U+FE0E and U+FE0F.
	  - Make the 1st U+1F1E6 - U+1F1FF (regional indicator symbol letter a-z) char
	    fullwidth and combine the 2nd char to the 1st.
	  - Make U+1F3FB - U+1F3FF (emoji modifier fitzpatric type 1-6) char zerowidth.

	* vt_screen.[ch]: Add vt_screen_unhighlight_cursor().

	* vt_char.[ch]:
	  Add vt_char_set_{fullwidth|zerowidth}() and vt_char_unset_picture().

2024-02-05  Araki Ken  <arakiken@users.sf.net>

	* vt_ot_layout.c: Skip pictures in layouting characters in vt_ot_layout().

	* Fix pull request #83.
	  - Add "use_locked_title" to OSC 5379-5383.
	  - --locktitle/use_locked_title option ignores not only OSC 0 and 2
	    (changing a window title) but also OSC 1 (changing an icon title).

2024-02-03  Araki Ken  <arakiken@users.sf.net>

	* ui_draw_str.c: draw_picture() doesn't clear the background
	  if ui_inline_picture_t::transparent is 1.

	* ui_virtual_kbd.c, ui_sb_view.h, pixmap_engine.c: Fix with the modification
	  of ui_imagelib_load_file().

	* vt_parser.[ch], ui_screen.c, ui_screen_manager.c, vterm.c:
	  Add 'transparent' to vt_xterm_event_listener_t::get_picture_data().

	* ui_picture.[ch]: Add 'transparent' to ui_inline_picture_t.

	* ui_imagelib.h, */ui_imagelib.c: Add 'transparent' to arguments of
	  ui_imagelib_load_file().

	* c_sixel.c: load_sixel_from_{data|file}() check whether P2 is 1 or not
	  and return it by 'transparent' argument.

2024-01-08  Araki Ken  <arakiken@users.sf.net>

	* README, man/mlterm.1, README.ja: Updated.

	* im_kbd.c: Add ":hide" option which hides the status window.

2024-01-08  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, PROTOCOL: Updated.

	* ui_screen.[ch]: Add ui_set_mod_keys_to_stop_mouse_report().

	* ui_main_config.c: Add --norepkey/mod_keys_to_stop_mouse_report.

2024-01-07  Araki Ken  <arakiken@users.sf.net>

	* libind/Makefile.in: Suffix rule .o.la -> libind_%.la: %.o

2024-01-03  Araki Ken  <arakiken@users.sf.net>

	* ui_xic.c: Add 'spot' to ui_xic_t to decrease the number of informing
	  the cursor position for XIM preedit by XSetICValues().

	* etc/termcap: Change the default value of "xterm" entry from "ut" to "kb=^H:ut".

2024-01-02  Araki Ken  <arakiken@users.sf.net>

	* mc_im.c: Remove duplicated elements in "Option" of "Input Method" area.

2024-01-01  Araki Ken  <arakiken@users.sf.net>

	* gtk/README: Updated.

2023-12-31  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_ssh.c: Set LIBSSH2_CALLBACK_AUTHAGENT callback function to enable
	  agent forwarding.

	* vt_pty_win32.c: Fix compiling error.

2023-12-30  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: Scroll alternate screen buffer by wheel mouse.

	* vt_parser.c: 3 (permanently set) is returned to DECRQM for DEC private mode 1007.

	* vt_term.h: Add vt_term_is_alternate_edit().

2023-12-03  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja: Updated.

	* vt_line_bidi.c, vt_bidi.c: Fix segfault in receiving unexpected
	  arabic shaping characters.

2023-11-25  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.win32, doc/ja/README.win32: Updated.

	* im_kbd.c: Add "es" and "pt" to kbd_type_tbl.

2023-11-21  Araki Ken  <arakiken@users.sf.net>

	* ui_main_config.c: Add --winsize / output_xtwinops_in_resizing option.

	* vt_pty.h, vt_pty_win32.c:
	  - vt_set_use_conpty() -> vt_pty_win32_set_options()
	  - Remove hack to send resizing info to plink.

	* win32/plink: Removed.

	* vte.c: vte_terminal_set_font_from_string() updates
	  ui_screen_t::width and ui_screen_t::height.

2023-11-12  Araki Ken  <arakiken@users.sf.net>

	* README, README.ja, man/mlterm.1: Updated.

	* configure.in: Drop --disable-conpty.

	* vte.c:
	  - vte_terminal_fork_command() uses main_config.cmd_path and
	    main_config.cmd_argv if command argument is NULL.
	  - atexit(vt_term_manager_final) in win32 to terminate all child processes.

	* ui_main_config.c: Add --conpty / use_conpty option.

	* vt_pty.h, vt_pty_win32.c:
	  - Both ConPTY and pipe can coexist to communicate with a child process.
	  - Add vt_set_use_conpty().
	  - pty_open() -> conpty_open() and pipe_open()

2023-11-05  Araki Ken  <arakiken@users.sf.net>

	* configure.in, gtk/Makefile.in: Add SSH2_LIBS_FOR_VTE.

2023-11-04  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_font.c: Fix compiling error in ui_font_set_dpi_for_fc().

	* README, RAEDME.ja: Updated.

	* configure.in: Add --disable-conpty.

	* vte.c: #define CONFIG_PATH "." in win32.

	* win32/ui_font.c:
	  Fix calculation of font width if use_point_size option is true.

2023-11-03  Araki Ken  <arakiken@users.sf.net>

	* configure.in: Add -limagehlp to GTK_LIBS in win32.

	* gtk/Makefile.in:
	  - Add @REGEX_LIBS@ to LIBS.
	  - Add @NO_UNDEFINED_FLAG@ in linking libvte-*.so.

	* vte_win32.c: Added.

	* vte.c, win32/ui_display.c: Fix to support libvte compatible library in win32.

	* vt_term_manager.c: Call vt_term_parse_vt100_sequence() before
	  vt_term_zombie() because some bytes might be pending.

	* ui_font.h:
	  #define ui_font_set_dpi_for_fc() (0) in platforms except xlib and wayland.

	* ui_imagelib.h:
	  #define ui_imagelib_pixbuf_to_pixmap() (None) in platforms except xlib.

	* win32/ui_font.c: Fix conversion from point size to pixel size.

	* vt_term_manager.c:
	  - terms and num_terms variables are not updated if zombie_pty is enabled.
	  - Call ClosePseudoConsole() before CloseHandle(pipe) to avoid dead lock.

2023-10-15  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, doc/{en,ja}/README.win32: Updated.

	* configure.in, Makefile.in: Check CreatePseudoConsole() function and
	  add -DUSE_CONPTY to @PTY_CFLAGS@ if it exists.

	* vt_pty.c: vt_pty_win32 and vt_pty_{ssh|mosh}.c coexist.

	* vt_pty_win32.c:
	  - Rename from vt_pty_pipewin32.c to vt_pty_win32.c.
	  - Support ConPTY whic is enabled if USE_CONPTY macro is defined.
	  - Add vt_pty_win32_set_pty_read_trigger().

	* uitoolkit/ui_main_config.c, ui_screen_manager.c, vt_term.[ch]:
	  --slp/start_with_local_pty option is available in win32.

2023-09-18  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: "exesel:" works in win32.

	* ui_main_config.c: --chsel/change_selection_immediately option is
	  not available in xlib and wayland.

	* sdl2/ui_window.c: Fix for clipboard in SDL2.

	* sdl2/ui_display.c:
	  - Shift+Control+xxx works in SDL2.
	  - Process SDL_CLIPBOARDUPDATE event.

	* ui_window.h: Add SEL_NONE to ui_selection_flag_t.

2023-09-16  Araki Ken  <arakiken@users.sf.net>

	* README.ja, man/mlterm.1: Updated.

	* ui_main_config.c: -P/--mouse/use_mouse_selection option is dropped
	  and --chsel/change_selection_immediately option is added.

	* ui_screen.[ch]: ui_set_use_mouse_selection() is removed.

	* ui_selection.[ch]: ui_set_change_selection_immediately() is added.

	* ui_display_freebsd.c: Control+0x20..0x3f is processed correctly.

2023-09-13  Araki Ken  <arakiken@users.sf.net>

	* README.ja, man/mlterm.1: Updated.

	* ui_main_config.c: -P/--mouse/use_mouse_selection option is added.

	* ui_screen.[ch]: ui_set_use_mouse_selection() is added.

	* ui_shortcut.[ch], ui_screen.c: INSERT_CLIPBOARD and COPY_CLIPBOARD are
	  available in platforms except xlib and wayland.

	* ef_ucs_property.table: Updated to Unicode 15.1.0 (UnicodeData.txt and
	  EastAsianWidth.txt)

	* ucs_property.pl: Change of the format of EastAsianWidth.txt between
	  15.0.0 and 15.1.0 is supported.

2023-09-12  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_window.c: ui_display_clear_clipboard() is called only if
	  USE_WAYLAND is defined.

	* ui_screen.c: ui_shortcut_match(COPY_CLIPBOARD) is called only if
	  USE_XLIB or USE_WAYLAND is defined.

	* beos/ui_window.c, console/ui_window.c, quartz/ui_window.c:
	  Compiling error is fixed.

2023-09-12  Araki Ken  <arakiken@users.sf.net>

	* doc/en/PROTOCOL, doc/ja/README.ja, man/mlterm.1, etc/main,
	  etc/main.ja, etc/key: Updated.

	* rescanproto.sh: primary-selection-unstable-v1.xml is parsed.

	* ui_shortcut.[ch]; COPY_CLIPBOARD is added.

	* tool/mlconfig/main.c, mc_flags.[ch], mc_io_file.c:
	  use_clipboard option is removed.

	* ui_main_config.c: use_clipboard option is removed.

	* ui_window.h, */ui_window.c, ui_screen.c:
	  - ui_selection_flag_t is added to arguments of ui_window_set_selection_owner(),
	    ui_window_is_selection_owner(), ui_window_{xct|utf}_selection_request().
	  - ui_set_use_clipboard_selection() and ui_is_using_clipboard_selection()
	    are removed.

	* wayland/ui_display.[ch]: ui_display_{own|clear}_clipboard() and
	  ui_display_request_text_clipboard() are added.

	* xlib/ui_display.[ch]: ui_display_{own|clear}_clipboard() are added.

	* wayland/ui_display.c, primary-selection-unstable-v1.[ch]:
	  wp-primary-selection protocol is supported.

	* xdg-decoration-unstable-v1-client-protocol.c,
	  xdg-shell-client-protocol.[ch],
	  xdg-shell-unstable-v6-client-protocol.c: Updated.

	* ui_selection.h: ui_sel_type_t -> ui_sel_mode_t

2023-08-30  Araki Ken  <arakiken@users.sf.net>

	* tool/main.c: --geometry and --display options are ignored in gtk4.

2023-08-14  Araki Ken  <arakiken@users.sf.net>

	* vt_char.c: CHARSET macro is enclosed by () to be expanded
	  properly in 'if (IS_COMB_TRAILING(attr) && CHARSET(attr) == PICTURE_CHARSET)'
	  in vt_get_picture_char().
	  VTFONT macro is also fixed.
	  (https://github.com/arakiken/mlterm/issues/78)

	* libctl/vt_line_bidi.c: Incorrect uncombining arabic characters is checked.

2023-08-11  Araki Ken  <arakiken@users.sf.net>

	* ui.c: ASCII symbols and signs are added to keysym_table.

2023-07-29  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: convert_char_index_to_x() never returns minus value.

2023-06-11  Araki Ken  <arakiken@users.sf.net>

	* configure.in, README, README.ja: Additional information of
	  --with-tools option about mlimgloader is added.

2023-06-04  Araki Ken  <arakiken@users.sf.net>

	* libctl/vt_line_bidi.c: The way of redrawing arabic glyphs is improved.
	  (https://github.com/arakiken/mlterm/issues/52#issuecomment-1565464016)

2023-06-03  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb, ReleaseNote: Updated.

	* configure.in: If multiple values separated by comma is specified to
	  --with-gui option of ./configure, all tools are built regardless of
	  whether they actually work in each gui.
	  (https://github.com/arakiken/mlterm/issues/73)

	* tool/accessories/applyfontcfg.sh: Added.
	  (https://github.com/arakiken/mlterm/issues/71)

2023-05-21  Araki Ken  <arakiken@users.sf.net>

	* ui_copymode.[ch], ui_screen.c:
	  Pressing '?' in copy mode searchs for a string backward.
	  (https://github.com/arakiken/mlterm/issues/72)

	* tool/accessories/applycfg.sh: Added.
	  (https://github.com/arakiken/mlterm/issues/71)

2023-05-20  Araki Ken  <arakiken@users.sf.net>

	* Makefile.in: Error in installing libzmodem.la is fixed.

	* libctl/vt_bidi.[ch], vt_line_bidi.c: Arabic characters are redrawn
	  entirely during being edited.

2023-05-07  Araki Ken  <arakiken@users.sf.net>

	* configure.in: --disable-image option disables mlimgloader.

2023-05-06  Araki Ken  <arakiken@users.sf.net>

	* ui_window_cairo.c: -Wint-conversion warning is fixed.
	  (https://github.com/arakiken/mlterm/issues/67)

	* ui_brltty.h: ui_brltty_key() -> ui_brltty_speak_key()

2023-04-02  Araki Ken  <arakiken@users.sf.net>

	* sdl2/ui.h: Compiling error in win32 is fixed.

	* version.h: 3.9.3 -> 3.9.3post

2023-04-01  Araki Ken  <arakiken@users.sf.net>

	* 3.9.3 released.
	  (tag "3.9.3")

	* configure.in, mlterm.spec, main/version.h.in,
	  mlterm.c, android/jni/version.h, vt_parser.c:
	  updated for 3.9.3.

2023-03-23  Araki Ken  <arakiken@users.sf.net>

	* cocoa.m: Unexpected scrolling by scrollbar is fixed.

2023-03-21  Araki Ken  <arakiken@users.sf.net>

	* quartz/ui_sb_view_factory.c: ui_sb_view_set_dpr() is added.

	* ui_sb_view_factory.[ch], ui_main_config.c:
	  ui_simple_scrollbar_set_dpr() -> ui_sb_view_set_dpr()

	* README.ja, mlterm.1: Updated and fix typo.

2023-03-20  Araki Ken  <arakiken@users.sf.net>

	* im_kbd.c: im_kbd_new() returns NULL if kbd layout except arabic and
	  hebrew is requested.

	* ui_screen.c:
	  - button_motion() ignores Button2Mask, Button4Mask - Button7Mask in
	    selecting region.
	    (https://github.com/arakiken/mlterm/issues/53)
	  - Not only pointer_motion() but button_motion() and button_pressed()
	    call show_pointer().

2023-03-18  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, etc/main, etc/main.ja: Updated.

	* ui_sb_factory.[ch]: ui_simple_scrollbar_set_dpr() is added.

	* ui_main_config.c: --sdpr / simple_scrollbar_dpr option is added.

	* motif_data.h, mozmodern_data.h, next_data.h, ui_arrow_data.h:
	  Fix up the appearance.

2023-03-12  Araki Ken  <arakiken@users.sf.net>

	* ui_display_linux.c:
	  - 'ent.kb_value == K_ALTGR' is checked instead of 'ev.code == KEY_RIGHTALT'.
	  - Other minor fixes.

2023-02-26  Araki Ken  <arakiken@users.sf.net>

	* cocoa.m: MLTermView::update always calls [self setNeedsDisplay:YES].

	* ui_screen.c: 'volatile' is added to suppress unexpected optimization
	  by clang 5.1.

2023-02-26  Araki Ken  <arakiken@users.sf.net>

	* vt_term_manager.c: vt_get_detached_term() checks if vt_term_get_master_fd() >= 0.
	  (terminator 2.1.2 segfault in exiting pty without this fix.)

2023-02-25  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.*, doc/ja/README.*, gtk/README, etc/main, etc/main.ja,
	  man/mlterm.1: Updated.

2023-02-23  Araki Ken  <arakiken@users.sf.net>

	* README: Updated.

	* config.sub, config.guess: Updated.

	* xdg-shell-unstable-v6-client-protocol.[ch],
	  xdg-decoration-unstable-v1-client-protocol.[ch]: Updated.

2023-02-20  Araki Ken  <arakiken@users.sf.net>

	* README: Updated.

	* vt_pty_mosh.cpp:
	  USE_TCP_RECV_FROM_SERVER (mosh-1.4.0 sixel-winsock branch) is defined.

2023-02-19  Araki Ken  <arakiken@users.sf.net>

	* MLTerm.java, MLTermPty.java:
	  'int ch' is added to MLTermPty.writeModifiedKey().

	* MLTermPty.c: 'jint ch' is added to arguments of
	  Java_mlterm_MLTermPty_nativeWriteModifiedKey().

2023-02-18  Araki Ken  <arakiken@users.sf.net>

	* vterm.c: VTERM_CHECK_VERSION2 macro is added.

2023-02-13  Araki Ken  <arakiken@users.sf.net>

	* vterm.c:
	  - vterm_output_set_callback() is added.
	  - Garbage in resizing window is fixed.

2023-02-11  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_mosh.cpp: wstring -> std:wstring, min -> std:min

	* configure.in, libptymosh/Makefile.in, terminaldisplayinit.cc:
	  mosh-1.4.0 is supported.

2023-01-29  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_font.c: int parse_xfont_name() -> void parse_xfont_name()

	* README.android, README.mosh: Updated.

	* prepare-gradle.sh: Help message to build with mosh is added.

	* ef_ucs_property.table: Updated to Unicode 15.0.0 (UnicodeData.txt and
	  EastAsianWidth.txt)

2023-01-28  Araki Ken  <arakiken@users.sf.net>

	* README.android: Updated.

	* android/jni/ui.h: Compiling error of XStringToKeysym() is fixed.

	* README.mosh, README.wayland: Updated.

	* uitoolkit/wayland/rescanproto.sh: Added.

2023-01-22  Araki Ken  <arakiken@users.sf.net>

	* tool/mlconfig/Makefile.in: If po/Makefile doesn't exist, make is not
	  executed in po/.

	* configure.in: If $MSGFMT is "no", tool/mlconfig/po/Makefile is not output.

2023-01-21  Araki Ken  <arakiken@users.sf.net>

	* encodefilter/src/dexport-sun.map: Added.

2023-01-14  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: bidi_mode=switch is available.

2023-01-14  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c, vt_term.c:
	  use_dynamic_comb option is disabled if use_ot_layout option is
	  enabled or UCS4 -> ISCII conversion occurs.

	* configure.in: If libm.so is found, for loop exits immediately.

2022-12-24  Araki Ken  <arakiken@users.sf.net>

	* encodefilter/configure.in, baselib/configure.in:
	  3 configure.in files are itegrated to one file.

2022-11-19  Araki Ken  <arakiken@users.sf.net>

	* bl_map.h, pixmap_engine.c, */ui.h, ui_im.[ch], ui_sb_view.h,
	  ui_screen.c: Fix incompatible function pointer types which
	  becomes fatal with clang 16.

2022-11-09  Araki Ken  <arakiken@users.sf.net>

	* cocoa/install.sh, cocoa/install-sdl2.sh:
	  mkdir -p $HOME/mlterm(-sdl2).app/Contents/MacOS in advance.

2022-11-05  Araki Ken  <arakiken@users.sf.net>

	* aclocal.m4: Update to automake-1.16.5 and libtool-2.4.7.

	* ltmain.sh, install-sh, missing: Updated.

2022-10-30  Araki Ken  <arakiken@users.sf.net>

	* config.sub, config.guess: Updated.

	* encodefilter/configure.in: POBL_LIBS is never "".

2022-08-16  Araki Ken  <arakiken@users.sf.net>

	* c_imagelib.c: Fix buffer over-read.
	  (https://twitter.com/isaki68k/status/1555895011991883783)

	* vte.c: Fix https://github.com/arakiken/mlterm/pull/49.

2022-07-16  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c, uitoolkit/Makefile.in:
	  - xdg-decoration is removed if COMPAT_LIBVTE is defined.
	  - vte_terminal_paste_text() is added.

2022-07-13  Araki Ken  <arakiken@users.sf.net>

	* libptyssh/vt_pty_ssh.c, libptymosh/vt_pty_mosh.cpp:
	  _socketpair(..., SOCKET*) -> _socketpair(..., int*) for 64-bit
	  windows.

	* vt_config_menu.c: The 1st argument of CreateProcess() is changed
	  from cmd_path (which causes failure in windows 11) to NULL.

2022-07-10  Araki Ken  <arakiken@users.sf.net>

	* ui_screen_manager.c, vt_pty_pipewin32.c:
	  Compiling error in win32 without libssh2 is fixed.

	* configure.in: libregex is checked if regex.h is found.

2022-07-03  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c: decoration_configure() doesn't call
	  xdg_surface_ack_configure().
	  (https://github.com/arakiken/mlterm/issues/44)

2022-06-05  Araki Ken  <arakiken@users.sf.net>

	* bl_conf_io.c: XDG_CONFIG_HOME is supported.

2022-04-24  Araki Ken  <arakiken@users.sf.net>

	* inputmethod/*/Makefile.in, ui_im.c: The dll file name is changed from
	  libim-xxx to libimx-xxx if USE_COMPACT_TRUECOLOR is not defined.

2022-04-24  Araki Ken  <arakiken@users.sf.net>

	* README.ja, doc/{en,ja}/README.fb: Updated.

	* inputmethod/*/Makefile.in, java/Makefile.in, libvterm/Makefile.in,
	  gtk/Makefile.in: @TRUECOLOR_CFLAGS@ is added.

	* Android.mk: -DUSE_COMPACT_TRUECOLOR is added to LOCAL_CFLAGS.

	* c_animgif.c, skk/dict.c, daemon.c, mc_font.c, vt_parser.c,
	  xlib/ui_display.c, vt_pty_ssh.c, vt_config_menu.c, vt_termcap.c:
	  char [] -> const char [].

	* vt_color.c: #ifdef USE_COMPACT_TRUECOLOR ... #endif is added.

	* vterm.c: VTermStateFallbacks (introduced at libvterm-0.2) is supported.

2022-04-03  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.[ch]: vt_parser->yield = 1 if CSI 38 ... m or CSI 48 ... m is
	  processed and USE_COMPACT_TRUECOLOR is defined, because it reuses at
	  most 240 color palettes.

	* vt_color.[ch]:
	  - IS_TRUE_COLOR() macro is added.
	  - vt_get_closest_color() is fixed.

	* vt_char.[ch]: fg_color2 and bg_color2 are added to vt_char_t.

	* ui_color_config.[ch]:
	  - ui_color_cache_true_t is added.
	  - get_cached_true_xcolor() is added.

	* configure.in: --disable-compact-truecolor option is added.

2022-02-13  Araki Ken  <arakiken@users.sf.net>

	* xdg-shell-client-protocol.[ch]: Updated.

2022-02-13  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c: shell_surface_configure() does nothing if width or height
	  argument is 0.

2022-02-13  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui.h, wayland/ui_display.c, Makefile.in: xdg-decoration is supported.

	* wayland/xdg-decoration-unstable-v1-client-protocol.[ch]: Added.

2022-02-05  Araki Ken  <arakiken@users.sf.net>

	* ui_screen_manager.c: Set COLORTERM environmental variable.

2022-02-04  Araki Ken  <arakiken@users.sf.net>

	* c_sixel.c: Fix segmentation fault when the repeat count in sixel
	  sequence is over 512.
	  (https://github.com/arakiken/mlterm/issues/35)

2022-01-29  Araki Ken  <arakiken@users.sf.net>

	* doc/en/ControlSequences, doc/en/ReleaseNote: Updated.

2022-01-29  Araki Ken  <arakiken@users.sf.net>

	* ui_layout.c:
	  - ui_screen_set_pointer_motion_event_mask() is used
	    instead of ui_window_{add|remove}_event_mask().
	  - ui_window_t::pointer_motion is replaced by screen_pointer_motion()
	    only if autohide_scrollbar is enabled.

	* ui_screen.[ch]: ui_screen_set_pointer_motion_event_mask() is added.

	* vt_parser.c: The default value of XTSMPOINTER (CSI>p) is changed
	  from 2 to 1.

	* version.h: 3.9.2 -> 3.9.2post

2022-01-16  Araki Ken  <arakiken@users.sf.net>

	* 3.9.2 released.
	  (tag "rel-3_9_2")

	* configure.in, mlterm.spec, main/version.h.in,
	  mlterm.c, android/jni/version.h, vt_parser.c:
	  updated for 3.9.2.

	* README, man/mlterm.1, doc/en/PROTOCOL, etc/main, etc/main.ja,
	  gtk/README, doc/en/README.win32, doc/ja/README.win32 : Updated.

2021-12-31  Araki Ken  <arakiken@users.sf.net>

	* gtk/vte.c: vte_terminal_{set|get}_scroll_unit_is_pixels() are added.

2021-08-21  Araki Ken  <arakiken@users.sf.net>

	* vtemu/mlterm.c, libvterm/Makefile.in:
	  libvterm compatible library doesn't call bl_sig_child_start().

2021-08-20  Araki Ken  <arakiken@users.sf.net>

	* main.c, main_loop.c: main_loop_init() instead of main() calls
	  vt_set_timeout_read_pty().

	* vt_parser.c: Revert pull request #23.

2021-08-15  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  - main_config.col = main_config.rows = 1 is forced on wayland for
	    gnome-termnal and sakura.
	  - vte_terminal_set_size() sets PVT(terminal)->init_char_size = 1
	    temporarily before calling vte_terminal_get_preferred_height().
	  - Not only screen->window.{width|height} but also screen->{width|height}
	    are also set in vte_terminal_set_size().

	* vte_wayland.c: display_move() is added for roxterm.

	* wayland/ui_display.c:
	  'int dummy' is added to arguments of ui_display_map().

2021-08-08  Araki Ken  <arakiken@users.sf.net>

	* MLPreferenceActivity.java:
	  - TYPE_CLASS_NUMBER -> INPUT_TEXT_VARIATION_VISIBLE_PASSWORD in
	    "Backlog size" entry to input "unlimited".
	  - INPUT_TEXT_VARIATION_URI -> INPUT_TEXT_VARIATION_VISIBLE_PASSWORD
	    in "Encoding", "Foreground Color" and "Background Color" entries.

	* MLActivity.java:
	  INPUT_TEXT_VARIATION_URI -> INPUT_TEXT_VARIATION_VISIBLE_PASSWORD
	  in "Encoding" entry of the connect dialog.

2021-08-07  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: Flick behavior is adjusted in button_motion().

	* beos.cpp: unichar -> u_int16_t (unichar is removed at HaikuOS R1Beta3)

	* sdl2/ui_display.c: #ifdef -> #if

2021-07-24  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_window.c: ui_set_use_clipboard_selection() calls
	  ui_display_clear_selection() only if use_clipboard == 0 and use_it == 1.

	* wayland/ui_display.c:
	  - ui_set_use_clipboard_selection() and ui_is_using_clipboard_selection()
	    are added.
	  - If disp_name is "", ui_display_open() uses WAYLAND_DISPLAY environmental
	    variable.

	* ui_screen.c, ui_shortcut.[ch]: INSERT_CLIPBOARD is available on wayland.

	* ui_main_config.c: The default value of "display" option is changed
	  from "wayland-0" to "" on wayland.

	* MLActivity.java: servListDialogLayout and connectDialogLayout
	  are set to null after finishing dialogs.

2021-07-10  Araki Ken  <arakiken@users.sf.net>

	* sdl2/ui.h: ALPHA_TO_PIXEL macro is defined.

	* wayland/ui.h: ALPHA_TO_PIXEL macro is defined.

2021-07-07  Araki Ken  <arakiken@users.sf.net>

	* android/jni/ui.h: ALPHA_TO_PIXEL macro is defined.

2021-07-03  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: "CSI > q" (XTVERSION) is supported.
	  (The response is "DCS > | mlterm(3.9.1) ST")

2021-07-01  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: show_picture() restores vt_parser->is_visible_cursor
	  if sixel_scrolling is true.

2021-06-19  Araki Ken  <arakiken@users.sf.net>

	* etc/key: Updated.

	* jni/ui_xic.c: ui_xic_switch_mode() calls asciiInput() or
	  normalInput() alternately.

	* MLActivity.java:
	  - forceAsciiInput() -> asciiInput()
	  - normalInput() is added.
	  - commitCompletion() and commitCorrection() are added.

2021-06-12  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: Compiling error is fixed.

2021-06-11  Araki Ken  <arakiken@users.sf.net>

	* README.ja, PROTOCOL, mlterm.1: Updated.

	* ui_main_config.c: --fk / format_keys option is added.

	* ui_screen.c:
	  - INSERT_CLIPBOARD shortcut key is checked.
	  - "paste" OSC 5379 command accepts "clipboard" argument.

	* ui_shortcut.[ch]: INSERT_CLIPBOARD shortcut is added.

	* xlib/ui_window.c:
	  ui_set_use_clipboard_selection(2) makes ui_window_{utf|xct}_selection_request()
	  call XConvertSelection() with XA_CLIPBOARD instead of XA_PRIMARY.
	  XA_CLIPBOARD is regarded in processing SelectionNotify or PropertyNotify.

	* vt_parser.[ch]:
	  - vt_set_format_other_keys() which works as "formatOtherKeys" of xterm
	    is added.
	  - Compatiblity of the behavior of xterm with modifyOtherKeys = 1 is
	    improved.
	  - 'ch' is added to arguments of vt_parser_write_modified_key().

2021-05-15  Araki Ken  <arakiken@users.sf.net>

	* README.ja, etc/key: Updated.

	* ui_font_ft.c:
	  - CAIRO_FORCE_DOUBLE_DRAWING is defined only if cairo < 1.8.0.
	  - CAIRO_HINT_STYLE_NONE is not used.

	* vte.c: vte_terminal_{set|get}_enable_fallback_scrolling() are added.

2021-05-10  Araki Ken  <arakiken@users.sf.net>

	* README.ja, etc/key: Updated.

	* ui_font_ft.c: CAIRO_HINT_STYLE_NONE is not applied to improve
	  the quality of drawing glyphs.

2021-05-08  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: "proto:key=value" shortcut keys don't show
	  "Config: key=value" message in the screen, while
	  "proto:(echo)key=value" shortcut keys shows it as before.

	* tool/mlconfig/po/*.po: Updated.

2021-05-07  Araki Ken  <arakiken@users.sf.net>

	* README, README.ja: Updated.

	* mlterm.1: Comments about features output by 'mlterm -v' are added.

	* configure.in: --with-gtk=4.0 is available.

	* mlconfig/Makefile.in: GTK_{CFLAGS|LIBS} -> GTK_{CFLAGS|LIBS}_FOR_MLCONFIG

	* mlconfig/*.[ch]: GTK-4.x is supported.

	* vt_line.h: ctl_info and ctl_info_type are moved at the end of
	  vt_line_t to keep binary compatibility if ctl is completely disabled.

2021-04-23  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c:
	  - Failure of parsing "OSC Ps ST" which doesn't contain ';' is fixed.
	  - 'int want_ctrl' is removed from arguments of inc_str_in_esc_seq().

2021-04-17  Araki Ken  <arakiken@users.sf.net>

	* README.fb: Updated.

	* ui_display_linux.c: The format of KBD_INPUT_NUM and MOUSE_INPUT_NUM
	  is changed from "%d" to "%d,%d" which enables multiple input devices.

	* fb/ui_display_*.c: 'int fd' is added to arguments of
	  receive_{key|mouse}_event().

2021-04-16  Araki Ken  <arakiken@users.sf.net>

	* ui_font_cache.[ch]:
	  - ui_compose_dec_special_font() is added.
	  - ui_font_cache_get_font() creates a dynamic font for DEC special
	    characters if compose_dec_special_font option is true or
	    ui_font_new() fails.

	* */ui_font.c:
	  - ui_compose_dec_special_font() is removed.
	  - ui_font_new_for_decsp() (dummy on beos, quartz and win32) is added.

2021-04-09  Araki Ken  <arakiken@users.sf.net>

	* im_fcitx.c: fcitx-utils/keysymgen.h is included only if NO_XKB is defined.

2021-04-06  Araki Ken  <arakiken@users.sf.net>

	* README, README.ja: Updated.

	* im_fcitx.c, configure.in: fcitx5 is supported.

2021-03-28  Araki Ken  <arakiken@users.sf.net>

	* vt_screen.c: BL_MAX(line->num_filled_chars, logical_num_filled_chars)
	  is passed to vt_log_add().

	* vt_logs.[ch]: 'u_int num_chars' is added to arguments of vt_log_add().

	* vt_line_bidi.c: The allocated memory size of 'src' is changed from
	  line->ctl_info.bidi->size to line->num_filled_chars in
	  vt_line_bidi_logical() because the former can be greater than the latter.

	* ui_font_ft.c: check_pixel_size() which is moved from cairo_font_open()
	  is added, and cairo_compl_font_open() also calls it.

2021-03-21  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_font.c, libtype/ui_font_ft.c, ui_font.h:
	  - get_ft_bitmap() and ui_serach_next_cairo_font() checks all fonts
	    listed by FcFontList().
	  - cairo_font_open() adjusts the size of color emoji fonts like
	    NotoColorEmoji.ttf in opening them.

	* im_uim.c: prop_list_update() uses malloc() instead of BUFSIZE.

2021-03-08  Araki Ken  <arakiken@users.sf.net>

	* README, README.ja: Updated.

	* encodefilter/test.c:
	  - TEST_MAP() -> TEST_MAP_UCS4()
	  - OUTPUT() -> OUTPUT_UCS4()
	  - TEST_MAP_NON_UCS4() and OUTPUT_NON_UCS4() macros are added.

	* ef_uhc_johab.c: If USE_ICONV macro is defined, ef_map_johab_to_uhc()
	  and ef_map_uhc_to_johab() use iconv().

	* encodefilter/configure.in: If --with-iconv is specified, --disable-dl-table
	  is also specified automatically.

	* configure.in: --without-gtk options disables mlconfig etc which use gtk+.

2021-03-02  Araki Ken  <arakiken@users.sf.net>

	* README, README.ja: Updated.

	* main_loop.c: bl_init_prot() is called with "no-daemon", "no-split",
	  "no-image", "no-zmodem" or "no-xdnd" if NO_DAEMON, NO_SPLIT, NO_IMAGE,
	  NO_ZMODEM or DISABLE_XDND are defined.

	* android/jni/ui_event_source.c:
	  Java_mlterm_native_1activity_MLActivity_{resume|pause}Native()
	  -> ui_activity_{resume|pause}()

	* android/jni/ui_display.c: on_app_cmd() processes APP_CMD_PAUSE and
	  APP_CMD_RESUME.

	* MLActivity.java: onResume() or onPause() doesn't call resumeNative()
	  or pauseNative().

	* vtemu/Makefile.in: @TRANSFER_CFLAGS@ and @TRANSFER_LIBS@ are added.

	* uitoolkit/Makefile.in: @SPLIT_CFLAGS@ is added.

	* main/Makefile.in: @DAEMON_CFLAGS@, @SPLIT_CFLAGS@, @DND_CFLAGS@
	  @TRANSFER_CFLAGS@ and @IMAGE_CFLAGS@ are added.

	* vt_transfer.[ch]: If NO_ZMODEM is defined, vt_transfer_* functions
	  are disabled.

	* ui_layout.[ch]: If NO_SPLIT is defined, ui_layout_*() functions except
	  ui_layout_{new|delete}() are disabled.

	* daemon.[ch]: If NO_DAEMON is defined, daemon_*() functions are disabled.

	* configure.in: --disable-daemon, --disable-split and --disable-zmodem
	  options are added.

	* vtemu/mlterm.c: 3.9.1 -> 3.9.2

2021-02-21  Araki Ken  <arakiken@users.sf.net>

	* encodefilter/src/Makefile.in: 3.0 -> 3.1

	* encodefilter/src/dexport.map: TEST_encodefilter is added.

	* uitoolkit/test.c: TEST_encodefilter() is called.

	* encodefilter/src/test.c: Added.

	* encodefilter/src/ef_ucs4_map.c: TCVN5712_1_1993 is added to map_table.

	* encodefilter/src/ef_ucs4_tcvn5712_1.c: Typo fixed.

	* encodefilter/src/ef_8bit_conv.[ch], ef_8bit_parser.[ch]:
	  ef_tcvn5712_1_1993_{conv|parser}_new() are added.

	* encodefilter/src/ef_ucs4_cp125x: ef_map_ucs4_to_cp874() sets
	  EF_COMBINING property for 0xd1, 0xd4-0xda and 0xe7-0xee.

	* encodefilter/module/table/*.table: Updated.

	* encodefilter/module/ef_ucs4_tcvn5712_1.c:
	  ef_map_ucs4_to_tcvn5712_1_1993() sets EF_COMBINING property for 0xb0-0xb4.

	* encodefilter/module/ef_ucs4_{cp125x|georgian_ps|koi8|tcvn5712_1|viscii}.c:
	  ef_map_*_to_ucs() ignores 0x20 - 0x7e.

	* encodefilter/module/ef_ucs4_*.c:
	  If USE_ICONV is defined, ef_map_*_to_ucs4() and ef_map_ucs4_to_*() use
	  iconv() instead of table/*.table.

	* encodefilter/module/ef_iconv.h: Added

	* encodefilter/util/*.pl: Fixes by the change of arguments of
	  output_table_ucs_to() and output_table_to_ucs() in ucs_mapping.pm

	* encodefilter/util/ucs_mapping.pm: The size of mapping table by
	  output_separated() is shrinked.

	* configure.in, encodefilter/configure.in: --with-iconv option is added.

	* bl_path.c: TEST_bl_basename() is added.

2021-02-11  Araki Ken  <arakiken@users.sf.net>

	* mc_font.c: Compiling error is fixed.

2021-02-06  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_window.c: Segfault is fixed if mlterm screen with -t option
	  goes outside of the display.

2021-02-03  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_mosh.cpp: dead_network >= 0 => dead_network->tcp_sock >= 0

	* android/jni/ui_display.c: proto of bl_parse_uri() is passed to
	  showConnectDialog().

	* android/jni/ui_connect_dialog.c: 'serv' argument of
	  Java_mlterm_native_1activity_MLActivity_dialogOkClicked()
	  can include "<scheme>://".

	* MLActivity.java:
	  - "mosh://" is supported in 'Server' text field of the connect dialog.
	  - 'proto' is added to arguments of showConnectDialog().

	* prepare-gradle.sh: mosh is supported.

	* Android.mk: Settings to build libptymosh are added.

2021-01-25  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: write_loopback() doesn't reset vt_parser->r_buf.left
	  and vt_parser->r_buf.filled_len if mlterm works as libvterm
	  compatible library.

	* ui_screen.c etc: sizeof(a) / sizeof(a[0]) => BL_ARRAY_SIZE

	* bl_util.h: BL_ARRAY_SIZE is added.

2021-01-16  Araki Ken  <arakiken@users.sf.net>

	* vt_logical_visual.c, vt_parser.c:
	  vt_is_arabic_combining() is not used.

	* vt_shape.[ch]: vt_is_arabic_combining() is removed.

	* vt_ctl_loader.h, vt_functbl_bidi.c:
	  VT_IS_ARABIC_COMBINING is removed from vt_ctl_bidi_id.

	* vt_shape_bidi.c:
	  - get_arabic_comb2_present_code() is added instead of
	    vt_is_arabic_combining().
	  - vt_is_arabic_combining() returns the number of combined characters.
	  - 0x6BA is added to arabic_present_table.

	* vt_line_bidi.c:
	  - vt_line_bidi_render() calls vt_line_set_modified() with
	    vt_convert_col_to_char_index(line->change_end_col, BREAK_BOUNDARY),
	    not with vt_line_get_end_of_modified() to clear the line correctly.
	  - vt_line_bidi_visual(), vt_line_bidi_logical() and
	    vt_line_bidi_copy_logical_str() support dynamic combining.

	* libctl/vt_bidi.c:
	  - TEST_vt_bidi() is added.
	  - adjust_comb_pos_in_order() is added for dynamic combining.

	* ui_picture.c: MAX_PAGE_ID macro is used instead of 8.

	* mc_io_file.c: Unnecessary entries are removed from 'options' table.

2020-12-31  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_virtual_kbd.c: Compiling error is fixed if ./configure is
	  executed with --disable-image option.

2020-12-30  Araki Ken  <arakiken@users.sf.net>

	* android/jni/ui_display.c:
	  Fix by 28174359f35290631dbd772be8de03fac78cbd34 commit (2020/10/06) is
	  reverted.

	* MLActivity.java: Server list dialog is shown at startup.

	* vt_parser.c: write_loopback() allocates at least PTY_RD_BUFFER_SIZE
	  for vt_parser->r_buf.chars.
	  (open_pty_intern() in ui_screen_manager.c calls vt_term_write_loopback()
	   when vt_parser->r_buf.len is still 0).

2020-12-11  Araki Ken  <arakiken@users.sf.net>

	* README.ja, man/mlterm.1, etc/termcap: Updated.

	* test.c: TEST_vt_termcap() is added.

	* vt_termcap.c:
	  - TEST_vt_termcap() is added.
	  - read_conf() calls search_termcap() with perfect_match == true,
	    while vt_termcap_get() calls it with perfect_match == false.
	  - perfect_match is added to arguments of search_termcap().
	  - search_termcap() stops to accept multiple terminal types
	    concated by '|'.

2020-11-29  Araki Ken  <arakiken@users.sf.net>

	* ui_screen_manager.c: The previous commit didn't work by Ctrl+F1.

2020-11-28  Araki Ken  <arakiken@users.sf.net>

	* ui_screen_manager.c: The same privkey file is used for mosh connection
	  in pressing Ctrl+F1 or Ctrl+F2.

	* vt_term.[ch]: vt_term_t stores not only 'uri' but also 'privkey'
	  to use the same privkey file in pressing Ctrl+F1 or Ctrl+F2
	  for mosh connection.

	* README.cocoa, README.cocoatouch, README.ja, etc/main.ja: Updated.

	* ui_main_config.c: use_login_shell=false by default on MacOS.

2020-11-13  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_mosh.cpp: "MOSH_UDP_PORT" environmental variable is added to
	  specify UDP port or port-range to communicate with a mosh server.

	* version.h: 3.9.1 -> 3.9.1post

2020-11-08  Araki Ken  <arakiken@users.sf.net>

	* 3.9.1 released.
	  (tag "rel-3_9_1")

	* configure.in, mlterm.spec, main/version.h.in,
	  mlterm.c, android/jni/version.h:
	  updated for 3.9.1.

	* README, man/mlterm.1, doc/en/PROTOCOL, etc/main, etc/main.ja,
	  doc/en/README.fb, doc/ja/README.fb: Updated.

2020-11-08  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_font.c: ui_font_new() returns NULL if specified type engine
	  is disabled.

2020-11-07  Araki Ken  <arakiken@users.sf.net>

	* gtk/README: Updated.

	* vte.c: New functions at vte 0.62 (vte_terminal_spawn_with_fds_async(),
	  vte_get_feature_flags(), vte_terminal_event_check_regex_array(),
	  vte_terminal_set_enable_sixel() and vte_terminal_get_enable_sixel())
	  are added.

	* ui_screen.c: get_config_intern() returns correct value if depth < 32.

2020-11-06  Araki Ken  <arakiken@users.sf.net>

	* ui_display_x68kgrf.c: conf_1024_768_4.videoc.r1 = 0x24e4

2020-11-01  Araki Ken  <arakiken@users.sf.net>

	* sdl2/ui_display.c: Type miss is fixed.
	  (SDL_VERSION_AT_LEAST -> SDL_VERSION_ATLEAST)

2020-10-31  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: Compiling error in buidling by ./configure --disable-image.

	* ui_layout.c: ui_layout_remove_child() reverts
	  screen->screen_listener.line_scroll_out to the original one.

2020-10-27  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: font_size_changed() sets normal hints correctly
	  by calling ui_window_set_normal_hints() after resize_window().

2020-10-25  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_imagelib.c: ui_imagelib_get_transparent_background()
	  calls modify_pixmap() for the entire image.
	  (Fix http://twitter.com/oshimyja/status/1320251099211649024)

	* vt_parser.c:
	  - is_separated_sixel() is added to fix
	    https://github.com/arakiken/mlterm/issues/4.
	  - TEST_vt_parser() is added.

	* test.c: TEST_vt_parser() is called.

2020-10-25  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_font.c: get_metrics() fails if width or height in PCF_METRICS
	  table is 0.

2020-10-24  Araki Ken  <arakiken@users.sf.net>

	* cocoa.m: window_set_title() and cocoa_clipboard_set() check if utf8 argument
	  has valid utf8 sequence by is_valid_utf8().

	* sdl2/ui_display.c: SDL_WINDOW_ALWAYS_ON_TOP, SDL_WINDOW_SKIP_TASKBAR and
	  SDL_WINDOW_UTILITY are used on SDL 2.0.5 or later.

	* libptymosh/vt_pty_mosh.cpp: pty.master = 1000 (dummy value) on win32.

2020-10-17  Araki Ken  <arakiken@users.sf.net>

	* libptyssh/vt_pty_ssh.c: vt_pty_ssh.c includes <openssl/crypto.h> instead
	  of declaring CRYPTO_num_lock() because CRYPTO_num_lock() is defined as 0
	  on some environments.

2020-10-12  Araki Ken  <arakiken@users.sf.net>

	* vt_line_shape.c: Compiling error by the previous commit is fixed.

2020-10-11  Araki Ken  <arakiken@users.sf.net>

	* servman/main.c, win32/ui_connect_dialog.c: X11 checkbox is grayed out
	  if protocol except ssh is selected.

	* vt_line_shape.c: If open type layout is enabled, vt_shape_ot_layout() is
	  called directly instead of 'func' because its type is different from
	  that of vt_shape_arabic and vt_shape_iscii.

	* ui_im.h: The type of return value of vt_char_set is fixed. (int -> void)

	* im_kbd.c, ui_color.c: Fix typo.

2020-10-10  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: wcwidth() is declared manually instead of
	  including <wchar.h>

	* ui_display_linux.c: strcasestr() is declared manually instead of
	  including <string.h>

	* ui_display.h:
	  #ifdef USE_WIN32API ui_display_trigger_pty_read() #endif
	  -> #ifdef NO_DISPLAY_FD ui_display_trigger_pty_read() #endif

2020-10-07  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.android: Updated.

	* android/jni/ui_display.c: _display and _disp are cleared completely
	  not to leave dust on the screen in restarting mlterm-android.

2020-10-06  Araki Ken  <arakiken@users.sf.net>

	* libptyssh/vt_pty_ssh.c: scp_thread() truncates received bytes that
	  exceed scp->src_size.

2020-10-03  Araki Ken  <arakiken@users.sf.net>

	* README.android: Updated.

	* prepare-gradle.sh, build-gradle.sh, build.gradle: Added.

	* android/jni/main.c, android/jni/ui_event_source.c, wnnlib.c:
	  Implicite declaration is fixed.

	* android/jni/Android.mk: Fixes to build with gradle.

	* android/build-ant.sh: Renamed from build.sh.

	* win32/ui_window.c: If ui_layout receives WM_MOUSEWHEEL or WM_MOUSEHWHEEL,
	  it is dispatched to the focused ui_screen.

2020-09-13  Araki Ken  <arakiken@users.sf.net>

	* win32/ui_connect_dialog.c: The new format of response of "servman" is
	  supported.

	* servman/main.c, servman.rc:
	  SSH private key path is configurable for each server.

2020-09-12  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: trim_trailing_newline_in_pasting3() and convert_nl_to_cr3()
	  which process WCHAR instead of u_char are added for win32.

2020-09-09  Araki Ken  <arakiken@users.sf.net>

	* vte.c: log_size_changed() and term_changed() set adj_value_changed_by_myself = 1.

2020-09-08  Araki Ken  <arakiken@users.sf.net>

	* ef_ucs_property.table: Updated to Unicode 13.0.0 (UnicodeData.txt and
	  EastAsianWidth.txt)

	* vte.c:
	  - ui_screen_scroll_event_listener_t::term_changed is implemented.
	  - log_size_changed() is fixed.

2020-09-07  Araki Ken  <arakiken@users.sf.net>

	* vterm.c: vterm_{state|screen}_convert_color_to_rgb() are added.

2020-09-06  Araki Ken  <arakiken@users.sf.net>

	* vt_screen.c: If vt_edit_resize() returns 3, resize() forcibly set 'pack' to 0.

	* vt_edit.c: vt_edit_resize() returns 3 if RZ_SCROLL scrolls out all lines.

2020-09-05  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: If vt_term_enter_backscroll_mode() returns 2,
	  scrollbar state is reset.

	* vt_term.[ch]: vt_term_enter_backscroll_mode() returns the returned value
	  of vt_enter_backscroll_mode().

	* vt_screen.[ch]:
	  - need_rewrap_logs is added to vt_screen_t, and If vt_edit_resize() returns 2,
	    need_rewrap_logs is set to 1.
	  - If need_rewap_logs is 1, vt_enter_backscroll_mode() calls rewrap_logs()
	    which rewraps backlog according to the new number of columns.
	  - If the number of logged lines is changed by rewrap_logs(),
	    vt_enter_backscroll_mode() returns 2.

	* vt_edit.c:
	  - replace_chars_in_line() uses vt_str_cols_to_len().
	  - vt_edit_resize() returns 2 if old_cols != new_cols and resize_mode == RZ_WRAP.

	* vt_str.[ch]: vt_str_cols_to_len() is added.

	* vt_iscii.c:
	  - Duplicated entries in tables are removed.
	  - If load_symbol() fails once, it is never called.
	  - If vt_iscii_shape() returns 0, vt_iscii() does nothing.

2020-08-29  Araki Ken  <arakiken@users.sf.net>

	* vt_edit.[ch]:
	  - vt_edit_resize() and resize_hadjustment() don't scroll out
	    the cursor line.
	  - top_line_is_wrapped() is added to vt_edit_scroll_event_listener_t.
	  - vt_edit_resize() fully scrolls out the wrapped lines which are
	    partially scrolled out if the new number of columns is greater
	    than the old one.

	* vt_screen.c:
	  - top_line_is_wrapped() is added.
	  - REVERT_BACKLOG_FOR_HADJUSTMENT is always enabled.

2020-08-24  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_window.c: "use_transbg" option is disabled if depth is 32.

	* ui_screen.c: True transparency is revived if wall picture is removed
	  on 32 bit depth.

2020-08-23  Araki Ken  <arakiken@users.sf.net>

	* PROTOCOL: Updated.

	* mc_io_pty.c: If "True Transparent" checkbox is applied but isn't saved,
	  message dialog informs of it.

	* mc_bgtype.c: "True Transparent" checkbox is added.

	* ui_screen.c: "depth" is added to OSC 5380.

2020-08-22  Araki Ken  <arakiken@users.sf.net>

	* vt_cursor.c: cursor_goto() checks if row is not less than 0.

2020-08-22  Araki Ken  <arakiken@users.sf.net>

	* gtk/vte.c, MLTermPty.c, vterm.c, ui_picture.c, ui_screen.c,
	  vt_cursor.c, vt_parser.c, vt_screen.c, vt_term.c:
	  If vt_term_get_line() always returns non-NULL, NULL check is removed.

	* vt_logical_visual.[ch]:
	  - The type of the return value of *_render() and *_visual_line() is
	    changed from int to void.
	  - comb_render() does nothing instead of calling comb_visual().
	  - vt_get_vertical_mode() -> vt_get_vertical_mode_by_name()
	  - Illegal arguments passing to vt_model_resize() is fixed.

	* vt_bidi.[ch]: vt_get_bidi_mode() -> vt_get_bidi_mode_by_name()

	* xlib/ui_font.c: ui_convert_to_xft_ucs4() converts JISX0208_1983
	  characters correctly.
	  (Enbugged at 34cdc1ec9f6110cf112b66c720ad41db08deb8df)

	* vt_model.[ch]: The type of the return value of
	  vt_model_scroll_{up|down}ward() is changed from int to void.

2020-08-22  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja: Updated.

	* ui_main_config.c: "scroll_on_resizing" option is removed, and
	  "resize_mode" option is added.

	* ui_screen.c:
	  - selecting_word() checks whether pressed position is over the end
	    character of a line or not correctly.
	  - start_vt100_cmd() calls ui_window_update() if screen->term has
	    vt_logvis which includes bidi.
	  - 'int sb_flag' is added to arguments of xterm_resize(), and if it
	    is true, xterm_resize() calls
	    screen->screen_scroll_listener->term_changed().

	* vt_term.h: vt_term_has_logical_visual() is added.

	* vt_screen.[ch]:
	  - vt_screen_resize() wraps each line when it reverts lines from backlog.
	  - 'int pack' is removed from arguments of vt_screen_resize().
	  - vt_screen_has_logical_visual() is added.

	* vt_edit.[ch]:
	  - vt_set_resize_mode(), vt_get_resize_mode_by_name(),
	    vt_edit_replace() and vt_edit_get_num_filled_rows() are added.
	  - If resize_mode is RZ_WRAP, vt_edit_resize() wraps text on the screen.

	* vt_model.[ch]:
	  The type of 'slide' argument of vt_model_resize() is changed from
	  u_int* to u_int.

	* vt_parser.[ch]: 'int sb_flag' which informs ui_screen of changing
	  scrollbar size is added to arguments of vt_xterm_event_listener_t::resize().

	* vt_logical_visual.[ch]: char* -> const char*

2020-08-11  Araki Ken  <arakiken@users.sf.net>

	* README.ja: Updated.

	* test.c: TEST_bl_str() is added.

	* bl_conf.c, bl_str.c, data_entry_numeric.c, data_entry_string.c,
	  mlterm-menu.c, mc_auto_detect.c, mc_im.c, ui_picture.c, xlib/ui_imagelib.c:
	  Memory leak is fixed.

	* bl_debug.c, athena.c, mozmodern.c, motif.c, next.c,
	  data_entry_radio.c, im_skk.c, ui_sample_sb_view_lib.c, fb/ui_window.c,
	  ui_im_candidate_screen.c, libctl/vt_bidi.c, libctl/vt_iscii.c,
	  vt_ot_layout.c: Meaningless code is removed.

	* */ui_font.[ch], ui_font_ft.c, ui_font_manager[ch], ui_font_cache.[ch],
	  ui_screen.c, ui_main_config.[ch]:
	  Negative value is accepted for letter_space.

	* vt_parser.c: request_locator() restore the original state of
	  vt_parser->locator_mode and vt_parser->mouse_mode.

	* wayland/ui_display.c: Untabified.

	* ui_layout.c: 'return 1' is removed from screen_scroll_downward().

	* beos.cpp: view_draw_string() considers font->x_off.

	* im_uim.c: Double free() is fixed.

	* bl_locale.c: bl_locale_init() returns 0 if setlocale() fails.

	* data.h: MAX_ENTRY is changed from 8 to 9.

	* ef_sjis_parser.c: Broken processing JISX0213 is fixed.

	* zmodem.c: get_type_string() is added.

2020-08-02  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c: If wl_display_dispatch() returns -1 (failure),
	  ui_window_t::window_destroyed() is called.

2020-08-01  Araki Ken  <arakiken@users.sf.net>

	* gtk/README: Updated.

	* vte_xlib.c: XInput2 event (XIDeviceEvent) is converted to XEvent.

2020-07-26  Araki Ken  <arakiken@users.sf.net>

	* MLPreferenceActivity.java: "Local echo mode" is removed.

2020-07-26  Araki Ken  <arakiken@users.sf.net>

	* MLPreferenceActivity.java:
	  - ArrayIndexOutOfBoundsException is fixed.
	  - "Local echo mode" is added.

	* vt_parser.c: "CSI 3 J" is supported.

2020-07-25  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_font.[ch]: 'get_space_glyph' is added to arguments of
	  ui_get_bitmap(). (If get_space_glyph is false, ui_get_bitmap()
	  returns NULL for 0x20.)

	* fb/ui_window.c: Clipping process in draw_string_intern() is fixed.

2020-07-25  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_window.c: Proportional glyphs are placed at the center of
	  cells only if CENTER_PROPORTIONAL_GLYPHS is defined,

	* fb/ui_font.c: MAXIMIZE_HEIGHT macro is removed.

	* fb/ui.c: XStringToKeysym() supports 'A' - 'Z'.

2020-07-24  Araki Ken  <arakiken@users.sf.net>

	* cocoa.m: insertText() sets kev.keysym.

	* ui_screen.c: Lines outside the screen in backscrolling is not drawn.

	* wayland/ui_display.c: ui_display_get_utf8() removes NULL character.

	* vt_shape.c: combine_replacing_code() returns 1 (success) or
	  0 (vt_char_combine_forcibly() fails).

	* vt_char.[ch]: vt_char_combine_forcibly() which doesn't consider
	  IS_ZERO_WIDTH() is added.

	* Android.mk: ui_copymode.c is added to LOCAL_SRC_FILES.

	* fb/ui_window.c:
	  Clipping process for DECDHL is moved from draw_string() to
	  draw_string_intern() to use ui_modify_bitmaps() well.

	* fb/ui_font.[ch]:
	  - If MAXIMIZE_HEIGHT is not defined, face->glyph->bitmap_top and
	    face->glyph->bitmap.rows are stored to cache and adjusting glyph
	    position is processed by ui_modify_bitmaps().
	  - The type of XFontStruct::glyph_indeces which stores segment and
	    offset of each glyph is changed from u_int16_t to u_int32_t, and
	    segment is expanded from 7bit to 23 bit to get glyph size variable.
	  - next_glyph_buf() which returns the next buffer to store glyph
	    bitmap is added.
	  - If XFontStruct::is_aa is true, 4 bytes header which stores height
	    position info and pitch is embedded in each glyph buffer.

	* fb/ui.h, sdl2/ui.h, wayland/ui.h, android/jni/ui.h:
	  - has_each_glyph_width_info, num_glyph_bufs and glyph_buf_left are added
	    to XFontStruct.
	  - glyph_size is removed from XFontStruct.
	  - Type of width, width_full, height and ascent is changed from u_char
	    to u_int16_t.

	* ui_font.h: The type of width, height and ascent of ui_font_t is changed
	  from u_int8_t to u_int16_t.

	* ui_font_manager.c: If USE_FREETYPE is defined, the default value of
	  max_font_size is changed from 10000 to 200.

2020-06-30  Araki Ken  <arakiken@users.sf.net>

	* beos.cpp: MLView::MessageReceived() calls BView::MessageReceived()
	  if it doesn't process the received message.

2020-06-27  Araki Ken  <arakiken@users.sf.net>

	* vt_screen.c: vt_screen_search_find() considers PICTURE_CHARSET.

	* ui_screen.c: copymode_key() calls ui_xic_set_spot() if ui_window_update()
	  is called without UPDATE_CURSOR.

	* ui_display_freebsd.c: Key code 28 is always converted to XK_Return.

2020-06-24  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, etc/key: Updated.

	* ui_screen.c:
	  - 'int *row' is added to arguments of bs_scroll_{up|down}ward_to_mark().
	  - SET_MARK shortcut key is supported.

	* ui_shortcut.[ch]: SET_MARK is added.

	* vt_term.h: 'row' is added to arguments of
	  vt_term_backscroll_{up|down}ward_to_mark().

	* vt_screen.[ch]: 'int *row' is added to arguments of
	  vt_screen_backscroll_{up|down}ward_to_mark().

2020-06-22  Araki Ken  <arakiken@users.sf.net>

	* README, README.ja: Updated.

	* configure.in, baselib/configure.in:
	  --enable-utmp-suid and --with-utmp options are added.

	* ui_screen.c: Cursor is hidden in editing search text in copy mode.

2020-06-20  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, doc/ja/README.ja: Updated.

	* im_canna.c, im_fcitx.c, im_ibus.c, im_iiimf.c, im_scim_mod_if.c, im_uim.c, im_wnn.c:
	  - parser->init before im_convert_encoding() is removed.
	  - Character encoding conversion before im.listener->write_to_term() is removed.

	* im_iiimf.[ch], im_iiimf_aux.c:
	  - PARSER_INIT_WITH_BOM() is removed.
	  - If WORDS_BIGENDIAN is not defined, ef_utf16le_parser_new() is called
	    instead of ef_utf16_parser_new().
	  - Character encoding conversion before im.listener->write_to_term() is removed.
	  - Infinite loop in aux_quit() is fixed.

	* im_kbd.c:
	  - Character encoding conversion before im.listener->write_to_term() is removed.
	  - kbd->conv is removed.

	* im_m17nlib.c: m17nlib->conv is removed.

	* ef_str_parser.[ch]: ef_str_parser_init() -> ef_str_parser_get()

	* im_skk.c:
	  Character encoding conversion before im.listener->write_to_term() is removed.

	* im_common.h: im_convert_encoding() calls parser->init().

	* ui_im.h: 'ef_parser_t*' is added to arguments of
	  ui_im_event_listener::write_to_term().

	* ui_screen.c:
	  - calculate_vtchars_width() is added to determine the current position
	    in editing search text for get_spot_intern() and draw_preedit_str().
	  - copymode_xxx members of ui_screen_t are collected to ui_copymode_t
	    and related code is moved to ui_copymode.[ch].
	  - 'update' argument which specifies whether to call ui_window_update()
	    internally is added to arguments of bs_scroll_*().
	  - The key to stop selection in copymode is changed from
	    Control+x to any other keys.

	* ui_copymode.[ch]: Added.

	* ui_layout.c: The return value of screen_scroll_* functions is changed
	  from int to void.

	* ui_window_cairo.c: Undefined symbol 'flush_glyphs' on cairo 1.8.0 or
	  before is fixed.

2020-06-13  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, doc/en/PROTOCOL: Updated.

	* MLPreferenceActivity.java: "Scroll by Shift+Up or Shift+Down" is dropped.

	* mlcofig/main.c, mc_flags.[ch]: MC_FLAG_EXTSCROLLSHORTCUT is dropped.

	* ui_main_config.[ch]: "use_extended_scroll_shortcut" / -q option is dropped.

	* ui_shortcut.[ch], ui_screen.[ch], ui_screen_manager.c, vte.c:
	  - SCROLL_DOWN and PAGE_DOWN shortcut keys are dropped.
	  - "use_extended_scroll_shortcut" is removed from get_config_intern()
	    and "ui_screen_set_config().
	  - use_extended_scroll_shortcut is removed from arguments of ui_screen_new().

2020-06-09  Araki Ken  <arakiken@users.sf.net>

	* README.ja, man/mlterm.1: Updated.

	* ui_screen.[ch]:
	  - If screen->copymode_enabled is true, draw_cursor() ignores
	    vt_term_is_visible_cursor().
	  - If vt_line_t::mark is true, redraw_screen() draws mark before the
	    beginning of a line.
	  - redraw_screen() draws pattern text to be searched for in copy mode.
	  - bs_scroll_*() doesn't call ui_window_update() in copy mode.
	  - bs_scroll_{up|down}ward_to_mark() are added.
	  - SCROLL_{UP|DOWN}_TO_MARK shortcuts are supported.
	  - copymode_pattern, copymode_pattern_pos and copymode_pattern_editing
	    are added to members of ui_screen_t.
	  - '/' key in copymode enables searching specified text in the screen
	    and backlog.

	* ui_shortcut.[ch]:
	  - SCROLL_{UP|DOWN}_TO_MASK shortcuts are added.
	  - The default key of COPY_MODE shortcut is changed from
	    Control+Return to Control+Shift+Return.

	* win32/ui_window.c: Control+Shift+Key works.

	* vt_term.h: vt_term_backscroll_{up|down}ward_to_mark() are added.

	* vt_screen.[ch]:
	  - vt_screen_backscroll_{up|down}ward_to_mark() are added.
	  - 'char_index' and 'row' are added to arguments of vt_screen_search_init().

	* vt_parser.c: OSC 1337;SetMark ST is supported.

	* vt_line.[ch]: mark is added to members of vt_line_t.

2020-06-05  Araki Ken  <arakiken@users.sf.net>

	* etc/key, doc/ja/README.ja: Updated.

	* ui_screen.[ch]:
	  - copymode_enabled, copymode_cursor_char_index and copymode_cursor_row
	    are added to ui_screen_t.
	  - draw_cursor() draws copy mode cursor and unhighlight_cursor() hides
	    copy mode cursor if screen->copymode_enabled is true.
	  - copymode_{start|key|move_vertical}() are added.

	* ui_shortcut.[ch]:
	  COPY_MODE whose default shortcut is Control+Return is added.

2020-05-24  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, etc/main, etc/main.ja: Updated.

	* test.c: test() calls TEST_ui_emoji().

	* vt_parser.c: put_char() supports emoji modifier fitzpatric type 1-6
	  (U+1F3FB-1F3FF)

	* vt_line.[ch]: vt_line_clear_picture() is added.

	* ui_screen.c:
	  - "emoji_file_format" is added to get_config_intern() and
	    ui_screen_set_config().
	  - xterm_get_emoji_data() calls vt_char_set_picture_id() instead of
	    vt_char_combine_picture if ch1 has already had a picture id.
	    (For emoji modifier fitzpatric type 1-6)

	* ui_picture.h: INLINE_AVAIL_ROWS is changed from -MAX_INLINE_PICTURES * 2
	  to -MAX_INLINE_PICTURES.

	* ui_picture.c:
	  ensure_inline_pictures() clears inline pictures in the backscroll log
	  if num_inline_pics >= MAX_INLINE_PICTURES after cleanup_inline_pictures().

	* ui_main_config.c: --emojifmt / emoji_file_format option is added.

	* ui_emoji.[ch]:
	  - ui_emoji_{set|get}_file_format() and TEST_ui_emoji() is added.
	  - 'check_exist' is added to arguments of ui_emoji_get_path().

	* main.c: setenv("MSYS", "disable_pcon").

2020-05-17  Araki Ken  <arakiken@users.sf.net>

	* ui_picture.c: If the value of "separate_wall_picture" option is "true",
	  a wall picture is not resized to the window size but to the display size
	  on x68k.

2020-05-17  Araki Ken  <arakiken@users.sf.net>

	* ui_picture.c: ui_get_inline_picture() checks whether pixmap == None or not.

2020-05-17  Araki Ken  <arakiken@users.sf.net>

	* README.ja: Updated.

	* ui_draw_str.c:
	  Hack to avoid http://twitter.com/isaki68k/status/1259110003874488326
	  is added.

	* main.c: setenv("CYGWIN", "disable_pcon") on cygwin to disable pseudo
	  console support introduced since cygwin 3.1.0.

	* ui_picture.[ch]:
	  - cleanup_inline_pictures() is tuned.
	  - weighting is removed from ui_inline_picture_t.

	* ui_screen.c: vt_term_get_num_logged_lines() is not called before
	  vt_term_get_line() in line_scrolled_out().

	* ui_screen_manager.c: DISPLAY and WINDOWID environmental variables are set
	  only if USE_XLIB is defined.

2020-05-04  Araki Ken  <arakiken@users.sf.net>

	* URL is changed from bitbucket to github.

	* bitbucket-pipelines.yml: Removed.

	* .gitignore: Added.

	* version.h: 3.9.0 -> 3.9.0post

2020-04-26  Araki Ken  <arakiken@users.sf.net>

	* 3.9.0 released.
	  (tag "rel-3_9_0")

	* configure.in, mlterm.spec, main/version.h.in,
	  mlterm.c, android/jni/version.h:
	  updated for 3.9.0.

	* README, doc/en/PROTOCOL, gtk/README: Updated.

2020-04-26  Araki Ken  <arakiken@users.sf.net>

	* vtemu/Makefile.in: mkdir -p $(LIBDIR)/mlterm

	* Makefile.in: 'distclean' target executes 'rm -rf gui'.

2020-04-25  Araki Ken  <arakiken@users.sf.net>

	* vtemu/Makefile.in: @LPOBL@ is linked to libzmodem.la

	* c_sixel.c: Compiling error by g++ is fixed.

	* zmodem.c: basename() -> bl_basename()

	* README.fb: Updated.

	* vt_parser.c: Minor fix.

2020-04-25  Araki Ken  <arakiken@users.sf.net>

	* configure.in, ui_display_x68kgrf.c:
	  If --with-gui=x68kgrf is specified, ui_display_x68kgrf.c includes
	  uitoolkit/fb/grfioctl.h instead of <machine/grfioctl.h>.

	* uitoolkit/fb/grfioctl.h: Added.

2020-04-23  Araki Ken  <arakiken@users.sf.net>

	* configure.in, main/Makefile.in:
	  "wscons" (NetBSD/wscons framebuffer),
	  "x68kgrf" (NetBSD/x68kgrf framebuffer) and
	  "scpc98" (FreeBSD/pc98 framebuffer) are added to --with-gui option.

2020-04-22  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_window.c: ui_window_get_str() doesn't regard event->ksym
	  which is >= 0x100 as UCS on SDL2.

2020-04-19  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  - vte_terminal_match_remove_all() is implemented.
	  - vte_terminal_finalize() calls vte_terminal_match_remove_all()
	  - vte_terminal_match_add_{g}regex() keeps regex in
	    PVT(terminal)->match_{g|v}regexes and {g|vte}_regex_ref(regex).
	  - vte_get_encodings() and vte_get_encoding_supported() symbols are added.

2020-04-18  Araki Ken  <arakiken@users.sf.net>

	* vte.c: VTE_COMPILATION is defined.

2020-04-17  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c: add_root_to_display() is fixed not to destroy
	  disp->roots[0] and disp->num_roots.

2020-04-12  Araki Ken  <arakiken@users.sf.net>

	* im_ibus.c: IBUS_ID is removed from event sources.
	  (I forgot to remove '#ifndef USE_WAYLAND' in remove_event_source()
	   in revision 2742.)

2020-04-12  Araki Ken  <arakiken@users.sf.net>

	* gtk/README: Updated.

	* vte_xlib.c: If GdkDeviceManager is created with XInput2, warning message
	  is output to ~/.mlterm/msg.log.

	* configure.in: "-m 2755 -g utmp" and "-m 4755 -o root" are not set
	  to INSTALL_OPT on MacOSX/Quartz.

	* bl_utmp_sysv.c: /dev/ttys00N is supported.

	* baselib/configure.in: setut{x}ent() is preferred to utemper.

2020-03-30  Araki Ken  <arakiken@users.sf.net>

	* mc_io.c:
	  Function declarations are renamed as follows.
	  mc_{set|get}_color_name_{file|pty}() -> mc_{set|get}_color_rgb_{file|pty}()

2020-03-29  Araki Ken  <arakiken@users.sf.net>

	* c_sixel.c:
	  - Both SIXEL_SHAREPALETTE and SIXEL_ORMODE are defined,
	    don't remove 'p++' at the end of load_sixel_from_data().
	  - for (x < rep) -> do .. while (x < rep)

2020-03-26  Araki Ken  <arakiken@users.sf.net>

	* vt_term.c: Missing '}' is fixed.

	* vt_parser.[ch]: The return value of vt_parser_write() is changed from
	  int to size_t.

	* ui_display_linux.c: Compiling error in no KT_DEAD2 macro definition is fixed.

	* c_sixel.c: SIXEL_ORMODE is defined.

2020-03-15  Araki Ken  <arakiken@users.sf.net>

	* win32/ui.h, win32/ui_xic.c: XK_Prior - XK_Help and XK_KP_0 = VK_XXX + 0xff00.

	* vt_parser.c: alloca(10) -> buf[10]

	* ui_screen.c, MLTrem.java: If ksym is 0, vt_term_write_modified_key()
	  is not called.

2020-03-14  Araki Ken  <arakiken@users.sf.net>

	* ui_draw_str.c: If CLIP_LINE is defined and top_margin < 0,
	  ui_draw_str() and ui_draw_str_to_eol() calls cairo_{set|unser}_clip().

	* libtype/ui_window_cairo.c: cairo_{set|unset}_clip() calls flush_glyphs()
	  in order to apply clipping region.

2020-03-08  Araki Ken  <arakiken@users.sf.net>

	* fb/ui.h: Compiling error on FreeBSD is fixed.

2020-03-07  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* fb/ui_window.c:
	  - ui_window_get_str() supports unicode on FreeBSD.
	  - ModMask is cleared if keyboard input is unicode.

	* ui_display_linux.c:
	  - The type of diacrs_uc and diacrs is changed to pointer.
	  - load_diacr() is integrated to get_accented_char().
	  - ModMask is not cleared if kb_value doesn't change in either
	    kb_table = K_ALTTAB or kb_table = 0.

	* ui_display_freebsd.c: Dead key is processed to input accented characters
	  etc from keyboard.

2020-03-04  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* ui_display_wscons.c: Dead key is processed to input accented characters
	  etc from keyboard.

	* wskbdutil.c: Added.

2020-03-01  Araki Ken  <arakiken@users.sf.net>

	* ef_ucs_property.table: Updated to Unicode 12.1.0 (UnicodeData.txt and
	  EastAsianWidth.txt)

	* config.sub, config.guess: Updated.

2020-03-01  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_imagelib.c: load_sixel() supports 8-bit depth, it enables you
	  to show sixel on 8-bit depth without mlimgloader.

	* gdk-pixbuf.c: pixbuf_to_pixmap_pseudocolor() is fixed to dither the
	  last 1 pixel of each line properly.

2020-02-29  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: (void*) + num * sizeof(vt_macro_t) -> (vt_macro_t*) + num

	* xlib/ui_window.c, vt_term.c:
	  ui_window_xft_draw_string32() and vt_term_enter_backscroll_mode()
	  returns nothing.

	* ui_imagelib.h: Ternary operator is removed from ui_destroy_mask() macro
	  because it causes compiling error on OpenServer 6.0.0.

	* encodefilter/module/Makefile.in, main/Makefile.in, uitoolkit/Makefile.in:
	  Tab and backslash characters which can stops 'make' command unexpectedly
	  are removed.

	* bl_mem.c: If CONCATABLE_FUNCTION is not defined, #define __FUNCTION__ "".

	* baselib/configure.in, bl_config.h.in, bl_types.h:
	  Not only <sys/types.h> but also <sys/bitypes.h> is checked.
	  (for OpenServer 6.0.0)

2020-02-28  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* ui_selection.c: changeset 3055 is partially wrong and reverted.

2020-02-27  Araki Ken  <arakiken@users.sf.net>

	* ui_display_linux.c: ioctl(KDGKBDIACRUC) or ioctl(KDGKBDIACR) is used
	  for get_accented_char().

	* fb/ui_window.c: '*keysym -= 0x1000' for unicode characters are removed.

	* aclocal.m4, configure: 'rm -f' check is removed for old machines
	  such as FreeBSD 2.x or before.

	* zmodem.c: <>pobl/bl_path.h> is included instead of <libgen.h>

2020-02-24  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.[ch]: The type of vtmode_flags and saved_vtmode_flags is
	  changed from u_int64_t to u_int32_t[2].

2020-02-24  Araki Ken  <arakiken@users.sf.net>

	* ui_im_candidate_screen.c:
	  index &= 0xFF -> index &= 0xFFFF in set_candidate()

	* im_uim.c: Not only if index % uim->cand_limit == 0 but also
	  if index % uim->cand_limit == uim->cand_limit - 1,
	  candidate_activate() is called.

2020-02-23  Araki Ken  <arakiken@users.sf.net>

	* vt_cursor.c: vt_cursor_left_chars_in_line_are_cleared() and
	  vt_cursor_char_is_cleared() checks if cursor->char_index or cursor->col
	  is less than cursor->model->num_cols.

2020-02-22  Araki Ken  <arakiken@users.sf.net>

	* vt_pty.[ch]: vt_pty_set_hook() and vt_pty_hook_t are removed.

	* vt_term.[ch]: 'use_local_echo' is removed from vt_term_t.

	* vt_parser.[ch]:
	  - is_app_cursor_keys, is_app_escape, keep_screen_on_deccolm,
	    cursor_to_right_of_sixel, allow_deccolm, auto_cr and bold_affects_bg
	    are removed from vt_parser_t. (vtmode_flags is used instead.)
	  - write_to_pty_nohook() is removed.
	  - vt_parser_write() is added.
	  - vt_parser_write() and vt_parser_write_{modified|special}_key() call
	    write_loopback() if SRM is set.
	  - vt_parser_local_echo() -> local_echo()
	  - 'use_local_echo' is added to arguments of vt_parser_new().
	  - vt_parser_is_transferring_data() is removed.

2020-02-20  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c:
	  - write_to_pty_nohook() is added.
	  - Response sequence of mlterm is sent to a console application by
	    write_to_pty_nohook() instead of vt_write_to_pty().

	* fb/ui_display_linux.c, fb/ui_window.c:
	  Inputting accented character with the use of AltGr key is available.

	* wayland/ui_display.c:
	  Warning message in ui_display_move() is not output everytime but output only once.

2020-02-16  Araki Ken  <arakiken@users.sf.net>

	* ui_display.c: xsel_offer, shm, xsel_device and xsel_device_manager are
	  destroyed on exit.

2020-02-15  Araki Ken  <arakiken@users.sf.net>

	* ui.h, ui_display.c: WLR_SHELL_V1 is removed.

	* wlr-layer-shell-unstable-v1-client-protocol.[ch]: Removed.

2020-02-15  Araki Ken  <arakiken@users.sf.net>

	* gtk/Makefile.in:
	  xdg-shell-client-protocol.o is excluded from linked objects.

	* ui.h, ui_display.c: xdg-shell and wlr-layer-shell are supported.

	* xdg-shell-client-protocol.[ch], wlr-layer-shell-unstable-v1-client-protocol.[ch]: Added.

	* ui_selection.[ch], ui_screen.c:
	  - ui_start_selection() and ui_sel_line_scrolled_out() don't return
	    anything.
	  - update_sel_region() returns 1 only if the color of selected region
	    is reversed or restored.
	  - ui_{restore|reverse}_selected_region_color_except_logs()
	    returns 0 (not redrawing) instead of 1 if sel->end_row < 0.

	* sdl2/ui_display.c: SDL_DestroyRenderer() is called before
	  SDL_DestroyWindow() not after it.

2020-02-11  Araki Ken  <arakiken@users.sf.net>

	* hb.c, otf.c: hb_font_t / OTF is cached.

	* libotl/Makefile.in:
	  CFLAGS_beos = @FONTCONFIG_CFLAGS@ and LIBS_beos = @FONTCONFIG_LIBS@

	* beos/ui_font.c: ui_font_has_ot_layout_table() always returns 0
	  because HaikuOS doesn't provide API to show characters by glyph
	  indeces.

	* beos.cpp, beos.h:
	  - Declaration of ConnectDialog::Position() is fixed.
	  - MovePenTo(x, y) is changed to MovePenTo(x, y + 1) in drawing text.
	  - beos_get_font_path() -> beos_get_font_family()

	* main/Makefile.in: g++ is used to link mlterm on HaikuOS.

2020-02-09  Araki Ken  <arakiken@users.sf.net>

	* beos.cpp, beos.h: 'int geom_hint' is added to argument of window_alloc(),
	  and if geom_hint has XValue or YValue, x or y argument is applied to
	  the new window.

2020-02-06  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c:
	  - The response of Primary DA is changed as follows.
	    \x1b[?63;1;2;3;4;7;29c -> \x1b[?63;1;2;3;4;6;7;15;18;22;29c
	  - DEC_TECHNICAL characters are converted to UCS4.

	* ef_charset.h: IS_JIS_EXT() is added.

	* vt_char_encoding.[ch]: vt_convert_dectech_to_ucs() is added.

	* ui_window_cairo.c:
	  The number of characters passing to draw_string32() is fixed.

2020-02-01  Araki Ken  <arakiken@users.sf.net>

	* sdl2/ui_display.c:
	  - MONITOR_PTY is always defined if USE_LIBSSH2 is defined.
	  - monitor_ptys() calls select() at 0.5 second intervals.

2020-02-01  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_window.c: Memory leak in ui_window_send_selection() is fixed.

	* xlib/ui_imagelib.c: Minor fixes for debug mode.

	* ui_im_{candidate|status}_screen.c:
	  - #ifdef condition is fixed for SDL2.
	  - If display->resizing is true, draw_screen() does nothing.

	* sdl2/ui_dislay.c: init_display() supports input method window.

2020-01-29  Araki Ken  <arakiken@users.sf.net>

	* libptyssh/vt_pty_ssh.c: ssh_connect() calls mkdir("~/.ssh")
	  to save to ~/.mlterm/known_hosts.

	* ui_screen.c: set_xdnd_config() calls vt_set_use_scp_full(-1)
	  for "scp" command.

	* vt_parser.c: vt_set_use_scp_full(-1) sets use_scp_full = true
	  temporarily.

	* vt_pty_ssh.c: vt_pty_is_loopback() is replaced by
	  vt_config_menu_is_active() in vt_pty_ssh_scp().

	* vt_config_menu.h: vt_config_menu_is_active() is added.

	* beos.cpp:
	  - MLView::MouseMoved() saves the current "modifiers" if 'dragMessage'
	    argument is not null.
	  - MLView::MessageReceived() supports SCP by Shift+DnD.

	* mc_io.c, mc_io_file.c: vt_get_color_rgb() supports "lightgray" and "gray".

2020-01-26  Araki Ken  <arakiken@users.sf.net>

	* mc_io.[ch], mc_io_{file|pty}.[ch]:
	  - FD_SET() is called in mc_io_is_file().
	  - mc_{set|get}_color_name() => mc_{set|get}_color_rgb()
	  - mc_get_color_name_file() returns a value whose format is "#RRGGBB"
	    with the use of normalize_rgb().

2020-01-26  Araki Ken  <arakiken@users.sf.net>

	* mc_io_file.c:
	  - open_conf() checks MLTERM_CONFIG_DIR environmental variable.
	  - mc_{set|get}_font_name_file() and mc_{set|get}_color_name_file()
	    use open_conf().

	* bl_conf_io.c: bl_conf_write_close() writes data only if conf->num > 0.

2020-01-25  Araki Ken  <arakiken@users.sf.net>

	* mlconfig/main.c: If mlconfig start without options or with --file
	  option, it configures files in ~/.mlterm directly.

	* mc_io.[ch]:
	  mc_io_is_pty() -> mc_io_is_file().
	  mc_io_set_use_file() is added.

	* ui_layout.c: window_exposed() uses ui_layout_t.window.fg_color instead of
	  ui_layout_t.term.screen.window.fg_color

2020-01-24  Araki Ken  <arakiken@users.sf.net>

	* mc_color.c: Color names like "white", "back" and so on are converted
	  to RGB in mc_color_config_widget_new().

	* mlconfig/main.c: "Apply&Exit" and "Apply" buttons are hidden if
	  mc_io_is_pty() is false.

	* mlconfig/Makefile.in: mc_io_file.o and mc_io_pty.o are added to OBJ.

	* mc_io_file.c, mc_io_pty.c: Added.

	* mc_io.[ch];
	  - mc_io_is_pty() is added.
	  - Functions of mc_io_file.c and those of mc_io_pty.c are switched
	    according to the result of mc_io_is_pty().

	* README.ja, doc/en/PROTOCOL, gtk/README: Updated.

	* mlcc/main.c, w3mmlconfig/section/appearance:
	  "screen_height_ratio" is removed.

	* bl_str.[ch]:
	  bl_str_tabify() is enclosed by #ifndef REMOVE_FUNCS_MLTERM_UNUSE.

	* bl_conf_io.[ch]:
	  bl_fopen_with_mkdir() is not called from bl_conf_write_open() but
	  from bl_conf_write_close().

2020-01-19  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_font.c: xfont->ascent is modified. (for Pragmata Pro Mono)

2020-01-19  Araki Ken  <arakiken@users.sf.net>

	* vte.c, vtetypebuiltins.c, test.c, ui_scrollbar.c, win32/ui.h,
	  xlib/ui_dnd.c, xlib/ui_window.c, vt_iscii.c, vt_char.h:
	  Tab -> 2 spaces.

	* fb/ui_font.c:
	  - FONTSIZE_IN_FORMAT() macro is added.
	  - FONTSIZE_IN_FORMAT(font->xfont->format) is passed to
	    otl_convert_text_to_glyphs().

2020-01-18  Araki Ken  <arakiken@users.sf.net>

	* im_canna.c, ui_window_cairo.c:
	  https://sourceforge.net/p/mlterm/bugs/78/ is merged.

	* beos/ui.h, beos/ui_font.c: 'unsigned int size' is added to XFontStruct.

	* libotl/Makefile.in: 'TARGET_beos = libotl.la' is added.

	* mlclient/main.c:
	  https://sourceforge.net/p/mlterm/patches/25/attachment/typos.diff is merged.

2020-01-18  Araki Ken  <arakiken@users.sf.net>

	* uniscribe.o:
	  - Tab -> 2 spaces.
	  - glyphs = alloca(sizeof(WORD) * src_len)
	          -> alloca(sizeof(WORD) * num_shape_glyphs)
	  - if (num_filled_glyphs + range[0] <= num_shape_glyphs)
	    -> if (num_filled_glyphs + range[0] > num_shape_glyphs)

	* vt_ot_layout.c: vt_ot_layout_copy() which unexpectedly didn't set
	  dst->num_glyphs is fixed.

2020-01-13  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: 'buf' is declared at the beginning of the function
	  in vt_parser_write_modified_key().

2020-01-13  Araki Ken  <arakiken@users.sf.net>

	* vt_line.c: Compiling error in the case of disabling OpenType Layout
	  is fixed.

2020-01-13  Araki Ken  <arakiken@users.sf.net>

	* configure.in: uniscrible.o is preferred to otf.o on win32.

	* ui_window_cairo.c, ui_window_xft.c, win32/ui_window.c:
	  Trailing spaces aren't removed in drawing text if use_ot_layout is true.

2020-01-13  Araki Ken  <arakiken@users.sf.net>

	* configure.in: If harfbuzz is not found on win32, OT_LAYOUT_OBJ=uniscribe.o

	* libotl/uniscribe.c: Added.

	* */ui_font.c, ui_font.h:
	  - 'int is_awidth' is added to arguments of ui_calculate_char_width().
	  - 'int8_t *yoffsets' is added to arguments of ui_convert_text_to_glyphs().

	* win32/ui_font.c:
	  ui_font_has_ot_layout_table() doesn't call GetFontData() but delegates
	  it to libotl.

	* libotl/hb.c, libotl/otf.c, libotl/otl.h:
	  - 'int8_t *yoffsets' is added to arguments of otl_convert_text_to_glyphs().
	  - 'obj' argument of otl_open() is changed from font data to HDC on win32.

	* ui_draw_str.c:
	  - fc_draw_combining_chars() and xcore_draw_combining_chars() considers
	    vt_char_get_yoffset().
	  - ui_draw_str_to_eol() clears background before drawing text in TYPE_XCORE.

	* vt_char.[ch]:
	  - 'attr' bits are changed.
	  - 'is_awidth' is added to arguments of vt_char_set() and vt_char_combine().
	  - vt_char_is_awidth() is added.
	  - vt_char_get_offset() is renamed to vt_char_get_xoffset().
	  - vt_char_get_width() is renamed to vt_char_get_advance().
	  - vt_char_get_yoffset() is added.
	  - 'yoffset' is added to arguments of vt_char_set_position().

	* vt_screen.[ch]:
	  - 'is_awidth' is added to arguments of vt_screen_combine_with_prev_char().
	  - vt_screen_write_content() uses vt_str_new() instead of vt_str_alloca()
	    because log size might be too huge to succeed vt_str_alloca().
	  - vt_screen_write_content() calls vt_str_destroy().
	  - report_mouse_tracking() calls vt_line_convert_visual_char_index_to_logical()
	    if vt_line_is_using_ctl() is true.

	* vt_line.c:
	  - If vt_ot_layout() <= 0 and complex_shape or has_var_width_char was true,
	    the line is redrawn completely.
	  - vt_line_convert_visual_char_index_to_logical() supports ISCII and
	    OpenType Layout.

	* vt_logs.[ch]: vt_unlimit_log_size() calls vt_change_log_size() because
	  (logs)->unlimit = 1 after vt_change_log_size(0) didn't work.

	* vt_shape.[ch]: vt_shape_ot_layout() uses cached glyph info which
	  vt_ot_layout stores.

	* vt_ot_layout.[ch]:
	  - glyphs, xoffsets, yoffsets, advances and num_glyphs which store
	    the result of shape_func are added.
	  - The number of calling vt_ot_layout_shape() is decreased.
	  - OTL_IS_COMB() is added to determine whether shaped glyph should be
	    combined or not.

	* vt_term.c:
	  #ifdef USE_HARFBUZZ => #if defined(USE_HARFBUZZ) || defined(USE_UNISCRIBE)

	* vt_functbl_iscii.c, vt_line_iscii.[ch], vt_ctl_loader.h:
	  vt_line_iscii_convert_visual_char_index_to_logical() is added.

2019-12-07  Araki Ken  <arakiken@users.sf.net>

	* ui_main_config.c: Configuring bl_color and co_color is fixed.

2019-12-01  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: Not only "CSI>4;2m" but also "CSI>4;1m" (modifyOtherKeys)
	  is supported.

	* version.h: 3.8.9 -> 3.8.9post

2019-11-22  Araki Ken  <arakiken@users.sf.net>

	* 3.8.9 released.
	  (tag "rel-3_8_9")

	* configure.in, mlterm.spec, main/version.h.in,
	  mlterm.c, android/jni/version.h:
	  updated for 3.8.9.

	* README, doc/en/PROTOCOL, man/mlterm.1, man/mlclient.1, README.win32,
	  README.ja, etc/main, etc/main.ja: Updated.

2019-11-17  Araki Ken  <arakiken@users.sf.net>

	* README, README.ja, README.fb, doc/ja/README.ssh: Updated.

	* test.c:
	  TEST_sixel_realloc_pixels() is added.

	* c_sixel.c:
	  - realloc_pixels_intern() is fixed.
	  - TEST_sixel_realloc_pixels() is added.

2019-11-16  Araki Ken  <arakiken@users.sf.net>

	* zmodem.c: Compiling error on FreeBSD/pc98 is fixed.

2019-11-14  Araki Ken  <arakiken@users.sf.net>

	* ui_screen_manager.c: open_pty_intern() doesn't return 0
	  if the connection dialog is cancelled on haiku.

2019-11-11  Araki Ken  <arakiken@users.sf.net>

	* cocoa.m: EBADF of select() is ignored because
	  vt_pty_{ssh|mosh}_set_use_loopback() can cause it even if it's normal.

	* Android.mk: uitoolkit/test.c is added to LOCAL_SRC_FILES.

2019-11-09  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_dnd.c: TEST_dnd() outputs "PASS X DnD test".

	* ui_screen.c: "test" is added to OSC 5379 if BL_DEBUG is defined.

	* test.c: Added.

	* win32/ui.c:
	  - The order of keysym_table is fixed.
	  - main() -> TEST_xstringtokeysym().

	* ui_font_config.c:
	  - TEST_font_config() -> TEST_ui_font_config()
	  - ui_acquire_font_config() never calls BL_TESTIT_ONCE().

	* bl_path.c: main() -> TEST_bl_path().

	* bl_map.c: main() -> TEST_bl_map().

	* bl_args.c: main() -> TEST_bl_args().

2019-11-04  Araki Ken  <arakiken@users.sf.net>

	* libptyssh/vt_pty_ssh.c: write() => send() on win32.

2019-11-03  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.transfer: Added.

	* doc/en/PROTOCOL: Updated.

	* MLActivity.java: "Start zmodem" and "Reset terminal" are added to
	  the menu.

	* mlterm-menu/menu, mlmenu/menu-simple: "Zmodem" is added.

	* ui_main_config.c: --recvdir / "receive_directory" option is added.

	* ui_screen.c: If 'rz' command is executed on a remote host,
	  Shift+DnD invokes "zmodem_start" command instead of "scp".

	* ui_screen.c, ui_shortcut.[ch]: "RESET" shortcut key is added.

	* ui_dnd.c: Shift+DnD forces "scp" command instead of pasting a file path
	  even if its property is not "text/uri-list".

	* vt_parser.[ch]:
	  - If \x18B01 is received, vt_parser_t::is_zmodem_ready flag is set.
	  - "Send ..." or "Save in ..." message is output in starting zmodem.
	  - "recv_dir" => "receive_directory" (OSC 5380)
	  - The default "receive_directory" is changed from ~/.mlterm to ~/.mlterm/recv.
	  - "send_file_utf8" is added to OSC 5379 for internal use.
	  - "recv_dir" is removed from OSC 5379.
	  - "zmodem_start" works only if vt_pty_is_loopback() is false.
	  - vt_parser_reset() and vt_parser_has_pending_sequence() are added.
	  - vt_reset_pending_vt100_sequence() is removed.

	* vt_pty_ssh.c, vt_pty.h:
	  - The default directory where received files via scp are saved
	    is changed from ~/.mlterm/scp to ~/.mlterm/recv.
	  - recv_dir and progress_len are added to arguments of vt_pty_ssh_scp().

	* libptyssh/vt_pty_ssh.c:
	  - write(pty->slave) (write_loopback()) is called instead of
	    vt_write_to_pty() to output message directly to the screen.
	  - libssh2_scp_recv2() is used instead of libssh2_scp_recv().
	  - scp_thread() sets ssh_session_t::suspended = 2.

	* vt_pty_mosh.cpp: Text output from mlconfig or mlterm-menu etc when it
	  dies is stored.

	* vt_transfer.c: mkdir(savedir)

	* gtk/vte.c: vte_terminal_{set|get}_enable_bidi() and
	  vte_terminal_{set|get}_enable_shaping() (which are since 0.58) are added.

	* bl_config.h.in: _FILE_OFFSET_BITS and _LARGE_FILES macros are added.

	* baselib/configure.in: AC_SYS_LARGEFILE is added.

2019-10-16  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.[ch], ui_screen_manager.c: Fixes for the change of ui_layout_resize().

	* ui_layout.[ch]: size_str whose values are N, +N, -N or N% is added to
	  arguments of ui_layout_resize().

2019-10-14  Araki Ken  <arakiken@users.sf.net>

	* vt_transfer.c: Fix for android.

	* ui_font.c: Fix for win32.

2019-10-13  Araki Ken  <arakiken@users.sf.net>

	* vt_screen.c: vt_screen_resize() sets modified flag to lines
	  reverted from backlog to the main screen.

2019-10-13  Araki Ken  <arakiken@users.sf.net>

	* vt_screen.c: 'pack' is added to arguments of vt_screen_resize().

	* vt_logs.h: vt_log_rollback_index() is added.

	* ui_screen.c: ui_screen_scroll_event_listener_t::term_changed() is called
	  if vt_term_resize() returns 2.

	* baselib/src/Makefile.in: MAJOR.MINOR 2.0 -> 2.1

	* bl_cycle_index.[ch]: bl_cycle_index_rollback() is added.

2019-10-12  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c:
	  - If kbd_repeat_N is 0, prev_kev.type = 0 and kbd_repeat_wait = 0.
	  - If kbd_repeat_N is less than KEY_REPEAT_UNIT / 2, kbd_repeat_wait = 1.
	  - zxdg_toplevel_v6_set_app_id() is called.

2019-10-11  Araki Ken  <arakiken@users.sf.net>

	* c_sixel.c: Illegal copy in the case of
	  new_stride * new_height <= cur_stride * cur_height is fixed.

2019-10-10  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_font.c: If face->glyph->bitmap_left is less than 0,
	  bitmap at retreated area is skipped in get_ft_bitmap_intern().

	* xlib/ui_window.c: XSizeHints::base_{width|height} is fixed.

	* */ui_window.c, */ui_display.c:
	  total_{width|height}_inc() => max_{width|height}_inc()

	* ui_main_config.c: If DISPLAY environment variable doesn't exist,
	  DISPLAY=:0 is set.

	* main_loop.c: 'mlterm -j genuine' starts if X server is down.

	* win32/ui.c: XParseGeometry() doesn't change argument variables in
	  error of parsing.

2019-10-06  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui.h, wayland/ui_display.c:
	  Whether "text/plain;charset=utf-8" or "UTF8_STRING" is supported or not
	  is checked in data_offer_offer() and xsel_offer_offer().

	* wayland/ui_font.c: If the font name contains "bold" or "italic",
	  FT_Outline_Embolden() or FT_Outline_Transform() is not applied.

	* ui_font_config.c: Warning is output for invalid "DEFAULT_BOLD" etc.

2019-10-05  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c, wayland/ui.h:
	  - xdg_toplevel_close() invokes window_destroyed event.
	  - Primary selection is supported with the use of gtk-primary-selection.[ch].

	* wayland/gtk-primary-selection.[ch]: Added

2019-10-01  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_window.c: ui_window_get_str() converts keysym to utf8 string
	  with the use of ui_display_get_utf8().

	* wayland/ui_display.[ch]: ui_display_get_char() => ui_display_get_utf8()

	* ui_font.c: If the width of 'W' glyph is larger than face->max_advance_width,
	  xfont->width_full = the width 'W' glyph.

2019-09-29  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c: Copy&paste from other applications to mlerm-wl works.

	* wayland/ui_display.c: ui_display_show_root() calls wl_display_dispatch().
	  (Fix for 1) in https://sourceforge.net/p/mlterm/discussion/130836/thread/bc008c18db/#bb38)

	* mlconfig/po/Makefile.in: config.status is never called.

2019-09-28  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui.h, wayland/ui_display.c: xdg-shell is supported.

	* xdg-shell-unstable-v6-client-protocol.[ch]: Added.

2019-09-23  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_window.c: class_hint (WM_CLASS property) is passed to
	  XmbSetWMProperties() in ui_window_show().

	* vt_pty_mosh.cpp: Pass through sequence state of each Network::Transport
	  is saved in pass_seq_t.

2019-09-23  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_window.c: _NET_WM_PID is set.
	  (https://sourceforge.net/p/mlterm/patches/24/)

	* zmodem.c: q_screen_dirty is removed.

2019-09-22  Araki Ken  <arakiken@users.sf.net>

	* ui_display_wscons.c:
	  (fboffset + 0x40000) * _disp.depth => fboffset + 0x40000 * _disp.depth

2019-09-21  Araki Ken  <arakiken@users.sf.net>

	* ui_im_candidate_screen.c: ui_im_candidate_t::filled_len = 0
	  in case it is not 0.

2019-09-19  Araki Ken  <arakiken@users.sf.net>

	* doc/en/PROTOCOL: Updated.

	* win32/ui_xic.c:
	  Ctrl-^ is converted to 0x1e instead of 0x1d.

	* vt_parser.c:
	  "zmodem_send" and "zmodem_recv" are integrated to "zmodem_start"
	  and "zmodem_cancel" is added in vt_parser_exec_cmd().

	* vt_transfer.[ch]:
	  vt_transfer_cancel() is added.

	* zmodem.[ch]:
	  zmodem_cancel() is added.

	* vt_pty_mosh.cpp:
	  - Only zmodem packets are transferred via tcp connection.
	  - If MOSH_NO_TCP environmental variable is set, tcp connection is disabled.
	  - Ctrl-^ commands (Ctrl-. (quit) and Ctrl-, (reset)) are supported.

2019-09-01  Araki Ken  <arakiken@users.sf.net>

	* gdiplus.cpp: Uninitialized memory access in gdiplus.cpp is fixed.

2019-09-01  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_mosh.cpp: Pass through sequence via tcp connection is supported.

	* vt_parser.c: Minor improvement.

	* configure.in: Script to replace @UTMP_CFLAGS@ and @INSTALL_OPT@
	  is added to config.status.

2019-06-09  Araki Ken  <arakiken@users.sf.net>

	* ui_main_config.c: --sr / scroll_on_resizing option is added.

	* vt_edit.[ch]: vt_set_scroll_on_resizing() is added.

	* vt_model.c: vt_model_resize() sets vt_line_t::is_modified = 2.

2019-06-08  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: The length of progress bar of transferring data via
	  zmodem is vt_screen_get_cols() / 2 + 1.

	* zmodem.[ch]:
	  - 'progress_len' is added to arguments of zmodem_start().
	  - 'progress' argument of zmodem_is_processing() is changed to
	    'progress_cur' and 'progress_len'.

	* vt_transfer.[ch]:
	  - 'progress_len' is added to arguments of vt_transfer_start().
	  - 'progress' argument of vt_transfer_get_state() is changed to
	    'progress_cur' and 'progress_len'.

2019-06-08  Araki Ken  <arakiken@users.sf.net>

	* doc/en/PROTOCOL: Updated.

	* android/jni/ui_event_source.c, gtk/vte.c, java/MLTermPty.c,
	  ui_event_source-cocoa.m:
	  Seding data via zmodem is supported.

	* ui_event_source.c:
	  - Lock is added for HaikuOS.
	  - Sending data via zmodem is improved.

	* vt_term.[ch]:
	  - vt_term_write() does nothing if vt_parser_is_transferring_data() is true.
	  - vt_term_transfer_data() is removed.
	  - vt_term_is_sending_data() is added.

	* vt_parser.[ch]:
	  - vt_parser_transfer_data() is removed.
	  - vt_parser_is_sending_data() and vt_parser_is_transferring_data() are added.

	* vt_transfer.[ch]:
	  - NO_DYNAMIC_LOAD_TRANFER macro is added.
	  - vt_transfer_is_processing() -> vt_transfer_get_state()

	* zmodem.c: Win32 is supported.

	* sdl2/ui_display.c: The returned value of init_display() is checked in
	  ui_display_show_root().

	* ui_main_config.c: Invalidation of --mdi=false option is fixed.

2019-05-26  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_mosh.cpp: CSI?8800h is output only if pass_seq_get() returns
	  "\x1bP..." sequence.

	* ui_event_source.c: receive_next_event() calls vt_term_transfer_data()
	  in select(2) loop.

	* vtemu/Makefile.in:
	  - vt_transfer.o is added to OBJ.
	  - libzmodem.la is built from zmodem.c

	* vt_term.h: vt_term_transfer_data() is added.

	* vt_parser.c:
	  - zmodem is supported.
	  - vt_parser_transfer_data() is added.

	* vt_transfer.[ch], zmodem.[ch]: Added.

2019-04-27  Araki Ken  <arakiken@users.sf.net>

	* tool/servman/main.c: Compiling error is fixed.

2019-04-27  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1: Updated.

	* ui_font_manager.c:
	  The default value of max_font_size is changed from 100 to 10000.

	* vt_pty_mosh.cpp:
	  - sixel_get_drcs() => pass_seq_get()
	  - sixel_reset_drcs() => pass_seq_reset()

2019-04-21  Araki Ken  <arakiken@users.sf.net>

	* MLTermPty.java, MLTermPty.c:
	  waitForReading() returns 0, 1, or -1 instead of JNI_TRUE or JNI_FALSE.

	* MLTermPty.c:
	  vt_term_manager apis are enclosed by pthread_mutex_{un}lock().

	* java/Makefile.in: mlterm.o is compiled before compiling MLTermPty.so.

2019-04-20  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_display.c: Not only "nil2" font but also "fixed" is loaded
	  for XC_nil.

	* win32/ui_window.c: ui_window_set_cursor() supports XC_nil.

2019-04-19  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.[ch]:
	  - key_press() hides pointer, while pointer_motion() shows it.
	  - xterm_hide_cursor() is removed.

	* vt_term.h: vt_term_get_hide_pointer_mode() is added.

	* vt_parser.[ch]:
	  - hide_cursor is removed from vt_xterm_event_listener_t.
	  - Ps of "CSI > Ps p" is stored in vt_parser_t::hide_pointer_mode.
	  - vt_parser_get_hide_pointer_mode() is added.

2019-04-16  Araki Ken  <arakiken@users.sf.net>

	* README.mosh, README.console, README.win32: Updated.

	* win32/ui_font.c: ui_font_new() supports UTF8 encoding for 'fontname'
	  argument.

	* ui_main_config.c: "use_anti_alias" option is revived on win32gdi.

	* vt_char_encoding.c: The size of msb_set_cs_table[] is shrinked.

	* ui_font_manager.c: The size of usascii_font_cs_table[] is shrinked.

	* ef_jis_property.c: The size of jisx0213_2000_1_property_table[]
	  is shrinked.

	* baselib/configure.in: bl_dlfcn_dl.c instead of bl_dlfcn_win32.c is
	  used by default on msys2.

	* ui_screen.c:
	  - The returned value of draw_cursor(), flush_scroll_cache(),
	    redraw_screen(), highlight_cursor(), unhighlight_cursor() and
	    set_icon() is changed from int to void.
	  - screen->blink_wait is reset to -1 whenever key_pressed() is called.

2019-04-12  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_mosh.cpp: Memory leaks are fixed.

	* ui_event_source.c:
	  Fix https://sourceforge.net/p/mlterm/mailman/message/36633222/

2019-04-11  Araki Ken  <arakiken@users.sf.net>

	* README.mosh: Updated.

	* vt_pty_mosh.cpp:
	  - convert_utf8_to_ucs() and convert_ucs_to_utf8() are removed.
	    (moved to https://bitbucket.org/arakiken/mosh/src/tip/src/terminal/parser.cc?at=sixel-winsock)
	  - read_pty() uses sixel_get_drcs().

2019-04-03  Araki Ken  <arakiken@users.sf.net>

	* win32/ui_connect_dialog.c: "Mosh" checkbox of connect dialog
	  is disabled if NO_DYNAMIC_LOAD_SSH is defined.

	* baselib/configure.in: Check for $host_os = msys is added.

	* cocoatouch.m:
	  - IS_OPAQUE is always 1.
	  - clearsContextBeforeDrawing = NO.

	* winrs.rs, servman.rc:
	  The width of buttons of 'Protocol' groupbox is fixed.

	* version.h: 3.8.8 -> 3.8.8post

2019-03-31  Araki Ken  <arakiken@users.sf.net>

	* 3.8.8 released.
	  (tag "rel-3_8_8")

	* configure.in, mlterm.spec, main/version.h.in,
	  mlterm.c, android/jni/version.h:
	  updated for 3.8.8.

	* doc/en/PROTOCOL, man/mlterm.1: Updated.

2019-03-31  Araki Ken  <arakiken@users.sf.net>

	* gtk/README, libvterm/README: Updated.

	* vte.c:
	  - vte_terminal_set_colors() resets fg or bg color if 'foreground'
	    or 'background' argument is NULL and palette_size is 0.
	  - vte_set_test_flags(), vte_terminal_get_color_background_for_draw()
	    and vte_regex_substitute() symbols are added.

2019-03-29  Araki Ken  <arakiken@users.sf.net>

	* beos.cpp, sdl2/ui_display.c: Wheel mouse is supported.

2019-03-28  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_font.c: xfont->height is calculated by face->height instead of
	  face->max_advance_height.

	* sdl2/ui_display.c: SDL_WINDOWEVENT_EXPOSED is processed.

2019-03-26  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, etc/main, etc/main.ja: Updated.

	* ui_font_manager.c:
	  - The default value of min_font_size is changed from 6 to 1.
	  - The default value of max_font_size is changed from 30 to 100.

	* vt_pty_mosh.cpp: If select() in watch_ptys() fails, loop continues.

	* ui_event_source.c: Whether errno of select() is EINTR is checked.

	* ui_event_source-cocoa.m: Whether errno of select() is EAGAIN or EINTR
	  is checked.

2019-03-25  Araki Ken  <arakiken@users.sf.net>

	* README.android, README.sdl2, doc/en/README.ssh, doc/ja/README.ssh,
	  README.ja, etc/main, etc/main.ja, man/mlterm.1: Updated.

	* beos.cpp, sdl2/ui_display.c: Drag&Drop is supported.

	* cocoa.m: Command+Drag&Drop starts scp.

	* wayland/ui.h, wayland/ui_display.c: Shift+Drag&Drop start scp.

	* encodefilter/configure.in, encodefilter/module/Makefile.in:
	  ef_jis_property.lo is forcibly linked to libmef_jajp.so

	* bl_conf_io.c, im_iiimf_aux.c, daemon.c, vt_termcap.c: The return value
	  of bl_file_get_line() is regarded as NULL-terminated string.

	* bl_file.[ch]: bl_file_get_line() returns NULL-terminated string.

	* libctl/vt_iscii.c: ISCII tables except hindi.table are excluded.

2019-03-24  Araki Ken  <arakiken@users.sf.net>

	* sdl2/ui_display.c:
	  - KMOD_GUI => CommandMask in get_mod_state().
	  - SDL_KEYDOWN event in poll_event() calls ui_window_receive_event()
	    if state is CommandMask.

	* sdl2/ui.h: CommandMask is added.

	* ui_display_freebsd.c: All 8 bits of keymap.key[code].spcl are checked.

	* servman/Makefile.in, libotl/Makefile.in, libtype/Makefile.in:
	  INSTALL_OPT is removed.

2019-03-23  Araki Ken  <arakiken@users.sf.net>

	* Androkd.mk: Compiling error is fixed.

	* main.c: main_loop_final() is always called at exit.

	* bl_config.h.in: '#undef HAVE_STDINT_H' is added.

	* baselib/configure.in: The existence of stdlib.h is checked.

2019-03-22  Araki Ken  <arakiken@users.sf.net>

	* configure.in: @UTMP_CFLAGS@ in vtemu/Makefile.in is replaced.

	* ui.h, ui_window.c:
	  - UI_RESIZE event type is added.
	  - If UI_RESIZE event is received, clear_margin_area() is called.

	* beos.cpp: 'width' and 'height' of MLWindow::FrameResized(),
	  MLWindow::ResizeTo() and MLView::ResizeTo() are treated as
	  'right - left' and 'bottom - top'.

2019-03-21  Araki Ken  <arakiken@users.sf.net>

	* sdl2/ui_display.c: Compiling error is fixed.

	* main-con.c, console/ui_display.c:
	  Whether IMAXBEL is defined or not is checked.

	* */Makefile.in: -lX11 is removed.

	* configure.in:
	  - "-lX11" is set to X_LIBS if X is found.
	  - utmp is checked and INSTALL_OPT is set after executing ./configure
	    at subdirs.

	* c_sixel.c:
	  Segfault in handling errors in load_sixel_from_data() is fixed.

2019-03-20  Araki Ken  <arakiken@users.sf.net>

	* ui_window.c: expose() exposes all screen even if
	  win->update_window_flag is 0 and force_expose is 1.

	* beos.cpp, beos.h:
	  - force_expose is added to arguments of draw_screen().
	  - force_expose is added to arguments of view_update().

	* configure.in: "gui" => "$gui"

2019-03-19  Araki Ken  <arakiken@users.sf.net>

	* ui_simple_sb_view.c: Drawing down side shade is fixed.

	* bl_unistd.c: __bl_setenv() considers 'overwrite' argument.

2019-03-18  Araki Ken  <arakiken@users.sf.net>

	* java/Makefile.in: Updated to Java 10 or later.

	* mlterm.c: Compiling error is fixed.

2019-03-17  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_ssh.c: If libssh2_userauth_list() returns NULL but no error
	  happens, authentication is skipped.

	* README.ja: Updated.

	* im_iiimf_aux.c: Compiling error is fixed.

	* bl_util.[ch]: bl_base64_encode() is removed.

2019-03-17  Araki Ken  <arakiken@users.sf.net>

	* beos.cpp: Conflicting Control+a with B_HOME etc is fixed.

	* ui.h: 0xe0000 mask is set for XK_Home etc.

	* vt_util.[ch]: Removed.

	* bl_util.c:
	  - Added.
	  - bl_hex_decode(), bl_hex_encode() and bl_base64_decode() are moved
	    from vt_util.[ch].
	  - bl_hls_to_rgb() is moved from c_sixel.c.
	  ^ bl_rgb_to_hls() is moved from vt_parser.c (rgb_to_hls()).
	  - bl_get_user_name() is added.

	* bl_config.h.in: '#undef HAVE_GETPWUID' is added.

	* src/Makefile.in: bl_util.o is added to COMOBJ.

	* baselib/configure.in: The existence of getpwuid is checked.

2019-03-16  Araki Ken  <arakiken@users.sf.net>

	* bl_locale.c, mef.c, im_skk.c, im_wnn.c, mc_font.c, mc_radio.c,
	  ui_font_ft.c, ui_screen.c, ui_shortcut.c, win32/ui_font.c,
	  xlib/ui_font.c, vt_iscii.c, vt_shape_bidi.c, vt_char_encoding.c,
	  vt_termcap.c: Some array declarations are formatted.

2019-03-16  Araki Ken  <arakiken@users.sf.net>

	* ui_event_source-cocoa.m: If vt_check_sig_child() returns true,
	  ui_event_source_process() exits on cocoatouch.

	* vt_term_manager.[ch]:
	  vt_check_sig_child() is compiled if __APPLE__ is defined.

	* ef_euccn_parser.c: ef_get_ucs_property() is removed.

	* ef_jis_property.[ch]: 'size' is removed from arguments of
	  ef_get_jisx0208_1983_property() and ef_get_jisx0213_2000_1_property().

	* ef_jisx0208_1983_property.[ch], ef_jisx0213_2000_property.[ch]
	  => ef_jis_property.[ch]

	* ef_ucs4_jisx0213.c: ef_map_ucs4_to_jisx0213_2000_1() calls
	  ef_get_jisx0213_2000_1_property().

	* ef_ucs4_jisx0208.c: ef_map_ucs4_to_jisx0208_1983() calls
	  ef_get_jisx0208_1983_property().

	* encodefilter/module/Makefile.in: @EF_JIS_PROP_LO@ is added in linking libmef_jajp.la

	* encodefilter/configure.in: EF_JIS_PROP_LO is defined if
	  $allow_undefined_flag is "unsupported".

2019-03-16  Araki Ken  <arakiken@users.sf.net>

	* ui_event_source.c: If vt_check_sig_child() returns true,
	  receive_next_event() exits on Haiku.

	* vt_term_manager.[ch]: vt_check_sig_child() is added.

	* beos.cpp: Whether uiwindow is NULL or not is checked in
	  MLView::{Draw|KeyDown|MouseDown|MouseMoved|MouseUp}().

2019-03-16  Araki Ken  <arakiken@users.sf.net>

	* beos.cpp: beos_dialog_{password|okcancel|alert}() are implemented.

	* vt_pty_ssh.c: Compiling error on Haiku is fixed.

2019-03-14  Araki Ken  <arakiken@users.sf.net>

	* beos.cpp: MLView::cur_font, buttons and messenger are initialized.

2019-03-13  Araki Ken  <arakiken@users.sf.net>

	* beos.cpp:
	  - MLView::messenger is deleted in set_input_focus().
	  - Not only MLView::Draw() but also KeyDown(), MouseDown(), MouseMoved()
	    and MouseUp() check ((ui_screen_t*)uiwindow)->term.

2019-03-12  Araki Ken  <arakiken@users.sf.net>

	* beos.cpp: BRect::right and BRect::bottom are obtained by subtracting
	  1 from BRect:left + width and BRect::top + height.

	* c_sixel.c: Memory allocation is fixed.

	* ui_im_status_screen.c: "\x1b[?7l" is output to the status line.

	* ui_event_source.c: additional_fds is processed on SDL2.

	* beos/ui_imagelib.c: Unused code is removed.

	* beos.cpp: Segfault by unexpected NULL or non-NULL value of
	  MLView::messenger when a focused view is changed in inputting with ime.

2019-03-10  Araki Ken  <arakiken@users.sf.net>

	* beos/ui_imagelib.c: load_file() processes pic_mod.

	* beos.cpp, beos.h: beos_get_bits() is added.

2019-03-10  Araki Ken  <arakiken@users.sf.net>

	* ControlSequences, README.cocoa, README.cocoatouch: Updated.

	* ui_shortcut.c: The default value of INSERT_SELECTION is changed from
	  Shift+Insert to Command+v on MacOSX and iOS.

	* vt_parser.c: CSI ? 1010 h, CSI ? 1010 l, CSI ? 1034 h, CSI ? 1034 l,
	  CSI ? 1036 h and CSI ? 1036 l are supported.

	* quartz/ui_event_source-cocoa.m: Added.

	* quartz/ui_event_source.c: Removed.

	* ui_screen.c: preedit() which is set to ui_window_t::preedit is added.

	* sdl2/ui_display.c: update_ime_text() is moved to preedit() in ui_screen.c.

	* uitoolkit/Makefile.in: ui_event_source.o is moved from OBJ1 to OBJ2_*,
	  and ui_event_source-cocoa.o is added to OBJ2_quartz.

	* cocoa.[hm], cocoatouch.m:
	  - update_ime_text() is moved to preedit() in ui_screen.c.
	  - Almost all codes in monitor_pty() is moved to ui_event_source_process().
	  - cocoa_add_fd() and cocoa_remove_fd() are integrated to
	    ui_event_source_add_fd() and ui_event_source_remove_fd().

	* beos.cpp:
	  - update_ime_text() is moved to preedit() in ui_screen.c.
	  - beos_resize_image() is implemented.

	* */ui.h: UIWINDOW_SUPPORTS_PREEDITING is added.

2019-03-09  Araki Ken  <arakiken@users.sf.net>

	* ui_layout.c: term->next[0] and term->next[1] are destroyed before
	  destroying term in window_destroyed_intern().

	* ui_event_source.c: beos_lock() and beos_unlock() are called on Haiku.

	* quartz/ui_window.c: IS_XSCREEN() => IS_UISCREEN()

	* beos/ui_window.c:
	  window_dealloc() (which exits the current thread and never returns) is
	  placed at the end of ui_window_final().

	* beos/ui_display.c: ui_window_final() is moved after updating
	  disp->num_roots and disp->roots.

	* beos.cpp, beos.h:
	  - B_INPUT_METHOD_EVENT is processed in MLView::MessageReceived().
	  - beos_lock(), beos_unlock(), view_lock(), view_unlock(), window_lock()
	    and window_unlock() are added.
	  - LockLooperWithTimeout() is replaced by {window|view}_lock() in
	    MLWindow::Foo() and MLView::Bar()
	  - update_ime_text() is added.
	  - window_get_position() is implemented.
	  - window_get_orphan() is added for input method window.
	  - widow_move_resize() is removed and window_move() is added.

	* ui.h: XIM_SPOT_IS_LINE_TOP is defined.

2019-03-05  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.beos: Added.

	* configure.in: The value of INSTALL_OPT is always "-m 755" on BeOS (Haiku).

	* main-beos.cpp: "extern char *global_args" is removed.

	* beos.cpp:
	  - UI_KEY_FOCUS_IN event is triggered when BView::MakeFocus() is called.
	  - "char *global_args" is removed.

	* ui_main_config.c: The default value of "use_login_shell" option is
	  changed from 0 to 1 on BeOS (Haiku).

	* vt_pty.h: OPEN_PTY_ASYNC is always defined on BeOS (Haiku).

2019-03-04  Araki Ken  <arakiken@users.sf.net>

	* ui_screen_manager.c: Using uninitialized value is fixed.

	* ui_event_source.c: vt_get_all_terms() is called every time
	  in select() loop.

	* ui_imagelib.c:
	  - resize() is replaced by beos_resize_image().
	  - ui_destroy_image() is implemented.

	* beos.cpp, beos.h:
	  - view_visual_bell() and beos_load_image() are implemented.
	  - view_destroy_image() and beos_resize_image() are added.

	* configure.in, main/Makefile.in: BEOS_LIBS is removed.

2019-03-03  Araki Ken  <arakiken@users.sf.net>

	* main_loop.c: bl_alloca_garbage_collect() is called at the end of
	  main_loop_final().

	* gdiplus.cpp, beos.cpp: alloca() is removed.

	* vt_str_alloca() => vt_str_alloca() + vt_str_init().

	* vt_str.[ch]: __vt_str_init() is removed and vt_str_alloca() doesn't call it.

	* bl_arg_str_to_array() => bl_argv_alloca() + bl_arg_str_to_array().

	* bl_args.[ch]: bl_arg_str_to_array() is separated to
	  bl_argv_alloca() and bl_arg_str_to_array() in order not to
	  use alloca() in arguments of a function.

	* bl_sig_child.[ch]:
	  bl_sig_child_{init|suspend|resume}() => bl_sig_child_{start|stop}()

	* bl_conf.[ch]: char* => const char*

	* bl_def.h: #include <stdint.h> to check SIZE_MAX on Haiku R1 Beta1.

	* bl_str.c: bl_str_dup() => __bl_str_dup()

	* bl_str_alloca_dup() => alloca() + strcpy()

	* bl_men.h: bl_str_alloca_dup() is removed.

	* The return value of some functions is changed from int to void.

	* ui_screen_manager.c:
	  close_screen() calls close_screen_intern() directly.

	* beos.cpp, beos.h:
	  - MLView::SetFont() is added.
	  - MLWindow::Quit() is added.
	  - MLWindow::WindowActivated() and MLWindow::FrameResized() use
	    LockLooperWithTimeout() - UnlockLooper().
	  - view_set_clip(), view_unset_clip(), window_set_title() and beos_beep()
	    are implemented.
	  - view_draw_string() supports font->double_draw_gap.
	  - is_italic and is_bold are added to arguments of beos_create_font().
	  - beos_font_get_advance() supports characters >= 0x80.

	* beos/ui_font.c:
	  - ui_font_new() processes size_attr.
	  - ui_calculate_char_width() supports proportional fonts and
	    considers font->is_var_col_width.

	* beos/ui_window.c:
	  - need_pointer_motion_mask() is removed.
	  - window_dealloc() is placed at the end of ui_window_final() because
	    BWindow::Quit() in window_dealloc() exits the current thread.

	* beos/ui.h: XFontStruct::bfont is renamed to XFontStruct::fid.

	* uitoolkit/beos: Added. (The previous commit failed to add it.)

2019-02-23  Araki Ken  <arakiken@users.sf.net>

	* uitoolkit/beos: Added.

	* main/main-beos.cpp: Added.

	* configure.in: --with-gui=beos is added.

	* main/Makefile.in, uitoolkit/Makefile.in, skk/Makefile.in, kbd/Makefile.in:
	  *_beos are added.

	* ui.h: beos is added.

	* encodefilter/src/Makefile.in: MAJOR is changed from 2 to 3.

	* baselib/src/Makefile.in: MAJOR is changed from 1 to 2.

	* baselib/configure.in: The case of "$host_os" = "haiku" is supported.

	* delete (which is reserved keyword of C++) => destroy

	* quartz/cocoa.[hm], cocoatouch.m: The returned value of
	  cocoa_clipboard_own() is changed from int to void.

2019-02-17  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_window.c: Segfault in showing an input method window is fixed.

2019-02-09  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1: Typo is fixed.

	* wayland/ui_display.c: cache_damage_h() and cache_damage_v() works
	  if rotate_display = right.

	* sdl2/ui_display.c: ui_window_update_all() is called
	  if SDL_WINDOWEVENT_SIZE_CHANGED is received.

2019-02-04  Araki Ken  <arakiken@users.sf.net>

	* ui_draw_str.c: 'vt_char_cols == 0' => vt_char_is_zerowidth().

	* vt_char.[ch]: vt_char_is_zerowidth() is added.

	* vt_line_bidi.c: set_visual_modified() checks visual order properly.

	* vt_bidi.c: 'bidi_mode = BIDI_ALWAYS_LEFT' instead of
	  'fri_type == FRIBIDI_TYPE_LTR' for DEC_SPECIAL characters.

2019-01-27  Araki Ken  <arakiken@users.sf.net>

	* cocoa.m: CGLayer is used if MacOSX is 10.14 or later.
	  (See http://twitter.com/Cj_bc_sd/status/1088111309223161857)

	* cocoatouch.m: CGContextSetBlendMode(kCGBlendModeCopy) is added.

	* lex.split.c: Logging to stdout is removed.

	* bl_dlfcn_dl.c: Compiling warning is fixed.

2019-01-24  Araki Ken  <arakiken@users.sf.net>

	* README.indic: Updated.

	* etc/*font*: ISCII_* except ISCII_TAMIL are activated.

	* libind/Makefile.in: tamil.o is not built.

2019-01-20  Araki Ken  <arakiken@users.sf.net>

	* ui_font_ft.c:
	  - A font name which contains "-" is not passed to FcNameParse().
	  - FT_ENCODING_APPLE_ROMAN is not set for ISCII in xft_font_open() and
	    cairo_font_open().
	  - "drawn_x +=" => "drawn_x =" in show_text().
	  - Unexpected increment of a counter is fixed in ui_window_draw_string32().

	* ui_window_cairo.c:
	  - show_iscii() is added to show ISCII characters.
	  - flush_glyphs() is called when font->size_attr == DOUBLE_WIDTH.

	* ui_window_xft.c:
	  ui_window_xft_draw_string8() shows iscii characters by
	  FC_Get_Char_Index() and XftDrawGlyphs().

2019-01-15  Araki Ken  <arakiken@users.sf.net>

	* vt_line_bidi.c: If vt_bidi() returns 0 or less value and base_was_trl
	  is true, vt_line_set_modified_all(line) is called.

	* vt_bidi.c: If size == 0, return 0 instead of 1.

	* terminaldisplayinit.cc: Code formatting.

2019-01-14  Araki Ken  <arakiken@users.sf.net>

	* vt_config_menu.[ch], vt_parser.[ch], vt_pty.[ch], vt_pty_intern.h,
	  vt_pty_mosh.c, vt_pty_ssh.c, vt_term.[ch]:
	  vt_pty_ptr_t -> vt_pty_t *

2019-01-13  Araki Ken  <arakiken@users.sf.net>

	* README.mosh: Updated.

	* ui_event_source.c, ui_screen.c:
	  'vt_term_get_slave_fd() == -1' => 'vt_term_get_pty_mode() == PTY_SSH'

	* ui_main_config.c: If bl_get_lang() is not only "ja" but also
	  "Japanese" (on win32api), the default value of "col_size_of_width_a"
	  option is 2 instead of 1.

	* vt_term.[ch]: vt_term_get_slave_fd() is added.

	* vt_pty_mosh.cpp:
	  - If the value of "MOSH_AWIDTH" environmental variable is "2",
	    wcwidth() returns 2 for ambiguous width characters.
	  - win32api locale is changed to *nix locale as follows before sending
	    it to mosh-server.
	    Japanese.Japan => ja_JP.UTF-8
	    Chinese.Taiwan => zh_TW.UTF-8
	    Chinese.Hong Kong SAR => zh_HK.UTF-8
	    Chinese.China => zh_CN.UTF-8
	    Korean.Korea => ko_KR.UTF-8
	  - PTY_MOSH is set.

	* vt_config_menu.c:
	  - is_mosh is removed from vt_config_menu_t.
	  - config_menu->is_mosh is replaced by vt_pty_get_mode() == PTY_MOSH.

	* vt_parser.c:
	  - vt_parser_set_pty() modifies col_size_of_width_a if pty is mosh.
	  - set_col_size_of_width_a() does nothing if pty is mosh.

	* vt_pty_ssh.c: PTY_SSH is set.

	* vt_pty_pipewin32.c: PTY_PIPE is set.

	* vt_pty_unix.c: PTY_LOCAL is set.

	* vt_pty_intern.h: mode is added to vt_pty_t.

	* vt_pty.[ch]:
	  - vt_pty_mode_t is added.
	  - vt_pty_get_mode() is added.

2019-01-12  Araki Ken  <arakiken@users.sf.net>

	* README.mosh: Updated.

2019-01-10  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_ssh.c: vt_pty_ssh_set_pty_read_trigger() is added.

	* libptyssh/vt_pty_ssh.c: vt_pty_set_pty_read_trigger() is renamed to
	  vt_pty_ssh_set_pty_read_trigger().

	* vt_pty_mosh.cpp:
	  - 'static pthread_cond_t event_cond' is added to synchronize
	    the main thread and watch_ptys thread.
	  - wcwidth(), convert_utf8_to_ucs() and convert_ucs_to_utf8() are
	    added for terminal.cc, terminaloverlay.cc, parser.cc and
	    terminalframebuffer.h on win32.
	  - use_loopback() and unuse_loopback() support win32.
	  - Select of mosh-x.x.x/src/util/select.h is replaced by
	    select(2).
	  - final() calls unuse_loopback().
	  - vt_pty_mosh_set_pty_read_trigger() is added.

	* libptymosh/Makefile.in: select.o is removed from OBJ.

	* configure.in:
	  - If --with-mosh is specified on win32, ssh2 and mosh features are
	    built as modules.
	  - PKG_CHECK_MODULES(protobuf) is added.

	* version.h: 3.8.6 -> 3.8.7

2019-01-03  Araki Ken  <arakiken@users.sf.net>

	* libptymosh/Makefile.in: -lncursesw is removed.

	* libptymosh/terminaldisplayinit.cc: Added.

	* vt_pty_mosh.cpp: Warn if the value of "termtype" option is "kterm" or
	  "mlterm" which doesn't support bce.

2019-01-03  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_mosh.cpp: read_pty() is called within at least 500 msec to
	  show notification message such as "Last contact N seconds ago.".

	* README.android: The way of building mlterm for android is added.

2019-01-02  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.mosh: Added.

	* vt_pty_mosh.cpp:
	  - 'Overlay::OverlayManager *overlay' is added to vt_pty_mosh_t.
	  - The returned value of pty_mosh->display.open() is always returned
	    to the caller of read_pty().
	  - If the value of TERM environmental variable is not "xterm",
	    "rxvt", "kterm, "Eterm" or "screen", setenv("TERM", "xterm") forcibly
	    in order to enable to set window or icon title by OSC 0-2.
	  - MOSH_PREDICTION_DISPLAY environmental variable is supported.

	* ui_layout.c: When parent->next[0] or parent->next[1] is set,
	  parent->separator_x or parent->separator_y is also set.

2019-01-02  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, PROTOCOL: Updated.

	* ui_main_config.c: "local_echo_wait" / --lew option is added.

	* vt_parser.[ch]:
	  - vt_set_local_echo_wait() is added.
	  - "local_echo_wait" is added to OSC 5379-5383.

2018-12-31  Araki Ken  <arakiken@users.sf.net>

	* vt_config_menu.c:
	  - vt_pty_set_use_loopback() => vt_pty_{ssh|mosh}_set_use_loopback()
	  - is_mosh is added to vt_config_menu_t.

	* vt_pty.h: If USE_MOSH is defined, ssh2 specific functions are concealed

	* vt_pty_ssh.c: vt_pty_set_use_loopback() => vt_pty_ssh_set_use_loopback()

	* vt_pty_mosh.c: vt_pty_mosh_set_use_loopback() is added.

	* libptymosh/vt_pty_mosh.cpp:
	  - USE_LIBSSH2 and USE_MOSH are defined explicitly.
	  - vt_pty_mosh_set_use_loopback() is added.
	  - Dead lock is fixed in watch_ptys().
	  - If pty_mosh->initialized is false, pty_mosh->display.open() is
	    called in read_pty().
	  - vt_pty_t::slave is -2 instead of -1 to distinguish from ssh.
	  - Calculation of vt_pty_t::child_pid is fixed.

	* winrs.rs: The size of "Protocol" group box is fixed.

	* servman/main.c, servman/servman.rc:
	  - mosh protocol (IDD_MOSH) is supported.
	  - "://" is not regarded as a separator of path.

2018-12-29  Araki Ken  <arakiken@users.sf.net>

	* README.console, README.ja: Updated.

	* console/ui_display.c:
	  - The default value of dither_id is changed from BUILTIN_XTERM16 to BUILTIN_XTERM256.
	  - CSI?8452h or CSI?8452l is output.
	  - CSI?1;1;0S (XTCOLREQ) is output and the response of it is parsed in
	    receive_stdin_event() or ui_display_output_picture().

	* vt_parser.c: Typo is fixed.

2018-12-28  Araki Ken  <arakiken@users.sf.net>

	* console/ui_window.c: copy_area() checks if width == 0 or height == 0.

	* c_sixel.c: Rare segfault case is fixed.

	* */ui_imagelib.c: Pipe from mlterm to mlimgloader is removed.

	* console/ui_display.c: ui_display_output_picture() calls
	  sixel_dither_set_pixelformat() every time.

2018-12-23  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_mosh.cpp:
	  - "C.UTF-8" locale (which is the default value on cygwin) is ignored.
	  - Error message of locale setting by mosh-server is output.

	* bl_locale.c: If setlocale() fails, setlocale() is called again with
	  the previous locale.

	* configure.in: vtemu/libptymosh is placed after vtemu/libptyssh in
	  MAKE_DIRS and OUTPUT_FILES.

2018-12-23  Araki Ken  <arakiken@users.sf.net>

	* etc/key, mlterm.1, README.ja: Updated.

	* ui_screen.c: "%s" in "exesel:..." is replaced by selected strings.

2018-12-22  Araki Ken  <arakiken@users.sf.net>

	* vt_edit.c: If the size of a window decreases and some characters on it
	  disappear, it is cleared and all characters on it are scrolled out.

	* ui_window.c: total_min_{width|height}() doesn't consider
	  RIGHT_MARGIN and BOTTOM_MARGIN.

	* ui_layout.c: If the size of a root window becomes smaller than the
	  size of each child window, modify_separator() returns "total / 2".

2018-12-21  Araki Ken  <arakiken@users.sf.net>

	* README, README.ja: Updated.

	* vt_pty.c: vt_pty_new() calls vt_pty_mosh_new() instead of vt_pty_ssh_new()
	  if 'host' contains "mosh://".

	* vt_pty_ssh.c: read_pty() calls bl_trigger_sig_child() only if
	  libssh2_channel_read() returns 0 or less value.
	  (If libssh2_channel_eof() returns true and libssh2_channel_read() > 0,
	   bl_trigger_sig_child() is not called.)
	  This change is for mosh.

	* win32/ui_connect_dialog.[ch], winrs.rs: IDD_MOSH is added.

	* bl_path.c: bl_parse_uri() recognizes "mosh://".

	* configure.in: --with-mosh option is added.

	* vtemu/libptymosh: Added.

	* vt_parser.c: get_vtmode() returns 3 (permanently set) for
	  DECPCCM, DECATCUM and DECATCBM.

2018-11-23  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: Fix segfault by "CSI 21 t".
	  (https://sourceforge.net/p/mlterm/mailman/message/36472061/)

2018-11-18  Araki Ken  <arakiken@users.sf.net>

	* README.ja: Minor fixes.

	* mlconfig/po/*.po: Updated.

	* fb/ui_font.c, ui_font_ft.c: FcNameParse() is used.

	* ui_font_config.c: Parsing ';' and ',' for backward compatibility is fixed.

2018-11-05  Araki Ken  <arakiken@users.sf.net>

	* android/jni/ui_display.c: Even if the cursor moves slightly,
	  long click is assumed to continue.

	* version.h: 3.8.7 -> 3.8.7post

2018-10-27  Araki Ken  <arakiken@users.sf.net>

	* 3.8.7 released.
	  (tag "rel-3_8_7")

	* configure.in, mlterm.spec, main/version.h.in,
	  mlterm.c, android/jni/version.h:
	  updated for 3.8.7.

	* README, man/mlterm.1, libvterm/README, gtk/README, mlcc.1: Updated.

	* ui_font_config.c: ui_customize_font_file() resets font_config->font_name_table
	  if *value is '\0'.

2018-10-13  Araki Ken  <arakiken@users.sf.net>

	* ui_layout.c: The position of calling update_normal_hints() is fixed.

2018-10-12  Araki Ken  <arakiken@users.sf.net>

	* README, PROTOCOL, README.win32, README.ja, etc/main, etc/main.ja,
	  gtk/README, man/mlterm.1: Updated.

	* ui_screen.c: The restriction of the range of screen->underline_offset
	  is mostly eliminated.

	* ui_layout.c: total_hint_size() sets sizehint_flag of ui_screen_t and
	  ui_scrollbar_t.

	* ui_window.h, */ui_window.c:
	  - ui_sizehint_flag_t is added.
	  - ui_sizehint_flag is added to ui_window_t.
	  - total_min_{width|height}() and total_{width|height}_inc() use sizehint_flag.

	* vt_parser.c:
	  "switch" is available for the value of "col_size_of_width_a" of OSC 5379.

2018-09-23  Araki Ken  <arakiken@users.sf.net>

	* README.android, README.cocoatouch: Updated.

	* ui_screen.c: Minor changes about flick scrolling.

	* ui_font_manager.c: The default value of 'max_font_size' is changed from 40 to 50.

	* android/jni/ui_display.c: long_press_count == 15 (instead of 20) opens menu.

	* android/jni/ui_event_source.c:
	  - ((ui_screen_t*)win)->is_preediting is set in update_ime_text().
	  - need_resize() considers bottom margin correctly.

	* cocoa.m, cocoatouch.m, android/jni/ui_event_source.c, sdl2/ui_display.c:
	  If both preedit_text and cur_preedit_text are non-NULL and same value,
	  update_ime_text() does nothing.

2018-09-17  Araki Ken  <arakiken@users.sf.net>

	* Makefile.in: 'test' target is added for bitbucket pipelines.

2018-09-16  Araki Ken  <arakiken@users.sf.net>

	* README.console: Updated.

	* ui_screen.c: The place where enter_backscroll_mode() is called is moved.

2018-09-13  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: Segfault on Android in scrolling by flick is fixed.

2018-09-11  Araki Ken  <arakiken@users.sf.net>

	* cocoa/lipo.sh, mlterm-ios.app/Info.plist: Added.

	* ui_scrollbar.c: sb->current_row is reset in window_resized.

	* ui_screen.[ch]:
	  - grab_scroll is added to ui_screen_t.
	  - bs_scroll_upward() and bs_scroll_downward() are swapped in flick scrolling.

	* cocoatouch.m: Function keys are ingored in insertText().

	* android/jni/ui_event_source.c, cocoa.m, cocoatouch.m, sdl2/ui_display.c:
	  If vt_term_is_backscrolling() is true, update_ime_text() does nothing.

2018-09-09  Araki Ken  <arakiken@users.sf.net>

	* README.cocoatouch: Updated.

	* cocoatouch.m:
	  - AppDelegate_{iPhone|iPad} => AppDelegate
	  - UIWindow is manually allocated in AppDelegate::application().
	  - keyCommands() is implemented.

	* mlterm-cocoa.m: AppDelegate class is specified in calling UIApplicationMain().

	* mlterm-icon.app/mlterm-Info.plist, Makefile: Added.

	* mlterm-icon.app/Info.plist, MainWindow_{iPad|iPhone}.{nib|xib}: Removed.

2018-09-06  Araki Ken  <arakiken@users.sf.net>

	* configure.in: -mios-simulator-version-min option is added to $CC
	  on iOS SDK 5.0 or later.

	* cocoa/build-iossim43.sh: Renamed from build-iossim.sh

	* cocoa/build-ios43.sh: Renamed from build-ios.sh

	* cocoa/build-iossim71.sh, mlterm-ios.app/MainWindow_{iPad|iPhone}.xib: Added.

	* cocoatouch.m, vt_pty_unix.c: Minor fixes.

2018-09-03  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: Right key scrolls upward and left key scrolls downward
	  in scrolling mode.

2018-09-02  Araki Ken  <arakiken@users.sf.net>

	* README.android, doc/en/PROTOCOL: Updated.

	* ui_screen.[ch]:
	  - 'size' is added to arguments of bs_scroll_{up|down}ward().
	  - bs_{half_}page_{up|down}ward() are defined as macros instead of functions.
	  - flick_time, flick_y and autoscroll_count are added to ui_screen_t if
	    FLICK_SCROLL is defined.
	  - If screen->autoscroll_count != 0, idling() scrolls screen.
	  - "autoscroll" is added to ui_screen_exec_cmd().

	* */ui.h: FLICK_SCROLL which enables auto scrolling by flick is defined on
	  Android and iOS.

	* android/jni/ui_display.c:
	  - long_press_count == 20 (instead of 10) opens menu.
	  - The are of double click to show software keyboard is changed.
	  - Long press at the lower right corner instead of the entire screen
	    shows context menu.

	* android/jni/ui_event_source.c:
	  clock_gettime() is called to check if ui_display_idling() should be called.

	* cocoatouch.m: longpress.minimumPressDuration = 2.0.

2018-09-01  Araki Ken  <arakiken@users.sf.net>

	* ui_window.c, ui_screen_manager.c: Hack to keep window size is fixed.

	* main-cocoa.m: Application class instead of UIApplication is used.

	* cocoatouch.m:
	  - UITextInput protocol is implemented.
	  - Application class derived from UIApplication is added to receive all
	    keyboard input events.
	  - viewDidMoveToWindow => didMoveToWindow.

	* vt_pty_unix.c: Hack for iOS 4.3 is added.

2018-08-28  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.cocoatouch: Added.

	* main/Makefile.in: -framework Foundation -framework Cocoa => @COCOA_LIBS@

	* uitoolkit/Makefile.in: cocoa.o => @COCOAOBJ@

	* configure.in:
	  - --with-ios-sdk and --with-ios-arch are added.
	  - If --with-ios-sdk option is specified, COCOA_TOUCH macro is defined.

	* cocoa/build-ios.sh, build-iossim.sh, install-ios.sh, mlterm-ios.app: Added.

	* ui_screen_manager.c: New pty is opened in pty_closed() if pty is closed
	  and there is no pty.

	* main-cocoa.m, quartz/ui_font.c, ui_im_status_screen-cocoa.m,
	  quartz/ui_imagelib.c, quartz/ui_window.c: CocoaTouch is supported.

	* cocoatouch.m: Added.

	* cocoa.m: [super becomeFirstResponder] is called in becomeFirstResponder().

	* ui_main_config.c: The default value of type_engine option is always
	  TYPE_XCORE on platforms except xlib.

	* im_uim.c: Compiling error is fixed.

	* baselib/configure.in: Following checks are executed only if $host = $build.
	  AC_RUNIFELSE(posix_openpt), AC_TRY_RUN(calloc).

2018-08-04  Araki Ken  <arakiken@users.sf.net>

	* mc_font.c:
	  - gtkxlfdsel.c is included if GDK_WINDOWING_X11 is defined regardless
	    USE_<PLATFORM> macro defined by mlterm.
	  - select_xlfd_font() is called only if mc_get_gui() == "xlib".

	* main.c: char *gui; => const char *gui;

	* configure.in, tool/mlconfig/Makefile.in: XLFDSEL_OBJ is removed.

2018-08-03  Araki Ken  <arakiken@users.sf.net>

	* im_uim.c: uim_scm_is_initialized() is used to check if uim_init()
	  has been called.

2018-07-31  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* fb/ui_display_freebsd.c: PS2 mouse (/dev/psm0) and PC98 bus mouse
	  (/dev/mse0) are supported.

	* fb/ui_display.c: put_image_124bpp() is tuned up.

2018-07-23  Araki Ken  <arakiken@users.sf.net>

	* c_sixel.c: Sixel graphics extension which "sayaka --ormode on" outputs
	  is supported. (Disabled by default. #define SIXEL_ORMODE enables it.)

2018-07-22  Araki Ken  <arakiken@users.sf.net>

	* c_sixel.c: Sixel graphics extension and option1 of
	  https://github.com/kmiya-culti/RLogin/issues/22#issue-341758598
	  are supported.

	* vt_parser.c: Return value of CSI?1;Pa;PvS is changed from CSI?1;0;256S to
	  CSI?1;0;1024S.

	* MLTermPty.c: It is possible to load libgcc_s_sjlj-1.dll.

	* bl_pty_streams.c: #define __XSI_VISIBLE 600 forcibly for cygwin.
	  (see /usr/include/cygwin/stdlib.h)

	* uitoolkit/Makefile.in, servman/Makefile.in:
	  i686-w64-mingw32-windres.exe is used instead of windres.exe if $CC is
	  i686-w64-mingw32-gcc.exe.

	* aclocal.m4, ltmain.sh: Updated for Cygwin/x86_64.

	* configure.in:
	  - $host="msys" is supported.
	  - PKG_CHECK_MODULES(libssh2) is used instead of AC_CHECK_LIB(libssh2_init).
	  - AM_GLIB_GNU_GETTEXT is used instead of AM_GNU_GETTEXT.

	* mlconfig/po/Makefile.in.in: Simplified.

	* mlconfig/po/ChangeLog, LINGUAS, Makevars, Rules-quot, en@boldquot.header,
	  en@quot.header, insert-header.sin, quot.sed: Removed.

	* win32/mlterm.manifest: Added.

	* ui_screen.c:
	  - Hack for "microsoft-edge:" is added to shortcut_str().
	  - permit_exec_cmd() which checks ~/.mlterm/execlist to determine whether
	    "mlclient -e cmd" is permitted is added.

2018-07-02  Araki Ken  <arakiken@users.sf.net>

	* c_sixel.c:
	  - The number of palettes which load_sixel_from_data() supports is up to 1024.
	  - The palette number #1024 or greater is regarded as 15 bit RGB.

2018-06-30  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_imagelib.c: SIXEL_PALETTES_SIZE is used.

	* c_sixel.c:
	  - load_sixel_from_data() supports a maximum of up to 65536 palettes.
	  - SIXEL_PALETTES_SIZE macro is defined.

2018-06-17  Araki Ken  <arakiken@users.sf.net>

	* configure.in: m17nlib is checked by PKG_CHECK_MODULES().

	* mc_im.c: libim-*-sdl2.so is supported if gui is "sdl2".

	* ef_ucs_property.table: Updated to Unicode 11.0.0 (UnicodeData.txt and
	  EastAsianWidth.txt)

	* mlconfig/main.c: mc_im_init() is called in main() first of all.

	* mc_im.[ch]: mc_im_init() which calls get_im_info() is added.

2018-06-14  Araki Ken  <arakiken@users.sf.net>

	* win32/ui_connect_dialog.c: HOMEPATH environmental variable is ensured
	  before executing servman.exe.

	* version.h: 3.8.6 -> 3.8.6post

2018-06-12  Araki Ken  <arakiken@users.sf.net>

	* 3.8.6 released.
	  (tag "rel-3_8_6")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h:
	  updated for 3.8.6.

	* man/mlterm.1: Updated.

2018-06-12  Araki Ken  <arakiken@users.sf.net>

	* ui_screen_manager.c:
	  open_pty_intern() assumes that ui_connect_dialog() doesn't change
	  arguments except uri.

	* win32/ui_connect_dialog.c:
	  dialog_proc() checks selected_ssh_privkey before 'if (default_server)'.

	* xlib/ui_connect_dialog.c:
	  ui_connect_dialog() doesn't change 'pass' arguments if it fails.

	* android/jni/ui_connect_dialog.c:
	  ui_connect_dialog() doesn't set values to arguments except uri
	  if ui_display_show_dialog() fails.

2018-06-10  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_window.c: Compiling error is fixed.

	* gtk/Makefile.in: @LPOBL@ and @LMEF@ are used.

	* configure.in: contrib/scrollbar is copied to gui/ if multiple values separated
	  by ',' is specified as the value of --with-gui option.

	* libtype/Makefile.in:
	  LPOBL=${top_builddir}/baselib/src/libpobl.la => LPOBL=@LPOBL@

2018-06-09  Araki Ken  <arakiken@users.sf.net>

	* MLActivity.java:
	  - "SCP" is added to the context menu.
	  - onCreateDialog(2) creates SCP dialog.

	* android/jni/ui_event_source.c:
	  - Type of 'cmd' argument of Java_mlterm_native_1activity_MLActivity_execCommand()
	    is changed from jint to jstring.
	  - Java_mlterm_native_1activity_MLActivity_isSSH() is added.

	* libptyssh/vt_pty_ssh.c: Hack for libssh2_scp_send().

	* vt_pty_ssh.c: ~/.mlterm/scp directory is automatically created.

2018-06-09  Araki Ken  <arakiken@users.sf.net>

	* MLActivity.java: "Priv Key" entry is added to the connection dialog.

	* android/jni/ui_display.[ch]:
	  'char *privkey' is added to ui_display_show_dialog().

	* android/jni/ui_connect_dialog.c:
	  - 'char **privkey' is added to arguments of ui_connect_dialog().
	  - 'jstring privkey' is added to arguments of
	    Java_mlterm_native_1activity_MLActivity_dialogOkClicked().

	* vt_pty_ssh.c:
	  The default value of privkey and pubkey is changed from
	  /sdcard/.ssh/id_rsa(.pub) to /sdcard/.mlterm/id_rsa(.pub).

2018-06-07  Araki Ken  <arakiken@users.sf.net>

	* win32/ui_connect_dialog.c: DnD to "PrivKey" entry is supported.

2018-06-05  Araki Ken  <arakiken@users.sf.net>

	* ui_screen_manager.c:
	  ui_connect_dialog() can modify the value of main_config.private_key.

	* vt_pty_ssh.c: ssh_connect() passes NULL to libssh2_userauth_publickey_fromfile()
	  as 'publickey' argument.

	* winrs.rs: "PrivKey" entry is added.

	* win32/ui_connect_dialog.c:
	  - get_window_text() returns UTF-8 or MB text.
	  - set_window_text() which converts UTF-8 string to WCHAR* and calls
	    SetWindowTextW() is added.

	* ui_connect_dialog.h, */ui_connect_dialog.c:
	  - 'char **privkey' is added to arguments of ui_connect_dialog().
	  - IDD_SSH_PRIVKEY is added.

2018-06-02  Araki Ken  <arakiken@users.sf.net>

	* ui_draw_str.c: bg_xcolor is added to arguments of draw_picture(), and
	  if bg_xcolor is not NULL, ui_window_fill_with() is used instead of
	  ui_window_clear().

	* ui_screen.c: xterm_get_picture_data() uses vt_term_get_bce_ch() instead
	  of vt_sp_ch().

	* vt_parser.c: put_char() uses vt_term_get_bce_ch() instead of vt_sp_ch()
	  in dealing with DRCS-SIXEL.

	* vt_edit.h, vt_screen.h, vt_term.h:
	  vt_{edit|screen|term}_get_bce_ch() is added.

	* ui_screen.c, vt_parser.h: CS_BOX is added to vt_cursor_style_t, and is
	  used to draw an unfocused cursor or a cursor on a picture.

2018-06-01  Araki Ken  <arakiken@users.sf.net>

	* servman/main.c, servman.rc:
	  - IDM_XXX and IDD_XXX are changed from 1-28 to 101-128.
	  - Message dialog to confirm whether to save to a configration file is shown
	    if window is closed.
	  - Message dialog to confirm whether to really delete an entry is shown.
	  - Whether the edited name of a directory or an entry is valid or not is checked.

	* drcssixel/test.c: 2 sixel graphics are output.

2018-05-29  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, en/README.win32, ja/README.win32,
	  etc/main, etc/main.ja: Updated.

	* configure.in: tool/servman is added to OUTPUT_FILES and MAKE_DIRS
	  if $gui is "win32".

	* ui_main_config.[ch], ui_screen_manager.c:
	  - "server_list" option is removed.
	  - ui_main_config_add_to_server_list() is removed.

	* */ui_connect_dialog.[ch]:
	  - sv_list is removed from arguments of ui_connect_dialog().
	  - IDD_LIST is removed.

	* win32/ui_connect_dialog.[ch]:
	  - ui_connect_dialog() executes "servman.exe" if 'default_server'
	    argument is NULL or "?".
	  - IDD_LIST is removed.

	* winrs.rs: "List" combo box is removed.

	* tool/servman/*: Added.

	* ui_screen.c: Underline style cursor is shown on pictures.

	* main_loop.c:
	  -foo-*- as the value of "default_font" option is renamed to
	  -foo-*-iso10646-1 in applying it to "ISO10646_UCS4_1" font.

	* ui_font.c:
	  - XLoadQueryFont() and related code are collected to load_xfont_intern().
	  - AddStyleName in XLFD is always specified.

	* vt_config_menu.c: CREATE_NO_WINDOW => 0 in CreateProcess().

2018-05-23  Araki Ken  <arakiken@users.sf.net>

	* drcssixel.c: Fix http://twitter.com/ttdoda/status/998852239505604608

2018-05-12  Araki Ken  <arakiken@users.sf.net>

	* ui_display.c: dialog_cb() returns 1 or -1.

	* otf.c: Compiling error (when BL_DEBUG is defined) is fixed.

2018-05-10  Araki Ken  <arakiken@users.sf.net>

	* vte.c: Compiling error is fixed.

2018-05-07  Araki Ken  <arakiken@users.sf.net>

	* vt_screen.h: vt_screen_{set|get}_last_column_flag() are added.

	* vt_parser.[ch]:
	  - is_auto_wrap is removed from vt_storage_states_t, and last_column_flag is added.
	  - If restore_cursor() is called before save_cursor(), the cursor is moved
	    to the home position and all character attributes are turned off.
	  - CSI Ps1;Ps2;... t (Ps1 = 7, 11, 13, 14, 15, 16, 18, 19, 20, 21, 24) is accepted.

	* vt_edit.[ch]:
	  - vt_edit_{set|get}_last_column_flag() is added.
	  - scroll_upwrad_region() checks CURSOR_IS_INSIDE_HMARGIN().

	* vt_cursor.[ch]: is_saved flag is removed from vt_cursor_t.

2018-05-05  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, doc/ja/README.ja, etc/main, etc/main.ja: Updated.

	* ui_layout.c: key_pressed() calls ui_screen_t::key_pressed only if it is not NULL.

	* ui_main_config.[ch]: --rv / rv_color option is added.

	* ui_screen.c:
	  - "rv_color" is added to OSC 5379 and 5380.
	  - xterm_get_display_size() and xterm_lock_keyboard() are added.

	* ui_color_manager.[ch]: _REVERSE_COLOR is added to ui_color_manager_t::sys_colors.

	* vt_color.[ch]:
	  - VT_REVERSE_COLOR is added.
	  - prase_conf() calls vt_get_color_rgba() instead of vt_color_parse_rgb_name()
	    to get rgb of a specified value if color_name is not "rgb:...".

	* vt_parser.[ch]:
	  - ALT_COLOR_REVERSE is added to vt_alt_color_mode_t.
	  - put_char() considers ALT_COLOR_REVERSE.
	  - flush_buffer() doesn't clear buffer->last_ch if buffer->filled_len == 0.
	  - get_cell_size(), report_cell_size() and report_display_size() are added.
	  - resize() resizes a screen to the width or height of the display if width
	    or height argument is 0.
	  - width or height argument of resize() not to resize a screen is changed
	    from 0 to -1.
	  - get_fgbg_rgb(), get_special_color_name(), change_fgbg_color() and
	    reset_color_rgb() are added.
	  - get_rgb() returns RGB of alt colors.
	  - change_color_rgb() and change_special_color() support multiple parameters
	    separated by ';'.
	  - change_special_color() supports '?' which queries current setting.
	  - report_status() reports DECSCA status.
	  - get_vtmode() returns 4 (permanently reset) for GATM, SRTM, VEM, HEM,
	    PUM, FEAM, FETM, MATM, TTM, SATM, TSM and EBM.
	  - lock_keyboard is added to vt_xterm_event_listener_t, and KAM uses it
	    instead of vt_parser->pty_hook.pre_write = NULL.
	  - soft_reset() resets DECSC and DECSASD.
	  - full_reset() resets DECCOLM, tab stops, CSI>T and CSI>t.
	  - CSI 15 t, CSI 16 t and CSI 19 t are supported.
	  - The response strings of OSC 20 and OSC 21 are fixed.

	* vt_screen.[ch]:
	  - vt_screen_saved_cursor_to_home() is added.
	  - vt_screen_use_{normal|alternative}_edit() keeps the cursor position.
	  - vt_screen_set_status_line(screen, 1) moves the cursor position to home.

	* vt_edit.[ch]:
	  - vt_edit_set_{hv}margin() don't call vt_edit_goto(edit, 0, 0).
	  - vt_edit_set_hmargin() behaves same as vt_edit_set_vmargin() if beg or end
	    argument is -1.
	  - vt_edit_saved_cursor_to_home() is added.

	* vt_pty.c: pty->hook->pre_write is always non-NULL value if pty->hook is non-NULL.

	* vt_cursor.h: vt_saved_cursor_to_home() is added.

2018-04-27  Araki Ken  <arakiken@users.sf.net>

	* vt_screen.[ch]: vt_screen_get_checksum() is added.

	* vt_parser.[ch]:
	  - save_cursor() stores is_protected, is_relative_origin and is_auto_wrap, then
	    restore_cursor() restores them.
	  - OSC 4 returns "OSC ... ST" instead of "OSC ... BEL".
	  - The default values are set if 5, 6 and 7th parameters of DECCRA are omitted.
	  - The default value of Pch of DECFRA is '%'. (compat with xterm)

	* vt_edit.[ch]:
	  - apply_relative_origin() checks whether col/row/num_cols/num_rows
	    are within screen or not if edit->is_relative_origin is false.
	  - Corruption of vt_edit_delete_cols() if DECLRMM is fixed.
	  - vt_edit_scroll_leftward() is fixed.
	  - vt_edit_set_use_hmargin() ignores -1 value of 'use' argument.
	  - vt_edit_get_checksum() is added.

	* xlib/ui_font.c: If cairo_set_ot_font() fails, font->ot_font_not_found = 1.

	* hb.c: hb_ot_layout_has_substitution() is checked.

2018-04-21  Araki Ken  <arakiken@users.sf.net>

	* ui_scrollbar.c: If win->is_mapped is false, window_exposed() does nothing.

	* ui_im_{candidate|status}_screen.c, ui_screen.c: ui_window_flush() is called.

	* ui_window.[ch]: ui_window_flush() which works for cairo is added.

	* ui_window_cairo.c:
	  - Drawn glyphs are cached until cairo_flush() is called.
	  - ui_window_draw_string32() calls cairo_flush() if str argument is NULL.

	* mc_opentype.c: Compiling error is fixed if gtk+ version is less than 2.14.0.

2018-04-13  Araki Ken  <arakiken@users.sf.net>

	* vtetypebuiltins.c: vte_text_blink_mode_get_type() is added.

	* vte.c: vte_terminal_unselect_all(), vte_terminal_set_bold_is_bright(),
	  vte_terminal_get_bold_is_bright(), vte_terminal_set_cell_width_scale(),
	  vte_terminal_get_cell_width_scale(), vte_terminal_set_cell_height_scale(),
	  vte_terminal_get_cell_height_scale(), vte_terminal_set_text_blink_mode()
	  and vte_terminal_get_text_blink_mode() are added.

	* xlib/ui_color.c: ui_load_rgb_xcolor() considers alpha if depth == 32
	  and alpha < 0xff.

2018-04-01  Araki Ken  <arakiken@users.sf.net>

	* README.ja: Updated.

	* vt_pty.c: S_IFCHR of fstat() is used instead of ptsname().

	* ui_imagelib.c: If ui_display_is_changeable_cmap() returns true,
	  load_sixel_from_data_sharepalette() is not called.

	* fb/ui.h, fb/ui_display.c, ui_display_freebsd.c:
	  M_PC98_EGC640x400 on FreeBSD(98) is supported.

	* configure.in:
	  - Missing " is added.
	  - -DPC98 is added to GUI_CFLAGS if sysctl machdep.ispc98 returns 1.

2018-03-15  Araki Ken  <arakiken@users.sf.net>

	* ui_virtual_kbd.c: Compiling error is fixed.

	* vt_parser.c: "N%" is supported in OSC 1337.

	* configure.in: It is possible to specify multiple values for --with-gui option.
	  (e.g. --with-gui=xlib,sdl2,wayland,fb,console)

2018-03-12  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: xterm_get_picture_data() places image at the center of the
	  specified width and height if keep_aspect is true.

	* xlib/ui_imagelib.c:
	  - ui_imagelib_load_file() modifies *width and *height if keep_aspect is true.
	  - width and height of ui_imagelib_loada_file() are never NULL.

	* fb/ui_imagelib.c, console/ui_imagelib.c:
	  ui_imagelib_load_file() modifies *width and *height if keep_aspect is true.

2018-03-11  Araki Ken  <arakiken@users.sf.net>

	* ui_window_cairo.c: Memory leak of surface is fixed.

	* ui_font_ft.c: Double free when XftFontOpenPattern() succeeds is fixed.

	* ui_picture.[ch]: 'int keep_aspect' is added to arguments of ui_load_inline_picture().

	* ui_imagelib.h, */ui_imagelib.c:
	  'int keep_aspect' is added to arguments of ui_imagelib_load_file().

	* gdiplus.c, gdk-pixbuf.c, none.c:
	  mlimgloader [window id] [width] [height] [src file] ([dst file]|-c)
	  => mlimgloader [window id] [width] [height] [src file] (pixmap|stdout|[dst file]) -a

	* vt_parser.[ch], ui_screen.c: 'int keep_aspect' is added to arguments of
	  vt_xterm_event_listener_t::get_picture_data.

	* mlcc/main.c: The value type of "use_anti_alias" option is changed from
	  bool to string.

	* configure.in: 'libvterm' directory is copied to fb/ if --with-gui=fb,xlib

	* version.h: 3.8.5 -> 3.8.5post

2018-03-07  Araki Ken  <arakiken@users.sf.net>

	* 3.8.5 released.
	  (tag "rel-3_8_5")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h:
	  updated for 3.8.5.

	* README, README.sdl2, README.wayland, README.ja,
	  README.tate, PROTOCOL, man/mlterm.1:
	  Updated.

2018-03-06  Araki Ken  <arakiken@users.sf.net>

	* gtk/vte.c: vte_terminal_copy_clipboard_format() is added.

	* README.ja, mlterm.1: Updated.

	* vt_logs.[ch]:
	  - The value of 'logsize' option is automatically changed to 'unlimited'
	    if it is over 65535.
	  - VT_LOG_SIZE_UNIT is defined.

2018-03-04  Araki Ken  <arakiken@users.sf.net>

	* cocoa/install.sh: libotl.so -> libotl-quartz.so

	* cocoa.m: Compiling error is fixed.

	* MLActivity.java:
	  - showDialog() => showConnectDialog()
	  - showMessage() is added.

	* android/jni/ui_display.c: bl_dialog_set_callback(dialog_cb) is added.

2018-03-03  Araki Ken  <arakiken@users.sf.net>

	* libotl/Makefile.in, otl.h: Library name is changed from libotl to
	  libotl-win32 on win32api and to libotl-quartz on MacOSX/Cocoa in order
	  to coexist with libotl for sdl2.

	* fb/ui_font.c: get_cached_xfont() checks xfont->is_aa

2018-03-03  Araki Ken  <arakiken@users.sf.net>

	* vt_shape.c: vt_shape_ot_layout() does nothing for a character whose
	  charset is PICTURE_CHARSET.

	* sdl2/ui_display.c: Not only SDL_DestroyCond but also SDL_CondSignal()
	  is called in ui_display_close().

	* fb/ui_window.c: Fix illegal memory access in draw_string_intern().

	* sdl2/ui_imagelib.c: exec_mlimgloader() is added, and it works on win32api.

	* mlfc/main.c: FONTCONFIG_PATH environmental variable is set.

	* configure.in, registobmp/main.c: If SDL_ttf is not found, registobmp is
	  compiled without it.

2018-02-28  Araki Ken  <arakiken@users.sf.net>

	* vt_ot_layout.c: If 5 or more same usascii characters are repeated,
	  vt_ot_layout() doesn't call vt_ot_layout_shape().

	* ui_font.c: init_fontconfig() initializes FONTCONFIG_PATH environmental
	  variable if USE_WIN32API is defined.

	* mlfc/main.c: Compiling error is fixed.

2018-02-25  Araki Ken  <arakiken@users.sf.net>

	* ui_screen_manager.c: "No fonts" error message is shown by bl_dialog()
	  instead of bl_msg_printf().

	* sdl2/ui_display.c: Falling into infinite sleep in select() is fixed.

	* syswminfo.c: syswminfo_is_thread_safe() returns 0 on cocoa.

	* cocoa.m: create_dialog() checks if the current thread is main thread or not.

	* configure.in: It is possible to use fontconfig on SDL2/win32.

2018-02-25  Araki Ken  <arakiken@users.sf.net>

	* ui_shortcut.c: Control+F* shortcut keys => Command+F* on SDL2 / MacOSX.

	* sdl2/ui_display.c: SDL_DisplayMode::refresh_rate > 0 is checked before
	  calculating vsync_interval_msec.

	* inputmethod/*/Makefile.in: @SDL2_CFLAGS@ is added to include <SDL.h> from
	  ui.h correctly.

	* configure.in: Either AC_CHECK_HEADER(hb-ft.h) or AC_CHECK_HEADER(hb-coretext.h"
	  is executed if harfbuzz is enabled.

	* cocoa/install-sdl2.sh: Added.

2018-02-24  Araki Ken  <arakiken@users.sf.net>

	* sdl2/ui_display.c: SDL_CondSignal() is called after processing pty events.

2018-02-24  Araki Ken  <arakiken@users.sf.net>

	* README.fb, README.sdl2, README.wayland, README.win32: Updated.

	* sdl2/ui_display.c: init_display() specifies x and y position of SDL_Window.

2018-02-24  Araki Ken  <arakiken@users.sf.net>

	* sdl2/ui_display.c: pthread is replaced by SDL_thread.

	* fb/ui_connect_dialog.c: ui_get_opened_displays() is called instead of
	  ui_display_receive_next_event() on SDL2.

	* syswminfo.[ch]: Added.

	* MLTerm.java: MessageBox is removed from startMLTerm().

	* MLTermApplet.java: MessageBox is removed from run().

	* ConfirmDialog.java: 'boolean okcancel' is added to show().

	* MLTermPty.c: dialog_callback() supports BL_DIALOG_ALERT.

2018-02-22  Araki Ken  <arakiken@users.sf.net>

	* vt_term.c: "Failed to open pty" message is shown if vt_pty_new() fails.

	* sdl2/ui_display.c: bl_dialog_set_callback(dialog_cb) is added.

	* bl_util.h:
	  - K_{MAX|MIN} => BL_{MAX|MIN}
	  - BL_SWAP() is added.

2018-02-21  Araki Ken  <arakiken@users.sf.net>

	* sdl2/ui_display.c: Minor fixes.

2018-02-20  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c:
	  ui_display_rotate() does nothing after a display is opened.

	* sdl2/ui_display.c:
	  - disp->display->resizing = 1 in ui_display_resize(), and
	    disp->display->resizing = 0 in SDL_WINDOWEVENT_SIZE_CHANGED.
	  - ui_display_rotate() does nothing after a display is opened.

	* sdl2/ui_window.c: If win->disp->display->resizing is 1, ui_window_resize()
	  does nothing.

	* sdl2/ui.h: 'resizing' is added to Display.

2018-02-19  Araki Ken  <arakiken@users.sf.net>

	* sdl2/ui_window.c, sdl2/ui_display.c: Copy&paste with the use of
	  SDL_{Get|Set|Has}ClipboardText() is supported.

	* configure.in: Minor fixes.

2018-02-18  Araki Ken  <arakiken@users.sf.net>

	* sdl2/ui_display.[ch]:
	  - The timing of calling present_displays() is fixed.
	  - SDL_WINDOWEVENT_FOCUS_{GAINED|LOST} events are processed.
	  - ui_display_resize(), ui_display_move(), ui_display_set_maximized()
	    and ui_display_set_title() are implemented.

	* wayland/ui_display.[ch]:
	  - 'int flag' is added to arguments of ui_display_set_maximized().

	* sdl2/ui_window.c:
	  #if defined(USE_WAYLAND) || defined(USE_SDL2)
	  => #ifndef MANAGE_ROOT_WINDOWS_BY_MYSELF

2018-02-18  Araki Ken  <arakiken@users.sf.net>

	* sdl2/ui_display.c: SDL_TEXTEDITING event is processed, and preediting
	  text is shown.

	* vt_term.h, vt_parser.c: vt_term_preedit() is always compiled.

	* mlconfig/Makefile.in: Typo of LIBS2_win32 is fixed.

2018-02-18  Araki Ken  <arakiken@users.sf.net>

	* README, doc/{ja,en}/README.win32: Updated.

	* sdl2/ui_display.c:
	  - XKeyEvent::str and XKeyEvent::parser are set in poll_event().
	  - ui_display_logical_to_physical_coordinates() applies the position
	    of SDL_Window.

	* sdl2/ui_window.c:
	  ui_window_get_str() processes XKeyEvent::str and XKeyEvent::parser.

	* sdl2/ui.h: str and parser are added to XKeyEvent.

	* im_fcitx.c: ui_im_status_screen is used on sdl2.

2018-02-17  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.win32: Updated.

	* mlimgloader/Makefile.in: LIBS2_sdl2_gdiplus is added.

	* mlconfig/Makefile.in: bindir=@bindir@ is added.

	* mlterm-menu/Makefile.in: Typo is fixed.

	* sdl2/ui.h: <SDL.h> => <SDL2/SDL.h> (for inputmethod/*)

	* configure.in:
	  - PKG_PATH_TOOL(pkg-config) => PKG_CHECK_TOOL(pkg-config)
	    (This makes it unnecessary to specify an absolute path.)
	  - "tr -d '\r'" is removed.
	  - MLIMGLOADER_LIBS=gdiplus if $have_gdiplus = "yes" but $gui != "win32"

2018-02-16  Araki Ken  <arakiken@users.sf.net>

	* libptyssh/vt_pty_ssh.c, vt_pty.h: vt_pty_ssh_set_pty_read_trigger()
	  is renamed to vt_pty_set_pty_read_trigger().

	* vt_pty_pipewin32.c: PostThreadMessage(main_tid, WM_APP, 0, 0) is replaced
	  by (*trigger_pty_read)().

	* main.c, win32/ui_display.c: main_tid = GetCurrentThreadID() is moved
	  from main() to ui_display_open().

2018-02-16  Araki Ken  <arakiken@users.sf.net>

	* README, README.ja: Updated.

	* doc/en/README.sdl2: Added.

	* */Makefile.in: Target, flags or library for SDL2 is added.

	* configure.in: --with-gui=sdl2 is supported.

	* uitoolkit/sdl2: Added.

	* vt_pty.h, vt_pty_ssh.c: vt_pty_ssh_set_pty_read_trigger() is added.

	* ui_display.h, win32/ui_display.c, sdl2/ui_display.c:
	  ui_display_trigger_pty_read() is added if USE_WIN32API is defined.

	* ui_draw_str.c: xcore_draw_str() supports SDL2.

	* fb/ui_window.c:
	  draw_string_intern() doesn't call ui_display_get_pixel() as possible
	  even if -otl option is enabled.

	* fb/ui_imagelib.c:
	  mlimgloader is not executed if USE_WIN32API is defined.

	* fb/ui_font.c:
	  mmap and munmap are invalidated if USE_WIN32API is defined.

	* ui_event_source.c, win32/ui_display.c:
	  SetTimer() is called from ui_event_source.c to win32/ui_display.c.

	* ui_event_source.c: USE_WIN32API => NO_DISPLAY_FD

	* */ui.h: NO_DISPLAY_FD macro is defined (or undefined).

2018-02-03  Araki Ken  <arakiken@users.sf.net>

	* ui_draw_str.c, ui_font_cache.[ch], ui_font_manager.c,
	  ui_im_{candidate|status}_screen.c, ui_screen.c: xfont => uifont

	* fb/ui_window.c: Compiling error is fixed.

	* Android.mk: ui_emoji.c is added.

2018-01-30  Araki Ken  <arakiken@users.sf.net>

	* ui_window.c: 'is_var_col_width' argument is added to draw_string()
	  to distinguish it in drawing glyphs of true type fonts.

	* ui_font.c:
	  - IS_PROPORTIONAL() => HAS_POSITION_INFO_BY_GLYPH()
	  - enable_position_info_by_glyph() which adds 3 bytes position info
	    to each glyph.
	  - Position info is stored at the begining of glyph array instead of
	    at the end.

	* ui_font.h: 'y' argument of ui_get_bitmap_line() is changed to
	  'offset_bytes' (== y * xfont->glyph_width_bytes)

2018-01-27  Araki Ken  <arakiken@users.sf.net>

	* README.ja, man/mlterm.1, doc/en/PROTOCOL: Updated.

	* ui_screen.c: "emoji_path" is added to OSC 5379, 5380 and 5381.

	* ui_picture.c: ui_load_inline_picture() doesn't check if path exists.
	  (The caller should do it.)

	* ui_main_config.c: --emoji / emoji_path option is added.

	* ui_emoji.[ch]: Added.

	* c_imagelib.c: gdk_pixbuf_new_from_otf() which reads emoji fonts such as
	  NotoColorEmoji.ttf is added if USE_FREETYPE_EMOJI is defined.

	* vt_parser.c: Not only U+1F1000-1F6FF but also U+1F900-1F9FF characters
	  are treated as emoji.

	* fb/ui_font.c: Whether face->units_per_EM is 0 or not is checked.

	* win32/ui_font.c: Compiling error is fixed.

2018-01-20  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c:
	  - Searching unicode_noconv_areas, full_width_areas and half_width_areas
	    is improved.
	  - auto_detect_count => num_auto_detect_encodings

	* vt_char.c: Searching unicode_areas in vt_char_set() is improved.

2018-01-14  Araki Ken  <arakiken@users.sf.net>

	* PROTOCOL, README.ja, mlterm.1, etc/main, etc/main.ja: Updated.

	* ui_screen_manager.c:
	  "main_config.encoding = vt_term_get_encoding(screen->term)" is moved before
	  create_term_intern() in open_pty().

	* mc_char_width.c, mlconfig/po/*.po:
	  - "Set full width\nareas manually" is changed to "Add full width areas".
	  - "Add half width areas" button is added.

	* vt_parser.[ch]:
	  - vt_set_half_width_areas() is added.
	  - The char width of EF_AWIDTH property is determined in modify_ucs_property()
	    (called from vt_convert_to_internal_ch()) instead of put_char().
	  - "unicode_half_width_areas" is added to OSC 5379, 5380 and 5381.

	* ui_main_config.c: --halfwidth / "unicode_half_width_areas" option is added.

2018-01-13  Araki Ken  <arakiken@users.sf.net>

	* README.fb, README.comb: Updated.

	* doc/en/README.w3m: Removed.

	* vterm.c: Typo is fixed.

	* drcssixel/DRCS-SIXEL-v2: Moved from doc/en.

	* drcssixel/drcssixel.c, drcssixel/test.c: Added.

2018-01-10  Araki Ken  <arakiken@users.sf.net>

	* c_sixel.c: Memory allocation is improved.

2018-01-09  Araki Ken  <arakiken@users.sf.net>

	* ui_im_status_screen.c: If USE_STATUS_LINE is defined, DECSSDT/DECSASD
	  is used to show status characters.

2018-01-07  Araki Ken  <arakiken@users.sf.net>

	* ui_picture.c: cleanup_inline_pictures() checks DRCS-SIXEL.

	* vt_drcs.h: vt_drcs_has_picture() is added.

	* vt_pty.c: vt_pty_new_with() doesn't call vt_config_menu_init() if pty is NULL.

	* quartz/ui_imagelib.c: ui_imagelib_load_file() resizes a loaded image.

2018-01-06  Araki Ken  <arakiken@users.sf.net>

	* gdiplus.cpp: Sixel graphics is resized to specified width and height.

	* vt_parser.c: Minor fixes.

2018-01-06  Araki Ken  <arakiken@users.sf.net>

	* DRCS-SIXEL-v2: Updated.

	* vt_parser.c:
	  - define_drcs_picture() is added.
	  - "Pan;Pad;Ph;Pv is processed in receiving DRCS-Sixel sequence, and
	    image pieces is scaled according to Pcmw/Pcmh and Ph/Pv.

	* vterm.c: "Pan;Pad;Ph;Pv is output unless DRCS_SIXEL=old environmental
	  variable is defined.

2018-01-03  Araki Ken  <arakiken@users.sf.net>

	* DRCS-SIXEL-v2: Updated.

	* ui_font_config.c: ui_font_config_dump() outputs "_FULLWIDTH".

	* vterm.c: Pcmw and Pcmh in DECDLD are correctly set.

2018-01-02  Araki Ken  <arakiken@users.sf.net>

	* DRCS-SIXEL-v2, libvterm/README: Updated.

	* vterm.c: Adjusting vterm->drcs_charset and vterm->drcs_plane is placed
	  before DRCS-SIXEL sequence is output.

2018-01-01  Araki Ken  <arakiken@users.sf.net>

	* DRCS-SIXEL-v2: Updated.

	* vterm.c: col_size_of_width_a is 1 if locale is ja_XX.XX.

2017-12-31  Araki Ken  <arakiken@users.sf.net>

	* DRCS-SIXEL-v2: Updated.

	* vterm.c:
	  - q"%d;%d;%d;%d in sixel to be sent to terminal emulator as DRCS-Sixel is
	    skipped.
	  - 0x30-0x3f is accepted as vterm->drcs_charset.
	  - "DRCS_SIXEL_VERSION" environmental varaible is dropped and "DRCS_SIXEL=old"
	    is used.

	* vt_parser.c:
	  - 0x30-0x3f character set is accepted for drcs.
	  - Sixel sequence (in DRCS) which doesn't contain 'q' is accepted.
	  - "drcs_sixel_version" is dropped and "old_drcs_sixel" is added to OSC 5379-5381.

	* vt_drcs.[ch]: 0x30-0x3f character set is accepted.

	* ef_charset.h: The range of CS96SB_ID() is changed from 0x40-0x7e to 0x30-7e
	  to handle drcs correctly.

2017-12-31  Araki Ken  <arakiken@users.sf.net>

	* DRCS-SIXEL-v2: Updated.

	* vt_parser.c: 'font->pic_num_cols > 0' => vt_drcs_is_picture()

	* vt_drcs.[ch]:
	  - The position of 'return 0' is fixed.
	  - vt_drcs_is_picture() is added.

2017-12-30  Araki Ken  <arakiken@users.sf.net>

	* vterm.c: cell->attrs.reverse is set in vterm_screen_get_cell().

	* vt_parser.c: DRCS-Sixel is enclosed by #ifndef NO_IMAGE ... #endif.

2017-12-30  Araki Ken  <arakiken@users.sf.net>

	* vterm.c: xterm_get_picture_data() rejects files except sixel.

2017-12-30  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: If vt_parser->pty is NULL or not is checked in write_loopback()
	  because vt_term_write_loopback() in open_pty_intern() in ui_screen_manager.c
	  can be called when vt_parser->pty is NULL in connecting to ssh server.

	* vterm.c: default_fg and default_bg are the same as original libvterm.

2017-12-30  Araki Ken  <arakiken@users.sf.net>

	* vterm.c, ui_screen.c: RLogin way of calculating the number of columns
	  of sixel graphics image is changed from 'width / col_width' to
	  '(width + 1) / col_width'.

	* doc/en/DRCS-SIXEL-v2: Added.

2017-12-29  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.[ch], ui_screen.c: Unless ENABLE_OSC5379PICTURE is defined,
	  "show_picture" and "add_frame" are removed from OSC 5379.

	* vterm.c, ui_screen.c:
	  RLogin way of calculating the number of columns and rows of sixel
	  graphics image is changed from ({width|height} + 1) / col_{width|height}
	  to {width|height} / col_{width|height}.

	* c_sixel.c: char* => const char*

	* ef_iso2022_parser.[ch], ef_utf{16|32}_conv.[ch]:
	  The tyep of return value of ef_iso2022_parser_init_func() and
	  ef_utf{16|32}_conv_use_bom() is changed from int to void.

2017-12-25  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c:
	  - save_sixel_or_regis() is added.
	  - DRCS-Sixel sequence which rlogin originally supports is processed.
	  - If OSC 5379;drcs_sixel_version=2, cols and rows of DRCS-Sixel image
	    are rounded up.

	* vt_drcs.[ch]:
	  - vt_drcs_add_picture() and vt_drcs_get_picture() are added.
	  - 'vt_drcs_t *drcs' is added to arguments of vt_drcs_get_font(),
	    vt_drcs_final() and vt_drcs_final_full().

	* ui_screen.c, ui_screen_manager.c:
	  xterm_get_picture_data() returns num_cols_small and num_rows_small.

	* vterm.c:
	  - write_to_stdout() is added.
	  - xterm_get_picture_data() returns num_cols_small and num_rows_small.
	  - If the value of "DRCS_SIXEL_VERSION" environmental variable is "2",
	    num_cols and num_rows are rounded up.
	  - vt_convert_drcs_to_unicode_pua() and vt_convert_unicode_pua_to_drcs()
	    processes following extension.
	    U+10XXZZ (0x40 <= 0xXX <= 0x7E, 0xA0 <= 0xZZ <= 0xFF)
	    => ESC - SP <\xXX> <\xYY>

	* encodefilter/src/Makefile.in: MAJOR.MINOR 1.0 => 2.0

	* ef_charset.h: The range of CS94SB_ID() is changed from 0x40-0x6f to 0x40-0x7e
	  to handle drcs correctly.

2017-12-19  Araki Ken  <arakiken@users.sf.net>

	* vterm.c: Sixel graphics is supported with the use of sixel extension of
	  DRCS of rlogin.

	* mlterm.[ch]: mlterm_final() is added.

	* vt_parser.c: Wrong new buffer size in write_loopback() is fixed.

2017-12-15  Araki Ken  <arakiken@users.sf.net>

	* README.ja: Updated.

	* java/Makefile.in: vtemu/mlterm.o is built.

	* mlterm.[ch], MLTermPty.c: Java_mlterm_MLTermPty_nativeOpen() in MLTermPty.c
	  is separated to mlterm_open() in mlterm.[ch].

	* ef_utf32_parser.c: Illegal access to uninitalized memory is fixed.

	* configure.in: libvterm/Makefile is generated.

	* Makefile.in: vterm, install-vterm and clean-vterm targets are added.

	* libvterm/*: Added.

	* vt_termcap.c: vt_termcap_special_key_to_seq() returns "\x1b" for SPKEY_ESCAPE.

	* vt_parser.[ch]:
	  - write_loopback() changes behavior if pty is for libvterm or not.
	  - vt_parser_set_use_multi_col_char() is removed.

	* ui_screen.c, vt_parser.c: OSC 5379/5380 of "use_multi_column_char" is
	  processed in vt_parser.c instead of ui_screen.c.

	* vt_pty_ssh.c: vt_pty_ssh_keepalive() returns left time of keepalive.

	* version.h: 3.8.4 -> 3.8.4post

2017-12-02  Araki Ken  <arakiken@users.sf.net>

	* 3.8.4 released.
	  (tag "rel-3_8_4")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h:
	  updated for 3.8.4.

	* PROTOCOL, man/mlterm.1: Updated.

2017-12-02  Araki Ken  <arakiken@users.sf.net>

	* ui_font_ft.c: ISCII and ISO10646_UCS4_1 fonts are forced to be treated as
	  proportional.

2017-11-30  Araki Ken  <arakiken@users.sf.net>

	* doc/en/PROTOCOL, doc/en/README.fb, doc/ja/README.fb, README.ja: Updated.

	* vt_line.c: line->ctl_info.ot_layout->complex_shape and
	  line->ctl_info.ot_layout->has_var_width_char are checked.

	* vt_ot_layout.[ch]:
	  complex_shape and has_var_width_char are added to vt_ot_layout_state_t.

	* vt_shape.[ch]: IS_VAR_WIDTH_CHAR() is added.

	* hb.c: convert_text_to_glyphs() always sets glyph indexes in 'shaped'.

	* ui_screen.c: vt_line_unshape() is added before 'return 0' in draw_cursor().

	* ui_draw_str.[ch]: ui_calculate_mlchar_width() -> ui_calculate_vtchar_width()

2017-11-26  Araki Ken  <arakiken@users.sf.net>

	* MLTermPty.c:
	  vt_char_underline_style() and vt_char_is_crossed_out() => vt_char_line_style()

	* skk/dict.c:
	  - set_blocking() -> set_nonblocking()
	  - check_protocol_4() returns 0 if recv() returns error except EAGAIN.

2017-11-26  Araki Ken  <arakiken@users.sf.net>

	* vte.c: Return value type of vte_terminal_draw() is fixed.

2017-11-25  Araki Ken  <arakiken@users.sf.net>

	* quartz/ui_window.c, xlib/ui_window.c: ui_window_set_maximize_flag() supports
	  MAXIMIZE_HORIZONTAL and MAXIMIZE_VERTICAL.

	* quartz/cocoa.[hm]: window_move_resize() is added.

	* fb/ui_window.c: ui_window_set_maximize_flag() calls ui_display_set_maximized()
	  on wayland.

	* wayland/ui_display.[ch]: ui_display_set_maximized() is added.

	* ui_window.h, */ui_window.c: 'Window *child' is removed from arguments of
	  ui_window_translate_coordinates().

	* vte.c: vt_xterm_event_listener_t::xterm_resize is overridden by
	  xterm_resize() in vte.c which supports MAXIMIZE_FULL and MAXIMIZE_RESTORE.

2017-11-23  Araki Ken  <arakiken@users.sf.net>

	* ui_draw_str.c:
	  - LS_OVERLINE is processed.
	  - is_crossed_out and underline_style are united to line_style.

	* ui_im_{status|candidate}_screen.c:
	  Fixes of vt_char_set() and vt_char_combine() arguments.

	* inputmethod/*/*.c: Fixes of syms->vt_char_combine and syms->vt_char_set arguments.

	* vt_edit.[ch]:
	  - 53 and 55 of 'attr' argument of vt_edit_change_attr_area() are processed.
	  - Fixes of vt_char_set() arguments.

	* vt_parser.[ch]:
	  - is_crossed_out is removed from vt_parser_t and vt_storage_states_t.
	  - 'CSI 53 m' and 'CSI 55 m' are supported.

	* vt_char.[ch]:
	  - vt_underline_style_t -> vt_line_style_t
	  - LS_CROSSED_OUT and LS_OVERLINE are added to vt_line_style_t.
	  - vt_char_underline_style() -> vt_char_line_style().
	  - is_crossed_out is removed from arguments of vt_char_set() and vt_char_combine().
	  - is_overlined is added to arguments of vt_char_{change|reverse}_attr().
	  - vt_char_cols() returns 0 (not 1) just before vt_char_init().

	* fb/ui_imagelib.c: Minor fixes.

	* fb/ui_display.c: ui_cmap_get_pixel_rgb() returns 0 if specified pixel
	  is TP_COLOR on x68k.

	* fb/ui.h: COLOR_CACHE_MINIMUM is defined.

	* c_sixel.c: color_indexes[color] is used instead of color
	  if SIXEL_SHAREPALETTE is defined.

	* ef_charset.h: IS_ISO10646_UCS4 is moved from vt_char.h.

2017-11-21  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c, vt_parser.[ch]:
	  - 'int flag' is added to arguments of vt_xterm_event_listener_t::resize().
	  - "CSI 9;P1 t" is supported.

	* ui_window.h, */ui_window.c: ui_window_set_maximize_flag() is added.

	* console/ui_display.c: HAVE_GETTIMEOFDAY is considered.

	* c_sixel.c, c_imagelib.c: SIXEL_SHAREPALETTE works if USE_GRF is defined.

2017-11-19  Araki Ken  <arakiken@users.sf.net>

	* doc/en/ControlSequences: Updated.

	* vt_parser.c: "CSI ? 8452 h" is always set on status line.

2017-11-18  Araki Ken  <arakiken@users.sf.net>

	* win32/ui_window.c: WM_SYSKEYDOWN event of VK_OEM_XXX keys are ignored.

	* im_skk.c: sticky_shift_key is separated to sticky_shift_ch and sticky_shift_ksym.

	* quartz/ui_event_source.c, quartz/ui_scrollbar.c: Compiling error is fixed.

2017-11-15  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_window.c:
	  max_glyph_width is limited to font_width - font_x_off in draw_string_intern().

	* fb/ui_font.[ch]:
	  - Compiling error is fixed.
	  - ui_get_bitmap_width() and ui_get_bitmap_width_aa() are removed.

2017-11-14  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_imagelib.c:
	  - load_sixel_with_mask_from_file_1bpp() is enabled only if
	    BUILTIN_SIXEL macro is defined.
	  - load_file() tries load_sixel_from_data_sharepalette() if depth <= 8 and
	    pic_mod is normal.

	* c_sixel.c:
	  - load_sixel_from_data_sharepalette() is added if SIXEL_SHAREPALETTE macro
	    is defined.
	  - read_sixel_file() is added.

	* vt_parser.c:
	  "#0;9;%d;%d;%d" instead of "#0;2;%d;%d;%d" is added to sixel sequences.

2017-11-12  Araki Ken  <arakiken@users.sf.net>

	* c_sixel.c:
	  - Checking if width and height is changed is placed outside of realloc_pixels().
	  - The way of calculation of accessing address of 'pixels' array is changed.

	* ui_imagelib.c, vt_parser.c: Minor fixes.

2017-11-11  Araki Ken  <arakiken@users.sf.net>

	* skk/dict.c: dict_set_global() is fixed.

	* vt_edit.c: vt_edit_fill_area() applies bce fg/bg colors to a character to be filled.

	* vt_screen.[ch]: vt_screen_fill_area() is changed from a function to a wrapper macro
	  of vt_edit_fill_area().

2017-11-11  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: Parameter of SL and SR is regarded as 1 if omitted.

	* vt_edit.c:
	  - {copy|erase}_area() are used in vt_edit_scroll_{right|left}ward()
	    instead of vt_edit_{copy|erase}_area().
	  - The third argument of erase_area() is fixed in
	    vt_edit_scroll_leftward_from_cursor().

2017-11-11  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: DECSR is supported.

2017-11-10  Araki Ken  <arakiken@users.sf.net>

	* num_of_xxx -> num_xxx

2017-11-10  Araki Ken  <arakiken@users.sf.net>

	* vt_cursor.[ch]: Functions whose return values are not used return void.

	* vt_edit.[ch]:
	  - horizontal_tabs() moves cursor downward if edit->wraparound_ready_line is set.
	  - horizontal_tabs() checkes edit->hmargin_beg.
	  - vt_edit_set_{h|v}margin() move cursor to the top-left corner.
	  - vt_edit_set_use_hmargin() doesn't move cursor.

	* vt_screen.h, vt_parser.c: Minor fixes.

2017-11-05  Araki Ken  <arakiken@users.sf.net>

	* ui_im.h, ui_screen.c: write_to_status_line is added to ui_im_event_listener_t
	  if DEBUG is defined.

	* vt_screen.c: change_edit() calls vt_set_modified_all() only if both current
	  screen->edit and new edit aren't screen->status_edit.

2017-11-05  Araki Ken  <arakiken@users.sf.net>

	* vt_model.c: Whether vt_model_get_num_of_filled_rows == 0 or not is not checked
	  in vt_model_resize().

2017-11-05  Araki Ken  <arakiken@users.sf.net>

	* vt_edit.c: vt_edit_resize() moves cursor to the bottom line if cursor position
	  is outside of the screen after resizing.

	* vt_model.c: vt_mode_get_num_of_filled_rows() uses
	  vt_line_get_num_of_filled_chars_except_spaces() instead of vt_line_is_empty().

	* im_skk.c:
	  - cand_screen -> status_screen
	  - start_candidate is added to struct im_skk.

2017-11-05  Araki Ken  <arakiken@users.sf.net>

	* vt_screen.c: change_edit() changes screen->main_edit correctly.

	* vt_parser.c: vt_set_pty_winsize() is called in processing DECSSDT.

2017-11-04  Araki Ken  <arakiken@users.sf.net>

	* ControlSequences: Updated.

	* MLTermPty.c:
	  If vt_term_has_status_line() is true, window_scroll_upward_region() does nothing.

	* ui_picture.c: vt_term_get_rows() is placed before for(;;) instead of inside for(;;).

	* ui_screen.c:
	  - screen_height() considers if status line is shown or not.
	  - xterm_resize() converts 0 width or height to current width or height.
	  - xterm_get_window_size() returns window size excluding status line.

	* vt_term.h: vt_term_has_status_line() is added.

	* vt_parser.c:
	  - DECSSDT and DECSASD are supported.
	  - "CSI 4 t", "CSI 8 t", "CSI 14 t" and "CSI 18 t" ignores the height of status line.
	  - "CSI 4 t" and "CSI 8 t" allow omission of the third parameter.
	  - CPR, XCPR and DECCIR reports relative position if DECOM is set.
	  - DECSDM never considers DECOM.

	* vt_screen.c:
	  - vt_screen_has_status_line(), vt_screen_set_use_status_line(),
	    vt_status_line_is_focused(), vt_focus_status_line() and vt_focus_main_screen()
	    are added.
	  - Functions whose return values are not used return void.
	  - vt_screen_cursor_logical_{col|row}() are addded, and
	    vt_screen_cursor_relative_{col|row}() are removed.
	  - vt_screen_resize(), vt_screen_cursor_row(), vt_screen_cursor_row_in_screen(),
	    vt_screen_get_rows(), vt_screen_get_line() and vt_screen_get_line_in_screen()
	    considers status line.
	  - vt_get_logical_{cols|rows}() checks not only screen->logvis but also
	    screen->logvis->is_visual.

	* vt_edit.[ch]:
	  - Functions whose return values are not used return void.
	  - vt_edit_cursor_logical_{col|row}() are added, and vt_cursor_relative_{col|row}()
	    are removed.

2017-10-31  Araki Ken  <arakiken@users.sf.net>

	* ControlSequences, man/mlterm.1, README.ja: Updated.

	* mc_wordsep.c: ';' is replaced by '\x3b'.

	* mc_im.c:
	  - "Dictionary" and "Sticky shift key" entries are added to skk options.
	  - "Server" entry is added to wnn options.

	* mlconfig/main.c: USE_{XLIB|WIN32|QUARTZ} => strcmp(mc_get_gui(), "{xlib|win32|quartz}")

	* skk/dict.c:
	  - 'static int is_loaded' (renamed to global_is_loaded) is reset in dict_set_global().
	  - dict_set_global() always closes global_sock.

	* im_skk.c: 'char *engine' of im_skk_new() arguments is renamed to 'options', and
	  its format is changed from "[dictionary]" to
	  "dict=[dictionary],sskey=[sticky shift key]".

	* im_wnn.c: "--im wnn:[server]" option is supported.

	* ui_im.[ch]: XStringToKeysym() is added to ui_im_export_syms.

2017-10-24  Araki Ken  <arakiken@users.sf.net>

	* ControlSequences: Updated.

	* vt_parser.c: DECRQTSR is fixed.

2017-10-23  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: DECCIR, XCPR, DSR(Locator) and DECCKSR are fixed.

2017-10-22  Araki Ken  <arakiken@users.sf.net>

	* ControlSequences: Updated.

	* vt_parser.c:
	  - "CSI 34 [hl]" is supported.
	  - "CSI ? 9500 [hl]" is removed.

	* mc_opentype.c:
	  - strcasestr() is replaced by ascii_strcasestr() which is originally implemented.
	  - strcasecmp() is replaced by g_strcasecmp().

2017-10-22  Araki Ken  <arakiken@users.sf.net>

	* java/Makefile.in: 'sort -r' is added in creating manifest.mf.

	* ef_ucs4_*.c: Code formatting.

	* vt_parser.[ch]: "CSI ? Pm [rs]" is supported.

2017-10-21  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.[ch]:
	  - DECBBSM(CSI ? 116 [hl]), DECRQTSR(CSI 2 $ u), DECCTR(CSI 2;Pu $ u),
	    DECRQPSR(CSI $ w), DECSNLS(CSI * |), DECSTGLT(CSI ) {) and
	    DECRSPS(DCS Ps $ t D...D ST) are supported.
	  - If 1 bit flags of vt_parser_t is copied to int variable,
	    intvalue = vt_parser->xxx ? 1 : 0.
	  - DECRQSS supports DECSTGLT, DECSCPP, DECSLPP, DECSNLS, DECAC and DECATC.
	  - Corrupt response of XCPR is fixed.
	  - Corruption of TBC (CSI g), CTC (CSI W) and DECATC(CSI ,}) is fixed.
	  - use_ansi_color is added to arguments of vt_parser_new().
	  - bold_affects_bg and use_ansi_color are added to vt_parser_t.
	  - vt_set_use_ansi_colors() is removed.

	* vt_edit.[ch]:
	  - vt_edit_is_tab_stop() is added.
	  - vt_edit_set_{relative|absolute}_origin() => vt_edit_set_relative_origin().

	* vt_color.[ch]: vt_color_force_linear_search() is added.

	* ui_main_config.[ch]: use_ansi_color is added to ui_main_config_t.

	* doc/en/ControlSequences: Added.

2017-10-14  Araki Ken  <arakiken@users.sf.net>

	* ui_brltty.c: bl_priv_change_e{u|g}id() are called if brlapi_openConnection() fails.

2017-10-12  Araki Ken  <arakiken@users.sf.net>

	* mc_click.[ch], mc_opentype.[ch]: Added.

	* mc_flags.[ch]: MC_FLAG_TRIMNEWLINE and MC_FLAG_BROADCAST are added.

	* mc_space.[ch]: MC_SPACE_BASELINE and MC_SPACE_UNDERLINE are added.

	* vt_term.c: "ot_features" and "ot_script" are added to OSC 5380 and 5381.

	* vt_ot_layout.[ch]: vt_get_ot_layout_attr() is added.

	* mlconfig/po/*.po: Updated.

2017-10-11  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_font.c: "#include FT_OUTLINE_H" is added.

	* fb/ui_window.c: Compiling error is fixed.

2017-10-11  Araki Ken  <arakiken@users.sf.net>

	* ef_johab_conv.c, ui_main_config.c, man/mlterm.1:
	  https://sf.net/p/mlterm/patches/_discuss/thread/f5dc445d/0fc3/attachment/fix_spelling.diff
	  is merged.

2017-10-09  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.ja: Updated.

	* main_loop.c: The return value of ui_screen_manager_init() is checked.

	* ui_screen.c: "click_interval" is added to OSC 5379, 5380 and 5381.

	* ui_font.h, */ui_font.c:
	  - ui_font_t::cols member is removed.
	  - ui_change_font_cols() is removed.

	* */ui_window.[ch]: ui_get_click_interval() is added.

	* ui_font_manager.[ch]:
	  ui_set_use_multi_col_char() and ui_is_using_multi_col_char() are removed.

	* ui_font_cache.[ch]:
	  - ui_font_cache_unload() reuses font_cache->usascii_font
	    after failure of init_usascii_font().
	  - ui_font_cache_t::use_multi_col_char is removed.

	* ui_main_config.c: The default value of "use_vertical_cursor" option is
	  changed from "false" to "true".

	* ui_sb_view_factory.[ch]: const modifier is added to 'name' argument of
	  ui_{transparent_}sb_view_new() and ui_unload_scrollbar_view_lib().

	* vt_parser.c:
	  - DECSCPP and DECSLPP are supported.
	  - "CSI [ 7 t" executes "update_all" of OSC 5379.

	* *.[ch]: Functions whose return values are not used return void.

2017-10-02  Araki Ken  <arakiken@users.sf.net>

	* doc/en/PROTOCOL: Updated.

	* ui_screen.c:
	  - draw_cursor() checks if cursor position is outside of the screen or not.
	  - report_mouse_tracking() considers vertical mode.
	  - "use_vertical_cursor" is added to get_config_intern() and ui_screen_set_config().

	* ui_window.c:
	  - Whether glyph width exceeds ui_get_bitmap_width()/ui_get_bitmap_width_aa()
	    or not is checked

	* fb/ui_font.h:
	  - ui_get_bitmap_width() is renamed to ui_get_bitmap_width_aa().
	  - ui_get_bitmap_width() which is for not anti aliased fonts is added.

	* fb/ui_font.c:
	  - width and width_full of XFontStruct have equal value if there is no full
	    width glyph.
	  - load_glyph() keeps face->glyph->format of FT_Load_Glyph().
	  - FT_Set_Transform() in load_ft() => FT_Outline_Set_Transform() in load_glyph()
	  - is_rotated_char() returns 1 if ch is 0xff08-ff09, 0xff0d, 0xff1a-ff1e, 0xff3b,
	    0xff3d, 0xff5b-ff5e or 0xff62-0xff63.
	  - is_right_aligned_char() is added.

	* ui_font.h: FONT_VERTICAL => FONT_VERT_RTL and FONT_VERT_LTR.

	* MLPreferenceActivity.java:
	  - list.setValueIndex() is called in addList().
	  - "Vertical cursor" checkbox is added.

	* android/jni/ui_event_source.c: config_listener->set is called between
	  pthread_mutex_{un}lock() in
	  Java_mlterm_native_1activity_MLPreferenceActivity_setConfig().

2017-09-28  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c: 'capabilities' event of wl_seat_listener is handled.

	* ui_im_{status|candidate}_screen.c:
	  ui_font_manager is newly created if terminal screen is vertical mode
	  and USE_REAL_VERTICAL_FONT macro is defined.

	* fb/ui_font.c:
	  - FONT_ROTATED is defined as (FONT_ITALIC << 1) internally and
	    XFontStruct::format contains its bit.
	  - load_glyph() rotates glyphs if format has FONT_ROTATED bit.
	  - is_rotated_char() is added.
	  - 'ch' which contains unicode code point is added to arguments of
	    get_ft_bitmap_intern().

	* */ui.h: USE_REAL_VERTICAL_FONT macro is added.

	* version.h: 3.8.3 -> 3.8.3post

2017-09-23  Araki Ken  <arakiken@users.sf.net>

	* 3.8.3 released.
	  (tag "rel-3_8_3")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h:
	  updated for 3.8.3.

	* PROTOCOL, man/mlterm.1: Updated.

2017-09-22  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: DECRQM reports SPKEY_BACKSPACE setting of vt_termcap_t
	  instead of vt_parser_t::vtmode_flags for DECBKM.

2017-09-21  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c:
	  - SHIFT_FLAG64 macro is added.
	  - initial_vtmode_flags() is changed to INITIAL_VTMODE_FLAGS macro.
	  - RIS(ESC c) moves cursor to the upper left.

2017-09-19  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.[ch]:
	  - VTMODE_20 macro and vt_parser_t::auto_cr are added to support LNM.
	  - Cursor is moved to left-upper cell by DECOLM.
	  - INITIAL_VTMODE_FLAGS macro is changed to initial_vtmode_flags() function
	    to process 64bit shift properly.
	  - soft_reset() resets options via set_vtmode().

2017-09-18  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: get_config_intern() supports "fontconfig" which dumps
	  current font settings.

	* ui_font_manager.h: ui_font_manager_dump_font_config() is added.

	* ui_font_config.[ch]:
	  - ui_get_all_config_font_names() => ui_get_config_font_names_all()
	  - ui_font_config_dump() is added.

	* vt_char.[ch]: vt_get_unicode_area() is added.

	* vt_font.h:
	  - FONT_WITHOUT_SIZE_ATTR() is removed.
	  - HAS_UNICODE_AREA() => UNICODE_AREA()

	* MLActivity.java: String {resume|pause}Native() => void {resume|pause}Native()

2017-09-17  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: Common processing in get_spot() and get_im_spot() is separated to
	  get_spot_intern().

	* console/ui_font.c, console/ui_window.c:
	  - White spaces are inserted between ASCII characters in vertical mode.
	  - scroll_region() can scroll screen leftward or rightward.

	* vt_term.c: NOT_CONVERT_TO_ISCII macro which is defined on console and cocoa
	  disables CONVERT_UNICODE_TO_ISCII.

	* cocoa.m:
	  - cand_x and cand_y which stores the initial position of preediting
	    to determine the position of candidate window are added to MLTermView.
	  - font->x_off is reflected in drawUnistr().
	  - ui_screen_t::is_preediting = 1 in preediting.

	* quartz/ui_font.c: font->x_off is set in vertical mode.

	* im_fcitx.c: Alt+Backspace => Alt+Control+h, Control+[ => Escape in key_event().

	* */ui_display.c, fb/ui_display_*.c: Pressing alt key sets Mod1Mask instead of ModMask.

	* fb/ui_display_freebsd.c: XButtonEvent::button is set if event type is ButtonRelease.

	* wayland/ui_display.c:
	  - "if (!display->buffer)" is added to ui_display_copy_lines().
	  - XButtonEvent::button is set if event type is ButtonRelease.

	* ui_im_{candidate|status}_screen.c:
	  - ui_window_t::disp::display::parent is used to get size of the
	    display on wayland.
	  - "cand_screen->num_of_candidates > 0" is checked before calling draw_screen()
	    in window_exposed().

	* vt_logical_visual.c: Modified area conversion from logical to visual in
	  vert_visual_intern() is fixed.

2017-09-12  Araki Ken  <arakiken@users.sf.net>

	* ui_im_candidate_screen.c: Unexpectedly wide candidate screen in vertical mode
	  is fixed.

	* ui_im_status_screen.[ch]:
	  - Calculating screen width is fixed.
	  - head_indexes[11] => head_indexes[15]

	* im_fcitx.c: candidateword is split to multiple lines in update_client_side_ui().

	* libtype/ui_font_ft.c: get_fc_col_width() never returns 0 if font->is_vertical
	  is true on xft.

	* ui_screen_manager.c: width_pix and height_pix are modified by
	  ui_screen_t::screen_width_ratio in open_pty_intern().

	* ui_screen.[ch]:
	  - ui_screen_t::{width|height} are added.
	  - ui_screen_t::screen_width_ratio is removed.

	* vt_term.c: vt_term_open_pty() doesn't swap width_pix and height_pix
	  in vertical mode.

	* fb/ui_font.c: Whether FT_LCD_FILTER_H is defined or not is checked.

	* mlconfig/main.c, mc_ratio.c: "Screen ratio against font size - Width"
	  is removed.

	* ui_main_config.[ch], ui_screen.[ch]: --hscr / "screen_height_ratio" option
	  is removed.

2017-09-09  Araki Ken  <arakiken@users.sf.net>

	* ui_font_config.c:
	  size_attr of 'font' argument of ui_get_config_font_name() is removed.

	* vt_font.h: NO_SIZE_ATTR() macro is added.

	* quartz/ui_font.c:
	  - is_bold and is_italic are added to arguments of parse_font_name().
	  - font->xfont->is_italic = 1 if (font->id & FONT_ITALIC) is true.

	* quartz/cocoa.m, quartz/ui.h: is_italic is added to XFontStruct, and if it is 1,
	  glyphs are slant by CGAffineTransformMake().

	* fb/ui_font.c: is_bold and is_italic are added to arguments of parse_fc_font_name()
	  and if is_bold or is_italic is 1, FONT_BOLD or FONT_ITALIC is set.

	* main-cocoa.m: NSAutoreleasePool is allocated manually before NSApplicationMain().

2017-09-08  Araki Ken  <arakiken@users.sf.net>

	* ui_im_status_screen.[ch]:
	  - head_indexes[10] => head_indexes[11]
	  - "\n" is not shown in a candidate window if the number of candidate lines
	    is over MAX_ROWS.

2017-09-07  Araki Ken  <arakiken@users.sf.net>

	* im_wnn.c: Access to uninitialized memory is fixed.

	* ui_display_linux.c: /sys/class/input/event%d/device/name is prefered to
	  /sys/class/input/input%d/name.

2017-09-06  Araki Ken  <arakiken@users.sf.net>

	* vte.c: Whether ui_customize_font_file() actually customizes font settings
	  is checked before redrawing screen.

	* ui_font_config.c: change_custom_cache() and customize_font_name() return 0
	  if cached value and new value are the same.

2017-09-05  Araki Ken  <arakiken@users.sf.net>

	* ui_im_status_screen.c: max_width of draw_screen() is maximum width
	  of all ui_display_t on wayland.

	* wayland/ui_display.c:
	  - If keyboard_enter() is called in entering input method surface, it sets
	    wlserv->current_kbd_surface to its parent surface instead of input method one.
	  - x and y are removed from arugments of create_surface(), and ui_display_move()
	    is called just after create_shm_buffer().
	  - focus_gtk_window() is not called if input method surface is clicked.

	* wayland/ui_window.c:
	  - win->x and win->y of root windows aren't modified on wayland.

	* im_fcitx.c, im_ibus.c:
	  - NO_XKB macro which is defined on framebuffer and console is added.
	  - connection_handler() works on wayland.

2017-09-03  Araki Ken  <arakiken@users.sf.net>

	* im_m17nlib.c: XKeysymToString() is implemented.

	* im_fcitx.c: fcitx_client_set_cursor_rect() is called in connected().

2017-09-02  Araki Ken  <arakiken@users.sf.net>

	* Makefile.in: vte, install-vte and clean-vte targets are added.

2017-09-02  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_font.c: The height of compl font is forcibly changed to the same
	  one as base font.

2017-09-01  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c: focus_gtk_window(win, time) is not called if
	  ev.type is ButtonRelease.

	* wayland/ui_window.c: win->x and win->y are set to -1 in ui_window_unmap()
	  to show scrollbars correctly on autohide scrollbar mode.

	* vte_wayland.c:
	  - wl_surface_set_user_data(wl_surface, GdkWindow) is called in
	    show_root() in order to make gdk to process events on mlterm surface
	    as those on GdkWindow.
	  - GdkCursor is set by gdk_window_set_cursor().

2017-08-28  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_ssh.c, vt_pty_pipewin32.c, im_iiimf.c:
	  Not only "USER" but also "LOGNAME" environmental variable is used.
	  ("USER" is not set on Solaris 11)

2017-08-27  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_ssh.c: Data in vt_pty_ssh_t is kept after reconnection.

2017-08-26  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  - vte_terminal_search_set_regex() and vte_terminal_search_get_regex() are
	    implemented.
	  - 'GRegex* gregex' is added to VteRegex.
	  - ui_screen_t::ui_sel_event_listener_t::select_in_window is overridden
	    and overriding function calls g_signal_emit("selection-changed").
	  - deadline_ignoring_source_cancelled_event defined in wayland/ui_display.c
	    is set to prevent ui_display_clear_selection() from being called by
	    gtk_clipboard_set_text().

	* ui_layout.c:
	  - ui_screen_t::window::window_focused and
	    ui_screen_t::xterm_listener::set_{window|icon}_name are overridden to
	    show window title correctly in split screen.
	  - If ui_screen_t or ui_scrollbar_t with a wall picture is moved but not
	    resized in reset_layout() and MANAGE_SUB_WINDOWS_BY_MYSELF is not
	    defined, ui_window_update_all() is called to redraw a wall picture.
	  - HAS_MULTI_CHILDREN macro is added.

	* ui_screen.c:
	  - ui_window_utf_selection_request() is called if
	    ui_window_xct_selection_request() fails in yank_event_received().
	  - ui_get_selection_{conv|parser}() are used.
	  - "next_pty", "prev_pty" and "close_screen" are added to OSC 5379.

	* xlib/ui_window.c: _NET_WM_NAME and _NET_ICON_NAME properties are supported.

	* win32/ui_window.c:
	  - ui_window_set_wall_picture() in ui_window_unset_wall_picture()
	    => ui_window_unset_wall_picture().
	  - 'name' argument of ui_set_{window|icon}_name() is converted to
	    appropriate character encoding.

	* fb/ui_window.c: ui_window_xct_selection_request() returns 0 on android
	  and wayland.

	* quartz/ui_window.c:
	  - ui_window_set_wall_picture() in ui_window_unset_wall_picture()
	    => ui_window_unset_wall_picture().
	  - ui_set_window_name() is implemented.

	* console/ui_window.c
	  - If name is NULL, ui_window_t::app_name is used instead in
	    ui_set_{window|icon}_name().
	  - 'name' argument of ui_set_{window|icon}_name() is converted to
	    appropriate character encoding.

	* fb/ui_window.c:
	  If name is NULL, ui_window_t::app_name is used instead in
	  ui_set_{window|icon}_name().

	* cocoa.[mh]: window_set_title() is added.

	* ui_selection_encoding.h, uitoolkit/*/ui_selection_encoding.c:
	  These files are separated from ui_screen.c.

	* vt_parser.[ch]: "CSI > t" and "CSI > T" are supported.

	* vt_util.[ch]: These files are separated from vt_parser.c.

	* vt_char_encoding.c:
	  The default value of "auto" is changed from unknown encoding to UTF-8.

	* jni/ui_event_source.c, MLActivity.java:
	  "Next pty", "Previous pty" and "Close split screen" are added to context menu.

2017-08-13  Araki Ken  <arakiken@users.sf.net>

	* vt_termcap.[ch]: modify_function_keys and modify_cursor_keys are added
	  to arguments of vt_termap_special_key_to_seq().

	* vt_parser.[ch]: ModifyFunctionKeys and ModifyCursorKeys are supported.

2017-08-09  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, etc/key, etc/main, etc/main.ja: Updated.

	* ui_main_config.[ch]: "broadcast" / --bc option and
	  "ignore_broadcasted_chars" / --ibc option are added.

	* ui_screen.c:
	  - write_to_pty() broadcasts chars to all ptys if
	    vt_term_is_broadcasted() is true.
	  - write_special_key() is added to wrap vt_term_write_special_key().

	* vt_term.[ch]: vt_term_is_broadcasting() is added.

	* vt_parser.[ch]:
	  - vt_set_broadcast() and vt_parser_is_broadcasting() are added.
	  - "broadcast" and "ignore_broadcasted_chars" are added to OSC 5379 etc.

2017-08-02  Araki Ken  <arakiken@users.sf.net>

	* quartz/ui_display.c, win32/ui_display.c: Minor fixes.

2017-08-02  Araki Ken  <arakiken@users.sf.net>

	* quartz/ui_display.c: dialog() is implemented.

	* quartz/ui_connect_dialog.c: ui_connect_dialog() is implemented.

	* cocoa.[ch]:
	  - cocoa_dialog_{password|okcancel|alert}() are added.
	  - uitoolkit => uiwindow

	* main_loop.c: ignore_unknown_opt of bl_conf_parse_args() is 1 on
	  MacOSX/Cocoa because "open -a /../mlterm.app" command passes
	  "-psn_N_NNNNNN" option to mlterm.

	* main-cocoa.m: Arguments of main() is copied to global_args.

	* bl_dialog.[ch]: char* => const char*

2017-07-30  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.h: is_vt52_mode is moved to the end of vt_parser_t.

2017-07-29  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_window.c: copy_blended_pixel() is fixed.

	* gtk/vte.c:
	  - vte_terminal_set_colors() falls back to the default palettes
	    if palette_size == 0.
	  - vte_terminal_set_default_colors() is implemented.

2017-07-27  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_font.c: Wrong processing of percentage in fontname is fixed.

2017-07-23  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, PROTOCOL: Updated.

	* ui_screen.[ch]:
	  - ui_set_trim_trailing_newline_in_pasting() which trims trailing newline
	    in pasting text is added.
	  - "trim_trailing_newline_in_pasting" is added to OSC 5379, 5380 etc.
	  - shortcut_str() is called just after shortcut_match() in key_pressed().

	* vt_screen.c: check_or_copy_region() doesn't append extra space at the end.

	* version.h: 3.8.2 -> 3.8.2post

2017-07-17  Araki Ken  <arakiken@users.sf.net>

	* 3.8.2 released.
	  (tag "rel-3_8_2")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h:
	  updated for 3.8.2.

	* PROTOCOL, man/mlterm.1: Updated.

	* im_iiimf.c, im_uim.c, vte.c: Compiling error is fixed.

2017-07-15  Araki Ken  <arakiken@users.sf.net>

	* ui_main_config.c: If USE_FREETYPE is defined, "use_anti_alias" option works.

	* fb/ui_font.c:
	  - FT_Library_SetLcdFilter() is called in load_ft().
	  - FONT_NOAA of ui_font_present_t is checked.

	* gtk/vte.c:
	  - vte_terminal_hierarchy_changed() is moved to vte_x11.c
	  - vte_terminal_draw(), vte_terminal_spawn_async(), vte_pty_spwan_async(),
	    vte_terminal_{get|set}_allow_hyperlink and
	    vte_terminal_hyperlink_check_event() are added.
	  - Whether 'exception' is NULL or not is checked in
	    vte_terminal_set_word_char_exceptions().

	* gtk/vte_x11.c: FORCE_TRANSPARENCY macro is added.

2017-07-05  Araki Ken  <arakiken@users.sf.net>

	* main-con.c: It is assumed that mlterm-con-server is in BINDIR
	  instead of LIBEXECDIR/mlterm on cygwin and msys.

	* bl_pty_helper.c, c_imagelib.c, c_regis.c, */ui_imagelib.c,
	  vt_config_menu.c: BL_LIBEXECDIR is used.

	* bl_path.h: BL_LIBEXECDIR(suffix) is added.

	* ui_im_status_screen-cocoa.m: Compiling error is fixed.

2017-07-02  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: <dev> in OSC 5379;<dev>:a=b works.

	* vt_parser.c: "challenge" of OSC 5380 works from console not only mlconfig.

	* accessories/mlsplit.sh: Added.

2017-06-29  Araki Ken  <arakiken@users.sf.net>

	* README*, man/mlterm.1: Updated.

	* configure.in: utmp is forcibly disabled on cygwin and mingw.

2017-06-25  Araki Ken  <arakiken@users.sf.net>

	* vt_edit.c: vt_edit_save_protected_chars() doesn't call malloc()
	  until vt_char_is_protected() is true.

	* ui_font_ft.c:
	  - Whether a name of a loaded font for iscii is *-TT* or not is
	    checked, and if not, x_font_new() returns NULL.
	  - cairo_font_open() removes FC_*LANG from font->pattern.

	* hb.c:
	  - Characters are separated to segments and hb_shape() is called
	    for each segment.
	  - RTL scripts are supported.

	* ui_im.[ch], im_*.c, ui_im_{candidate|status}_screen.c, vt_parser.[ch]:
	  Arguments of vt_convert_to_internal_ch() and
	  ui_im_{candidate|status}_screen_new() are changed.

	* ef_ucs_property.table: Updated to Unicode 10.0.0 (UnicodeData.txt and
	  EastAsianWidth.txt)

2017-06-21  Araki Ken  <arakiken@users.sf.net>

	* vt_edit.c: vt_edit_save_protected_chars() is optimized.

2017-06-21  Araki Ken  <arakiken@users.sf.net>

	* vt_screen.[ch], vt_term_manager.c, vt_parser.c:
	  - vt_write_content_area_t is added.
	  - 'area' is added to the argument of vt_screen_write_content(), and
	    beg and end are removed.

2017-06-21  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: UPDATE_SCREEN_BLINK is added to blink screen.

	* ui_draw_str.c: {fc|xcore}_draw_str() checks if fg_color == bg_color
	  instead of vt_char_is_visible().

	* vt_parser.[ch]:
	  - get_now_suffix() is added and a file name of logging vt sequence and
	    snapshot has "-YYYYMMDDHHMM" suffix.
	  - is_protected is added to vt_parser_t, then DECSCA and selective erase
	    are supported.
	  - beg and end (row) are added to the arguments of snapshot(), then
	    MC and DECMC are supported with the use of snapshot().
	  - is_invisible is added to vt_parser_t, then SGR 8 and 28 are supported.

	* vt_screen.[ch]:
	  - is_protected is added to the arguments of vt_screen_fill_area().
	  - is_protected is added to the arguments of vt_screen_combine_with_prev_char().
	  - visible is removed from the arguments of vt_screen_blink().
	  - beg and end (row) are added to the arguments of vt_screen_write_content().

	* vt_edit.[ch]:
	  - vt_edit_{save|restore}_protected_chars() are added.
	  - vt_edit_change_attr_area() processes SGR 3, 6, 9, 21, 23, 29.

	* vt_char.[ch]:
	  - is_visible is removed and is_protected is added to vt_char_t::attr.
	  - is_protected is added to the arguments of vt_char_set() and vt_char_combine().
	  - vt_char_{set|is}_visible() are removed.
	  - vt_set_blink_chars_visible() is added.
	  - vt_char_get_unicode_area_font() is renamed to vt_get_unicode_area_font().
	  - italic and crossed_out are added to the arguments of vt_char_change_attr()
	    and vt_char_reverse_attr().

2017-06-18  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: Whether ps[0] < VTMODE(0) is checked in processing DECRQMH.

2017-06-18  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: CSI?40h resizes screen as the value of DECCOLM.

2017-06-17  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.[ch]:
	  - DECATC is supported.
	  - DECRQM and DECRQMH are supported and {set|get}_vtmode() functions and
	    vtmode_t enum and so on are added.
	  - SGR of DECRQSS is supported.

	* vt_logical_visual.c:
	  'count == 0' => 'count = 0' in vt_logical_visual_cursor_is_rtl().

	* vt_screen.h:
	  - vt_screen_is_using_bce() and vt_screen_is_using_rect_attr_select() are added.
	  - vt_screen_set_use_bce() changes setting of vt_screen_t::alt_edit
	    instead of vt_screen_::normal_edit.

	* vt_edit.h:
	  vt_edit_is_using_bce() and vt_edit_is_using_rect_attr_select() are added.

2017-06-14  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_font.c: Fixes for DECDHL.

	* console/ui_window.c: size_attr is added to the arguments of set_attr()
	  to support DECDHL and DECDWL.

	* console/ui_font.c: Unnecessary code is removed.

2017-06-12  Araki Ken  <arakiken@users.sf.net>

	* c_regis.c: Hack for MSYS is added.

	* ui_font.h, win32/ui.h, win32/ui_font.c:
	  'size' is moved from ui_font_t to XFontStruct on win32.

	* configure.in, baselib/configure.in: Whether it is msys-2.0 or not is checked.

2017-06-11  Araki Ken  <arakiken@users.sf.net>

	* README.win32: Updated.

	* libptyssh/vt_pty_ssh.c: connect_to_x11() is separated from x11_callback().

	* win32/ui_display.c: CloseHandle(_disp.cursors[count]) is removed.

2017-06-07  Araki Ken  <arakiken@users.sf.net>

	* console/ui.h, win32/ui.h: "#include <mef/ef_conv.h>" is removed.

	* config.sub, config.guess: Updated.

2017-06-05  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c:
	  ui_display_t::selection_owner is set in add_root_to_display().

	* gtk/Makefile.in: @BRLAPI_CFLAGS@ and @BRLAPI_LIBS@ are added.

	* vte.c:
	  - vte_terminal_{set|get}_word_char_exceptions() is fixed.
	  - ui_brltty_{init|final}() are called.

2017-06-04  Araki Ken  <arakiken@users.sf.net>

	* ui_brltty.c: BRLAPI_KEY_CMD_SAY_LINE, BRLAPI_KEY_CMD_SPEAK_CURR_LINE,
	  BRLAPI_KEY_CMD_SAY_ABOVE, BRLAPI_KEY_CMD_SAY_BELOW are supported.

2017-06-04  Araki Ken  <arakiken@users.sf.net>

	* README, README.ja: Updated.

	* doc/en/README.brltty: Added.

	* main_loop.c, ui_screen.c: ui_brltty_* functions are called.

	* ui_brltty.c: Added.

	* configure.in: --enable-brlapi is added.

	* encodefilter/src/Makefile.in: MINOR is changed from 0 to 1.

	* mef.c: "utf32le" is added.

	* wayland/ui_display.c:
	  - focus_gtk_window() is called in pointer_button().
	  - "xterm" style cursor is loaded in ui_display_init_wlserv().

	* vte_wayland.c: focus_gtk_window() is added.

	* ui_screen_manager.c: DISPLAY environmental variable is set on wayland.

	* ef_utf32_conv.[ch]:
	  ef_utf32le_conv_new() and ef_utf32_use_bom() are added.

2017-05-28  Araki Ken  <arakiken@users.sf.net>

	* ef_ucs_property.table: Updated to Unicode 9.0.0 (UnicodeData.txt and
	  EastAsianWidth.txt)

2017-05-26  Araki Ken  <arakiken@users.sf.net>

	* README, README.ja, man/mlterm.1: Updated.

	* im_iiimf_aux.c:
	  - The default value of AUX_BASE_DIR macro is changed from "/usr/lib/im"
	    to "/usr/lib/iiim/le".
	  - HTT_AUX_BASE_DIR environmental variable is added.

	* im_iiimf.c:
	  - HTT_DISABLE_STATUS_WINDOW environmental variable is renamed to
	    HTT_SHOW_STATUS_WINDOW.
	  - IIIMCF_ATTR_CLIENT_X_DISPLAY_NAME is set on xlib.

	* im_iiimf.h: aux_* functions are disabled on platforms except xlib.

	* iiimf/Makefile.in: im_iiimf_aux.c is compiled on xlib alone.

2017-05-23  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c:
	  - SGR 39 and 49 works if use_ansi_colors is false.
	  - Unnecessary debug_print_unknown() is removed.

	* fb/ui_window.c:
	  Freetype specific code is enclused by #if defined(USE_FREETYPE) ... #endif.

	* android/jni/ui_display.h: IM_WINDOW_IS_ACTIVATED() is added.

2017-05-21  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: "ESC 2"(DECCAHT), "ESC 1"(DECCHTS), "ESC I"(HTJ),
	  "CSI ? Pi;Pa;Pv S", "CSI Ps1;Ps2;Ps3 ,l"(DECAC) and "CSI W"(CBC)
	  are implemented.

	* vt_edit.c: The starting position of erase_area() is fixed in
	  vt_edit_scroll_{right|left}ward_from_cursor().

	* ui_screen.c: baseline_offset option is disabled on console.

	* fb/ui_display.c:
	  Busy loop where mlterm-fb on inactive console falls is fixed.

	* mlterm-con.c: mlterm-con works on Solaris11.

	* iiimf/keymap.c: keysyms which are undefined on framebuffer are enclosed
	  by #ifdef ... #endif.

	* vte.c: OPEN_SCREEN, OPEN_PTY, NEXT_PTY, PREV_PTY, HSPLIT_SCREEN,
	  VSPLIT_SCREEN, NEXT_SCREEN, CLOSE_SCREEN, HEXPAND_SCREEN,
	  VEXPAND_SCREEN shortcut keys are disabled on libvte compatible library.

	* android/jni/ui.h: FORCE_UNICODE is undefined.

2017-05-18  Araki Ken  <arakiken@users.sf.net>

	* README.ja, man/mlterm.1: Updated.

	* ui_main_config.c: "baseline_offset" / --blpos option is added.

	* ui_screen.[ch]:
	  - "baseline_offset" is added to OSC 5379 etc.
	  - baseline_offset is added to arguments of ui_screen_new().

	* ui_window.c: Chars except unicode are converted to unicode for freetype.

	* fb/ui_font.c: TrueType fonts are loaded for charsets except Unicode.

2017-05-17  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: draw_cursor() selects appropriate position of cursor bar
	  according to rtl or ltr attribute of a cursor character.

	* vt_term.h: vt_term_cursor_is_rtl() is added.

	* vt_screen.h: vt_screen_cursor_is_rtl() is added.

	* vt_logical_visual.[ch]:
	  - If meet_pos_info & 0x8000000 is true, ctl_logical() forces a cursor
	    character to be redrawn.
	  - vt_logical_visual_cursor_is_rtl() is added.

	* vt_line_bidi.[ch], vt_line.[ch]:
	  - vt_line_bidi_convert_logical_char_index_to_visual() doesn't check meeting
	    position of rtl and ltr characters if meet_pos_info is NULL.
	  - if meet_pos_info & 0x8000000 is true, cursor position is really adjusted
	    according to metting position of rtl and ltr characters.

2017-05-14  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: ESC $ ) is supported on utf8 encoding.

	* ef_iso2022kr_conv.c: iso2022_conv.g1 = KSC5601_1987 is added.

	* ef_iso2022jp_conv.c: iso2022_conv->g0 is replaced by ch.cs after convertion
	  correctly finishes.

	* mef.c: "isciiroman" encoding is removed.

2017-05-14  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_ssh.c: WSASocket() is called with WSA_FLAG_OVERLAPPED in _socketpair().

2017-05-08  Araki Ken  <arakiken@users.sf.net>

	* ui_screen_manager.c, MLTermPty.c, vte.c:
	  Calling vt_create_term() and ui_screen_new() is fixed.

	* ui_screen.[ch]:
	  - blink_cursor is removed.
	  - Underline cursor and bar cursor are supported.

	* vt_term.[ch]: vt_term_is_visible_cursor() and vt_term_get_cursor_style() are added.

	* vt_parser.[ch]:
	  - vt_cursor_style_t is added and DECSCUSR(3,4,5,6) is supported.
	  - is_visible_cursor is moved from vt_screen.
	  - vt_parser_is_visible_cursor() and vt_parser_get_cursor_style() are added.
	  - Processing "blink_cursor" of OSC 5379-5383 is moved from ui_screen.c

2017-05-07  Araki Ken  <arakiken@users.sf.net>

	* vt_parser.c: The response to DECRQDE is fixed.

	* uitoolkit/Makefile.in: Error in compiling winrs.rs is fixed.

2017-05-07  Araki Ken  <arakiken@users.sf.net>

	* keymap.c: XK_Kakji, XK_Muhenkan, XK_Henkan, XK_Hiragana, XK_Katakana and
	  XK_Zenkaku_Hankaku are processed.

	* im_iimf.c: create_handle() searches unix domain socket files in /tmp/.iiim-$USER/.

	* vt_parser.c:
	  - DECRQDE (CSI " v), NP(CSI U), PP(CSI V), PPA(CSI SP P), PPR(CSI SP Q) and
	    PPB(CSI SP R) are processed.
	  - DECCRA and DECLRP supports page.

	* ui_picture.c: cleanup_inline_pictures() checks term->screen->page_edits.

	* vt_screen.[ch]:
	  - 'page_edits' is added to vt_screen_t.
	  - vt_screen_is_alternative_edit() is changed from function to macro.
	  - src_page and dst_page arguments are added to vt_screen_copy_area().
	  - vt_screen_get_page_id(), vt_screen_goto_page(), vt_screen_goto_next_page()
	    and vt_screen_goto_prev_page() are added.

2017-05-05  Araki Ken  <arakiken@users.sf.net>

	* console/ui_font.c, ui_screen.c: line_space and letter_space options are ignored.

	* console/ui_window.c, fb/ui_window.c: ui_window_is_scrollable() returns 0
	  if IM_WINDOW_IS_ACTIVATED() (not IS_IM_WINDOW()) is true.

	* console/ui_display.[ch], fb/ui_display.[ch]:
	  IM_WINDOW_IS_ACTIVATED() macro is added.

	* main/main-con.c, console/ui_display.c: If termios.c_cc[VERASE] is 0x7f,
	  0x7f character from stdin is converted to 0x08.

	* main/Makefile.in: LIBS2_{fb|console|wayland} variables are fixed.

	* iiimf/keymap.c, im_iiimf.h, im_iiimf_aux.c: Platforms except x11 are supported.

	* im_iiimf.c:
	  - The timing of calling status_change() or stat_screen->delete() is fixed.
	  - IIIMF_SERVER_ADDRESS environmental variable => HTT_SERVER_ADDRESS.

	* iiimf/Makefile.in: TARGET_{xlib|fb|console|wayland} are added.

2017-05-04  Araki Ken  <arakiken@users.sf.net>

	* quartz/ui_window.c, quartz/ui_font.[ch], quartz/ui.h, cocoa.m:
	  ui_font_t::cg_font is moved to XFontStruct.

	* win32/ui_window.c, win32/ui_font.[ch], win32/ui.h, ui_font_cache.c:
	  ui_font_t::fid and ui_font_t::conv are moved to XFontStruct.

	* xlib/ui_xim.c: Minor fixes.

	* xlib/ui_xic.c: XNArea is removed from XVaCreateNestedList().

	* inputmethod/im_iimf.c:
	  - IIIMF_ATTR_SERVER_ADDRESS and IIIMF_ATTR_SERVER_SERVICE attributes are set.
	  - The value of IIIMF_SERVER_ADDRESS environmental variable replaces
	    IIIMF_ATTR_SERVER_ADDRESS attribute.
	  - status_change() is called in lookup_choice_done() and
	    in IIIMCF_EVENT_TYPE_TRIGGER_NOTIFY case in dispatch().

	* inputmethod/iiimf: Revived.

	* configure.in: --disable-iiimf option is added.

	* version.h: 3.8.1 -> 3.8.1post

2017-04-29  Araki Ken  <arakiken@users.sf.net>

	* 3.8.1 released.
	  (tag "rel-3_8_1")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h:
	  updated for 3.8.1.

	* PROTOCOL, man/mlterm.1: Updated.

	* vte.c: screen->window.width and screen->window.height are updated even
	  if VteTerminal is not realized.

	* wayland/ui_display.c: ui_display_move() stores x and y in display->{x,y}
	  only if display->buffer is non-NULL.

2017-04-28  Araki Ken  <arakiken@users.sf.net>

	* README, gtk/README: Updated.

	* vte_wayland.c, vte.c:
	  - vte_terminal_map() is added and registered to GTK_WIDGET_CLASS(vclass)->map.
	  - ui_display_map() etc are removed from vte_terminal_focus_in().

	* wayland/ui_color.c: The value of x_color_t::{red|green|blue} is not
	  multiplied by alpha on wayland.

	* {wayland,fb}/ui_window.c, console/ui_window.c: Initialization of
	  child->inputtable and child->is_focused in ui_window_add_child() is fixed.

	* wayland/ui_display.[ch]:
	  - search_focused_window() searches windows in turn from children.
	  - FocusOut macro is defined and ui_window_receive_event(FocusOut) instead
	    of win->window_unfocused() is called in keyboard_leave().
	  - wl_subsurface_set_desync() is called in ui_display_map(), and
	    wl_subsurface_set_sync() is called in ui_display_unmap().

	* ui_color_cache.c:
	  color_caches[count]->is_loaded => color_caches[count]->cache_256ext->is_loaded
	  (This causes segmentation fault in using many colors by SGR 38;2;r;g;b
	  or 48;2;r;g;b sequence)

2017-04-25  Araki Ken  <arakiken@users.sf.net>

	* README.ja, man/mlterm.1, PROTOCOL: Updated.

2017-04-24  Araki Ken  <arakiken@users.sf.net>

	* vt_pty_ssh.c: zombie() removes a zombie channel from ssh_session_t.

2017-04-24  Araki Ken  <arakiken@users.sf.net>

	* vte.c: gtk_m_adjustment_value_changed() => gtk_adjustment_value_changed().

	* ui_font_ft.c: Double free problem by FcPatternDestroy() is fixed.

2017-04-23  Araki Ken  <arakiken@users.sf.net>

	* fb/ui_window.c: A bug which disabled ui_window_move() to move root windows
	  is fixed.

	* fb/ui.h: Compiling error is fixed.

	* wayland/ui_display.c: The return value of ui_display_move is changed from
	  void to int.

2017-04-23  Araki Ken  <arakiken@users.sf.net>

	* main_loop.c: Minor fixes.

	* fb/ui_font.c: Compiling error is fixed.

2017-04-23  Araki Ken  <arakiken@users.sf.net>

	* ui_window.c:
	  draw_string() is separated to draw_string() and draw_string_intern()
	  in order to show complementary glyphs.

	* ui.h, ui_font.h, ui_font.c:
	  ui_get_bitmap() returns a complementary glyph in an alternative font
	  if no glyph is found in a specified xfont.

	* main_loop.c, ui_font_config.c:
	  ui_costomize_font_file() works if --aafont option is specified on framebuffer or
	  wayland.

2017-04-16  Araki Ken  <arakiken@users.sf.net>

	* README, README.ja: Updated.

	* fb/ui_window.c: ui_window_move() does nothing for root windows except on wayland.

	* vte.c, vte_wayland.c:
	  - toplevel_configure and hierachy_changed handlers are removed on wayland.
	  - ui_display_map() is called from vte_terminal_focus_in() instead of
	    vte_terminal_map() on wayland.
	  - Focus and unfocus hacks are removed on wayland.
	  - Dummy api functions related to VteRegex (0.46 or later) are added.

	* wayland/ui.h, wayland/ui_display.c:
	  wl_subsurface instead of wl_shell_surface is used for libvte compatible library.

	* android/jni/ui.h: COMPOSE_DECSP_FONT is defined.

2017-03-28  Araki Ken  <arakiken@users.sf.net>

	* ui_display_linux.c:
	  - 10 or larger number is availabe for event device (/dev/input/event*%d*) number.
	  - "ts" is removed from mouse name list.

	* fb/ui_font.c, fb/ui_decsp_font.c: "decsp-%dx%d" of a composed decsp font is
	  created in ui_font_new() instead of ui_load_decsp_xfont().

	* */ui.h: COMPOSE_DECSP_FONT is added.

2017-03-25  Araki Ken  <arakiken@users.sf.net>

	* {wayland,fb}/ui_window.c: convert_to_decsp_font_index() is added.

	* {wayland,fb}/ui_font.c:
	  - ui_compose_dec_special_font() is implemented.
	  - If compose_dec_special_font is true, ui_load_decsp_xfont() is called.

	* {wayland,fb}/ui_decsp_font.[ch]: Added.

	* gtk/vte.c: If ui_wlserv_t::current_kbd_surface is Display::surface or
	  Display::parent_surface, win->window_unfocused is forcibly called in
	  vte_terminal_focus_out() on wayland.

	* wayland/ui.h, wayland/ui_display.c:
	  Display::current_surface => current_kbd_surface.

	* console/ui_display.c: vt_char_encoding_conv_set_use_loose_rule(1) is called
	  for disp->display->conv.

	* console/ui_connect_dialog.c: USE_COSNOLE => USE_CONSOLE

	* console/ui_window.[ch], ui_draw_str.c:
	  ui_window_console_drwa_decsp_string() is added.

	* ui_screen.c:
	  utf16le_illegal_char() which converts DEC Special to Unicode is added.

	* vt_char_encoding.[ch]:
	  - vt_convert_ucs_to_decsp() and vt_convert_decsp_to_ucs() are moved
	    from vt_parser.c
	  - utf8_illegal_char which converts DEC Special to Unicode is added.
	  - iso2022_illegal_char and non_iso2022_illegal_char aren't used by default
	    and vt_char_encoding_conv_set_use_loose_rule() enables them.

2017-03-21  Araki Ken  <arakiken@users.sf.net>

	* doc/{en,ja}/README.fb: Updated.

	* ui_screen.c:
	  draw_preedit_str() can have drawn cursor vertical line outside screen.

	* wayland/ui_font.c: ui_font_set_dpi_for_fc() is implemented.

	* gtk/Makefile.in: ui_display.o is rebuilt every time with -DCOMPAT_LIBVTE option.

	* wayland/ui_display.c: Functions for libvte compatible library are added.

	* gtk/vte.c:
	  - wayland is supported.
	  - vte.c is separated to vte.c, vte_xlib.c and vte_wayland.c.

2017-03-07  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_connect_dialog.c: Server name is shown before "Password:".

2017-03-07  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_connect_dialog.c:
	  - ui_window_draw_image_string() is called every time.
	  - ui_display_receive_next_event_singly() is called on wayland.

	* wayland/ui_display.[ch]: ui_display_receive_next_event_singly() is added.

	* main_loop.c: 'mlterm -v' outputs compiled features.

	* main/Makefile.in: CFLAGS_FOR_FEATURES is added.

	* configure.in: "Supported font formats" is output on wayland.

	* Makefile.in: 'install-wl' target is added.

2017-03-06  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c: check_resize() returns 0 if the difference between
	  specified width and height and current width and height is less than
	  width_inc and height_inc.

	* doc/en/README.wayland: Added.

	* doc/en/README.fb: Updated.

2017-03-05  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_color.c: red, green and blue are multiplied by alpha before
	  RGB_TO_PIXEL() on wayland.

	* wayland/ui_window.c: minor fixes.

2017-03-05  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c:
	  - Pointer at the center of top and bottom margin enables you to move
	    the window instead of pressing Alt+Button1.
	  - 'check_inc' argument (which is Display::is_resizing) is added to
	    check_resize().

	* ui_layout.c:
	  - Rounding up 'separator' is prohibited if
	    'total < separator + margin + next_win' in modify_separator().
	  - MANAGE_SUB_WINDOWS_BY_MYSELF => MANAGE_ROOT_WINDOWS_BY_MYSELF
	    in change_sb_mode_intern().

	* ui_window.c: check_update_children() is added to redraw screen correctly
	  on wayland.

	* */ui.h, ui_layout.c, wayland/ui_window.c: NO_EXPOSE_ON_RESIZE is removed.

2017-03-05  Araki Ken  <arakiken@users.sf.net>

	* ui_screen.c: ui_window_update_all(ui_screen_t) instead of
	  ui_window_update_all(ui_layout_t) is called in window_resized().

	* ui_main_config.c: ONLY_USE_UNICODE_FONT and ONLY_USE_UNICODE_BOXDRAW_FONT
	  are set if ui_is_using_aafont() is true.

	* ui_layout.c: Even if a child window is not resized by resizing its parent,
	  ui_window_update_all() is called in reset_layout on wayland.

	* wayland/ui_window.c: ui_window_update_all() is called at the end of
	  ui_window_show() on wayland. Without this, screen isn't drawn in startup.

2017-03-05  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c:
	  ui_display_resize() calls wl_display_roundtrip() internally.

	* wayland/ui_window.c: ui_window_set_normal_hints() is implemented.

2017-03-05  Araki Ken  <arakiken@users.sf.net>

	* mc_im.c: get_im_info() is fixed.

	* ui_screen.c:
	  - "use_aafont" is added to OSC 5380/5381.
	  - ui_window_update_all(ui_layout_t) instead of ui_window_update_all(ui_screen_t)
	    is called in window_resized().

	* ui_font_config.[ch]: ui_is_using_aafont() is added.

	* mc_font.c: get_font_file() returns "*aafont" if use_aafont option is true.

	* wayland/ui_display.c: Minor fixes.

2017-03-04  Araki Ken  <arakiken@users.sf.net>

	* ui.h, ui_display.c:
	  - During wl_shell_surface_resize(), Display::is_resizing is 1.
	    This forces shell_surface_configure() not to modify specified width and height,
	    and permits miximizing windows.
	  - ui_display_receive_next_events() calls wl_display_dispatch() once per
	    wl_display.

	* ui_main_config.c: The default value of "input_method" option is "ibus"
	  on wayland.

	* ui_layout.c: x_window_resize_with_margin(scrollbar) is called before
	  x_window_resize_with_margin(screen) in reset_layout().

2017-03-04  Araki Ken  <arakiken@users.sf.net>

	* quartz/ui_window.c:
	  - view_update() is called in ui_window_set_wall_picture() in order to
	    update screen in changing a wall picture.
	  - ui_window_draw_*_image_string() are removed.

	* fb/connect_dialog.c:
	  - ui_window_get_str() is called in key_pressed().
	  - ui_window_console_draw_string() is called on console.

	* configure.in, inputmethod/*/Makefile.in:
	  - {POBL|MEF}_LIBS_FOR_MODULE are replaced by LPOBL and LMEF

	* console/ui_window.c:
	  - XK_BackSpace, XK_Tab and XK_Returns key events are correctly processed.
	  - ui_window_draw_*_string() functions are removed.

	* main-con.c:
	  - termios is reverted to the default value on exit().
	  - Whether read() returns -1 is not checked.

	* */ui.h, ui_draw_str.c, ui_picture.c:
	  - DRAW_SCREEN_IN_PIXELS, NO_DRAW_IMAGE_STRING are added
	  - HAVE_PTHREAD is defiend or undefined in ui.h instead of ui_picture.c.

	* ui_screen_manager.c: 'mlclient' is disabled on console, while 'mlclientx'
	  is still available.

	* console/ui_connect_dialog.h: Added.

2017-03-03  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c: Whether disp is NULL or not is checked in
	  receive_key_event() which may be called after the surface is destroyed.

	* ui_font_manager.c: If US-ASCII font is not found, font loading is retried
	  after calling ui_use_aafont().

	* ui_font_config.[ch]: ui_use_aafont() is added.

	* fb/ui_font.[ch]: ui_font_use_fontconfig() is added.

	* mc_im.c: get_im_info() searches libim-foo-fb.so on framebuffer or console and
	  libim-foo-wl.so on wayland.

	* mc_font.c, mc_io.[ch]: mc_gui_is_win32() is replaced by mc_get_gui().

	* main_loop.c: --aafont / use_aafont option is added.

	* skk/dict.c, im_skk.c, ef_str_parser.c: The dependency on libmef library is removed.

	* configure.in: --enable-fontconfig option is enabled by default.

2017-02-28  Araki Ken  <arakiken@users.sf.net>

	* README.ja, README.fb: Updated.

	* wayland/ui_display.c:
	  - ui_display_rotate() and ui_display_logical_to_physical_coordinates() are added.
	  - wl_display_roundtrip() is called in auto_repeat().

	* */ui.h:
	  - XIM and XIMStyle are removed.
	  - MANAGE_WINDOWS_BY_MYSELF => MANAGE_{ROOT|SUB}_WINDOWS_BY_MYSELF
	  - NO_EXPOSE_ON_RESIZE, USE_GC, CHANGEABLE_CURSOR, PLUGIN_MODULE_SUFFIX,
	    KEY_REPEAT_BY_MYSELF, ROTATABLE_DISPLAY, PSEUDO_COLOR_DISPLAY,
	    WALL_PICTURE_SIXEL_REPLACES_SYSTEM_PALETTE, SUPPORT_URGENT_BELL,
	    FORCE_UNICODE, NEED_DISPLAY_SYNC_EVERY_TIME are added.

	* main_loop.c, ui_display_wscons.c: wskbd_repeat_{1|N} => kbd_repeat_{1|N}

	* configure.in: --enable-fontconfig option is disabled by default.

2017-02-25  Araki Ken  <arakiken@users.sf.net>

	* */ui_display.c:
	  The default value of ui_display_t::name is as follows.
	  - DisplayString() on xlib
	  - getenv("DISPLAY") or ":0.0" on other platforms.

2017-02-25  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui_display.c:
	  - Wheel mouse is supported.
	  - Control+Button3 etc work.

	* ui_screen.c: NULL is passed to vt_term_start_config_menu() on wayland.

	* {console,fb,win32,cocoa}/ui_display.c: ui_display_t::name has always
	  non-null value.

	* */ui.h: DisplayString() macro is removed.

2017-02-24  Araki Ken  <arakiken@users.sf.net>

	* ui_screen_manager.c, vte.c: main_config.underline_offset is added
	  to arguments of ui_screen_new().

	* ui_draw_str.[ch]:
	  - bottom_margin is removed.
	  - underline_offset is added.

	* ui_screen.[ch]:
	  - ui_line_top_margin() -> line_top_margin()
	  - ui_line_bottom_margin() is removed.
	  - check_line_space() => modify_line_space_and_underline_offset().
	  - "underline_offset" is added to OSC 5379 etc.

	* ui_main_config.[ch]: --ulpos/underline_offset option is added.

2017-02-24  Araki Ken  <arakiken@users.sf.net>

	* README.ja, mlterm.1: Updated.

	* ui_screen.[ch], ui_main_config.[ch]: The type of line_space is changed from
	  u_int8_t to int8_t.

2017-02-23  Araki Ken  <arakiken@users.sf.net>

	* console/ui_window.c: ui_window_{xct|utf}_selection_request() and
	  ui_window_send_text_selection() are implemented.

	* console/ui_display.c:
	  ui_display_{own|clear}_selection() enables copy&paste between
	  different displays.

	* console/ui.h: XSelectionRequestEvent is defined as a structure.

	* fb/ui_window.c: ADDITIONAL_ARG is removed.

	* fb/ui_display.[ch], android/jni/ui_display.[ch], wayland/ui_display.[ch]:
	  'ui_display_t *disp' argument is added to ui_display_get_pixel(),
	  ui_display_put_image() and ui_display_copy_lines().

2017-02-20  Araki Ken  <arakiken@users.sf.net>

	* quartz/ui_window.c: If ui_window_is_selection_owner() is true,
	  ui_window_set_selection_owner() does nothing.

	* fb/ui_window.c:
	  - ui_display_clear_selection() is called in ui_window_final().
	  - ui_display_own_selection() is called in ui_window_set_selection_owner().
	  - ui_window_{utf|xct}_selection_request() works on framebuffer.

	* fb/ui.h: XSelectionRequestEvent is defined as a structure.

	* console/ui_window.c:
	  - ui_display_clear_selection() is called in ui_window_final().
	  - ui_display_own_selection() is called in ui_window_set_selection_owner().

	* android/jni/ui_display.c, console/ui_display.c, fb/ui_display.c:
	  ui_display_own_selection() and ui_display_clear_selection() are implemented.

	* ui_window.h, ui_screen.c:
	  - is_sel_owner is removed from ui_window_t on platforms except win32.
	  - ui_window_is_selection_owner() is added.

2017-02-19  Araki Ken  <arakiken@users.sf.net>

	* *.[ch], *.[ch].in: 'type* var' => 'type *var'

2017-02-19  Araki Ken  <arakiken@users.sf.net>

	* wayland/ui.h, wayland/ui_display.c: DnD and Copy&Paste are supported.

	* ui_screen_manager.c: WAYLAND_DISPLAY environmental variable is set
	  on wayland.

	* ui_screen.c: ui_window_update_all() is called instead of ui_window_update()
	  in window_resized() on wayland because expose event is not delivered in
	  resizing a window.

	* ui_im_{status|candidate}_screen.c: adjust_window_position_by_size() is
	  disabled on wayland.

	* ui_event_source.c: additional_fds.handler() is called after ui_display_idling()
	  because input method additional handler may destroy ui_display.

	* wayland/ui_window.c:
	  - Wrong clipped area in draw_string() is fixed.
	  - Stuff for wayland.

	* ui_imagelib.c: waitpid() is called to wait for child process to die because
	  vt_pty_unix_new() may block without this.

	* ui_font_config.c: If USE_FONTCONFIG and USE_FREETYPE is enabled on wayland,
	  "mlterm/*aafont" files are used.

	* ui_font.c: fontconfig is supported.

	* im_ibus.c, im_fcitx.c:
	  - wayland is supported.
	  - USE_IM_CANDIDATE_SCREEN macro is added.

	* ui_im.c: libim-xxx-wl.so is loaded on wayland.

	* inputmethod/*/Makefile.in:
	  TARGET_wayland = libim-xxx-wl.la is added.

	* configure.in:
	  - anti-alias is enabled by default.
	  - --disable-fontconfig is added.

2017-02-06  Araki Ken  <arakiken@users.sf.net>

	* configure.in, mlterm-menu/Makefile.in, main/Makefile.in, tool/mlconfig/Makefile.in
	  tool/mlimgloader/Makefile.in, uitoolkit/Makefile.in, fb/ui_window.c,
	  ui.h, ui_display.h, ui_draw_str.c, ui_event_source.c, ui_font_config.c,
	  ui_gc.h, ui_im.c, ui_main_config.c, ui_sb_view_factory.c, ui_window.h, wayland/*:
	  Initial wayland support is added.

	* fb/ui_font.c:
	  USE_FREETYPE macro check is added to ui_font_has_ot_layout_table().

2017-02-05  Araki Ken  <arakiken@users.sf.net>

	* ui_event_source.c: 'break' in checking FD_ISSET(additional_fds) is removed.

2017-02-05  Araki Ken  <arakiken@users.sf.net>

	* android/jni/ui_display.c: rotate_display flag and related code are removed.

2017-02-05  Araki Ken  <arakiken@users.sf.net>

	* android/jni/ui_display.c: Minor fixes.

	* version.h.in: 3.8.0 -> 3.8.0post

2017-01-07  Araki Ken  <arakiken@users.sf.net>

	* 3.8.0 released.
	  (tag "rel-3_8_0")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h:
	  updated for 3.8.0.

	* README, gtk/README: Updated.

	* libptyssh/vt_pty_ssh.c: zombie() calls vt_write_to_pty() instead lo_write_to_pty().

	* MLTerm.java: display.isDisposed() is checked just before display.wake()
	  in startPtyWatcher().

2017-01-07  Araki Ken  <arakiken@users.sf.net>

	* libptyssh/vt_pty_ssh.c: bl_trigger_sig_child() is called if vt_pty_ssh_t::is_eof
	  is true in lo_send_to_pty() instead of lo_write_to_pty().

2017-01-03  Araki Ken  <arakiken@users.sf.net>

	* bl_pty_{bsd|streams}.c: termios.c_cc[VSTATUS] = CSTATUS.

2016-12-30  Araki Ken  <arakiken@users.sf.net>

	* ui_screen_manager.c: main_config.disp_name is passed to open_screen_intern() in
	  mlclient().

2016-12-29  Araki Ken  <arakiken@users.sf.net>

	* android/jni/ui_event_source.c:
	  - Java_mlterm_native_1activity_MLActivity_{pause|resume}Native() which call
	    ui_window_set_mapped_flag() are added.
	  - ui_window_set_mapped_flag() are removed in
	    Java_mlterm_native_1activity_MLPreferenceActivity_set{DefaultFontConfig|Config}().

	* MLActivity.java:
	  onResume() calls resumeNative(), and onPause() calls pauseNative().

	* android/jni/ui_display.c:
	  - get_jni_env() is added.
	  - AttachCurrentThread()/DetachCurrentThread() is replaced by get_jni_env().
	  - if a specified window is not mapped, ui_window_set_mapped_flag(1) does nothing.

	* android/jni/ui_xic.c:
	  AttachCurrentThread()/DetachCurrentThread() is replaced by GetEnv().

	* ui_window.h:
	  - saved_mapped is added to ui_window_t on Android.
	  - xft_draw and cairo_draw are added to ui_window_t on xlib.

	* android/jni/main.c: android_main() calls AttachCurrentThread()/DetachCurrentThread().

	* MLPreferenceActivity.java: 'private' is added to native methods.

2016-12-25  Araki Ken  <arakiken@users.sf.net>

	* xlib/ui_window.c:
	  - ensure_input_focus() which calls XSetInputFocus() with a window whose
	    'inputtable' is greater than 0 is added.
	  - ensure_input_focus() is called if a root window receives FocusIn event.

	* ui_font_ft.c: charset_cache is allocated dynamically.

	* vte.c, ui_screen_manager.c, cocoa.m: bl_dl_close_all() which frees leaked memory
	  is called after bl_mem_free_all().

2016-12-25  Araki Ken  <arakiken@users.sf.net>

	* jni/ui_event_source.c:
	  - "mlclient --serv=" is allocated on stack in
	     Java_mlterm_native_1activity_MLActivity_execCommand()
	  - Java_mlterm_native_1activity_MLPreferenceActivity_setConfig() changes
	    start_with_local_pty variable, not only saves it to ~/.mlterm/main.

2016-12-24  Araki Ken  <arakiken@users.sf.net>

	* ui_font_ft.c: FcCharSetDestroy(font->compl_fonts[count].charset) is removed.

2016-12-24  Araki Ken  <arakiken@users.sf.net>

	* ui_font_ft.c:
	  - add_charset_to_cache() and get_cached_charset() are added to store FcCharSet.
	  - FcConfigSubstitute() in cairo_compl_font_open() is removed.

	* MLActivity.java:
	  - MENU_OPENPTY_ID => MENU_NEWSCREEN_ID
	  - MENU_LOCALPTY_ID is added.
	  - "Open new pty" => "Open new screen"
	  - "Open local pty" is added to menu.

	* jni/ui_event_source.c: Java_mlterm_native_1activity_MLActivity_execCommand()
	  supports opening local pty by "mlclientx --serv=" by cmd == 1.

2016-12-18  Araki Ken  <arakiken@users.sf.net>

	* ui_screen_manager.c: Uninitialized variables are fixed.

2016-12-13  Araki Ken  <arakiken@users.sf.net>

	* ui_event_source.c: Java_mlterm_native_1activity_MLActivity_execCommand() is added.

	* MLActivity.java:
	  - "Open new pty", "Connect to SSH server", "Split screen vertically",
	    "Split screen horizontally" and "Update screen" are added to context menu.
	  - execCommand() native method is added.

	* vte.c:
	  - Compatibility with vte 0.40.0 or later which dropped VteTerminalPrivate
	    is supported.
	  - vte_terminal_set_color_cursor_foreground() is added.
	  - vte_terminal_set_geometry_hints_for_window() is implemented.

2016-12-11  Araki Ken  <arakiken@users.sf.net>

	* ui_main_config.c, ui_screen_manager.[ch], vt_term.[ch]:
	  ui_set_start_with_local_pty() in ui_screen_manager.c is removed, and
	  vt_term.c has 'start_with_local_pty' global variable.

	* ui_font_ft.c:
	  Whether font->compl_fonts is NULL or not is checked in cairo_calculate_char_width().

	* MLPreferenceActivity.java:
	  "Don't show SSH dialog on startup" checkbox is added.

	* android/jni/ui_event_source.c:
	  - XWINDOW_OF() => UIWINDOW_OF()
	  - ui_window_set_mapped_flag(0) and ui_window_set_mapped_flag(1) are called
	    in Java_mlterm_native_1activity_MLPreferenceActivity_setConfig() and
	    Java_mlterm_native_1activity_MLPreferenceActivity_setDefaultFontConfig().

	* android/jni/ui_display.[ch]:
	  - Long click on scrollbar doesn't invoke context menu.
	  - ui_window_set_mapped_flag() is added.
	  - ui_window_set_mapped_flag(0) is called on APP_CMD_TERM_WINDOW, and
	    ui_window_set_mapped_flag(1) is called on APP_CMD_INIT_WINDOW, and

2016-12-04  Araki Ken  <arakiken@users.sf.net>

	* README.android: Updated.

	* ui_font_config.c: mlcc font FOOBAR "" removes a font setting of FOOBAR
	  specified in ~/.mlterm/*font.

	* main_loop.c, ui_main_config.c: The 6th argument (option explanation) of
	  bl_conf_add_opt() is removed on Android, Cocoa or Win32GDI.

	* vt_pty_intern.h: vt_config_menu_write() sets android_config_response instead
	  of write data to a configuration menu program on Android.

	* ui_event_source.c:
	  - get_current_term() which searches currently focused vt_term is added.
	  - Java_mlterm_native_1activity_MLPreferenceActivity_* are added.
	  - 'android_config_response' global variable is added.

	* ui_display.c: init_window() ignores the difference between
	  lock == -1 and lock == 0.

	* MLActivity.java: "Configuration" is added to context menu.

	* MLPreferenceActivity.java: Added.

	* AndroidManifest.xml: MLPreferenceActivity is added.

2016-11-14  Araki Ken  <arakiken@users.sf.net>

	* README.android: Updated.

	* ui_main_config.c: "start_with_local_pty" / --slp option is added only if
	  USE_LIBSSH2 is defined on Android.

	* ui_screen_manager.[ch]: ui_set_start_with_local_pty() is added.

	* configure.in:
	  - vt_cv_* -> ml_cv_*
	  - -lfreetype is added to OT_LAYOUT_LIBS with -lharfbuzz on cygwin/win32gdi
	    in order to avoid compiling error.

	* MLActivity.java: 'weight' argument is passed to LinearLayout.LayoutParams()
	  in makeTextEntry().

2016-11-12  Araki Ken  <arakiken@users.sf.net>

	* MLActivity.java:
	  - Context menu by long click is supported.
	  - Screen is completely redrawn in onResume().

	* android/jni/ui_event_source.c:
	  Java_mlterm_native_1activity_MLActivity_updateScreen() is added.

	* android/jni/ui_display.c:
	  - process_mouse_event() considers LongClick event.
	  - perform_long_click(), ui_display_update_all() is added.

	* android/jni/ui.h: long_press_counter is added to Display.

2016-11-06  Araki Ken  <arakiken@users.sf.net>

	* Android.mk, android/jni/main.c, android/jni/ui_display.[ch],
	  android/jni/ui_connect_dialog.c, MLActivity.java: libssh2 is supported.

	* ui_screen_manager.c: clean up.

	* vt_pty_ssh.c:
	  If user is NULL, getenv("USER") or getenv("USERNAME") is used to search
	  a matched ssh session.

	* ui_main_config.c: --restart option is invalidated on Android.

2016-10-16  Araki Ken  <arakiken@users.sf.net>

	* *.[chm], *.java: Indentation settings for emacs are added to the head of files.

	* wnn/wnnlib.[ch], gtk/marshal.[ch], gtk/reaper.c, gtk/vtetypebuiltins.c,
	  mlconfig/gtkxlfdsel.[ch]:
	  Format of them is reverted to 3.7.2

2016-10-10  Araki Ken  <arakiken@users.sf.net>

	* uitoolkit/*/ui_window.c: x_window_t::button_released is called if ButtonPress
	  event is received when x_window_t::button_is_pressing is true.

	* mlconfig/main.c: "Snapshot" button is added.

	* tool/mlclient/main.c: Help message is fixed.

	* tool/accessories/gedit.sh: Added.

2016-10-07  Araki Ken  <arakiken@users.sf.net>

	* ui_shortcut.c: Mod2 which is sent by pressing a button when num-lock is on
	  is ignored.

2016-10-02  Araki Ken  <arakiken@users.sf.net>

	* man/mlclient.1: Updated.

	* ui_screen_manager.c:
	  - mlclient() accepts --vsep and --hsep options.
	  - retain_encoding and retain_server arguments are added to open_or_split_screen().

2016-09-27  Araki Ken  <arakiken@users.sf.net>

	* vt_line.c: set_real_modified() is called in vt_line_unuse_ctl() for *_render().

2016-09-24  Araki Ken  <arakiken@users.sf.net>

	* configure.in, vtemu/Makefile.in: libmlterm_core is renamed to libmlterm_coreotl
	  if open type layout is supported.

	* doc/ja/README.ja, man/mlterm.1, etc/main, etc/main.ja: Updated

	* ui_main_config.c: "ssh_auto_reconnect" / --rcn option is added.

	* vt_pty_ssh.[ch], vt_pty.h, vt_pty_ssh.c:
	  - Automatic reconnection to ssh server in unexpected disconnection is supported.
	  - vt_pty_ssh_set_use_auto_reconnect() is added.

2016-09-04  Araki Ken  <arakiken@users.sf.net>

	* ui_layout.c: screen->window.[vh]margin * 2 is added to term->separator_[xy].

2016-09-03  Araki Ken  <arakiken@users.sf.net>

	* ui.h: GUI_TYPE is added.

	* uitoolkit/*/ui.h, ui_screen.c: XIM_SPOT_IS_LINE_TOP is added.

	* vte.c: vte_terminal_event_check_gregex_simple() and vte_get_features()
	  are implemented.

2016-08-29  Araki Ken  <arakiken@users.sf.net>

	* ef_tblfunc_loader.c: The names of dynamically Loaded modules are changed
	  from libef_xxx.so to libmef_xxx.so.

	* ui_event_source.c, ui_picture.c: X_PROTOCOL -> USE_XLIB.

2016-08-29  Araki Ken  <arakiken@users.sf.net>

	* java/.java.policy: Added.

	* xwindow/ -> uitoolkit/
	  kiklib/ -> baselib/
	  mkf/ -> encodefilter/
	  mlterm/ -> vtemu/
	  libkik -> libpobl
	  libmkf -> libmef

	* Google coding style is applied.

2016-08-21  Araki Ken  <arakiken@users.sf.net>

	* ml_pty_ssh.c: Compression of ssh connection is always enabled if libssh2-1.5.0
	  or later is used.

2016-08-18  Araki Ken  <arakiken@users.sf.net>

	* README.cosole, PROTOCOL: Updated.

	* main-con.c: termios is reset on exit.

	* version.h.in: 3.7.2 -> 3.7.2post

2016-08-15  Araki Ken  <arakiken@users.sf.net>

	* 3.7.2 released.
	  (tag "rel-3_7_2")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h:
	  updated for 3.7.2.

	* doc/en/README.console: Added.

2016-08-14  Araki Ken  <arakiken@users.sf.net>

	* main_loop.c, x_main_config.c: "mod_meta_prefix" / --metaprefix option
	  is processed in x_main_config.c instead of main_loop.c.

	* x_screen.[ch]: x_free_mod_meta_prefix() is added.

	* vte.c: "word_separators" / --sep and "auto_restart" / --restart options
	  which are processed in x_main_config.c are removed.

	* hb.c: <ftmodapi.h> in win32gdi is changed to <freetype/ftmodapi.h>

	* android/jni/x.h: platform dependent options are added.

2016-08-11  Araki Ken  <arakiken@users.sf.net>

	* README.ja, man/mlterm.1: Updated.

	* x_main_config.c: "primary_da" / --da1 and "secondary_da" / --da2 options
	  are added.

	* ml_vt100_parser.[ch]:
	  - ml_set_{primary|secondary}_da() are added.
	  - DA1 response is changed from CSI?1;2;3;4;7;29c to CSI?63;1;2;3;4;6;29c.
	  - DA2 response is changed from CSI>1;279;0c to CSI>24;279;0c
	  - DECRQSS is partially supported.

	* ml_edit.c: ml_edit_scroll_{up|down}ward() works if cursor position is not
	  within vertical and horizontal margins.

	* mlterm/Makefile.in: Whether $libdir/libmlterm_core.so is built with open type
	  layout option is checked before installing new libmlterm_core.so libraray.

	* main-con.c, console/x_display.c: #ifdef ECHOPRT is added.

	* x_window.c: Cursor is moved within vertical and horizontal margins before
	  SD or SU.

	* configure.in: --with-gui=console works on cygwin.

2016-08-07  Araki Ken  <arakiken@users.sf.net>

	* x_window.h: clip_y and clip_height members of x_window_t are enabled on mlterm-con
	  for input method plugins to work with both mlterm-fb and mlterm-con.

	* x_im_{candidate|status}_screen.c:
	  MARGIN and LINE_SPACE are 0 on mlterm-con.

	* console/x_window.c:
	  - IS_IM_WINDOW() macro is defined.
	  - IS_IM_WINDOW() check is added to x_window_fill_with().

	* fb/x_window.c: IS_IM_WINDOW() macro is defined.

	* console/x.h:
	  - The previous change is reverted for input method plugins to work with both
	    mlterm-fb and mlterm-con.
	  - Values of key symbols on platformes except linux and *bsd are the same as
	    those on freebsd.

	* configure.in: --with-gui=console works on cygwin.

2016-08-06  Araki Ken  <arakiken@users.sf.net>

	* console/x_window.c: If win->disp->width == win->width, x_window_is_scrollable()
	  returns 1 even if win->disp->display->support_hmargin is 0.

	* x_display.h: x_display_set_sixel_colors() is defined as (0) if USE_LIBSIXEL
	  is not defined.

	* console/x_display.c:
	  The default value of Display::support_hmargin is changed from 1 to 0.

	* console/x.h: The values of keyboard symbols are defined as 0xff00-0xffff.

	* main/Makefile.in: mkdir $(LIBEXECDIR)/mlterm instead of $(LIBEXECDIR).

2016-08-06  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: ModifyOtherKeys on win32 gdi is fixed.

	* console/x.h, console/x_display.c, console/x_window.c:
	  x_window_is_scrollale() is enabled only if the console where mlterm-con works
	  supports DECSLRM and DECLRMM which is checked by DA2 response.

	* ml_vt100_parser.c:
	  - DA2 response is changed from \x1b[>1;277;0c to \x1b[>1;279;0c.
	  - Wrong processing of shift+space in ml_vt100_parser_write_modified_key() is fixed.

2016-07-30  Araki Ken  <arakiken@users.sf.net>

	* console/x_display.c: modifyOtherKeys is enabled by default.

2016-07-29  Araki Ken  <arakiken@users.sf.net>

	* c_imagelib.c, main_loop.c, gdk-pixbuf.c, x_color.h, x_color_cache.c,
	  x_color_manager.c, x_display.h, x_draw_str.c, x_font.h, x_font_cache.c,
	  x_font_cache.h, x_font_config.c, x_font_manager.c, x_font_manager.h,
	  x_im_candidate_screen.c, x_im_status_screen.c, x_imagelib.h, x_layout.c,
	  x_main_config.c, x_picture.h, x_screen.c, x_window.h, xlib/x_imagelib.c:
	  USE_WIN32GUI, USE_QUARTZ, USE_FRAMEBUFFER and USE_CONSOLE are refactored.

	* console/x.h, fb/x.h, quartz/x.h, win32/x.h:
	  Platform dependent options (X_COLOR_HAS_RGB, SUPPORT_TRUE_TRANSPARENT_BG,
	  TYPE_XCORE_SCALABLE, MANAGE_WINDOWS_BY_MYSELF,
	  INLINE_PICTURE_MOVABLE_BETWEEN_DISPLAYS, SUPPORT_POINT_SIZE_FONT) are added.

	* xlib/x.h: Added.

	* x.h: USE_XLIB is defined on xlib.

2016-07-26  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, PROTOCOL: Updated.

	* main_loop.c: If no ml_term_t exists, mlterm-con-server exits from the main loop.

	* main/main-con.c:
	  - Moved from tool/mlclient/.
	  - mlterm-con-server is started if unix domain socket of ~/.mlterm/socket-con
	    doesn't work.

	* main/Makefile.in: mlterm-con-server is installed to $(libexec)/mlterm, and
	  mlterm-con is to $(bindir)/mlterm.

	* im_fcitx.c, im_ibus.c, im_m17nlib.c, im_uim.c:
	  USE_FRAMEBUFFER -> USE_FRAMEBUFFER || USE_CONSOLE

	* x_screen.c: "console_encoding" and "console_sixel_colors" are added to OSC 5379.

	* x_main_config.c: --csz/cell_size option is added.

	* x_draw_str.c, x_picture.h: If INLINE_PICTURE_MOVABLE_BETWEEN_DISPLAYS macro
	  is defined, cur_pic->disp == window->disp is not checked.

	* daemon.c:
	  - client_connected() for mlterm-con-server is moved from console/x_display.c
	  - STD{IN|OUT|ERR}_FILENO are closed in daemon_init().

	* console/x_window.c:
	  - x_window_fill_with() do nothing if height or width is less than
	    LINE_HEIGHT or COL_WIDTH,
	  - UTF16 characters are converted to UTF8 in draw_string().
	  - Creating sixel_{output|dither}_t and calling sixel_encode() are moved to
	    x_display.c.

	* console/x_display.[ch]:
	  - x_display_set_default_cell_size() is added.
	  - ShiftMask is set if 'A' - 'Z' character is received.
	  - start_server() and end_server() are removed.
	  - client_connected() is moved to daemon.c.
	  - x_picture_display_closed() is not called in x_display_close().
	  - "x_display_t *  disp" is added to arguments of x_display_set_char_encoding().
	  - x_display_set_sixel_colors() and x_display_output_picture() are added.

	* console/x.h: sixel_output and sixel_dither are added to Display.

2016-07-18  Araki Ken  <arakiken@users.sf.net>

	* x_screen_manager.c: open_screen_intern() uses layout->window.disp instead of
	  calling x_display_open() if layout is not NULL.

	* man/mlterm.1, doc/ja/README.ja, etc/main, etc/main.ja: Updated.

	* x_font_manager.c: The type of returned value of adjust_font_size() is changed
	  from void to int.

	* x_main_config.c: mlterm-con accepts -d option.

	* console/x_display.c:
	  - Server mode via unix domai socket of ~/.mlterm/socket-con is supported.
	  - Multiple displays are managed.

	* mlclient/main-con.c, mlclient/Makefile, mlclient/Makefile.in:
	  mlclient-con is added.

2016-07-09  Araki Ken  <arakiken@users.sf.net>

	* cocoa.m: A patch at http://the.nyarla.net/entry/2016/06/03/195013 is merged.
	  (Wheel mouse is supported.)

	* x_window_cairo.c: x_font_t::x_off is ignored in drawing text with the use
	  of complementary fonts.

	* x_font_ft.c: Loading complementary fonts is moved from x_window_cairo.c to
	  x_font_ft.c, and named as x_search_next_cairo_font().

	* main.c: ml_set_timeout_read_pty(0xffff) on NetBSD or OpenBSD framebuffer.

	* ml_vt100_parser.[ch]:
	  - ml_set_timeout_read_pty() is added.
	  - USE_FRAMEBUFFER macro is removed.
	  - snapshot() is rewritten with the use of ml_screen_write_content().

	* mlterm/Makefile.in: @GUI_CFLAGS@ is removed.

	* ml_term_manager.c: ml_term_write_content() is called in restarting mlterm in segv etc.

	* ml_term.h: ml_term_write_content() is added.

	* ml_screen.[ch]: ml_screen_write_content() is added.

	* inputmethod/*/Makefile.in: TARGET_console is added.

	* configure.in:
	  - "console" is added to --with-gui option.
	  - --disable-skk is revived.

	* x_layout.c: SEPARATOR_WIDTH => SEPARATOR_WIDTH and SEPARATOR_HEIGHT.

	* x_draw_str.c: If USE_CONSOLE is defined, text is drawn by
	  x_window_console_draw_string*().

	* x_window.h, console/x_window.c: x_window_console_draw_string*() which receive
	  a flag to draw underline are added.

	* x_main_config.c: --ckm, console_encoding option is added.

	* x_display.h, console/x_display.c: x_display_set_char_encoding() is added.

	* xwindow/x.h: console/x.h is included if USE_CONSOLE is defined.

	* xwindow/console: Added.

	* version.h.in: 3.7.0 -> 3.7.0post

2016-05-08  Araki Ken  <arakiken@users.sf.net>

	* 3.7.1 released.
	  (tag "rel-3_7_1")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h:
	  updated for 3.7.1.

	* man/mlterm.1, doc/en/PROTOCOL: Updated.

2016-05-08  Araki Ken  <arakiken@users.sf.net>

	* im_wnn.c: Shortcut in inserting 'n' is added.

	* im_skk.c: The color of converting text in editing a new word is reversed.

2016-05-07  Araki Ken  <arakiken@users.sf.net>

	* dict.c: "\r\n" is supported.

	* im_skk.c: Shortcut in inserting 'n' is added.

	* quartz/x.h: NSBackTabCharacter is assigned to XK_ISO_Left_Tab.

2016-05-06  Araki Ken  <arakiken@users.sf.net>

	* im_skk.c:
	  - im_skk_t::mode is backed up and restored before and after editing a new word.
	  - Text on a status window is correctly updated.

	* dict.c:
	  - The timing of loading global dictionary is fixed.
	  - Uninitialized variable ('num') is fixed.

2016-05-05  Araki Ken  <arakiken@users.sf.net>

	* im_skk.c, dict.[ch]: Cleanup.

2016-05-05  Araki Ken  <arakiken@users.sf.net>

	* im_skk.c, dict.c:
	  - 'back' argument of dict_completion() is changed to 'step' which designates
	    how many steps to go to a next caption.
	  - dict_completion_reset() -> dict_completion_reset_and_finish().

2016-05-05  Araki Ken  <arakiken@users.sf.net>

	* dict.c: Whether skk server supports "4xxx \n" protocol or not is checked.

	* im_skk.c, dict.c: Completion is supported.

	* ml_vt100_parser.c: vt100_parser->yeild = 0 (specific to framebuffer) at
	  the end of parse_vt100_parser() is removed.

2016-05-04  Araki Ken  <arakiken@users.sf.net>

	* x_im_status_screen.c, win32/x_window.c: Hack for win32gdi is moved from
	  x_im_status_screen.c to win32/x_window.c

	* x_im_status_screen-cocoa.m: Status screen is shown before calling
	  x_im_status_screen_t::show().

2016-05-04  Araki Ken  <arakiken@users.sf.net>

	* im_skk.c:
	  - Direct input triggered by 'l' key is available in editing a word
	    to be newly registerd.
	  - Status window is shown while skk is enabled.
	  - Full width alphabets input triggerd by 'L' is available.
	  - (concat "...") is partially available.
	  - It is possible to register a new word containing '/' and ';'.

	* hb.c: Compiling error is fixed.

	* configure.in: hb-coretext.h is checked on MacOSX/Cocoa.

2016-05-01  Araki Ken  <arakiken@users.sf.net>

	* im_skk.c: Ctrl+g resets preediting states.

2016-05-01  Araki Ken  <arakiken@users.sf.net>

	* im_skk.c: Wrong parsing of comment string staring with ';' is fixed.

	* skk/dict.c: winsock is supported.

	* configure.in: skk is enabled on win32gdi without cygwin.

	* x_window_cairo.c: A bug which dropped almost all glyph complementary fonts
	  is fixed.

2016-05-01  Araki Ken  <arakiken@users.sf.net>

	* quartz/x_im_status_screen-cocoa.m: Added for input method plugin.

	* quartz/x_window.c: x_window_translate_coordinates() is implemented by using
	  window_get_position().

	* cocoa.[hm]:
	  - window_get_position() is added.
	  - NSShiftMask isn't ignored in insertText().
	  - x_display_t::width and x_display_t::height are set in viewDidMoveToWindow.

	* im_skk.c, im_wnn.c: dha dhi dhu dhe and dho are supported.

	* skk/dict.c: input_method option accepts whether skk dictionary or skk server
	  uses utf8 instead of eucjp.
	  (e.g. --im skk:localhost:utf8)

	* wnn/Makefile.in, canna/Makefile.in, skk/Makefile.in: TARGET_quartz is added.

	* configure.in: skk, wnn and canna are available on MacOSX/Cocoa.

	* configure.in, ml_char.c:
	  Fix https://github.com/saitoha/homebrew-sixel/pull/2
	  (Merge https://bitbucket.org/arakiken/mlterm/pull-requests/2/ml_charc-strip-the-dependency-of with some fixes.)

	* README, doc/ja/README.ja: Updated.

2016-04-28  Araki Ken  <arakiken@users.sf.net>

	* skk/dict.[ch], skk/mkf_str_parser.[ch]: Added.

	* im_skk.c: Many bugs are fixed.

2016-04-21  Araki Ken  <arakiken@users.sf.net>

	* im_skk.c: ~/.skk-jisyo is loaded.

	* kik_conf_io.c: Regular files whose names begin with "." in the home directory
	  aren't checked if they should exit in ~/.config/ or not.

2016-04-18  Araki Ken  <arakiken@users.sf.net>

	* inputmethod/skk: Added.

	* im_wnn.c: Minor fixes.

	* x_im_status_screen.c: Incorrect redrawing on win32gdi is fixed.

	* configure.in: skk is enabled by default.

2016-04-10  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: The change of 1611 commit is reverted.

	* ml_vt100_parser.c: 0.01 sec interval is used for the limit of reading bytes in
	  ml_parse_vt100_sequence() instead of MAX_READ_COUNT.

	* ml_line.c: Fix https://sourceforge.net/p/mlterm/mailman/message/34992704/.

	* man/mlterm.1: U+XXXX-XXXX in ~/.mlterm/*font is documented.

	* kik_pty_{bsd|stream}.c: If B38400 is defined, B38400 is used instead of B9600.

2016-04-03  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1: Updated.

2016-03-23  Araki Ken  <arakiken@users.sf.net>

	* x_im_candidate_screen.c: The number of drawing candidate window is decreased.

	* x_im_status_screen.c: Minor fixes.

	* im_wnn.c:
	  - "[N/N]" is shown after preediting text.
	  - Candidate number is shown in candidate window.
	  - CAND_WINDOW_ROWS(==5) is defined.

2016-03-19  Araki Ken  <arakiken@users.sf.net>

	* registobmp/Makefile.in: Changeset 2562 commit (-lm is removed) is reverted.

	* ml_vt100_parser.c: "vt_color_mode" is added to OSC 5380 and 5381.

	* ml_color.[ch]: ml_get_color_mode() is added.

	* vte.c: Font size specified after font family in the 2nd argument of
	  vte_terminal_set_font_from_string() is applied to "fontsize" option.

	* version.h.in: 3.7.0 -> 3.7.0post

2016-03-13  Araki Ken  <arakiken@users.sf.net>

	* 3.7.0 released.
	  (tag "rel-3_7_0")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h:
	  updated for 3.7.0.

	* etc/main, etc/main.ja: Updated.

	* fb/x_color.c, fb/x_display.c: The type of the first argument of
	  x_cmap_get_closest_color() is reverted from u_int to u_long.

2016-03-12  Araki Ken  <arakiken@users.sf.net>

	* mlfc/main.c: 'mlfc -h' shows usage message.

	* MLTerm.java: The size of color palette is changed from 258 to 512.

	* MLTermPty.c: If a previous character is not converted to UTF-16,
	  NULL is passed to the 2nd argument of need_style().

	* ml_color.c: If current value is overwritten by specifying the same
	  value as the default rgb, color_config_set_rgb() erases the current one.

	* x_screen.c: Not only "USASCII" but also "US_ASCII" and "US-ASCII" are
	  available for {set|get}_font_config().

2016-03-11  Araki Ken  <arakiken@users.sf.net>

	* README.ja, man/mlterm.1: Updated.

	* ml_vt100_parser.c, x_main_config.c: "use_approximate_vt_color" is changed
	  to "vt_color_mode"

	* ml_color.c:
	  - 'threshold' is added to arguments of ml_get_closest_256_colors().
	  - ml_set_use_approximate_vt_color() -> ml_set_color_mode()

2016-03-11  Araki Ken  <arakiken@users.sf.net>

	* x_main_config.c: "use_approximate_vt_color" option is added.

	* fb/x_display.c: The performance of x_cmap_get_closest_color() is improved
	  by using ml_get_closest_256_color().

	* ml_color.c:
	  - ml_set_use_approximate_vt_color() is added.
	  - ml_get_closest_256_color() is added.
	  - The performance of ml_get_closest_color() is improved by using
	    ml_get_closest_256_color().

	* ml_vt100_parser.c:
	  - Whether ps is -1 or not is checked before calling ml_get_closest_color().
	  - "use_approximate_vt_color" is added to OSC 5379.

	* c_imagelib.c, fb/x_display.c, ml_color.c:
	  The variable type of holding distance of colors in searching
	  approximate color is changed from u_long to u_int.

2016-03-06  Araki Ken  <arakiken@users.sf.net>

	* x_color_cache.[ch]:
	  x_color_cache_256_t -> xc_olor_cache_256ext_t which contains extended colors.

	* x_color.h: The type of pixel is changed from u_long to u_int32_t in x_color_t.

	* ml_color.[ch]:
	  - 0x100-0x1ef is used to allocate 24bit colors. (Named as "extended colors")
	  - 0x100-0x106 (ML_FG_COLOR-ML_CROSSED_OUT_COLOR) is moved to 0x1f0-0x1f6.
	  - MAX_256_COLORS, MAX_EXT_COLORS, MAX_256EXT_COLORS, IS_EXT_COLOR(),
	    IS_256EXT_COLOR(), EXT_COLOR_TO_INDEX(), INDEX_TO_EXT_COLORS(),
	    COLOR_DISTANCE() and COLOR_DISTANCE_THRESHOLD macros are added.
	  - ml_ext_color_is_changed() is added.
	  - ml_get_closest_color() and ml_get_color_rgba() consider extended colors.
	  - IS_VALID_COLOR_EXCEPT_FG_BG() is renamed to IS_VALID_COLOR_EXCEPT_SPECIAL_COLORS().

	* kik_map.h:
	  - The number of searching is decreased.
	  - MAP_MARGIN_SIZE macro is newly defined.

	* kik_map.c: Minor fixes of test code.

2016-03-05  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: 'mlcc font USASCII <Font Name>' is available.

	* x_font_config.c: Unnecessary kik_str_alloca_dup() is removed.

	* quartz/x_imagelib.c: If gif file path is ~/.mlterm/anim*, split_animation_gif()
	  is not called.

	* quartz/x_font.c: x_font_t::ot_font_not_found is checked in
	  x_font_has_ot_layout_table().

	* kik_mem.c: Illegal access to unallocated memory in kik_mem_free_all() is fixed.

2016-03-03  Araki Ken  <arakiken@users.sf.net>

	* quartz/cocoa.m: [NSRunLoop runUntilDate] is called if huge data is received
	  or screen is blanked temporarily by visual bell.

	* mlfc/Makefile.in: Install directory is fixed.

2016-03-01  Araki Ken  <arakiken@users.sf.net>

	* configure.in: Not only <machine/grfioctl.h> but also <machine/vuid_event.h>
	  is checked not to enable USE_GRF on NetBSD/macppc.

2016-02-28  Araki Ken  <arakiken@users.sf.net>

	* quartz/x_window.c: x_window_set_normal_hints() is fixed.

	* quartz/x_imagelib.c: animation gif is supported.

	* ml_vt100_parser.c: SUPPORT_ITERM2_OSC1337 is enabled by default.

	* main.c: _fmode = _O_BINARY on win32.

2016-02-26  Araki Ken  <arakiken@users.sf.net>

	* README.fontproto, README.ja, man/mlterm.1: Updated.

	* mc_font.c: "UNICODE (Hebrew)", "UNICODE (Hindi)", "UNICODE (Bengali)",
	  "UNICODE (Punjabi)", "UNICODE (Gujarati)", "UNICODE (Oriya)", "UNICODE (Tamil)",
	  "UNICODE (Telugu)", "UNICODE (Kannada)" and "UNICODE (Malayalam)" are added.

	* mc_io.[ch]: font_size is removed from arguments of mc_{set|get}_font_name().

	* ml_vt100_parser.[ch]:
	  - font_size is removed from arguments of ml_config_event_listener_t::get_font.
	  - CSI?12h and CSI?12l (XT_CBLINK) are dropped.

	* x_window_cairo.c:
	  Alias font names are considered in searching glyph complementary fonts.

	* x_font_ft.c:
	  - The format of cairo or xft font name is changed as follows.
	      [Family] [Weight] [Slant] [Size]-[Encoding]:[Percentage]
	    ->[Family] [Weight] [Slant] [Size]:[Percentage]
	  - It is not necessary to escape '-' by '\' in font name.

	* x_font_config.[ch]:
	  - The format of value of ~/.mlterm/*font is changed as follows.
	    [Font name];[Size],[Font name];[Size],[Font name];... -> [Font name]
	  - x_customize_font_name() and x_customize_default_font_name() are removed.

	* x_main_config.c, x_font_manager.c: Whether font_size is within
	  font_size_range is checked in x_font_manager.c, not in x_main_config.c.

	* x_font_cache.c, x_font_config.c, x_font_manager.c:
	  {min|max}_font_size static variables and x_set_font_size_range() are
	  moved from x_font_config.c to x_font_manager.c.

	* ml_termcap.c:
	  - Illegal memory access around db on memory for MacOSX/Cocoa and Android is fixed.
	  - DB on memory isn't used on MacOSX/Cocoa.

	* ml_char.c: unicode_area_{max|min} static variables are added.

	* configure.in: mlfc is added to the default value of --with-tools option.

	* tool/mlfc: Added.

	* cocoa.m: If x_get_all_screens(NULL) has already returned 0 before willClose() is
	  called, nothing except calling [NSNotificationCenter removeObserver] is done.

	* cocoa.[hm], quartz/x_window.c: view_set_normal_hints() is changed to
	  window_set_normal_hints(), because x_window_set_normal_hints(root window
	  whose my_window is NSWindow*) calls window_set_normal_hints(NSWindow).

	* main-cocoa.m: [[NBundle mainBundle] bundlePath] is passed to kik_set_sys_conf_dir().

	* cocoa/install.sh: etc/* files are installed to mlterm.app bundle.

	* otl.h: Syntax error is fixed.

	* ml_char_encoding.c, kik_conf_io.c: Minor fixes.

	* version.h.in: 3.6.3 -> 3.6.3post

2016-02-14  Araki Ken  <arakiken@users.sf.net>

	* 3.6.3 released.
	  (tag "rel-3_6_3")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h:
	  updated for 3.6.3.

	* ml_ot_layout.c: ucs_filled++ is moved outside of ml_is_rtl_char() which
	  may be replaced by (0).

2016-02-14  Araki Ken  <arakiken@users.sf.net>

	* README, README.ja: Updated.

	* libotl/Makefile.in: LKIK=${top_builddir}/kiklib/src/libkik.la -> LKIK=@LKIK@

	* configure.in: If --enable-anti-alias isn't specified, open type layout is
	  disabled on framebuffer.

2016-02-13  Araki Ken  <arakiken@users.sf.net>

	* 3.6.2 released.
	  (tag "rel-3_6_2")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h:
	  updated for 3.6.2.

	* README, doc/ja/README.ja: Updated.

	* configure.in: --disable-otl is added.

2016-02-11  Araki Ken  <arakiken@users.sf.net>

	* README.indic: Updated.

	* ml_vt100_parser.c: fopen/fclose/fwrite are replaced by
	  cygfopen/cygfclose/cygfwrite defined in cygfile.[ch].

	* mlterm/cygfile.[ch]: Added.

	* kik_dlfcn_win32.c, gdiplus.cpp, gdk-pixbuf.c, mlimgloader/none.c,
	  win32/x_dnd.c, win32/x_imagelib.c:
	  cygwin_conv_to_{win32|posix}_path() -> kik_conv_to_{win32|posix}_path().

	* kik_path.[ch]: kik_conv_to_{win32|posix}_path is added.

	* x_screen.c: x_stop_selecting() is called in button_released() even if
	  mouse reporting mode is set.

	* fb/x_font.c, libtype/x_window_{cairo|xft}.c, cocoa.m, quartz/x_font.c,
	  win32/x_font.c, xlib/x_font.c:
	  #ifdef USE_OT_LAYOUT ... #endif is inserted.

	* configure.in: `pkg-config freetype2 --cflags` is added to OT_LAYOUT_CFLAGS
	  with harfbuzz on platforms except MacOSX/Cocoa.

	* prepare.sh: Files in xwindow/libotl are copied.

	* Android.mk:
	  - OTF_* -> OTL_*
	  - -Ixwindow/libotl and -DNO_DYNAMIC_LOAD_OTL are added to OTL_CFLAGS.

2016-02-10  Araki Ken  <arakiken@users.sf.net>

	* README.ja: Updated,

	* x_font.h, quartz/x_font.c: pointsize -> size.

	* x_main_config.[ch]: use_ot_layout is added to x_main_config_t.

	* x_screen.c: use_ot_layout is added to arguments of change_ctl_flag().

	* x_draw_str.c: If xfont->use_ot_layout is true on win32gdi,
	  x_window_draw_image_string() variant functions are not used.

	* win32/x_font.c:
	  - ISO10646_UCS4_1_V is added to wincs_info_table.
	  - is_ucs is added to arguments of text_out().
	  - x_calculate_char_width() returns 0 if calculate_char_width() returns 0.

	* otf.c, win32/x_font.c: free(obj) is called in otl_open(), not in
	  x_font_has_ot_layout_table().

	* hb.c: Fixes for win32gdi.

	* ml_line.[ch]:
	  - ml_set_use_ot_layout() and ml_is_using_ot_layout() are removed.
	  - Opentype layout is enabled if 'term' argument of ml_line_ctl_render()
	    is non-NULL value.

	* ml_term.[ch]:
	  - ml_term_set_use_ctl() is defined as a macro, not as a function.
	  - ml_term_set_use_ot_layout() and ml_term_is_using_ot_layout() are added.
	  - use_ot_layout is added to ml_term_t.

	* ml_term.c, ml_vt100_parser.c:
	  "use_ot_layout", "ot_script" and "ot_features" of OSC 5379-5381 are
	  moved from ml_vt100_parser.c.

	* ml_term.[ch], ml_term_manager.[ch]:
	  use_ot_layout is added to arguments of ml_term_new() and ml_create_term().

	* ml_vt100_parser.[ch]:
	  - CONVERT_UNICODE_TO_ISCII is added to ml_unicode_policy_t.
	  - Even if use_char_combining is false, is_comb attr of ml_char_t is set.
	  - use_ctl is removed from ml_vt100_parser_t, and the result of IS_ARABIC_CHAR()
	    is checked before ml_is_arabic_combining() is called.

	* ml_shape.h: IS_ARABIC_CHAR() is added.

	* ml_screen.h: use_dynamic_comb is removed.

2016-02-07  Araki Ken  <arakiken@users.sf.net>

	* README.cocoa, README.indic, doc/en/README.win32: Updated.

	* etc/font.cocoa: Added.

	* quartz/x_font.c: If a specified font family for us ascii is not found,
	  "Menlo" font is loaded instead.

	* quartz/x_window.c: x_window_set_normal_hints() calls view_set_normal_hints().

	* cocoa.[hm]: view_set_normal_hints() is added.

2016-02-06  Araki Ken  <arakiken@users.sf.net>

	* README.cocoa, README.indic: Updated.

	* x_draw_str.c:
	  If ch_cs == ISO10646_UCS4_1_V, ml_char_get_offset() of a combining char
	  whose ch_code is less than 0x100 is added to x.

	* quartz/x_font.c: fontsize_d of parse_from_name() is applied.

	* cocoa.m: (char*)str -> (u_char*)str in drawString().

	* hb.c: hb_ot_font_set_funcs() is called after hb_font_create() on MacOSX/Cocoa.

	* otl.h, otf.c, hb.c:
	  fontsize argument which is not used from otf.c for now is added to
	  otl_convert_text_to_glyphs().

	* mlconfig/main.c, mc_flags.[ch]:
	  "OpenType Layout" checkbox is added to "Encoding" tab.

	* ml_line.c: If dst->num_of_chars < src->num_of_filled_chars,
	  src->ctl_info is not copied to dst->ctl_info in case ml_line_shape(dst)
	  is called before ml_line_ctl_render(dst).

	* im_kbd.c: result->num_of_args and readable_args are fixed.

	* configure.in: libind is never built on MacOSX/Cocoa.

	* cocoa/install.sh: Linkage to libotf and libharfbuzz is adjusted.

2016-02-04  Araki Ken  <arakiken@users.sf.net>

	* quartz/x_font.c: font->use_ot_layout check in x_calculate_char_width()
	  is fixed.

	* ml_line_iscii.c: Processing a returned value of ml_iscii() is fixed again.

	* configure.in, libotl/hb.c: Hack to build libotl/hb.c with harfbuzz library
	  on quartz is added.

2016-02-03  Araki Ken  <arakiken@users.sf.net>

	* ml_line_iscii.c: Processing a returned value of ml_iscii() is fixed.

	* quartz/x_font.c:
	  - ISO10646_UCS4_1_V is supported.
	  - x_font_has_ot_layout_table() supports harfbuzz version of libotl.
	  - x_calculate_char_width() supports proportional fonts.

	* cocoa.[hm]:
	  - cocoa_font_get_advance() is added.
	  - drawUnistr supports proportional fonts.

	* hb.c: otl_{open|close}() support win32 and quartz.

	* cocoa/install.sh: libctl_iscii.so and libind_{hindi|bengali}.so are installed.

	* configure.in: libind is built on MacOSX/Cocoa.

2016-02-02  Araki Ken  <arakiken@users.sf.net>

	* win32/x_font.c:
	  - The address of GetTextExtentPointI is gotten dynamically in USE_WIN32API
	    because its symbol doesn't exist on mingw-i686-pc-mingw.
	  - ISO10646_UCS4_1_V is considered.
	  - Whether the width of full width characters is actually double or not
	    is checked by GetTextExtentPoint32W(0x3000).

	* libind/Makefile.in: tamil.o is added to TBL_OBJ.

	* kik_dlfcn_win32.c: LoadLibrary() -> LoadLibraryA()

	* ml_ot_layout.c, ml_shape.c: Minor fixes.

2016-02-01  Araki Ken  <arakiken@users.sf.net>

	* x_draw_str.c: calculate_char_width() which is separated from
	  x_calculate_mlchar_width is used internally.

	* fb/x_window.c: Combined ISO10646_UCS4_1_V characters whose
	  ml_char_get_offset() is minus is correctly drawn.

	* fb/x_display_linux.c:
	  - Not only /sys/class/input/inputN/name but also
	    /sys/class/input/eventN/device/name is checked to search keyboard and
	    mouse devices.
	  - /dev/input/mice and /dev/input/mouse0 are checked.
	  - EVIOCGABS(ABS_X) and EVIOCGABS(ABS_X) are checked when EV_ABS event is
	    received.

	* ml_vt100_parser.c, x_screen.c:
	  - {stop|start}_vt100_cmd() aren't called in set_mouse_report() in
	    ml_vt100_parser.c and x_stop_selecting() etc aren't called in
	    xterm_set_mouse_report() in x_screen.c in order to reduce the number
	    of calling ctl_render().
	  - {stop|start}_vt100_cmd() aren't called in request_locatator().
	  - 'visualize' is added to arguments of config_protocol_set_simple()
	    to control whether to call {stop|start}_vt100_cmd().

	* libctl/ml_line_iscii.c:
	  - ml_iscii() is called only if ml_line_is_real_modified() is true.
	  - Loop end in ml_line_iscii_convert_logical_char_index() is changed
	    from ml_line_end_char_index(line) to line->ctl_info.iscii->size.

	* libctl/ml_iscii.c, ml_ot_layout.c:
	  The allocated size of state->num_of_chars_array is minimized.

	* libctl/ml_line_bidi.c:
	  - ml_bidi() is called only if ml_line_is_real_modified() is true.
	  - set_visual_modified() which sets visual modified area from logical one
	    is called if visual_order is not changed.

	* libctl/ml_bidi.c:
	  visual_order is not changed => return 1
	  visual_order is changed => return 2

	* x_screen.c:
	  ml_line_has_ot_layout() -> ml_line_has_ot_substituting_glyphs().

	* ml_line.[ch]:
	  - line->is_modified = 2 (in set_real_modified() called internally) if it is really
	     modified while ml_line_set_modified*() called externally sets
	     line->is_modified = 1.
	  - ml_line_is_real_modified() is added.
	  - ml_ot_layout() is called only if ml_line_is_real_modified() is true.
	  - ml_line_has_ot_layout() -> ml_line_has_ot_substituting_glyphs().

	* ml_line.c, ml_line_shape.c, ml_ot_layout.[ch]:
	  line->ctl_info.ot_layout->has_ot_layout => line->ctl_info.ot_layout->substituted

2016-01-29  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c:
	  - Unicode => ISCII conversion is enabled only if ml_is_using_ot_layout()
	    is false.
	  - "use_ot_layout" option is added to ml_vt100_parser_get_config().

	* ml_line.[ch]: ml_is_using_ot_layout() is added.

	* fb/x_font.c: Minor fixes.

	* otf.c, win32/x_font.c: Compiling error is fixed.

2016-01-28  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: x_calculate_char_width() -> x_calculate_mlchar_width()

	* x_draw_str.[ch]: x_calculate_mlchar_width() is added.

	* x_font.h, xlib/x_font.c, fb/x_font.c, win32/x_font.c, quartz/x_font.c,
	  x_font_ft.c, otl.h, otf.c, hb.c:
	  offsets and widths arguments are added to x_convert_text_to_glyphs().

	* ml_line.c: ml_line_ot_layout_{visual|logical|convert_logical_char_index_to_visual}
	  are reverted.

	* ml_char_encoding.[ch], x_font_config.c, x_font_manager.c:
	  ML_ISCII_ROMAN and ML_ISCII_TAMIL are removed.

	* ml_char.[ch]:
	  - new_comb() is separated from ml_char_combine().
	  - ml_char_combine_simple() uses new_comb().
	  - ml_char_get_offset(), ml_char_get_width() and ml_char_set_position() are added.

	* mkf_8bit_conv.[ch], mkf_8bit_parser.[ch], mkf_charset.h, mkf_ucs4_iscii.[ch],
	  mkf_ucs4_map.c: Functions related to ISCII_ROMAN are removed.

	* mkf/lib/Makefile.in: 16.1 -> 17.0

	* libctl/ml_iscii.c: iscii_tamil_table is revived.

	* libind/tamil.c: Revived.

	* table/tamil.table: Revived with minimum.

2016-01-24  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.ja, man/mlterm.1, etc/main, etc/main.ja, doc/en/README.indic:
	  Updated.

	* x_font_cache.c, x_font_manager.c:
	  ISO10646_UCS4_1_V font is treated as FONT_VAR_WIDTH forcibly in
	  x_font_cache_get_xfont() and x_get_font().

	* win32/x_font.c: GetTextExtentPointIW() is used for glyph index.

	* cocoa.[hm], quartz/x_font.c:
	  ot_font is created in x_font.c, not in cocoa.m
	  (cocoa_create_otf() is removed. cocoa_get_font_path() is added.)

	* */x_font.c, x_font_ft.c, */x_window.c, x_window_{cairo|xft}.c:
	  'if( font->ot_font && font->use_ot_layout)' => 'if( font->use_ot_layout)'
	  (font->ot_font can be NULL if its charset is ISO10646_UCS4_1_V)

	* x_window_cairo.c: Centering of the last glyph under font->use_ot_layout == 1
	  in show_text() is fixed.

	* fb/x_font.c:
	  A font for ISO10646_UCS4_1_V is treated as proportional.
	  (If XFontStruct for ISO10646_UCS4_1_V has been already used for ISO10646_UCS4_1
	  (fixed-pitch), loaded glyphs are cleared by clear_glyph_cache_ft() becauase
	  glyph_size is 3bytes different from fixed-pitch font to proportional one.)

	* */x_font.c, x_font_ft.c: libotl is used.

	* quartz/otfwrap.[ch], win32/otfwrap.[ch]: Removed.

	* libotl/: Added.

	* ml_vt100_parser.c: If USE_HARFBUZZ is defined, Unicode->ISCII conversion is
	  disabled.

	* ml_shape.c:
	  If src code is 0x900-0xd7f, ISO10646_UCS4_1_V is set.

	* ml_line.c, ml_shape.c:
	  The algorithm of ml_line_ot_visual(), ml_line_ot_logical() and
	  ml_shape_ot_layout() is changed.

	* x_main_config.c:
	  - "use_gsub", "gsub_script" and "gsub_features" => "use_ot_layout",
	    "ot_script" and "ot_features".
	  - use_ctl is forcibly enabled if use_gsub is true.

	* x_screen.c: The 3rd argument (use_ot_layout) of x_font_manager_set_attr()
	  is always false in draw_preedit_str().

	* ml_line[ch], ml_line_shape.c, ml_logical_visual.[ch], ml_shape.[ch],
	  ml_vt100_parser.c, x_font.h, */x_font.[ch], libtype/x_font_ft.c,
	  */x_window.c, x_window_{xft|cairo}.c, x_functbl_*.c, x_type_loader.h,
	  x_font_manager.c, x_screen.c:
	  - ml_gsub -> ml_ot_layout
	  - x_font_t::otf -> x_font_t::ot_font
	  - {xft|cairo}_set_otf -> {xft|cairo}_set_ot_font

	* ml_gsub.[ch]: Renamed to ml_ot_layout.[ch].

	* ml_char.[ch]:
	  Max number of unicode areas is changed from 511 to 255 and
	  1 bit is used for CS_REVISION_1. (ISO10646_UCS4_1_V)

	* ml_str_parser.c: Null character is skipped.

	* libctl/Makefile.in, libtype/Makefile.in: LMKF is removed.

	* libtbl/mkf_ucs4_iscii.c: 0xa00-a7f => ISCII_PUBJABI.

	* mkf_charset.h: ISO10646_UCS4_1_V is added to draw indic scripts
	  in variable column width all the time.

	* main/Makefile.in:
	  @GSUB_LIBS@ is removed from LIBS2_fb.

	* tamil.c, tamil.table, roman.c, roman.table, im_kbd.c, ml_iscii.c:
	  tamil and roman in libind are removed.

2016-01-17  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja: Updated.

	* x_font_ft.c: ":Percentage" in ~/.mlterm/aafont is enabled on cairo.

	* xlib/x_font.c, x_font_ft.c, win32/x_font.c:
	  x_font_t is created by calloc instead of malloc.

	* ml_logical_visual.[ch], ml_line.c, x_main_config.c: defined(USE_GSUB) is added.

2016-01-16  Araki Ken  <arakiken@users.sf.net>

	* ml_bidi.[ch], ml_gsub.c:
	  ml_load_ctl_bidi_func(ML_IS_RTL_CHAR) is moved from ml_bidi.c to ml_gsub.c
	  in order to link ml_gsub.o to libmlterm_core.so

	* mlterm/Makefile.in: ml_gsub.o is linked to libmlterm_core.so.

	* win32/x_window.c:
	  is_glyph argument is added to text_out().

	* win32/x_font.c:
	  - x_font_has_gsub_table() and x_convert_text_to_glyphs() are added.
	  - GetTextExtentPoint -> GetTextExtentPoint32
	  - font->width = w_sz.cx instead of tm.tmAveCharWidth because w_sz.cx of
	    PragmataPro is 1 pixel larger than tm.tmAveCharWidth.

	* win32/otfwrap.[ch]: Added.

2016-01-13  Araki Ken  <arakiken@users.sf.net>

	* quartz/otfwrap.[ch], quartz/x_font.c:
	  otf_check_table() is integrated to otf_open().

2016-01-11  Araki Ken  <arakiken@users.sf.net>

	* etc/main, etc/main.ja: Updated.

	* fb/x_window.c: Compiling error is fixed.

	* jni/Android.mk: OTF_SRC_FILES and OTF_CFLAGS are cleared once on every arch.

	* x_font_ft.c: XftGlyphExtents() is used if ch is glyph index.

	* main/Makefile.in: Mistake of the previous commit is reverted.

2016-01-10  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.ja, man/mlterm.1: Updated.

	* x_main_config.c: "use_gsub", "gsub_script" and "gsub_features" options
	  are added.

	* x_screen.c: gsub_get_gsub_font() is added.

	* x_type_loader.[ch]:
	  - Moved to xwindow/xlib/.
	  - X_SET_OTF and X_CONVRET_TEXT_TO_GLYPHS are added to x_type_id_t.

	* xlib/x_font.c, libtype/x_font_ft.c:
	  - x_font_has_gsub_table(), x_convert_text_to_glyphs(),
	    {xft|cairo}_set_otf and {xft|cairo}_convert_text_to_glyphs() are added.

	* fb/x_font.c:
	  - load_char() -> load_glyph()
	  - get_glyph_index(), x_font_has_gsub_table() and x_convert_text_to_glyphs()
	    are added.
	  - get_ft_bitmap() accepts glyph index if use_gsub argument is true.

	* x_font_manager.[ch]:
	  - use_gsub is added to x_font_manager_t.
	  - x_font_manager_set_size_attr() is renamed to x_font_manager_set_attr().

	* x_font.h: otf, otf_not_found and use_gsub are added to x_font_t.

	* ml_vt100_parser.c:
	  - CSI33h / CSI33l are supported.
	  - "use_gsub" is added to OSC 5379.

	* ml_term_manager.c: ml_set_gsub_attr(NULL) is called in
	  ml_term_manager_final() to free memory.

	* ml_logical_visual.[ch]: ml_term_t is added to ml_logvis_ctl_new()
	  in order to pass it to ml_line_ctl_render().

	* ml_line_shape.c:
	  - ml_line_gsub_need_shape() is added.
	  - ml_line_shape() uses ml_shape_gsub().

	* ml_shape.[ch]: ml_shape_gsub() is added.

	* ml_line.[ch]:
	  - ml_gsub_state_t is added to ml_line_t.
	  - ml_set_use_gsub(), ml_line_set_use_gsub(), ml_line_gsub_render(),
	    ml_gsub_visual(), ml_line_gsub_logical(), ml_line_has_gsub() and
	    ml_line_gsub_convert_logical_char_index_to_visual() are added.
	  - ml_term_t is added to arguments of ml_line_ctl_render() in order
	    to pass it to ml_line_gsub_render().

	* ml_char.[ch]: ml_char_set_cs() is added.

	* libctl/ml_iscii.c, mlterm/ml_iscii.c:
	  ml_iscii_copy() doesn't copy ml_iscii_state_t if optimize argument
	  is true and source ml_iscii_state_t doesn't have rtl characters.

	* ml_ctl_loader.h: ML_IS_RTL_CHAR is added.

	* libctl/ml_bidi.c, mlterm/ml_bidi.c:
	  - ml_bidi() returns -1 if ISCII character is found.
	  - ml_bidi_copy() doesn't copy ml_bidi_state_t if optimize argument
	    is true and source ml_bidi_state_t doesn't have rtl characters.
	  - ml_is_rtl_char() is added.

	* ml_gsub.[ch]: Added.

	* main/Makefile.in, mlterm/Makefile.in, xwindow/Makefile.in:
	  @GSUB_CFLAGS@ and @GSUB_LIBS@ are added.

	* configure.in: libotf is checked.

	* Android.mk: libotf files are added to LOCAL_SRC_FILES and
	  USE_GSUB is added to LOCAL_CFLAGS.

	* im_uim.c: Experimental implementation of showing not only candidate screen
	  but also status one is added.

	* ml_normalize.m: Added.

2015-12-27  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.[ch]:
	  - ml_pty_hook_t is added to ml_vt100_parser_t.
	  - KAM(CSI2h, CSI2l), SRM (CSI12h, CSI12l), DECBKM(CSI?67h, CSI?67l),
	    DA3(CSI=c), DECDSR(CSI?n), OSC 104 and OSC 105 are supported.

	* ml_pty.[ch], ml_pty_intern.h:
	  ml_pty_set_hook() and ml_pty_hook_t are added.

	* ml_termcap.[ch]:
	  - ml_termcap_entry_t * => ml_termcap_ptr_t
	  - ml_termcap_get_{str|bool}_field() are removed.
	  - ml_termcap_bce_is_enabled() and ml_termcap_set_key_seq() are added.
	  - ml_termcap_{str|bool}_field is moved from ml_termcap.h to ml_termcap.c.

2015-12-23  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, etc/main, etc/main.ja: Updated

	* mlconfig/main.c: "Select URI by double click" checkbox is added to "Others" tab.

	* mc_flags.[ch]: MC_FLAG_REGARDURIASWORD is added.

	* x_main_config.c: "regard_uri_as_word" / --uriword option is added.

	* ml_vt100_parser.c: "regard_uri_as_word" is added to OSC 5379-5383.

	* ml_screen.[ch]:
	  - ml_{set|get}_regard_uri_as_word() are added.
	  - If regard_uri_as_word is true, ml_screen_get_word_region() regards uri as word.

2015-12-20  Araki Ken  <arakiken@users.sf.net>

	* mc_radio.c: "sound|visual" value is added to bel_mode option.

	* quartz/x_window.c: x_window_bell() is implemented.

	* cocoa.[hm]: view_visual_bell() and cocoa_beep() are added.

	* win32/x_window.c: x_window_blank() is fixed.

2015-12-20  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja: Updated.

	* vte.c:
	  - vte_terminal_{set|get}_word_char_exceptions() are added.
	  - "child-exited" signal is triggered with exit status on vte-0.38 or later.

	* main-cocoa.m: LANG environmental variable is set.

	* x_main_config.c: The default value of "type_engine" option is changed
	  from xft to cairo on xlib.

	* ml_char.c: ml_char_combine() calls ml_normalize().

	* mlterm/Makefile.in, configure.in: ml_normalize.o is added to OBJ_CORE
	  on MacOSX.

	* ml_normalize.m: Added. (available on MacOSX alone.)

	* version.h.in: 3.6.1 -> 3.6.1post

2015-12-15  Araki Ken  <arakiken@users.sf.net>

	* 3.6.1 released.
	  (tag "rel-3_6_1")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h:
	  updated for 3.6.1.

2015-12-13  Araki Ken  <arakiken@users.sf.net>

	* gtk/Makefile.in: x_sb_screen.lo -> x_layout.lo

	* vte.c:
	  catch_child_exited() calls ml_close_dead_terms() via g_timeout_add()
	  because gnome-terminal() exits with segfault.

	* README.ja, man/mlterm.1: Updated.

	* mc_radio.c: "autohide" value of scrollbar_mode option is supported.

	* x_layout.[ch], x_screen.c:
	  If sb_mode is SBM_AUTOHIDE, scrollbar is hidden or unhidden according to
	  the position of the mouse pointer.

	* x_sb_mode.[ch]: SBM_AUTOHIDE is added.

	* cocoa.m: The position of the mouse pointer is fixed.

	* x_window.h, */x_window.c:
	  - x_window_init_event_mask() is removed.
	  - x_window_{add|remove}_event_mask() are fixed.

	* x_event_source.c: If need_resize() returns true, "use_local_echo" is
	  forcibly disabled.

	* jni/x_display.c: Pointer motion event is handled.

	* configure.in: utmp and ind options are disabled by default on MacOSX/Cocoa.

	* x_screen_manager.c:
	  - "mlclientx --serv ..." is available.
	  - WINDOWID environmental variable = window id of x_screen_t instead of a top window.

	* fb/x_connect_dialog.c: Inputting password is implemented.

	* fb/x_window.c: check_child_window_area() which was added at revision 2480
	  is removed.

2015-12-05  Araki Ken  <arakiken@users.sf.net>

	* x_draw_str.c: Minor fixes around draw_drcs().

	* win32/x_dnd.c: Minor fixes.

	* x_font_ft.c: font->compl_fonts and font->pattern is always initialized.

	* bengali.table, hindi.table: Minor fixes.

	* configure.in:
	  - 'extra' and 'pixmap_engine' scrollbars are built by default.
	  - Following options are enabled by default.
	    --enable-ind, --enable-ssh2, --enable-utmp, --enable-uim, --enable-m17nlib,
	    --enable-scim, --enable-ibus, --enable-fcitx, --enable-canna, --enable-wnn

2015-11-28  Araki Ken  <arakiken@users.sf.net>

	* x_draw_str.c: Fix a bug of draw_drcs().

	* quartz/x_window.c: x_window_t::button_pressing and prev_button_press_event
	  are set.

	* quartz/x_display.c: x_display_idling() uses static variable _disp.

	* cocoa.m: x_display_idling(NULL) is called at 0.1 sec intervals.

	* MLActivity.java: IME_FLAG_NO_FULLSCREEN is set.

	* android/jni/x_display.c: The area of the right bottom corner is expanded
	  according to the screen size.

2015-11-26  Araki Ken  <arakiken@users.sf.net>

	* quartz/x_window.c, quartz/x.h:
	  - x_window_{add|remove}_event_mask() calls window_accepts_mouse_moved_events()
	    if event_mask has PointerMotionMask.
	  - X_POINTER_MOTION event is processed in x_window_receive_event().

	* cocoa.[mh]:
	  - window_accepts_mouse_moved_events() is added.
	  - rightMouseUp, rightMouesDragged and mouesMoved are implemented.
	  - mev.state is correctly set in menuForEvent().

	* x_screen.c: Minor fixes.

2015-11-23  Araki Ken  <arakiken@users.sf.net>

	* x_draw_str.c: (bottom_margin + top_margin > 0 || xfont->size_attr >= DOUBLE_HEIGHT_TOP)
	  is replaced by (xfont->height != height).

	* ml_str_parser.c: ml_convert_drcs_to_unicode_pua() isn't called on Android.

	* ml_char.c: It is disabled to combine ISCII character to another charset.

	* tamil.table: Fix.

2015-11-23  Araki Ken  <arakiken@users.sf.net>

	* ml_font.h, x_font_cache.c: The position of size_attr in ml_font_t is changed.

2015-11-22  Araki Ken  <arakiken@users.sf.net>

	* x_font_cache.c: If size_attr > 0, x_font_cache_get_xfont() loads USASCII font
	  instead of a specified font which doesn't exist.

	* x_draw_str.c: draw_drcs() supports DOUBLE_{WIDTH|HEIGHT_TOP|HEIGHT_BOTTOM}.

	* ml_vt100_parser.c:
	  ESC - (designate CS96 single byte charset) is supported on utf8 encoding.

2015-11-21  Araki Ken  <arakiken@users.sf.net>

	* README.ja, man/mlterm.1: Updated.

	* doc/term: Removed.

2015-11-21  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: Mistake of revision 2510 commit is reverted.

2015-11-21  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: x_font_manager_set_size_attr() is called before x_get_font().

	* x_draw_str.c:
	  - If xfont->size_attr >= DOUBLE_HEIGHT_TOP, x_window_draw_{image}_string*()
	    aren't used.
	  - Drawing height and ascent is modified according to font_man->size_attr
	    in x_draw_str() and x_draw_str_to_eol().

	* x_font_manager.[ch]: x_font_manager_set_size_attr() is added.

	* x_functbl_{cairo|xft}.c, x_window_{cairo|xft}.c:
	  {xft|cairo}_{un}set_clip() are added.

	* x_type_loader.h: X_WINDOW_SET_CLIP and XWINDOW_UNSET_CLIP are added.

	* cocoa.m:
	  - setClip and unsetClip are added to MLTermView.
	  - view_set_clip() and view_unset_clip() are added.
	  - Glyph size is transformed according to x_font_t::size_attr.

	* x_window.h, fb/x_window.c, win32/x_window.c, xlib/x_window.c, quartz/x_window.c:
	  x_window_set_clip() and x_window_unset_clip() are added.

	* x_font.h, fb/x_font.c, win32/x_font.c, xlib/x_font.c, quartz/x_font.c:
	  - size_attr is added to x_font_t and to arguments of x_font_new().
	  - Large fonts are loaded according to size_attr.

	* ml_font.h: DOUBLE_WIDTH, DOUBLE_HEIGHT_TOP and DOUBLE_HEIGHT_BOTTOM are added.

	* ml_screen.h: ml_screen_clear_size_attr() is added.

	* ml_screen.c: size_attr of newly scrolled in line is reset in
	  receive_scrolled_out_line().

	* ml_edit.[ch]: ml_edit_clear_size_attr() is added.

	* ml_line.[ch]:
	  - size_attr is added to ml_line_t.
	  - ml_line_set_size_attr() is added.

	* ml_vt100_parser.c:
	  - clear_line_all() and clear_display_all() doesn't change cursor position.
	  - DECDHL and DECDWL (ESC # 3 - 6) are supported.

	* cocoa/install.sh: mlterm and mlconfig are installed correctly.

2015-10-25  Araki Ken  <arakiken@users.sf.net>

	* x_layout.c: x_window_update_all() is called in reset_layout()
	  if true transparency is enabled on MacOSX/Cocoa because x_window_move()
	  clears screen.

	* cocoa/install.sh: mlconfig is installed if exits.

2015-10-25  Araki Ken  <arakiken@users.sf.net>

	* mlconfig/Makefile.in, mlterm-menu/Makefile.in:
	  "LIBS2_quartz = $(LKIK)" is added.

	* version.h.in: 3.6.0 -> 3.6.0post

2015-10-25  Araki Ken  <arakiken@users.sf.net>

	* 3.6.0 released.
	  (tag "rel-3_6_0")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h:
	  updated for 3.6.0.

2015-10-24  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: x_screen_exec_cmd() supports "mlconfig" command.

	* cocoa.m: "Config" and "Paste" menu items are added to the main menu.

2015-10-22  Araki Ken  <arakiken@users.sf.net>

	* mlconfig/main.c: "Scrollbar" tab is revived on MacOSX/Cocoa.

	* mkf_utf16_parser.c: Unnecessary mkf_parser_n_increment() is removed.

	* gtk/vte.c: Illegal memory access is fixed.

	* gtk/INSTALL: Renamed to README.

	* libctl/dexport-fb.map: Removed.

	* gtk/dexport-sun.map, libctl/dexport-sun.map, libtype/dexport-sun.map: Added.

	* configure.in:
	  - mlimgloader is never built on MacOSX/Cocoa.
	  - dexport.map -> dexport-sun.map on Solaris.

2015-10-17  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c:
	  - cocoa_get_bundle_path() + "/Contents/MacOS/" is appended to mlconfig path
	    on quartz.

	* quartz/x_font.c:
	  - screen_get_user_space_scale_factor() is not used to determine width and height
	    by pixel.
	  - CGFontGetUnitsPerEm() and CGFontGetGlyphAdvances() are additionally used
	    to determine width and height by pixel.

	* cocoa.[ch]:
	  - screen_get_user_space_scale_factor() is removed.
	  - monitor_pty() is called only once.
	  - http://flex.phys.tohoku.ac.jp/~okuyama/mlterm-30ef99499785.patch is merged.
	    (Thanks to @LabDrunker)
	  - PANGO_LIBDIR is set for mlconfig bundled in mlterm.app.
	  - menuForEvent() event is handled.
	  - cocoa_get_bundle_path() is added.

	* mc_font.c: gtkxlfdsel.[ch] aren't used on quartz.

	* mlconfig/main.c:
	  - "Scrollbar" tab is disabled on quartz.
	  - gtk_window_set_keep_above(TRUE) is called on win32 or quartz.

2015-10-12  Araki Ken  <arakiken@users.sf.net>

	* cocoa.m: Alt+x isn't interpreted by NSView::interpretKeyEvents unless preediting.

	* mlconfig/main.c: "Columns" and "Rows" entries are added to "Others" tab.

	* mc_geometry.[ch]: Added.

	* mc_wordsep.c: Entry width is limited.

	* mc_ratio.c, mc_space.c: Constant value => macro (MAX_VALUE_LEN)

	* ml_vt100_parser.c: "geometry" is added to OSC 5379.

	* configure.in: Minor fixes.

	* kiklib/configure.in, kik_utmp_sysv.c: USE_UTMPX is defined if setutxline() exists.

2015-10-12  Araki Ken  <arakiken@users.sf.net>

	* cocoa.m, x_window.c: DnD is supported.

	* x.h: X_SELECTION_NOTIFIED and struct XSelectionNotifyEvent are added.

2015-10-12  Araki Ken  <arakiken@users.sf.net>

	* ml_iscii.c, ml_shape.c: __attribute__((weak)) is added to function declarations
	  on MacOS X because they are bounded to the same name symbols in
	  ml_ctl_{bidi|iscii}_func_table without it.

	* mlterm/Makefile.in: ml_shape.o is moved from libmlterm_core to libmlterm.

	* mlterm/ml_line_shape.c: Added. (ml_line_{bidi|iscii}_need_shape, ml_line_shape()
	  and ml_line_unshape() are moved from ml_line.c)

	* kik_dlfcn_dl.c: strstr(..., "mlterm/") is replaced by strcmp(..., "mlterm/")
	  because dirpath can contain multiple "mlterm/" strings.

	* configure.in: x_event_source.c, x_sb_view_factory.c, x_scrollbar.c
	  and x_simple_sb_view.c in $top_srcdir/xwindow are moved to xwindow/xlib/
	  on MacOS X in order to build those in xwindow/quartz/.

2015-10-11  Araki Ken  <arakiken@users.sf.net>

	* x.h: XK_BackSpace = NSDeleteCharacter instead of NSBackspaceCharacter.

	* ml_termcap.c: If $prefix/etc/mlterm/termcap is not found, default settings
	  are applied on macosx and android.

	* cocoa.m:
	  - 0x66(Eisu) and 0x68(Kana) keycodes are ignored in keyDown event.
	  - x_window_receive_event(KeyEvent) is called immediately in insertText(),
	    not in keyDown().

	* x_font.h, quartz/x_font.c, cocoa.m:
	  x_font_t:{height|ascent|width} are multiplied by NSScreen.userSpaceScaleFactor.

2015-10-05  Araki Ken  <arakiken@users.sf.net>

	* quartz/cocoa.m: [view release] is called in view_alloc() to decrement its
	  reference count.

2015-10-04  Araki Ken  <arakiken@users.sf.net>

	* quartz/x_window.c:
	  - view_update() is called in x_window_update_all() only if
	    win is x_screen_t.
	  - window_set_alpha() -> view_bg_color_changed() in x_window_set_bg_color().

	* quartz/x_imagelib.c: adjust_cgimage() is added to apply pic_mod to CGImage.

	* quartz/x_display.c: _disp.depth = 24 -> 32.

	* quartz/x_color.c: x_get_xcolor_rgba() is implemented.

	* cocoa.[mh]:
	  - window_set_alpha() is removed.
	  - view_bg_color_changed() and MLTermView::bgColorChanged() are added.
	  - True transparency is supported.

	* configure.in: Input method plugins are disabled on MacOSX/cocoa.

2015-10-04  Araki Ken  <arakiken@users.sf.net>

	* x_screen_manager.c:
	  - "login -fp $USER" is used instead of "$SHELL" environmental variable.
	  - Uncertainty of "disp = root->disp" in close_screen_intern() is fixed.
	    (Enbugged at 2015-10-02 commit)

2015-10-03  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.cocoa: Added.

	* quartz/x_xic.c: Control+space and Alt+x work on MacOSX/Cocoa.

	* x_screen.c: Delete key works on MacOSX/Cocoa.

	* cocoa.[mh]:
	  - view_resize() and view_move() are integrated to view_set_rect().
	  - Position and size of each subview is reset when a top window is resized.
	  - MLTermView::pasteboard() is implemented.

	* quartz/x_window.c, quartz/x_display.c, quartz/x_gc.c:
	  - x_window_t::gc is always NULL.

	* quartz/x_window.c:
	  win->wall_picture is drawn in x_window_clear() and clear_margin_area().

	* quartz/x_imagelib.c:
	  x_imagelib_load_file_for_background() is implemented.

2015-10-02  Araki Ken  <arakiken@users.sf.net>

	* Cocoa is supported. (experimental)

	* version.h.in: 3.5.1 -> 3.5.1post

2015-08-29  Araki Ken  <arakiken@users.sf.net>

	* 3.5.1 released.
	  (tag "rel-3_5_1")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.5.1.

	* man/mlterm.1, etc/main, etc/main.ja, doc/ja/README.ja: Updated.

2015-08-29  Araki Ken  <arakiken@users.sf.net>

	* kik_utmp_sysv.c: Error of pututxline() is ignored if errno is ECHILD on NetBSD.

	* configure.in, x_font_ft.c: Minor fixes.

2015-08-26  Araki Ken  <arakiken@users.sf.net>

	* configure.in, java/Makefile.in: Minor fixes.

2015-08-25  Araki Ken  <arakiken@users.sf.net>

	* configure.in, gtk/Makefile.in:
	  - 'make VTE_ABI=(|2.90|2.91)' can change VTE ABI version to be built.
	  - libvte-2.91.so.9 -> libvte-2.91.so.0

	* vte.c: Failure of ioctl(slave, TIOCSCTTY) in vte_pty_child_setup() is fixed.

	* MLActivity.java, android/jni/x_event_source.c: Ambiguous method name is fixed.

2015-08-17  Araki Ken  <arakiken@users.sf.net>

	* mc_font.c: "Font width" buttons are added.

2015-08-15  Araki Ken  <arakiken@users.sf.net>

	* mkf_ucs_property.table: Updated to Unicode 8.0.0 (UnicodeData.txt and
	  EastAsianWidth.txt)

	* xlib/x_font.c: Fix typo.

2015-08-15  Araki Ken  <arakiken@users.sf.net>

	* win32/x_window.c: Improvement for an input method window.

	* x_screen.c, mlconfig/main.c, mc_flags.[ch]:
	  It is enabled to change the value of "use_extended_scroll_shortcut" option
	  dynamically, and a checkbox of it is added to mlconfig.

	* im_wnn.c: Ctrl+h works.

	* x_screen_manager.c: X11 forwarding of an opened ssh session isn't disabled.

2015-08-14  Araki Ken  <arakiken@users.sf.net>

	* */x_window.c, x_layout.[ch], x_main_config.[ch], x_screen.[ch],
	  x_screen_manager.c:
	  layout_inner_border/--lborder option which enables you to specify the number
	  of inner border pixels of a layout manager is added.

2015-08-02  Araki Ken  <arakiken@users.sf.net>

	* x_display_linux.c:
	  KBD_INUPT_NAME => KBD_INPUT_NUM
	  MOUSE_INUPT_NAME => MOUSE_INPUT_NUM

2015-08-02  Araki Ken  <arakiken@users.sf.net>

	* x_display_linux.c: Keyboard or mouse input device name is
	  configurable by "KBD_INPUT_NAME" or "MOUSE_INPUT_NAME" environmental
	  variable.

2015-08-01  Araki Ken  <arakiken@users.sf.net>

	* x_window_cairo.c, x_font_ft.c, x_font.h:
	  - user_data_t is removed.
	  - compl_fonts and pattern are added to x_font_t.
	  - compl_fonts and pattern are created only if charset isn't US_ASCII,
	    ISO8859_1_R or ISCII.

2015-07-25  Araki Ken  <arakiken@users.sf.net>

	* x_window_cairo.c: If a character code is not found in FC_CHARSET,
	  another font which contains it is searched and used automatically.

	* x_font_ft.c: FC_CHARSET is set to cairo_scaled_font_t as a user data.

	* im_wnn.c: Illegal memory access by pressing 'A' - 'Z' is fixed.

2015-06-13  Araki Ken  <arakiken@users.sf.net>

	* im_wnn.c:
	  - https://gist.github.com/tsutsui/1d4f9af3b4a53c906eb4 is merged.
	  - Small "tsu" is available.

2015-06-07  Araki Ken  <arakiken@users.sf.net>

	* Makefile.in: 'make install-fb' error is fixed.

	* version.h.in: 3.5.0 -> 3.5.0post

2015-06-07  Araki Ken  <arakiken@users.sf.net>

	* 3.5.0 released.
	  (tag "rel-3_5_0")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.5.0.

2015-06-06  Araki Ken  <arakiken@users.sf.net>

	* fb/x_window.c: x_window_move() doesn't redraw screen if the area of
	  child windows fills less than 90% of a parent window.

	* fb/x_display.c: expose_window(all child winodws) in expose_display().

	* x_im_{candidate|status}_screen.c: The change at 2015/05/06 is reverted.

2015-05-31  Araki Ken  <arakiken@users.sf.net>

	* x_layout.c:
	  - If x_layout_t has multiple x_screen_t windows which have a wall picture,
	    x_layout_t plunders it.
	  - total_min_size() -> total_hint_size().

	* x_screen.[ch]: x_screen_reload_color_cache() is added.

	* x_window.h, */x_window.c:
	  - do_expose is added to arguments of x_window_(un)set_wall_picture().
	  - If wall picture is set to a root window, ParentRelative is set to
	    its child windows.
	  - configure_root is added to x_window_t for xlib.

2015-05-26  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, etc/README.ja: Updated.

	* x_screen.[ch], x_shortcut.[ch], x_screen_manager.c:
	  - HEXPAND_SCREEN and VEXPAND_SCREEN are added to shortcut keys.
	  - NEXT_SCREEN, PREV_SCREEN, CLOSE_SCREEN, HEXPAND_SCREEN, VEXPAND_SCREEN
	    shortcuts are ignored if screen isn't splited.

	* x_layout.c: The position of a separator is adjusted to cell width and height.

	* fb/x_window.c: x_window_update() and x_window_update_all() do nothing if
	  x_window_t::is_mapped is 0.

	* vte.c: "MLTERM=X.X.X" environmental variable is set in ml_term_open_pty_wrap().

	* ml_pty_unix.c: "goto return_pty" is called after putenv(), not before it.

2015-05-17  Araki Ken  <arakiken@users.sf.net>

	* README.ja: Updated.

2015-05-12  Araki Ken  <arakiken@users.sf.net>

	* x_layout.c:
	  x_window_fill() -> x_window_fill_with( x_layout_t::screen::window::fg_color)

2015-05-10  Araki Ken  <arakiken@users.sf.net>

	* x_main_config.[ch], x_screen_manager.c: use_scrollbar -> use_mdi

	* x_screen.c: "next_screen" is added to OSC 5379.

	* x_screen.c, x_screen_manager.c, x_layout.[ch], x_shortcut.[ch]:
	  - hsplit or hresize <=> vsplit or vresize
	  - PREV_SCREEN is added to shortcut key settings.

	* x_layout.c:
	  - Slightly broken screen in changing the position of a scrollbar is fixed.
	  - struct terminal::sb_mode is inherited from a current terminal in
	    x_layout_add_child().

	* win32/x_xic.c: If a specified window has focus, get_spot() returns cursor
	  position relative to it.

	* */x_window.c, x_window.h:
	  - x_window_move() returns 0 if both win->x and win->y aren't changed.
	  - x_window_t::has_input_focus -> inputtable.

	* win32/x_window.c: x_window_update_all() calls InvaidateRect(NULL).

	* ml_line_iscii.c: Compiling error is fixed.

2015-05-07  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, doc/ja/README.ja, etc/key: Updated.

	* jni/x_display.c: Henkan or Muhenkan keycode from Nihongo Full Keyboard
	  is supported.

	* x_layout.c: Minor fixes.

	* jni/x_event_source.c: Minor fixes.

2015-05-06  Araki Ken  <arakiken@users.sf.net>

	* doc/en/PROTOCOL, man/mlterm.1, ja/README.ja: Updated.

	* x_screen.[ch], x_screen_manager.c, x_shortcut.c:
	  - VRESIZE_SCREEN and HRESIZE_SCREEN shortcuts are supported.
	  - "vsplit_screen", "hsplit_screen", "vresize_screen" and "hresize_screen"
	    are added to OSC 5379.

	* x_shortcut.[ch]: The default shortcut keys are changed as follows.
	  VSPLIT_SCREEN: Ctrl+F5 -> Shift+F1
	  HSPLIT_SCREEN: Ctrl+F6 -> Shift+F2

	* x_layout.[ch]:
	  - x_layout_resize() and x_layout_get_next_screen() are added.
	  - sep_str is added to the arguments of x_layout_add_child().
	  - get_separator_x() round sep_x to multiples of 8 on 8 planes framebuffer.

	* fb/x_window.c, xlib/x_window.c, win32/x_window.c, x_window.h:
	  x_window_set_input_focus() is added.

	* fb/x_window.c: If x_window_move() moves a window outside of the display,
	  it doesn't try to redraw a window.

	* x_im_{candidate|status}_screen.c: adjust_window_position_by_size() adjusts
	  an input method window within x_screen_t::x_window_t::{x|y|width|height}
	  instead of x_display_t::{width|height} on framebuffer.

	* x_virtual_kbd.c: Compiling error is fixed.

2015-05-05  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.[ch]:
	  https://gist.github.com/saitoha/4b320b9cb6d637d14dbc is merged.

2015-05-03  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, doc/ja/README.ja: Updated.

	* MLActivity.java, jni/x_display.[ch], fb/x_window.c:
	  Copy&paste via clipboard is supported.

	* jni/x_event_source.c:
	  - update_ime_text_on_active_term() searches not only attached but also
	    focused window.
	  - ALooper_removeFds() is called everytime before closing fds in
	    x_event_source_process().

	* mkf_*_conv.c: mkf_parser_reset() -> mkf_parser_full_reset().

	* mkf_parser.c: mkf_parser_full_reset() which resets ml_parser_t::is_eos
	  is added.

	* mkf/lib/Makefile.in: 16.0 -> 16.1

	* win32/x_window.c:
	  - x_window_remove_child() is added.
	  - SetFocus() is called in receiving Button1 event.

	* x_im_{candidate|status}_screen.c: Compiling error is fixed.

	* x_shortcut.[ch], x_screen.c: CLOSE_SCREEN shortcut is supported.

	* x_layout.c: The size of a removed child window is reverted to the original
	  in x_layout_remove_child().

	* x_main_config.c: "exec_cmd" option is avalable in ~/.mlterm/main.

	* x_screen_manager.c: Fixes for win32.

2015-04-30  Araki Ken  <arakiken@users.sf.net>

	* x_sb_screen.[ch]: renamed to x_layout.[ch].

2015-04-29  Araki Ken  <arakiken@users.sf.net>

	* x_screen_manager.c: x_system_event_listener_t::split_screen is implemented.

	* x_screen.[ch], x_shortcut.[ch]:
	  - VSPLIT_SCREEN and HSPLIT_SCREEN shortcuts are supported.
	  - split_screen is added to x_system_event_listener_t.

	* x_sb_screen.[ch]: It is supported to manage multiple sets of screen
	  and scrollbar.

	* x_window.h, xlib/x_window.c:
	  - has_input_focus is added to x_window_t.
	  - x_window_t::is_focused is off except when x_window_t::has_input_focus is on.

	* fb/x_window.c:
	  - focus_window() which focuses a specified window is called when
	    mouse button is clicked on it and when x_window_map() is called.
	  - x_window_remove_child() is added.
	  - input_focus is added to arguments of x_window_init().

	* win32/x_window.c: input_focus is added to arguments of x_window_init().

	* fb/x_display.c: get_window() searches child windows recursively.

2015-04-18  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: GetDC/ReleaseDC are called in draw_preedit_str().

	* im_wnn.c:
	  - Ctrl+c or Ctrl+g cancels preediting.
	  - Current mode (Kana or Kanji) is shown if there is no preedited text.

2015-04-13  Araki Ken  <arakiken@users.sf.net>

	* im_wnn.c:
	  - Preedit characters are fixed when a new character is inserted if
	    jcIsConverted() is true.
	  - Candidate window is changed correctly in changing a candidate word
	    by XK_Up.

2015-04-13  Araki Ken  <arakiken@users.sf.net>

	* im_wnn.c: Sign characters are converted to full width.

2015-04-12  Araki Ken  <arakiken@users.sf.net>

	* README, README.ja, man/mlterm.1: Updated.

	* configure.in: --enable-wnn is added.

	* input_method/wnn/*: Added.

	* im_canna.c: Cleanup.

	* mkf_parser.c: mkf_parser_reset() resets parser->is_eos.

2015-04-07  Araki Ken  <arakiken@users.sf.net>

	* configure.in: --enable-canna is added.

	* x_im_status_screen.[ch]:
	  - modified_beg is added to arguments of draw_screen().
	  - It is supported to draw multiple lines by '\n'.

	* inputmethod/canna/*: Added.

	* im_fcitx.c: Candidate or preedited text is converted to a terminal encoding.

2015-03-24  Araki Ken  <arakiken@users.sf.net>

	* im_fcitx.c, im_ibus.c: Minor fixes.

2015-03-22  Araki Ken  <arakiken@users.sf.net>

	* x_display_linux.c: Hack for HankakuZenkaku key is added.

	* im_ibus.c:
	  - The argument of next_engine() is changed from im_ibus_t * to IBusInputContext *.
	  - ibus->is_enabled is reversed in switch_mode() on IBus 1.5.x.

2015-03-21  Araki Ken  <arakiken@users.sf.net>

	* MLActivity.java: /sdcard/.mlterm/anim*.gif isn't splited any more.

2015-03-20  Araki Ken  <arakiken@users.sf.net>

	* x_picture.c: HAVE_PTHREAD is defined on android.

	* x_display.c, MLActivity.java: hashPath() -> convertToTmpPath() in order to
	  support not only /sdcard but also /mnt/sdcard and /extsdcard.

	* jni/Android.mk: -DBUILTIN_IMAGELIB is added.

2015-03-18  Araki Ken  <arakiken@users.sf.net>

	* kik_path.c, android/jni/x_display.c:
	  HOME directory on android is /sdcard, /mnt/sdcard or /extsdcard.

	* jni/Android.mk, build.sh: Minor fixes.

	* ml_screen.c, ml_vt100_parser.c: The previous commit is partially reverted.

2015-03-17  Araki Ken  <arakiken@users.sf.net>

	* x_event_source.c: If ml_pty_ssh_poll() > 0, ml_pty_ssh_send_recv_x11() and
	  ml_term_parse_vt100_sequence() are called immediately instead of 'break'
	  in order not to skip select().

	* ml_screen.[ch]:
	  - gettimeofday() is used instead of clock() in
	    ml_screen_enable_local_echo() and ml_screen_local_echo_wait().
	  - ml_stored_edit stores a current edit, not both normal and alt edits.
	  - ml_screen_is_local_echo_mode() is added.

	* kiklib/configure.in, kik_config.h.in, android/jni/kik_config.h:
	  Whether gettimeofday exists or not is checked. (HAVE_GETTIMEOFDAY macro)

	* xlib/x_connect_dialog.c: Memory leak is fixed.

	* libptyssh/ml_pty_ssh.c, ml_pty.c, ml_vt100_parser.c: Minor fixes.

2015-03-15  Araki Ken  <arakiken@users.sf.net>

	* x_display_wscons.c: WSDISPLAYIO_GET_FBINFO is supported.

	* Usage.win32: Updated.

	* version.h.in: 3.4.5 -> 3.4.5post

2015-03-14  Araki Ken  <arakiken@users.sf.net>

	* 3.4.5 released.
	  (tag "rel-3_4_5")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.4.5.

	* ml_vt100_parser.c: to_menu = -1 (show key=value temporarily on the screen)
	  only if OSC 5380.

	* libptyssh/ml_pty_ssh.c:
	  - If waitpid() == config_menu.pid and kik_trigger_sig_child() is called,
	    lo_{read|write_to}_pty() returns without reading pty->master or writing
	    to pty->slave because kik_trigger_sig_child() disables loopback.
	  - libssh2_channel_request_auth_agent is called if its symbol is found in
	    cygssh2-1.dll on cygwin.

	* x_display_{linux|freebsd|wscons}.c: open(FRAMEBUFFER) is held between
	  kik_priv_restore_{euid|egid}() and kik_priv_change_{euid|egid}().

2015-03-10  Araki Kena  <arakiken@users.sf.net>

	* 3.4.4 released.
	  (tag "rel-3_4_4")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.4.4.

	* x_shortcut.c: "Alt" which equals to "Mod" is available in ~/.mlterm/key.

2015-03-08  Araki Ken  <arakiken@users.sf.net>

	* mlclient/Makefile.in, mlclient/main.c:
	  - mlclient doesn't depend on kiklib.
	  - ~/.config/mlterm/socket is supported.

	* mlcc/data_entry_numeric.c: entry_numeric_reset() does nothing for "alpha".

	* mlcc/comm.c:
	  - ~/.config/mlterm/challenge is supported.
	  - OSC 5380 is sent without challenge if mlcc works on a remote host.

	* mlcc/comm.h: _COMM_H -> _COMM_H_

	* mlcc/Makefile, mlclient/Makefile: Added. (For building mlcc or mlclient alone.)

	* x_screen.c, MLTermPty.c: ml_pty_event_listener_t::show_config is implemented.

	* ml_vt100_parser.c:
	  - If OSC 5380 is received without challenge, to_menu = -1 which calls
	    ml_pty_event_listener_t::show_config.
	  - vt100_parser->cs is set before ml_convert_to_internal_ch().
	  - ml_vt100_parser_show_message() calls {start|stop}_vt100_cmd() with
	    trigger_xterm_event == 0.

	* ml_pty.[ch]: show_config is added to ml_pty_event_listener_t.

	* mkf_utf8_parser.c, mkf_utf8_conv.c, mkf_utf16_parser.c, mkf_utf16_conv.c,
	  mkf_utf32_parser.c, mkf_utf32_conv.c:
	  0x0 - 0x7f characters are treated as US_ASCII instead of ISO10646_UCS4_1.

	* mkf_iso8859_conv.c, mkf_ja_jp_map.c, mkf_ko_kr_map.c, mkf_ru_map.c,
	  mkf_tg_map.c, mkf_ucs4_jisx0201.c, mkf_ucs4_map.c, mkf_uk_map.c,
	  mkf_viet_map.c, mkf_zh_cn_map.c, mkf_zh_hk_map.c, mkf_zh_tw_map.c:
	  mkf_map_ucs4_to_us_ascii() and mkf_map_us_ascii_to_ucs4() are removed.

	* mkf_ucs4_usascii.[ch]: Removed.

	* configure.in: mlclient is not built on win32 mingw.

2015-03-06  Araki Ken  <arakiken@users.sf.net>

	* gtk/INSTALL: Updated.

	* gtk/reaper.c: Compiling error on vte-2.91 is fixed.

	* win32/x_window.c: Extra margin area at the right and bottom edges is cleared
	  in maximizing a window.

	* mc_combo.c: gtk_entry_set_width_chars() is used on GTK+-3.x instead of
	  gtk_widget_set_size_request().

	* mlconfig/main.c: Failure in compiling with GTK+-3.x and libssh2 is fixed.

	* x_screen_manager.c: The same command as the current screen is executed
	  in open_{screen|pty}().

	* ml_term.h: ml_term_get_cmd_line() is added.

	* ml_pty.[ch]: ml_pty_get_cmd_line() is added.

	* libptyssh/ml_pty_ssh.c: ml_pty_t::cmd_line is stored.

	* ml_pty_intern.h: cmd_line is added to ml_pty_t.

	* vte.c: vte_terminal_set_font_from_string() accepts "[FONT LIST] [FONT SIZE]" format.

	* configure.in:
	  - Both gtk+-2.0 and gtk+-3.0 are checked.
	  - The default value of --with-gtk option is changed from 2.0 to 3.0.

2015-03-03  Araki Ken  <arakiken@users.sf.net>

	* ml_edit_scroll.c: scroll_region_{beg|end} => vmargin_{beg|end}

	* mlclien/main.c, mlclient/Makefile.in:
	  https://gist.github.com/hattya/97df7df875d72d8030bb is merged.
	  (Thanks to @hattya)

2015-03-01  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.c: Minor fix of copy_area().

	* ml_char.c: Arguments of COMPOUND_ATTR() are fixed.

2015-02-28  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: DECBI, DECFI, DECIC, DECDC, DECST8C, DECSACE,
	  DECRARA and DECCARA are supported.

	* ml_screen.c: 'scroll' argument is added to ml_screen_go_{forward|back}().

	* ml_edit.[ch]:
	  - ml_edit_scroll_{left|right}ward_from_cursor() are added.
	  - ml_edit_change_attr_area() is added.
	  - ml_edit_set_use_rect_attr_select() is added.
	  - {h|v}margins are applied in ml_edit_go_forward().
	  - scroll_region_{beg|end} => vmargin_{beg|end}
	    margin_{beg|end} => hmargin_{beg|end}

	* ml_line.c: ml_line_{overwrite|fill}() allows 'beg_char_index' argument
	  to exceed line->num_of_filled_chars.

	* ml_char.[ch]: ml_char_{change|reverse}_attr() are added.

2015-02-25  Araki Ken  <arakiken@users.sf.net>

	* gtk/INSTALL: Updated.

	* ml_term_manager.c, xlib/x_window.c: Minor fixes.

2015-02-22  Araki Ken  <arakiken@users.sf.net>

	* vte.c: vte_get_{major|minor|micro}_version() are implemented.

2015-02-22  Araki Ken  <arakiken@users.sf.net>

	* vte.c: gtk_widget_set_visual(toplevel window, rgba_visual) is called
	  in vte_terminal_hierarchy_changed() to enable true transparency forcibly
	  on vte-2.91.

2015-02-21  Araki Ken  <arakiken@users.sf.net>

	* configure.in:
	  LIBVTE_SUFFIX=2.91 -> LIBVTE_SUFFIX=-2.91

	* vte.c:
	  - Compiling error in vte_terminal_feed() is fixed.
	    (enbugged at the previous commit.)
	  - vte_terminal_get_geometry_hints() is implemented.
	  - vte_terminal_{set|get}_input_enabled() are added.
	  - vte_terminal_screen_changed() event handler is added.
	  - "inner-border" style is removed since vte 0.38.0.

	* vtetypebuiltins.c: vte-2.91 types are added.

2015-02-20  Araki Ken  <arakiken@users.sf.net>

	* gtk/INSTALL: Updated.

	* man/mlterm.1, doc/ja/README.ja, etc/main, etc/main.ja: Updated.

	* x_window.c, x_main_config.c: The default value of "use_clipboard" option is
	  changed from "false" to "true".

	* x_screen.c: "Config: key=value" is shown if configuration is changed by
	  "proto:" shortcut.

	* ml_vt100_parser.[ch], ml_term.h:
	  ml_{vt100_parser|term}_show_message() is added.

	* ml_term.h:
	  (term)->pty check is added to ml_term_write_{modified_key|special_key|loopback}().

2015-02-19  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_window.c: size_hints.min_width and min_height are fixed.

	* gtk/INSTALL: Updated.

	* configure.in: vte-2.91 api functions are added partially.

	* vte.c:
	  - vte-2.91 is supported. (Experimental)
	  - Following functions are implemented.
	    vte_terminal_feed
	    vte_terminal_feed_child
	    vte_terminal_feed_child_binary
	    vte_terminal_set_scroll_on_output
	    vte_terminal_write_contents(_sync)
	  - window.width_inc,min_width,height_inc,min_height are reset in
	    vte_terminal_set_font_from_string().
	  - g_object_ref(terminal->pvt->pty) is replaced by g_object_ref(pty) in
	    vte_terminal_set_pty(_object)().

	* kik_pty_helper.c:
	  - kill(pty_helper_pid, SIGTERM) isn't called by child processes.
	  - setsid() and setpgid() are moved after reopening pty like vte-0.39.1/src/pty.c.

	* version.h.in: 3.4.3 -> 3.4.3post

2015-02-11  Araki Ken  <arakiken@users.sf.net>

	* 3.4.3 released.
	  (tag "rel-3_4_3")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.4.3.

	* mlterm.1, doc/en/PROTOCOL: Updated.

	* fb/x_font.[ch], fb/x_window.c, fb/x.h, android/jni/x.h:
	  - USE_ANTI_ALIAS is removed and is_aa flag is added to XFontStruct.
	  - Fixes for rendering proportional fonts.

	* x_draw_str.c: If xfont->is_proportional is true (== ISCII),
	  x_window_draw_string() with x_window_clear() is used instead of
	  x_window_draw_image_string().

	* bengali.table: Add an entry.

2015-02-05  Araki Ken  <arakiken@users.sf.net>

	* jni/x_event_source.c: Minor fixes.

2015-02-04  Araki Ken  <arakiken@users.sf.net>

	* ml_pty_unix.c: kik_killpg(SIGWINCH) is used instead of kill(SIGWINCH).

	* jni/x_event_source.c: need_resize() is implemented and passed to x_display_resize().

	* android/jni/x_display.[ch]: need_resize is added to the arguments of x_display_resize().

	* kik_unistd.h: kik_killpg is added.

	* kik_config.h.in, android/jni/kik_config.h: HAVE_KILLPG is added.

	* kiklib/configure.in: killpg is added to AC_CHECK_FUNCS().

	* MLActivity.java: finishComposingText() is revived.

2015-02-02  Araki Ken  <arakiken@users.sf.net>

	* ml_screen.c: ml_str_bytes_equal() check is enabled in ml_screen_disable_local_echo().

	* android/jni/x_event_source.c: Current preediting text is restored
	  after ml_term_parse_vt100_sequence().

2015-02-01  Araki Ken  <arakiken@users.sf.net>

	* README.android: Updated.

	* MLActivity.java: forceAsciiInput() which x_xic_switch_mode() uses is added.

	* android/jni/x_xic.c: Added.

2015-01-31  Araki Ken  <arakiken@users.sf.net>

	* x_event_source.c:
	  - ml_term_set_config("use_local_echo", "false") is called before
	    ml_term_parse_vt100_sequence() if term->use_local_echo is true.
	  - Java_mlterm_native_1activity_MLActivity_{commit|preedit}Text()
	    calls update_ime_text() with the use of pthread_mutex_lock().

	* android/jni/x_display.[ch], x_event_source.c:
	  Java_mlterm_native_1activity_MLActivity_visibleFrameChanged() is moved to
	  x_event_source.c while its implementation is left as x_display_resize().

	* MLActivity.java: visibleFrameChanged() is called even if isPreediting is true.

2015-01-28  Araki Ken  <arakiken@users.sf.net>

	* README.ja, man/mlterm.1: Updated.

	* doc/ja/README.w3m: Removed.

	* MLActivity.java: visibleFrameChanged() is not called if isPreediting is true.

	* x_event_source.c: ALooper_wake() is removed and pthread_mutex_{un}lock()
	  are called before and after changing commit_text and preedit_text.

	* x_main_config.c:
	  - The default value of "only_use_unicode_font" is "true" on Android.
	  - The default value of "box_drawing_font" is "unicode" on Android.

2015-01-25  Araki Ken  <arakiken@users.sf.net>

	* fb/x_font.c: percent = 0 in x_font_new() on android.

	* etc/main, etc/main.ja: Updated.

	* ml_term.c: ml_logvis_ctl is created if terminal encoding is not only UTF-8
	  but also ISCII_XXX.

2015-01-24  Araki Ken  <arakiken@users.sf.net>

	* README, PROTOCOL, README.android, README.indic, README.ja, man/mlterm.1:
	  Updated.

	* android/jni/main.c, MLActivity.java: unifont.pcf is not saved in starting.

	* vte.c: Minor fixes.

	* mc_flags.[ch]: MC_FLAG_BIDI and MC_FLAG_IND are integrated to MC_FLAG_CTL.

	* mc_bidi.[ch]: Renamed to mc_ctl.[ch].

	* x_main_config.[ch], x_screen.c, x_screen_manager.c, ml_term.[ch],
	  ml_term_manager.[ch], ml_vt100_parser.[ch]:
	  "use_bidi" and "use_iscii" are integrated to "use_ctl".

	* ml_line.c:
	  - ml_line_unuse_ctl() and ml_line_ctl_{render|visual|logical}() are added.
	  - shape argument is remove from ml_line_shape().

	* ml_ctl_loader.h, ml_functbl_bidi.c:
	  - ml_logvis_bidi_new and ml_arabic_shape_new are removed and ml_shape_arabic
	    and ml_line_bidi_{render|visual|logical} are added.
	  - CTL_API_VERSION is changed from 0x01 to 0x02.

	* ml_logical_visual.[ch]: Add ml_ctl_logical_visual which is integrated from
	  ml_bidi_logical_visual and ml_iscii_logical_visual.

	* ml_logical_visual_{bidi|iscii}.c: Removed.

	* ml_shape_bidi.c, ml_shape_iscii.c, ml_shape.[ch]:
	  ml_shape_t is removed. ml_shape_{arabic|iscii}() are added.

	* libctl/ml_iscii.c, libctl/ml_line_iscii.c: If ISO10646_UCS4_1 charset is
	  found and ISCII_XXX charset is not found, ml_iscii() and ml_line_iscii_render()
	  return -1.

	* libctl/ml_bidi.c, libctl/ml_line_bidi.c: If ISCII_XXX charset is found,
	  ml_bidi() and ml_line_bidi_render() return -1.

	* ml_screen.c: ml_screen_resize() resizes ml_screen_t::stored_edits.

2015-01-20  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.indic: Updated.

	* etc/aafont: U+FF61-FF9F (Hankaku kana) is added.

	* etc/font-fb: ISCII fonts are added.

	* Android.mk: Files and options related to ISCII rendering are added.

	* libctl/ml_iscii.c: Indic tables are statically linked if STATIC_LINK_INDIC_TABLES
	  macro is defined. (for Android)

	* ml_iscii.c: If both NO_DYNAMIC_LOAD_CTL and USE_IND are defined,
	  #include "libctl/ml_iscii.c".

	* mc_font.c: "UNICODE (HANKAKU KANA)" is added to "Font name" combo box.

	* fb/x_font.c: Unexpected behavior in loading a ISCII font in multiple times
	  is fixed.

	* fb/x_window.c: Minor fixes.

	* x_screen.c: Not only png but also gif files are supported for emoji.

	* Makefile.in: Typo is fixed. (Thanks to @msmhrt)

2015-01-18  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb, doc/en/README.android:
	  Updated.

	* im_fcitx.c: The position of a candidate window is fixed. (Thanks to @msmhrt)

	* fb/x_font.c, fb/x_window.c: ISCII fonts are supported with freetype.

2015-01-12  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb, doc/en/README.android:
	  Updated.

	* x_font_config.c: The default value of "font_size_range" option is changed
	  from 6-30 to 10-40 on Android.

	* configure.in, main/Makefile.in, xwindow/Makefile.in:
	  --enable-anti-alias option of configure enables freetype on framebuffer.

	* Android.mk: freetype support is enabled.

	* fb/x_font.[ch], fb/x_window.c: freetype2 is supported.

	* fb/x_font.c: font->is_var_col_width works if multiple size fonts are used
	  at the same time.

	* fb/x.h, android/jni/x.h: FT_Face is stored in XFontStruct.

	* x_screen.c, x_font_manager.h: "USASCII" key is supported by OSC 5380 and
	  5381.

	* ml_vt100_parser.c: OSC 5380 and 5381 doesn't require ",<fontsize>" which
	  is automatically complemented by the current font size.

2015-01-07  Araki Ken  <arakiken@users.sf.net>

	* win32/x_imagelib.c:
	  - It is enabled to show regis without mlimgloader.exe.
	  - *mask = NULL after LoadImage() succeeds.

	* main_loop.c: Not only DEFAULT but also ISO10646_UCS4_1 font setting is
	  customized by --deffont option.

	* vte.c: Not only DEFAULT but also ISO10646_UCS4_1 font setting is
	  customized by vte_terminal_set_font_from_string().

	* c_regis.c: Separated from c_imagelib.c.

	* version.h.in: 3.4.2 -> 3.4.2post

2015-01-06  Araki Ken  <arakiken@users.sf.net>

	* 3.4.2 released.
	  (tag "rel-3_4_2")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.4.2.

	* mlterm.1, doc/en/PROTOCOL: Updated.

	* ml_config_menu.c: On cygwin and msys menu programs exist in /bin
	  instead of LIBEXECDIR/mlterm directory.

2015-01-04  Araki Ken  <arakiken@users.sf.net>

	* ml_termcap.c, win32/x.h, win32/x_window.c, x_screen.c:
	  Compiling error is fixed.

2015-01-04  Araki Ken  <arakiken@users.sf.net>

	* gtk/vte.c: vte_terminal_set_scrollback_lines() is implemented.

	* mlconfig/main.c: mc_char_width_config_widget_new() and
	  mc_flag_config_widget_new(MC_FLAG_STATICBACKSCROLL) are used.

	* mc_font.c: "Unicode areas you won't convert to other charsets" entry is added.

	* mc_flags.[ch]: MC_FLAG_STATAICBACKSCROLL is added.

	* mc_unicode_areas.[ch], mc_char_width.[ch]: Added.

	* ml_vt100_parser.[ch]:
	  - "unicode_noconv_areas" and "unicode_full_width_areas" are added to
	    OSC 5380 or 5381.
	  - ml_get_backscroll_mode() is used for OSC 5380 or 5381 "static_backscroll_mode"
	    instead of ml_screen_is_backscrolling().
	  - ml_vt100_parser_{init|final}() are added.

	* ml_screen.h:
	  ml_get_backscroll_mode() is added.

	* ml_pty_ssh.c:
	  ml_pty_ssh_t::doing_scp is renamed to ml_pty_ssh_t::suspended, and
	  ml_pty_ssh_t::suspended = 1 in use_loopback().

	* ml_term.c:
	  - ml_term_final() is added.
	  - The order of arguments of ml_screen_new() is fixed.
	  - ml_search_ssh_session(host,port,user) -> ml_search_ssh_session(server,port,user)

2014-12-29  Araki Ken  <arakiken@users.sf.net>

	* x_font_ft.c, x_window_cairo.c: The performance of drawing proportional
	  font's glyphs is improved.

	* ml_char_encoding.c: ml_parse_unicode_area() parses not only "U+NNNN-NNNN"
	  but also "U+NNNN".

	* fb/x_window.c: Shift + Tab works.

	* win32/x_window.c, win32/x_xic.c: Ctrl or Shift + Tab works.

	* ml_vt100_parser.[ch]: CSI?8452h, CSI?8452l CSI?117h and CSI?117l are supported.

	* ml_screen.h, ml_edit.h: ml_{edit|screen}_set_use_bce() are added.

2014-12-27  Araki Ken  <arakiken@users.sf.net>

	* ml_pty_ssh.c:
	  - Compiling error when OPEN_PTY_ASYNC is not defined is fixed.
	  - libssh2_channel_open_ex(window_size = 64 * LIBSSH2_CHANNEL_PACKET_DEFAULT)
	    is called instead of libssh2_channel_open_session() in order to
	    improve performance.

	* win32/x_window.c, win32/x_xic.c:
	  Ctrl+0, Ctrl+1, Ctrl+9 and so on are processed for modify other keys.

	* MLTermPty.c, MLTerm.java, MLTermPty.java:
	  writeModifiedKey() and writeSpecialKey() are added to MLTermPty.
	  modifyOtherKeys feature is supported.

	* x_picture.c: Image files in ~/.mlterm/emoji are cachable.

	* ml_vt100_parser.[ch]:
	  - get_emoji_data() which is called in processing U+1F000-1F6FF is added
	    to ml_xterm_event_listener_t.
	  - tcap query is supported.
	  - DA2 response is changed from "1;96;0" to "1;277;0"
	  - DA response is changed from "1;2;4;7" to "1;2;3;4;7;29"
	  - ml_vt100_parser_write_modified_key() and ml_vt100_parser_write_special_key()
	    are added.

	* x_screen.[ch], x_screen_manager.c ml_term.[ch], ml_term_manager.c, vte.c:
	  x_termcap is replaced by ml_termcap.

	* ml_termcap.[ch]: Added.

	* x_termcap.[ch]: Removed.

2014-12-13  Araki Ken  <arakiken@users.sf.net>

	* mc_wordsep.c: Memory leak is fixed.

	* mc_bidi.[ch]: Added for "Separators" of BiDi.

	* ml_font.h: Fix FONT_STYLE_INDEX() macro. (Enbugged at 3.3.0)

	* kik_str.c: kik_str_replace() replaces multiple 'orig' strings by 'new'.

	* x_font_config.c, x_dnd.c: TEST_xxx functions are fixed.

	* kik_debug.h: KIK_TESTIT and KIK_TESTIT_ONCE are added.

	* kik_map.h: Minor fixes.

	* im_ibus.c, im_uim.c, kik_mem.c, kik_dlfcn_dyld.c:
	  Use kik_slist instead of kik_list.

	* kik_slist.h: Added.

	* kik_list.h, kik_iterator.h: Removed.

2014-12-07  Araki Ken  <arakiken@users.sf.net>

	* mlconfig/main.c: "Word separators" entry is added to "Others" tab.

	* mlconfig/mc_wordsep.[ch]: Added.

	* ml_term.c: "word_separators" is added to OSC 5380/5381.

	* ml_screen.[ch]: ml_get_word_separators() is added.

2014-12-04  Araki Ken  <arakiken@users.sf.net>

	* doc/en/ReleaseNote: Fix typo.

	* version.h.in: 3.4.1 -> 3.4.1post

2014-12-03  Araki Ken  <arakiken@users.sf.net>

	* 3.4.1 released.
	  (tag "rel-3_4_1")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.4.1.

	* man/mlterm.1: Updated.

2014-12-02  Araki Ken  <arakiken@users.sf.net>

	* ml_pty_ssh.c: Minor fixes around handling error cases.

2014-11-30  Araki Ken  <arakiken@users.sf.net>

	* MLTerm.java: Null pointer exception in closing one of multiple opened
	  ptys is fixed.

	* c_sixel.c: Compiling error by g++ is fixed.

	* x_screen.c: SF Bug #72

2014-11-27  Araki Ken  <arakiken@users.sf.net>

	* mlconfig/main.c, mc_font.c: "Box drawing" and "Font policy" radio buttons
	  are moved from main.c to mc_font.c

	* mc_radio.[ch]:
	  - mc_is_vertical(), mc_always_unicode_font() and mc_never_unicode_font()
	    are removed.
	  - mc_radio_set_callback() and mc_radio_get_value() are added.

2014-11-25  Araki Ken  <arakiken@users.sf.net>

	* mc_im.c: "None" is removed from "Input Method" on win32.

	* x_xic.c: win->xic == NULL check is added.

2014-11-24  Araki Ken  <arakiken@users.sf.net>

	* ml_screen.c: line->num_of_filled_chars is reset by
	  ml_line_get_num_of_filled_chars_except_spaces_with_func(ml_char_equal)
	  instead of ml_line_get_num_of_filled_chars_except_spaces()
	  in receive_scrolled_out_line().

	* ml_line.[ch]: ml_line_get_num_of_filled_chars_except_spaces_with_func()
	  is added.

	* mc_im.c:
	  - get_kbd_info() which is implemented similarly to im_kbd_get_info()
	    is used if cygim-kbd.dll isn't found.
	  - If mlterm is built with win32gdi, "MS IME" is shown instead of "XIM".

	* mc_color.c: gdk_color_to_string() is added for gtk+ < 2.12.

	* mlconfig/main.c: mc_im_config_widget_new() is called if USE_WIN32GUI
	  is defined.

	* ml_term.h: ml_reset_pending_vt100_sequence() is called before
	  ml_start_config_menu().

	* ml_vt100_parser.c:
	  - ml_reset_pending_vt100_sequence() is called and sixel_scrolling is
	    set to 1 in OSC 5379 full_reset.
	  - Cursor position is not moved by soft_reset().

	* ml_edit.c: If use == -1, ml_edit_set_use_margin() resets states
	  except cursor position.

	* mlcc/comm.c: mlterm_get_color_param() is implemented.

	* im_kbd.c, im_uim.c, im_m17nlib.c: Fix memory leaks on error.

2014-11-23  Araki Ken  <arakiken@users.sf.net>

	* mc_color.[ch]: mc_{cursor|substitute}_color_config_widget_new(),
	  mc_vtcolor_config_widget_new(), mc_update_{cursor|substitute}_color()
	  and mc_update_vtcolor() are added.

	* mc_{letter|line}_space.[ch]: Integrated to mc_space.[ch].

	* mc_mod_meta.[ch], mc_vertical.[ch], mc_sb.[ch], mc_bel.[ch]:
	  Integrated to mc_radio.[ch].

	* mc_brightness.[ch], mc_contrast.[ch], mc_fade.[ch], mc_gamma.[ch],
	  mc_screen_ratio.[ch]: Integrated to mc_ratio.[ch].

	* mc_io.c: "font_policy" and "logging_vt_seq" wrappers are added to
	  mc_{set|get}_str_value().

	* ml_vt100_parser.[ch], x_screen.c: get_color is added to ml_config_event_listener_t.

	* ml_term.c, ml_vt100_parser.c: 'output' argument of ml_{term|vt100_parser}_get_config()
	  is NULL if term == output.

2014-11-19  Araki Ken  <arakiken@users.sf.net>

	* mc_font.c, mc_char_encoding.c: An appropriate character set is automatically
	  selected in selecting font on mlconfig according to a selected character
	  encoding.

	* ml_vt100_parser.c: ml_vt100_parser_t::is_auto_encoding is set in
	  ml_vt100_parser_new() and ml_vt100_parser_change_encoding().

	* mkf_ucs_property.table: Updated to Unicode 7.0.0 (UnicodeData.txt and
	  EastAsianWidth.txt)

2014-11-02  Araki Ken  <arakiken@users.sf.net>

	* ml_term.c, ml_vt100_parser.c: Pty to be responsed to by OSC 5381 is
	  fixed.

	* version.h.in: 3.4.0 -> 3.4.0post

2014-10-28  Araki Ken  <arakiken@users.sf.net>

	* 3.4.0 released.
	  (tag "rel-3_4_0")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.4.0.

2014-10-28  Araki Ken  <arakiken@users.sf.net>

	* registobmp/main.c, Makefile.in: USE_WIN32API -> USE_WIN32GUI

2014-10-26  Araki Ken  <arakiken@users.sf.net>

	* etc/main, etc/main.ja, gtk/INSTALL, doc/ja/README.ja: Updated.

	* x_screen.c: change_true_transbg_alpha() is always called (except when
	  x_window_has_wall_picture() is true) even if screen->pic_mod.alpha == alpha.

	* vte.c:
	  - gdk_rgba_to_string() is replaced by gdk_rgba_to_string2() which returns
	    the format mlterm can recognize.
	  - vte_terminal_set_color_bold() and vte_terminal_set_color_bold_rgba() are
	    implemented.
	  - x_font_use_point_size_for_fc() -> x_font_use_point_size()
	    ml_term_set_winsize() is removed.

2014-10-25  Araki Ken  <arakiken@users.sf.net>

	* im_ibus.c: Cursor position passed to ibus_input_context_set_cursor_location()
	  is fixed.

2014-10-24  Araki Ken  <arakiken@users.sf.net>

	* c_sixel.c: Hue 120=Red, 240=Green, 0=Blue

	* man/mlterm.1: .TP was missing.

2014-10-19  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_imagelib.c: kik_mem_malloc() etc are enabled if KIK_DEBUG is defined.

	* kik_mem.[ch]: kik_mem_remove() is added.

	* x_screen.c, x_screen_manager.c:
	  sixel_palette argument is added to get_picture_data().

	* ml_vt100_parser.[ch]:
	  - ml_vt100_parser_t::sixel_palette is added.
	  - sixel_palette argument is added to ml_xterm_event_listener_t::get_picture_data().

	* c_sixel.c, x_picture.h, fb/x_imagelib.c:
	  - "custom_palette" static variable is introduced and x_set_custom_sixel_palette()
	    is added.
	  - "#define color_tbl sixel_cmap" is removed.

2014-10-18  Araki Ken  <arakiken@users.sf.net>

	* c_sixel.c: HLS is supported.

	* im_ibus.c: Calling select(2) with an invalid file descriptor after
	  restarting ibus is fixed.

2014-10-17  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.[ch], x_screen.c: DECEFR is supported.

2014-10-13  Araki Ken  <arakiken@users.sf.net>

	* README, doc/ja/README.ja: Updated.

	* x_main_config.c: The default value of "type_engine" option is changed
	  from "xcore" to "xft".

	* configure.in: fribidi, xft and cairo are enabled by default.

	* im_ibus.c: "connected" and "disconnected" signals are handled.

2014-10-11  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c, x_picture.c: INLINEPIC_AVAIL_ROW is added.

2014-10-07  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c, x_picture.c: The previous fix is moved from x_picture.c
	  to x_screen.c.

2014-10-07  Araki Ken  <arakiken@users.sf.net>

	* x_picture.c: Inline pictures in back logs (except recent 1024 lines)
	  are removed.

2014-10-05  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.c: Corrupt scrolling in Left-right margin which contains
	  full width characters is fixed.

2014-10-04  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: event->state & ModMask => compare_key_state_with_modmap().

2014-10-02  Araki Ken  <arakiken@users.sf.net>

	* display.h, android/jni/x.h, fb/x.h, win32/x.h, win32/x_display.c,
	  xlib/x_display.c, x_scrollbar.c:
	  XC_sb_v_double_arrow is removed.

2014-09-28  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c, ml_edit.h, ml_screen.h:
	  Auto wrap is disabled in putting sixel images to the screen.

2014-09-23  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: CSI>4p is changed to CSI>2p for Xsixel.

	* main_loop.c, x_font.h, win32/x_font.c, xlib/x_font.c:
	  - x_font_use_point_size_for_fc() is renamed to x_font_use_point_size().
	  - "use_point_size" option works on win32.

	* MLTermPty.c: Compiling error is fixed.

2014-09-22  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.fb, doc/en/README.fb: Updated.

	* Makefile.in: Minor fix for install-fb target.

	* x_virtual_kbd.c, fb/x_display.c: Software keyboard area is correctly redrawn.

2014-09-22  Araki Ken  <arakiken@users.sf.net>

	* ml_term.c: Opening pty asynchronously is disabled in opening a new pty
	  channel on an exsiting session.

	* x_virtual_kbd.[ch], fb/x_display.c: Software keyboard is redrawn when
	  it is partially exposed.

	* fb/x_imagelib.c: Transparent pixels are replaced by the current background
	  color on 1bpp.

2014-09-21  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* fb/x_display.c, fb/x_virtual_kbd.c: Software keyboard is available on
	  rotated display.

	* xlib/x_window.c: clear_margin_area() cleargs RIGHT_MARGIN and BOTTOM_MARGIN.

	* x_display_x68kgrf.c: _disp.height is replaced by _display.height to fix
	  segv in x68k_tvram_set_wall_picture().

	* ml_pty_ssh.c: libssh2_session_set_timeout(0) is called at the end of ssh_connect().

2014-09-20  Araki Ken  <arakiken@users.sf.net>

	* fb/x_window.c: x_window_bell() supports BEL_VISUAL.

	* xlib/x_window.c, fb/x_window.c:
	  x_window_blank() doesn't blank RIGHT_MARGIN and BOTTOM_MARGIN.

	* ml_pty_ssh.c: libssh2_session_set_timeout(10000) => libssh2_session_set_timeout(30000)

2014-09-18  Araki Ken  <arakiken@users.sf.net>

	* ml_pty.[ch], ml_pty_intern.h, ml_pty_ssh.c, ml_pty_pipewin32.c, ml_pty_unix.c,
	  ml_term.[ch], ml_term_manager.c, x_screen_manager.c:
	  width_pix and height_pix arguments are added to the functions opening pty.

	* ml_term.[ch]: ml_term_set_winsize() is removed.

	* ml_pty_ssh.c: libssh2_session_set_timeout(10000).

2014-09-14  Araki Ken  <arakiken@users.sf.net>

	* Makefile.in: "./configure;make install" executes "make all" automatically
	  before "make install".

	* ml_term_manager.c: Don't restart mlterm in segv twice or more times
	  if auto_restart=true.

2014-09-14  Araki Ken  <arakiken@users.sf.net>

	* ml_term_manager.c: Fix compiling error.

2014-09-13  Araki Ken  <arakiken@users.sf.net>

	* ml_pty.[ch], ml_pty_intern.h, ml_pty_unix.c, ml_term.[ch], ml_vt100_parser.c,
	  ml_screen.c, ml_screen_manager.c, ml_pty_ssh.c, MLTermPty.c, vte.c:
	  Window width and height by pixel are set to struct winsize::ws_{x|y}pixel.

2014-09-10  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: ml_term_reset_pending_sequence() is called in pressing Pause key
	  instead of ESC key.

2014-09-07  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: xterm_show_picture() is renamed to x_term_show_sixel()
	  and char_index, row and scrollable arguments are removed.

	* ml_vt100_parser.[ch]:
	  - ml_xterm_event_listener_t::show_picture is renamed to
	    ml_xterm_event_listener_t::show_sixel.
	  - ml_xterm_event_listener_t::show_sixel is called only if
	    sixel scrolling is off by OSC?80h.

2014-09-05  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: Clean up.

2014-09-03  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, doc/ja/README.ja: Updated.

	* main_loop.c: --point/use_point_size option is added.

	* mlterm/ml_vt100_parser.c:
	  - OSC>2p => OSC>4p
	  - show_picture() moves cursor in showing animation frames.

2014-09-02  Araki Ken  <arakiken@users.sf.net>

	* win32/x_display.h: Added.

	* win32/x_display.c: x_display_get_cursor() is added.

	* win32/x.h, fb/x.h: XC_sb_v_double_arrow and XC_left_ptr are defined
	  as the same value in X11/cursorfont.h.

	* xlib/x_window.c: x_window_set_cursor() calls XDefineCursor() in changing
	  the current cursor shape.

	* x_display.h: XC_nil which hides pointer is defined.

	* x_screen.c: xterm_show_picture() is added.

	* x_picture.[ch]: x_{load|delete}_tmp_picture() are added.

	* win32/x_window.c:
	  - x_window_copy_area() draws it directly without x_window_update().
	  - WM_SETCURSOR message is processed.

	* ml_vt100_parser.[ch]: Animation sixel frames are drawn by
	  ml_xterm_event_listener_t::show_picture instead of
	  ml_xterm_event_listener_t::get_picture_data.

	* ml_screen.[ch]: ml_screen_get_cursor_line(), ml_screen_go_horizontally()
	  and ml_screen_go_vertiacally() are changed from function to macro.

2014-08-26  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c:
	  - DECLRP is returned by DECRQLP even if DECELR isn't sent.
	  - DECSLE accepts Pm instead of Ps.
	  - locator_mode is not reset by DECELR.

2014-08-24  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: vt100_parser->mouse_mode >= LOCATOR_CHARCELL_REPORT is
	  checked before responsing to the DECRQLP.

2014-08-24  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_imagelib.c: load_sixel() is called regardless of BUILTIN_IMAGELIB.

	* x_screen.[ch], MLTermPty.c: The default value of prev_mouse_report_{col|row}
	  is changed from -1 to 0.

	* ml_vt100_parser.c: locator_mode is not checked if button == 0.

2014-08-23  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_imagelib.c: Sixel graphics without any modifiers is processed in
	  mlterm instead of calling mlimgloader.

	* gdk-pixbuf.c: Compiling error with gdk-pixbuf-1.x is fixed.

	* x_screen.c, MLTermPty.c: ml_term_report_mouse_tracking() is used.

	* ml_term.h: ml_term_report_mouse_tracking() is added.

	* ml_vt100_parser.[ch]:
	  - DEC Locator is partially supported.
	  - ml_vt100_parser_report_mouse_tracking() is added.

	* version.h.in: 3.3.8 -> 3.3.8post

2014-08-16  Araki Ken  <arakiken@users.sf.net>

	* 3.3.8 released.
	  (tag "rel-3_3_8")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.3.8.

	* etc/main, etc/main.ja: Updated.

2014-08-16  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.[ch]: Compiling error if mlterm is built without
	  --enable-ssh2 is fixed.

	* ml_pty_ssh.c: Hack for cygwin SIGCHLD is added.

	* win32/mlterm-msys_cygwin.bat, mlterm-win32.bat,
	  mlterm-xcygwin.bat, setup-cygwin.bat: Removed.

2014-08-12  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.ja: Updated.

	* xlib/x_dnd.c, x_screen.c: DnD without Shift doesn't start scp.

	* fb/x_imagelib.c, win32/x_imagelib.c: Sixel parser is embeded instead of
	  using mlimgloader.

2014-08-09  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.ja, man/mlterm.1: Updated.

	* x_screen.c: "scp" is executed in set_xdnd_config() if a local file is
	  dropped on ssh client window.

	* xlib/x_dnd.c: "text/uri-list" triggers set_xdnd_config("scp").

	* win32/x_dnd.c: Shift+DnD triggers set_xdnd_config("scp").

	* ml_term.h: ml_term_exec_cmd() and ml_term_scp() are added.

	* ml_vt100_parser.[ch]: ml_vt100_parser_exec_cmd() is added.

	* libptyssh/ml_pty_ssh.c, ml_pty_ssh.c:
	  - read/write on ssh session is blocked while scp thread is working.
	  - Outputting "SCP: src -> dst" message is moved from ml_pty_ssh.c to
	    libptyssh/ml_pty_ssh.c

2014-08-06  Araki Ken  <arakiken@users.sf.net>

	* win32/x_imagelib.c: CreateProcess() => CreateProcessW()

	* gdiplus.cpp:
	  - mbstowcs() => MultiByteToWideChar()
	  - CommandLineToArgvW(GetCommandLineW()) is used.

	* ml_pty_ssh.c:
	  - IS_RELATIVE_PATH() => IS_RELATIVE_PATH_UNIX().
	  - scp works fully from mlconfig even if use_scp_full = false.

	* kik_path.h: IS_RELATIVE_PATH_{DOS|UNIX}() are added.

	* mlconfig/main.c: gtk_window_set_keep_above() is removed.

	* ml_config_menu.c: close(STDERR_FILENO) is added.

	* mc_wall_pic.c, gdiplus.cpp: Change of mc_wall_pic.c at 2014-08-03 is reverted,
	  and strchr(path,'/') is checked before cygwin_conv_to_win32_path() in gdiplus.cpp.

2014-08-03  Araki Ken  <arakiken@users.sf.net>

	* mlconfig/po/*.po: Updated.

	* mlconfig/main.c, mc_flags.[ch]: "Local echo" checkbox is added to "Others" tab.

	* mc_bel.c, mc_mod_meta.c: The position of showing label is adjusted.

2014-08-03  Araki Ken  <arakiken@users.sf.net>

	* mc_wall_pic.c: escape_path() is added for win32.

	* doc/en/PROTOCOL: Updated.

	* MLTermPty.c, gtk/vte.c: Minor fixes.

	* win32/x_font.c, libtype/x_font_ft.c: Font name like "Hoge 0" is parsed
	  correctly and "0" is ignored.

	* x_screen.[ch]: x_system_event_listener_t::get_pty() and ::pty_list() are
	  removed and ml_get_term() and ml_get_pty_list() are called from x_screen.c
	  directly.

	* ml_vt100_parser.[ch], ml_term.[ch], ml_term_manager.[ch], x_screen.c:
	  - ml_{term|vt100_parser}_{set|get}_config() are added.
	  - {get|set}_config in x_screen.c calls ml_term_{set|get}_config().
	  - use_auto_detect and logging_vt_seq arguments are added to ml_create_term(),
	    ml_term_new() and ml_vt100_parser_new().

	* ml_pty.[ch], ml_pty_intern.h:
	  - ml_config_menu is managed by ml_pty instead of ml_term.
	  - ml_response_config() is added.

	* ml_config_proto.[ch]:
	  - ml_get_proto_challenge() is added.
	  - ml_parse_proto_prefix() returns 1 instead of 0 if dev is not found in
	    the sequence.

	* ml_edit.c: The result of https://gist.github.com/ttdoda/5798565
	  and https://gist.github.com/ttdoda/5902671 becomes the same as TeraTerm.
	  (Compatibility with VT525 is improved.)

2014-07-28  Araki Ken  <arakiken@users.sf.net>

	* x_event_source.c, x_screen.c: x_display_sync() is called in receive_next_event()
	  and interrupt_vt100_cmd().

	* x_display.[ch]: x_display_sync() is added.

2014-07-27  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: Minor fixes around ml_vt100_parser_t::yield.

2014-07-26  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.ja, man/mlterm.1: Updated.

	* ml_vt100_parser.c: fclose(fp) and free(path) are called before return 0
	  in processing sixel sequence.

2014-07-26  Araki Ken  <arakiken@users.sf.net>

	* x_main_config.c, x_screen.c: --seqfmt/vt_seq_format option is added.

	* ml_vt100_parser.[ch]: ml_set_use_ttyrec_format() enables or disables to log
	  vt100 sequence by ttyrec format.

2014-07-25  Araki Ken  <arakiken@users.sf.net>

	* ml_bidi.c, x_picture.c: ml_get_picture_char() is used.

	* ml_char.[ch]: ml_get_picture_char() is added.

	* x_screen.c: interrupt_vt100_cmd() is added.

	* ml_vt100_parser.[ch]:
	  - interrupt event is added to ml_xterm_event_listener_t.
	  - ml_xterm_event_listener_t::interrupt is called if sixel graphics is drawn
	    by DECINVM.
	  - The amount of reading data from pty once is shrinked if buffered data
	    isn't DCS or OSC.
	  - new_len is added to ml_read_buffer_t, and only newly received data is
	    parsed in restarting to parse DCS or OSC in  parse_vt100_escape_sequence().

2014-07-23  Araki Ken  <arakiken@users.sf.net>

	* ml_drcs.[ch], ml_vt100_parser.[ch]: const is added to some arguments.

2014-07-21  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c:
	  - hex_to_text() is optimized.
	  - define_macro() deletes specified entry if *data is '\0'.

2014-07-21  Araki Ken  <arakiken@users.sf.net>

	* x_picture.c, xlib/x_imagelib.c: ~/.mlterm/macro_*.six is cached.

	* ml_vt100_parser.[ch]:
	  - DECDMAC/DECINVM are supported.
	  - If DECDMAC defines sixel graphics data, store it in ~/.mlterm/macro_*.six and
	    show it by DECINVM.

2014-07-19  Araki Ken  <arakiken@users.sf.net>

	* MLTermPty.c:
	  - "use_auto_detect" and "auto_detect_encodings" are supported.
	  - replaceTextBuffering(0,0,null,null) is called in checkTextLimit().

	* x_screen.c, doc/en/PROTOCOL: "auto_detect_encodings" is added to OSC 5380 and 5381.

	* ml_vt100_parser.[ch]:
	  - ml_get_auto_detect_encodings() is added.
	  - ISO8859_6_R (arabic) and ISO8859_8_R (hebrew) are always converted to
	    unicode because they need bidi rendering.

	* mc_io.[ch]: 'const' is added.

	* mc_auto_detect.[ch]: Added.

	* mc_check.[ch]: Removed.

	* ml_pty.c: Parenthesis is added.

2014-07-15  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: ml_line_is_empty() in start_selection() and selecting_with_motion()
	  is removed.

	* ml_screen.c: convert_col_to_char_index() is fixed.

2014-07-14  Araki Ken  <arakiken@users.sf.net>

	* x_display_wscons.c: The null pointer bug of_display.color_cache in the case
	  of vinfo.depth >= 2 && _disp.depth == 1 is fixed.

2014-07-13  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: Compiling error is fixed.

	* ml_screen.c, x_screen.c:
	  ml_term_get_cols(screen->term) - line->num_of_chars
	  => ml_term_get_cols(screen->term) - ml_line_get_num_of_filled_cols(line)

	* x_selection.c: conved flag is added in update_sel_region() instead of
	  col != conved_col because it doesn't works if col == 0.

2014-07-13  Araki Ken  <arakiken@users.sf.net>

	* ml_screen.[ch], ml_term.h, x_screen.c, x_selection.[ch]:
	  Rectangle selection is supported.

	* win32/x_window.c: get_key_state() is set to XButtonEvent::state in
	  x_window_receive_event().

	* ml_line.c:
	  - ml_line_{reverse|restore}_color() calls ml_line_set_modified()
	    only if ml_char_{reverse|restore}_color() returns 1.
	  - BREAK_BOUNDARY works in ml_convert_char_index_to_col() works even if
	    specified line is empty.

	* ml_char.c: Minor fixes.

2014-07-10  Araki Ken  <arakiken@users.sf.net>

	* configure.in: "-lfontconfig -lfreetype" is added to CAIRO_LIBS and XFT_LIBS
	  because mlterm has undefined symbols if --disable-shared is specified on
	  some platforms where dependency_libs="" in libcairo.la.

2014-07-09  Araki Ken  <arakiken@users.sf.net>

	* x_display_freebsd.c: Duplicated capslock processing is fixed.

	* jni/x_display.c: Minor fixes.

2014-07-08  Araki Ken  <arakiken@users.sf.net>

	* x_display_x68kgrf.c:
	  - Keyboard events from /dev/kbd are processed instead of stdin.
	  - x68k_set_use_tvram_colors() and x68k_set_tvram_cmap() resets
	    _display.color_cache.

	* x.h: KS_Print -> KS_Print_Screen

	* x_display.c: Key squences on NetBSD/x68k are added to the table in
	  receive_stdin_key_event().

2014-07-08  Araki Ken  <arakiken@users.sf.net>

	* libtype/Makefile.in: Compiling error is fixed.

	* version.h.in: 3.3.7 -> 3.3.7post

2014-07-06  Araki Ken  <arakiken@users.sf.net>

	* 3.3.7 released.
	  (tag "rel-3_3_7")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.3.7.

2014-07-06  Araki Ken  <arakiken@users.sf.net>

	* x_shortcut.c: Minor fixes.

	* gtk/vte.c: If cmd_path is omittted in argv, argv[0] = cmd_path.

2014-07-05  Araki Ken  <arakiken@users.sf.net>

	* kik_str.c: Illegal memory allocation is fixed.

	* x_shortcut.c: [operation]=[key] format is obsoleted.

2014-07-05  Araki Ken  <arakiken@users.sf.net>

	* kik_str.c, x_shortcut.c: kik_str_unescape() hack for x_shortcut.c is removed.

2014-07-05  Araki Ken  <arakiken@users.sf.net>

	* mlclient/main.c: Minor fixes.

	* main_loop.c: --deffont option is added.

	* README.ja, mlterm.1: Updated.

	* ml_bidi.c: U+2500-259f and DEC_SPECIAL characters are forcibly regarded as bidi
	  separator ones.

	* ml_term.c: kik_str_unescape(bidi_separators) is called.

	* ml_screen.c: kik_str_unescape(word_separators) is called.

2014-06-30  Araki Ken  <arakiken@users.sf.net>

	* ml_pty.[ch], ml_pty_inter.h, ml_pty_unix.c, ml_term.[ch], x_main_config.[ch],
	  x_screen_manager.c:
	  chdir(work_dir) if --work-directory option is specified.

	* mlterm.1, mlclient.1, README.ja, PROTOCOL, etc/main, etc/main.ja: Updated.

2014-06-29  Araki Ken  <arakiken@users.sf.net>

	* ml_bidi.c: Minor fixes.

2014-06-28  Araki Ken  <arakiken@users.sf.net>

	* x_main_config.c, x_screen.c: ml_set_bidi_separators() is changed to
	  ml_term_{get|set}_bidi_separators().

	* ml_term.[ch], ml_term_manager.[ch], x_screen_manager.c:
	  - bidi_separators variable is changed from static to the member of ml_term_t.
	  - ml_term_{get|set}_bidi_separators() are added.
	  - ml_set_bidi_separators() is removed.

	* vte.c, MLTermpty.c: Arguments of ml_create_term() is fixed.

	* ml_vt100_parser.[ch]: Minor fixes.

2014-06-28  Araki Ken  <arakiken@users.sf.net>

	* mlterm.1, README.ja: Updated.

	* libctl/ml_bidi.[ch], ml_line_bidi.[ch], ml_logical_visual_bidi.c,
	  mlterm/ml_bidi.[ch], ml_logical_visual.[ch], ml_term.[ch], x_screen.c,
	  x_main_config.c:
	  - bidi_separator option is added.
	  - "left" and "right" are available as the value of bidi_mode option.

	* libptyssh/ml_pty_ssh.c: Unread data in loopback pty isn't discarded.

	* mc_io.c: HOEMPATH environmental variable is used instead of HOME in win32.

2014-06-24  Araki Ken  <arakiken@users.sf.net>

	* x_draw_str.c: If ml_char_is_visible() is false, text is not drawn.

	* ml_char.[ch]:
	  - IS_CONCEALED => IS_VISIBLE
	  - ml_char_is_visible() is added.

2014-06-22  Araki Ken  <arakiken@users.sf.net>

	* MLTermPty.c, MLTerm.java, Style.java: SGR 9 and 29 are supported.

	* ml_screen.[ch], ml_term.h, x_screen.c: 'visible' argument is added to
	  ml_term_blink() and ml_screen_blink().

	* ml_char.[ch]: ml_char_blink() => ml_char_set_visible()

	* ml_vt100_parser.c: put_char() is fixed.

2014-06-21  Araki Ken  <arakiken@users.sf.net>

	* vte.c: set_colors() is fixed.

	* man/mlterm.1, doc/ja/README.ja: Updated.

	* x_main_config.[ch]: --it/it_color, --bl/bl_color, --co/co_color and
	  --itfont/use_italic_font options are added.

	* x_font_manager.[ch]: x_set_use_italic_font() is added.

	* vte.c, MLTermPty.c, ml_term_manager.[ch]: Fixes by the change of
	  the arguments of x_font_manager_new(), x_color_manager_new() and
	  ml_create_term().

	* x_draw_str.[ch]: adjust_bd_ul_color() is removed.

	* x_color_manager.[ch]:
	  - _ITALIC_COLOR, _BLINKING_COLOR and CROSSED_OUT_COLOR are managed in
	    x_color_manager_t::sys_colors.
	  - x_color_manager_{set|get}_{bd|ul}_color() ->
	    x_color_manager_{set|get}_alt_color().
	  - x_color_manager_adjust_{bd|ul}_color() are removed.

	* ml_term.[ch]: ml_term_{set|get}_alt_color_mode() are added.

	* ml_vt100_parser.[ch]:
	  - ml_alt_color_mode_t is added.
	  - ml_vt100_parser_{set|get}_alt_color_mode() are added.
	  - vt100_parser->alt_color_mode is checked in put_char().

	* ml_color.h: ML_BOLD_COLOR, ML_ITALIC_COLOR, ML_UNDERLINE_COLOR,
	  ML_BLINKING_COLOR, ML_CROSSED_OUT_COLOR are added.

2014-06-20  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.[ch], x_screen.[ch]: SGR 5 and 25 are supported.

	* ml_term.h: ml_term_blink() is added.

	* ml_screen.[ch]: ml_screen_blink() and ml_screen_enable_blinking() are added.

	* im_fcitx.c, im_ibus.c, im_m17nlib.c, im_scim_mod_if.c, im_uim.c,
	  ml_screen.[ch], x_im.h, x_im_{candidate|status}_screen.c:
	  Fixes by is_blinking of ml_char_{set|combine}().

	* ml_char.[ch]: is_blinking is added to ml_char_{set|combine}(), and
	  ml_char_is_blinking() and ml_char_blink() are added.

	* x_picture.c: ~/.mlterm/anim* are completely removed on exit.

	* fb/x_display.c, win32/x_display.c: x_picture_display_closed() is called in
	  x_display_close_all().

2014-06-16  Araki Ken  <arakiken@users.sf.net>

	* x_im.h, im_*.c: is_crossed_out argument is added to x_im_export_syms_t::ml_char_set
	  and ::ml_char_combine(), and IM_API_VERSION is changed from 0x09 to 0x0a.

	* x_font_config.c, ml_vt100_parser.c: ml_parse_unicode_area() is used.

	* ml_char_encoding.[ch]: ml_parse_unicode_area() is added.

2014-06-15  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.ja, man/mlterm.1, doc/en/PROTOCOL: Updated.

	* ml_vt100_parser.[ch], x_main_config.c:
	  full_width_areas => unicode_full_width_areas

2014-06-15  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.ja, man/mlterm.1: Updated.

	* x_font_config.c: "_HALFWIDTH" suffix is removed.

	* ml_vt100_parser.[ch], x_main_config.c:
	  "use_unicode_property" option is removed.

	* mc_font.c: "UNICODE (EMOJI)" is added.

	* ml_vt100_parser.[ch], x_main_config.c:
	  "full_width_areas" option which forces full width regardless of
	  EastAsianWidth.txt is added.

2014-06-13  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.[ch], ml_screen.h, ml_vt100_parser.c:
	  ml_{edit|screen}_scroll_{left|right}ward() are added and used to process
	  SL and SR.

2014-06-10  Araki Ken  <arakiken@users.sf.net>

	* ml_char.[ch], ml_vt100_parser.[ch], x_draw_str.c:
	  is_underlined => underline_style

2014-06-09  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: ML_BOLD_COLOR_MASK is not set to ML_{FG|BG}_COLOR.

	* xlib/x_color.c: Fix alloc_closest_xcolor_pseudo().

	* fb/x.h, fb/x_display.c: #ifdef LARGE_CACHE => #ifndef COLOR_CACHE_MINIMUM.

	* README.ja, man/mlterm.1: Updated.

2014-06-09  Araki Ken  <arakiken@users.sf.net>

	* fb/x.h, fb/x_display.c: LARGE_CACHE is added. (disabled by default.)

2014-06-09  Araki Ken  <arakiken@users.sf.net>

	* fb/x.h, fb/x_display.c: Caching in x_cmap_get_closest_color() is improved.

	* main_loop.c: Starting mlterm with -j option executes mlclient if daemon
	  process has already started.

	* daemon.[ch]:
	  - free(un_file) is called in daemon_final().
	  - daemon_get_fd() is removed.

	* x_screen_manager.c: mlclient permits unknown options.

	* kik_conf.[ch]: ignore_unknown_opt argument is added to kik_conf_parse_args().

	* ml_char.c, ml_vt100_parser.c: ML_BOLD_COLOR_MASK is set in ml_vt100_parser.c,
	  not in ml_char.c.

2014-06-07  Araki Ken  <arakiken@users.sf.net>

	* mc_logsize.c: "unlimited" is added.

	* ml_config_proto.c, ml_vt100_parser.c: Minor fixes.

2014-06-06  Araki Ken  <arakiken@users.sf.net>

	* ml_char.c: CHARSET() macro checks is_unicode_area_cs flag.

2014-06-05  Araki Ken  <arakiken@users.sf.net>

	* ml_config_proto.[ch]: ml_parse_proto_prefix() checks challenge.

	* x_draw_str.c: draw_line() is added to draw underline, double-underline or
	  crossed out line.

	* ml_vt100_parser.[ch]:
	  - SGR 9, 21, and 29 are processed.
	  - is_crossed_out is added to ml_vt100_parser_t and ml_vt100_storable_states_t.
	  - DECFRA is processed.

	* ml_edit.[ch]: ml_edit_fill_all() -> ml_edit_fill_area()

	* ml_screen.[ch]: ml_screen_fill_all_with_e() -> ml_screen_fill_area()

	* ml_char.[ch]:
	  - is_crossed_out is added to ml_char_t, ml_char_set() and ml_char_combine().
	    ml_char_is_crossed_out() is added.
	  - is_underlined == 2 means drawing underline doubly.

	* x_im_{status|candidate}_screen.c: Minor fixes.

	* x_font_ft.c: Fixes if font->is_vertical is true.

2014-06-03  Araki Ken  <arakiken@users.sf.net>

	* main_loop.c, x_screen.c: "mod_meta_prefix" option is added.

	* x_shortcut.c, x_termcap.c: kik_str_unescape() is used.

	* kik_str.[ch]: kik_str_unescape() is added.

2014-06-01  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c, x.h: x_cmap_get_closest_color() caches 512 + 64 pixels.

	* x_screen_manager.c: get_picture_data() for background terminals is set
	  when they are detached from the window system.

	* ml_term.[ch]: ml_term_t::user_data and ml_term_{get|set}_user_data() are added.

2014-05-29  Araki Ken  <arakiken@users.sf.net>

	* mkf/configure.in, mkf/Makefile.in: If --disable-dl-table is specified,
	  'make' isn't executed under libtbl/.

	* configure.in, main/Makefile.in: XWINDOW_OBJ_SUFFIX => MAIN_OBJ_SUFFIX

	* version.h.in: 3.3.6 -> 3.3.6post

2014-05-25  Araki Ken  <arakiken@users.sf.net>

	* 3.3.6 released.
	  (tag "rel-3_3_6")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.3.6.

	* x_transparent_sample_sb_view.c:
	  x_transparent_sample2_sb_view_new() => x_transparent_sample_sb_view_new()

	* x_sample_sb_view.c: x_sample2_sb_view_new() => x_sample_sb_view_new()

2014-05-25  Araki Ken  <arakiken@users.sf.net>

	* ml_term.c: ml_screen_visual() is called in ml_term_set_modified_*()
	  only if ml_screen_logical() succeeded, because ml_term_set_modified_*()
	  can be called in logical context. (see flush_scroll_cache() in x_screen.c)

	* x_draw_str.c: The position of drawing drcs glyphs is fixed.

	* ml_line.[ch], ml_edit.c, ml_edit_scroll.c, ml_model.c:
	  - ml_line_copy_line() -> ml_line_copy()
	  - ml_line_swap() is added, and ml_line_copy_line() in copy_lines() in
	    ml_edit_scroll.c is replaced by ml_line_swap().

	* win32/x_xic.c: The focused window alone can call ImmSetCompositionWindow().

	* README, README.ja: Minor fixes.

2014-05-23  Araki Ken  <arakiken@users.sf.net>

	* x_font_config.c: The change at 2014-05-22 is reverted.

2014-05-23  Araki Ken  <arakiken@users.sf.net>

	* MLActivity.java: unifont.pcf which is older than the apk file
	  is overwritten.

2014-05-22  Araki Ken  <arakiken@users.sf.net>

	* x_font_config.c: changed_font_file argument is removed from read_all_conf().

	* ml_char.[ch]: ml_char_add_unicode_area_font() -> ml_char_get_unicode_area_font()

2014-05-19  Araki Ken  <arakiken@users.sf.net>

	* x_sb_screen.c, win32/x_window.c: button_pressed() hack in x_sb_screen.c
	  for USE_WIN32GUI is moved to x_window.c

	* Android.mk, android/jni/x_display.c, x_screen_manager.c:
	  Scrollbar is supported on Android.

	* pixmap_engine.c, x_sb_view_factory.c, x_sb_view.h, main/dexport.map:
	  The address of x_imagelib_load_file is passed to pixmap_engine
	  via x_sb_view_conf_t instead of building mlterm with -export-dynamic.

	* x_sb_view.h, x_scrollbar.c, x_simple_sb_view.c, main/dexport-fb.map,
	  scrollbar/sample/:
	 - "sample" scrollbar is linked to mlterm as "simple" one.
	 - "sample2" scrollbar is renamed to "sample".

	* xlib/x_simple_sb_view.c, win32/x_simple_sb_view.c, fb/x_simple_sb_view.c:
	  The original "simple" scrollbar is removed.

2014-05-18  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: The current foreground color of the terminal is
	  designated as the default value of the first entry of the sixel palette.

2014-05-17  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: If Pc of OSC 52 is 'p' and "use_clipboard" option is true,
	  clipboard is disabled temporarily.

2014-05-17  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.[ch], x_screen.c: If Pc of OSC 52 is 'c' and "use_clipboard"
	  option is false, clipboard is enabled temporarily.

	* ml_drcs.[ch], ml_vt100_parser.[ch], x_screen.c: Each pty has its own drcs database.

	* c_sixel.c: Fix http://twitter.com/kefir_/status/467340224628924416

	* ml_pty.c: Minor hack is added to ml_pty_get_slave_name().

2014-05-11  Araki Ken  <arakiken@users.sf.net>

	* x_im_{candidate|status}_screen.c: Calculating appropriate size of input
	  method window in draw_screen() is skipped if window_exposed() calls it.

2014-05-11  Araki Ken  <arakiken@users.sf.net>

	* x_im_{candidate|status}_screen.c: x_window_move_no_expose() is removed.

	* fb/x_window.c: x_window_move() works same as x_window_move_no_expose()
	  for the input method window, and x_window_move_no_expose() is removed.

	* fb/x_display.[ch]:
	  - x_display_check_visibility_of_im_window() becomes static and renamed
	    to check_visibility_of_im_window().
	  - x_display_reset_input_method_window() is added.

2014-05-11  Araki Ken  <arakiken@users.sf.net>

	* fb/x_window.c: clear_margin_area() is called in x_window_resize() which
	  is called from x_im_{status|candidate}_screen.c

2014-05-11  Araki Ken  <arakiken@users.sf.net>

	* x_display_linux.c:
	  - strstr() in get_event_device_num() is replaced by strcasestr().
	  - If get_event_device_num() doesn't find kbd or mouse input event
	    devices, it returns the default number of kbd or mouse device
	    instead of -1.

	* fb/x_window.c: x_display_check_visibility_of_im_window() is called
	  not only from x_window_move() but also from x_window_resize().

	* fb/x_display.c: The bug of clearing input method window unexpectedly
	  in receive_event_for_multi_roots() is fixed.

	* im_fcitx.c: Preedit text is drawn before candidate window in order
	  not to clear candidate window by preedit text at the corner of the
	  window.

2014-05-10  Araki Ken  <arakiken@users.sf.net>

	* x_im_status_screen.c: draw_screen() wraps and draws status characters
	  in multiple lines.

	* README, man/mlterm.1, README.ja: Updated.

	* im_fcitx.c: fcitx plugin works on framebuffer.

2014-05-10  Araki Ken  <arakiken@users.sf.net>

	* x_im.c: Segmentation fault in exiting with fcitx is fixed.

	* im_fcitx.c: connection_handler() is registerd to x_event_source
	  only if the initialization of fcitx succeeds.

	* im_ibus.c: Minor fixes.

2014-05-10  Araki Ken  <arakiken@users.sf.net>

	* inputmethod/fcitx: Added.

	* configure.in: --enable-fcitx option is added.

2014-05-05  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: The hack of continuing sixel sequence by FF, GS, RS and US
	  after ST is removed.

	* x_draw_str.c: INLINEPIC_ID and INLINEPIC_POS are defined. (Not in x_picture.h)

	* x_picture.c, x_screen.c: Following macros in ml_char.h are used.

	* ml_char.h:
	  - PICTURE_ID_BITS and PICTURE_POS_BITS are defined. (Not in x_picture.h)
	  - ml_char_combine_picture(), ml_char_picture_id() and ml_char_set_picture_id()
	    macros are defined.

	* x_picture.h: INLINEPIC_ID_SHIFT, INLINEPIC_ID and INLINEPIC_POS macros
	  are removed.

2014-05-02  Araki Ken  <arakiken@users.sf.net>

	* x_display_wscons.c: WSDISPLAYIO_MODE_DUMBFB is used instead of
	  WSDISPLAYIO_MODE_MAPPED on NetBSD.

	* x_font_ft.c: cairo_matrix_init_identity() + cairo_matrix_scale()
	  => cairo_matrix_init_scale().

2014-04-26  Araki Ken  <arakiken@users.sf.net>

	* x_draw_str.c: The margin area of transparent frame of animation gif is
	  never cleared.

	* version.h.in: 3.3.5 -> 3.3.5post

2014-04-26  Araki Ken  <arakiken@users.sf.net>

	* 3.3.5 released.
	  (tag "rel-3_3_5")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.3.5.

2014-04-25  Araki Ken  <arakiken@users.sf.net>

	* x_font_ft.c: The default width of proportional fonts is changed from the
	  width of 'N' to 'M'.

	* xlib/x_window.c: win->is_focused is always true on override redirect mode
	  in order not to call XSetInputFocus() in pressing input method window.

	* x_im_candidate_screen.c, x_im_status_screen.c:
	  Even if window is unfocused hide() always calls x_window_unmap() in order
	  to hide input method window as soon as preedit string is removed all.

2014-04-24  Araki Ken  <arakiken@users.sf.net>

	* c_imagelib.c: The error of compiling mlimgloader/none.c is fixed.

2014-04-23  Araki Ken  <arakiken@users.sf.net>

	* x_font_ft.c:
	  - Mono spacing is always forced on xft unless use_variable_column_width
	    is true.
	  - ":Percentage" after font names in ~/.mlterm/aafont works on cairo.

2014-04-22  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c, etc/termcap: The default output string of XK_BackSpace is
	  changed from '\x07' to '\x7f'.

	* x_font_ft.c: Processing proportional fonts on cairo is improved.

	* mlimgloader/none.c: Minor fixes.

2014-04-22  Araki Ken  <arakiken@users.sf.net>

	* x_event_source.c, xlib/x_display.c: Pending events in the event queue
	  is read before select().

2014-04-17  Araki Ken  <arakiken@users.sf.net>

	* x_picture.c: Minor fixes.

2014-04-14  Araki Ken  <arakiken@users.sf.net>

	* c_imagelib.c: Hack for unexpected behavior of GDI+ in reading animation
	  GIF frames is improved.

2014-04-13  Araki Ken  <arakiken@users.sf.net>

	* gdiplus.cpp, c_anim.gif: Hack for unexpected behavior of GDI+ in reading
	  animation GIF frames is added.

	* x_picture.c, c_imagelib.c: Minor fixes.

2014-04-12  Araki Ken  <arakiken@users.sf.net>

	* c_anim.gif, c_imagelib.c: If gdk_pixbuf_new_from() reads a GIF
	  Animation frame whose width and height are smaller than those of the
	  first frame, it resizes appropriately. (gdk_pixbuf_new_from_file()
	  ignores the logical width and height in the GIF header.)

	* x_picture.c: If it fails to load an animation gif frame, skip it.

2014-04-11  Araki Ken  <arakiken@users.sf.net>

	* x_display.c, MLActivity.java, c_animgif.c, c_imagelib.c, gdiplus.cpp,
	  x_picture.c: ~/.mlterm/anim.gif => ~/.mlterm/anim%d.gif to support
	  asynchronous loading.

2014-04-10  Araki Ken  <arakiken@users.sf.net>

	* x_picture.[ch]: It is possible to load GIF files asynchronously.

	* MLActivity.java: Minor fixes.

2014-04-09  Araki Ken  <arakiken@users.sf.net>

	* x_event_source.c: update_ime_text() and x_display_idling() are called
	  in idling.

2014-04-07  Araki Ken  <arakiken@users.sf.net>

	* MLActivity.java, x_display.c: The failure of animating gif images downloaded
	  from remote hosts on Android is fixed.

	* c_animgif.c: The processing of dispose method is fixed.

2014-04-06  Araki Ken  <arakiken@users.sf.net>

	* x_picture.c, c_animgif.c: ~/.mlterm/anim%d.gif => ~/.mlterm/anim.gif

	* c_animgif.c: Separated from c_imagelib.c.

	* android/jni/x_display.c, android/jni/x_event_source.c, MLActivity.java:
	  Animation GIF is supported on Android.

2014-04-05  Araki Ken  <arakiken@users.sf.net>

	* x_picture.c, x_screen.[ch]: Waiting between animation frames is
	  managed in x_screen.[ch] instead of x_picture.c.

	* gdiplus.cpp: Fix for win32.

2014-04-05  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_window.c: XSetClipMask(None) is called in x_window_update().

	* x_picture.[ch], c_imagelib.c, gdiplus.cpp, xlib/x_imagelib.c, x_draw_str.c:
	  The number of gif animation frames is unlimited.

2014-03-31  Araki Ken  <arakiken@users.sf.net>

	* c_imagelib.c: O_BINARY is added to open() in reading animation gif on win32.

	* ml_vt100_parser.c: Accessing free'ed memory is fixed.

2014-03-31  Araki Ken  <arakiken@users.sf.net>

	* doc/en/PROTOCOL: Updated.

	* x_screen.c:
	  - x_window_t::idling is always set and whether blink_cursor is enabled
	    or not is stored in x_screen_t::cursor_blink_wait.
	    (cursor_blink_wait == 0 => disable blinking
	     cursor_blink_wait < 0  => enable blinking (hide cursor)
	     cursor_blink_wait > 0  => enable blinking (show cursor))
	  - prev_inline_pic is added to x_screen_t.

	* ml_vt100_parser.[ch]:
	  - "add_frame" is added to OSC 5379.
	  - add_frame_to_animation event is added to ml_xterm_event_listener_t.

	* x_picture.[ch]:
	  - next_frame and anim_wait are added to x_inline_picture_t.
	  - x_add_frame_to_animation() and x_animate_inline_pictures() are added.

	* gdiplus.c:
	  - create_cardinals_from_file() supports Animation GIF.
	  - Image::GetLastStatus() is checked after Image::FromStream() or
	    Image::FromFile().

	* c_imagelib.c: gdk_pixbuf_new_from() supports Animation GIF.

2014-03-24  Araki Ken  <arakiken@users.sf.net>

	* kik_debug.c: The bug of calling vfprintf(...,NULL) is fixed.

2014-03-23  Araki Ken  <arakiken@users.sf.net>

	* x_imagelib.c: c_sixe.c is included instead of c_imagelib.c.

	* c_sixel.c: Separated from c_imagelib.c.

	* kik_debug.c: Whether errno is 0 or not is checked in kik_error_printf().

	* version.h.in: 3.3.4 -> 3.3.4post

2014-03-22  Araki Ken  <arakiken@users.sf.net>

	* 3.3.4 released.
	  (tag "rel-3_3_4")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.3.4.

2014-03-22  Araki Ken  <arakiken@users.sf.net>

	* java/MLTermPty.java: env_for_dialog is explicitly set NULL after
	  ml_term_open_pty().

	* ml_pty.h, java/Makefile.in: OPEN_PTY_ASYNC is always disabled on java/win32.

2014-03-21  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c:
	  - OSC 1337 support is added. (Disabled by default though)
	  - Control characters escape 0x07 and 0x1b are available in Pt of
	    OSC Ps;Pt ST(BEL).

2014-03-19  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: Compiler error is fixed if ENABLE_2_4_PPB is defined.

2014-03-17  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_font.c, win32/x_font.c:
	  x_calculate_char_width() checks if characters whose width is ambiguous
	  should be drawn one by one.

	* registobmp/main.c: Minor fixes.

2014-03-16  Araki Ken  <arakiken@users.sf.net>

	* registobmp/main.c:
	  - (C) option of C command is supported.
	  - (S) option of T command is supported.
	  - "" quotation of T command is supported.

	* registobmp/Makefile.in: @exec_prefix@ is added.

	* README, doc/ja/README.ja: Updated.

2014-03-16  Araki Ken  <arakiken@users.sf.net>

	* registobmp/main.c: Error check of TTF_RenderUTF8_Blended() is added.

2014-03-15  Araki Ken  <arakiken@users.sf.net>

	* registobmp/main.c: "F" and "C" commands are implemented.

	* ml_screen.c: normal_edit::bce_ch and alt_edit::bce_ch are synchronized
	  when changing from normal buffer to alt buffer and vice versa.

	* c_imagelib.c: STARTF_FORCEOFFFEEDBACK is set in executing registobmp.

2014-03-12  Araki Ken  <arakiken@users.sf.net>

	* c_imagelib.c: convert_regis_to_bmp() works on USE_WIN32API and __CYGWIN__.

	* x_display_x68kgrf.c: kik_priv_{restore|change}_e{u|g}id() are called
	  before and after open("/dev/grf0"). (Thanks to @tsutsuii san)

	* registobmp/main.c:
	  - Substitute strsep is added.
	  - The default font is changed from "arial.ttf" to
	    "c:\\Windows\\Fonts\\arial.ttf" on win32.
	  - The implementation of strsep() is added in case it doesn't exist.

	* registobmp/Makefile.in: @KIK_CFLAGS@ is added.

	* ml_screen.c: BCE fg/bg color is reset in switching to the alternate
	  screen buffer.

2014-03-11  Araki Ken  <arakiken@users.sf.net>

	* c_imagelib.c, mlimgloader/gdiplus.cpp, mlimgloader/none.c, ml_vt100_parser.c:
	  ReGIS is partially supported by using registobmp.

	* tool/registobmp/*, configure.in:
	  registobmp is added.

2014-03-09  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: x_color_cache and x_color_manager are reloaded
	  after loading a wall picture on NetBSD/OpenBSD 4bpp framebuffer.

	* fb/x.h, fb/x_display.c: prev_closest_pixel -> prev_closest_color

	* ml_vt100_parser.c: ReGIS sequence is stored in ~/.mlterm/*.rgs

2014-03-06  Araki Ken  <arakiken@users.sf.net>

	* x_event_source.c: The segfault caused by calling FD_ISSET(-1) if x11
	  forwarding failed is fixed.

	* im_uim.c: Hack for uim-mozc is added.

	* x_screen.c: The bug of get_config_intern() returning invalid stack
	  pointer is fixed.

2014-03-04  Araki Ken  <arakiken@users.sf.net>

	* */x_display*.c, kik_pty_streams.c: kik_msg_printf() -> kik_error_printf()

	* kik_debug.c: strerror() is output in kik_error_printf().

	* kiklib/configure.in, kik_config.h.in: errno.h check is added.

	* gdiplus.cpp, gdk-pixbuf.c, none.c:
	  Help message is output to stderr instead of stdout where mlterm waits
	  for image data.

2014-03-01  Araki Ken  <arakiken@users.sf.net>

	* x_main_config.c, x_display_x68kgrf.c:
	  - The default value "separate_wall_picture" option is changed to true.

	* x_display_x68kgrf.c:
	  - Merge https://gist.github.com/tsutsui/9285759.
	    (Thanks to @tsutsuii san)
	  - The default resolution is changed to 768x512x4.

2014-02-28  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.android: Updated.

	* android/jni/x_display.[ch]: locked = -1 on APP_CMD_TERM_WINDOW.

2014-02-28  Araki Ken  <arakiken@users.sf.net>

	* fb/x_imagelib.c: load_file() calls x_display_get_bitmap() on Android
	  instead of executing mlimgloader.

	* MLActivity.java: getBitmap() which loads image files is added.

	* android/jni/x_display.[ch]: x_display_get_bitmap() which calls
	  MLActivity::getBitmap() is added.

	* AndroidManifest.xml: android.permission.INTERNET is added.

2014-02-27  Araki Ken  <arakiken@users.sf.net>

	* kik_pty_streams.c: Control characters defaults macros are added for Android.

	* version.h.in: 3.3.3 -> 3.3.3post

2014-02-22  Araki Ken  <arakiken@users.sf.net>

	* 3.3.3 released.
	  (tag "rel-3_3_3")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.3.3.

	* android/jni/x_display.c:
	  Java_mlterm_native_1activity_MLActivity_visibleFrameChanged() doesn't
	  change width and height of the display if new width or height is less
	  than 50 pixels.

2014-02-20  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c:
	  - rotate_mouse_cursor_shape() is added.
	  - if -rotate (right|left) option is specified on 8bpp or less
	    framebuffer, rotate_display is set to 0 and rotate_mouse_cursor_shape()
	    is called in x_display_open() to fall back to the normal shape.

	* fb/x_imagelib.c: Illegal memory access in resize_sixel() is fixed.

	* android/jni/Android.mk, java/Makefile.in: Minor fixes.

2014-02-19  Araki Ken  <arakiken@users.sf.net>

	* fb/x_imagelib.c: resize_sixel() is added to resize the sixel image to
	  the screen size.

	* c_imagelib.c:
	  - The sixel width is changed just after parsing the first line to
	    reduce the cost of realloc_pixels() at the end of load_sixel_from_file().
	  - The step of increasing the width and height of the sixel image is
	    changed to 512.

	* win32/x_imagelib.c, gdiplus.cpp, none.cpp: Minor fixes.

	* android/jni/kik_debug.h: kik_msg_printf outputs messages at ANDROID_LOG_INFO level.

	* android/build.sh: Minor fixes.

	* ml_char.c: Minor fixes.

2014-02-18  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb, x_main_config.c: Minor fixes.

	* fb/x_display.c:
	  - The width and height arguments of win->window_exposed
	    was wrongly reversed.
	  - Minor fixes of x_display_get_pixel() and x_display_put_image().

	* android/jni/x_display.c: Display rotation is supported.

2014-02-17  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* fb/x_display.c, fb/x_display_*.c: Counterclockwise rotation is supported.

	* x_screen.c, x_main_config.c: The value of "rotate_display" option is
	  changed from true|false to none|right|left.

2014-02-16  Araki Ken  <arakiken@users.sf.net>

	* android/jni/x_event_source.c: ALooper_pollAll() doesn't block but
	  exits in 750ms in order to show ime preedit or commit text immediately.

	* bengali.table: "\xcf\xe8\xcd\xe8\xd6\xdb\xa2" entry is fixed.

	* fb/x_display.c: The problem of drawing the mouse cursor in the rotated
	  display is fixed.

	* android/jni/x_display.c: The symbol of x_display_rotate() is added.

2014-02-16  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* x_sb_screen.c: Segfault in changing "rotate_display" option dynamically
	  is fixed.

2014-02-16  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* x_main_config.c, x_screen.c: "rotate_display" option is added.

	* fb/x_display.c, fb/x_display_*.c: Display rotation is supported.

	* ml_line.c: Typo is fixed.

2014-02-15  Araki Ken  <arakiken@users.sf.net>

	* ml_char_encoding.c: iso2022_illegal_char() which converts unicode pua to
	  drcs before mkf_iso2022_illegal_char() is set to conv->illegal_char.

	* ml_drcs.[ch]: ml_convert_unicode_pua_to_drcs() and
	  ml_convert_drcs_to_unicode_pua() are added.

2014-02-13  Araki Ken  <arakiken@users.sf.net>

	* bengali.table: "\xcf\xe8\xcd\xe8\xcd*" entries are fixed.

2014-02-12  Araki Ken  <arakiken@users.sf.net>

	* ml_str_parser.c: DRCS is converted to Unicode Private Area code point
	  in next_char().

	* ml_vt100_parser.[ch]: CSI ? 8800 h and CSI ? 8800 l are supported, and
	  the conversion from DRCS to Unicode Private Area is disabled by default.
	  (See http://github.com/saitoha/drcsterm/blob/master/README.rst)

2014-02-11  Araki Ken  <arakiken@users.sf.net>

	* README.indic: Updated.

	* win32/x_window.c: ExtTextOutW(ETO_GLYPH_INDEX) is used for drawing
	  ISCII_BENGALI and ISCII_ASSAMESE text.

	* bengali.table: "\xe8\xcd" => "\xee" is added.

	* ml_char.c: is_zerowidth is stored in attr.

2014-02-09  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: The rectangle of the unfocused cursor is fitted to the cell size.

	* README.indic: Updated.

	* x_main_config.c: The default value of use_bidi option is false instead of
	  true if -ind option is specified.

	* ml_term.[ch]: "use_ind = true" on the configuration protocol makes the
	  value of use_bidi false, and vice versa.

	* ml_line_iscii.c: The lines not only which has iscii characters but also
	  which had ones are redrawn to the end.

2014-02-09  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: Indic scripts works if not_use_unicode_font=true.

	* x_screen.c: Even if ml_line_shape() returns NULL, continue processing.

	* ml_line.c: ml_line_shape() doesn't shape the line which doesn't
	  contain RTL or ISCII characters.

	* ml_ctl_loader.h, ml_functbl_{bidi|iscii}.c, libctl/ml_line_{bidi|iscii}.c:
	  ML_LINE_{BIDI|ISCII}_NEED_SHAPE and ml_line_{bidi|iscii}_need_shape()
	  are added.

	* keyboard.c: bzero -> memset

	* indian.c:
	  - isprint() which can return true for ISCII characters on some
	    environment is removed.
	  - bzero -> memset

	* bengali.table: The glyph index 0xe5 is mostly changed to 0xe6.

	* font.win32.indic: Integrated to font.win32.

2014-02-05  Araki Ken  <arakiken@users.sf.net>

	* bengali.table: Entries containig 0xab, 0xae, 0xaf, 0xb2, 0xc7, 0xd0,
	  0xd2, 0xd3, 0xd4, 0xe0, 0xe3, 0xe4 and 0xe7 are removed.

2014-02-04  Araki Ken  <arakiken@users.sf.net>

	* bengali.table:
	  - Following entries are fixed.
	    "*\xe8\xcd*"
	    "\xb3\xe8\xd6\xe8\xcd*"
	    "\xc6\xe8\xc5\xe8\xcd*"
	  - "\xcd*" is converted to "\x5e*", not to "\xcc\x5e*".

2014-02-01  Araki Ken  <arakiken@users.sf.net>

	* README.indic: Updated.

2014-01-30  Araki Ken  <arakiken@users.sf.net>

	* x_display_wscons.c: https://gist.github.com/steleto/8671862 is
	  partially merged. (Thanks to @tristelo)

	* x.h: KEY_KP5 is assigned to XK_KP_Begin not to XK_KP_5.

2014-01-29  Araki Ken  <arakiken@users.sf.net>

	* bengali.table: Following entries are fixed.
	  "\xc2\xe8"
	  "\xcf\xe8\xc2\xe8"

	* ml_vt100_parser.c: '\e9' -> '\xe9'

	* README.indic:Updated.

2014-01-27  Araki Ken  <arakiken@users.sf.net>

	* x_font_ft.c: FT_Set_Charmap(FT_ENCODING_APPLE_ROMAN) is called for ISCII fonts.

	* libtype/fc_wrapper.c, libtype/Makefile.in:
	  libfc_wrapper.so which wraps libfontconfig.so by LD_PRELOAD and which
	  overrides FcFreeTypeCharIndex() and FcCharSetHasChar() is added.

	* ml_vt100_parser.c: Characters with nukta of ISCII character sets except
	  devanagari are put to the screen buffer.

	* ml_iscii.c: Each of ISCII_XXXX character sets is distinguished in ml_iscii().

	* bengali.table:
	  - Following entry is added.
	    "\xb7\xe8\xb5\xe1" => "\xe5\x86"
	    "\xce\xe1" => "\xe3\xcc\x5e"
	    "\xce\xe5" => "\xe5\xcc\x5e\xe7"
	  - Following entries are fixed.
	    "\xc2\xe8\xcd*"
	    "\xca\xe8\xcd*"
	    "\xd1\xe8\xcd*"
	    "\xd1\xe8\xd1\xe8\xcd\xde"
	    "\xd7\xe8\xc3\xe8\xcd*"

	* syllable.lex, indian.c: Full stop (ISCII 0xea, U+964) is supported.

2014-01-24  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: The behavior of selecting in mouse motion is changed like
	  other X terminal emulators.

2014-01-24  Araki Ken  <arakiken@users.sf.net>

	* x_draw_str.c: Minor fixes of the previous commit.

2014-01-23  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c:
	  nukta is always combined even if use_combining option is false.

	* x_draw_str.c:
	  x_window_clear() is called once to clear background in x_draw_str_to_eol().

	* hindi.table:
	  - Following entries are added.
	    "\xb3\xe8\xc2\xdc\xa2" => "\x48\xf2\xd3"
	    "\xca\xe3" => "\xa4\xc9\xec"
	    "\xd0\xe8\xcd" => "\xad\xaa\xc9"
	    "\xd0\xe8\xcd\xda" => "\xad\xaa\xc9\xc9"
	  - Following entries are fixed.
	    "\xbd\xe8\xbd*"

	* assamese.table, bengali.table, gujarati.table, hindi.table, kannada.table,
	  malayalam.table, oriya.table, punjabi.table, tamil.table:
	  0x23 glyph is removed.

	* libind/indian.[ch], syllable.lex:
	  - 0xf1-fa is parsed as digit characters.
	  - Minor fixes to improve performance and error handling.

	* man/mlterm.1, doc/en/README.indic, doc/ja/README.ja: Updated.

2014-01-21  Araki Ken  <arakiken@users.sf.net>

	* libtype/Makefile.in: Compilation error is fixed.

2014-01-20  Araki Ken  <arakiken@users.sf.net>

	* ml_screen.c: line->num_of_filled_chars never becomes more than line->num_of_chars
	  in receive_scrolled_out_line().

	* ml_char.[ch], ml_vt100_parser.c:
	  ml_set_use_char_combining() is removed.

	* ml_iscii.c, ml_line_iscii.c, ml_vt100_parser.c:
	  ISCII characters converted from unicode retain combining property.

2014-01-19  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: Characters with nukta of not only devanagari but also
	  other indic languages are converted from unicode to ISCII.

2014-01-19  Araki Ken  <arakiken@users.sf.net>

	* ml_logical_visual_iscii.c: Logicalizing iscii characters is simplified
	  by ml_line_iscii_logical().

	* ml_line_iscii.[ch]: ml_line_iscii_logical() is added.

	* ml_vt100_parser.c: The conversion table from U+90c and U+960-963 to ISCII
	  is added.

	* hindi.table: ISCII "\xaa\xe9"(== U+9600) => FONT "\x41\xf1" is added.

	* syllable.lex:
	  {VOWELS}{VOWMOD}?, {VOWMOD}{NUKTA}? and {NUKUTA} are integrated to
	  {VOWELS}?{VOWMOD}?{NUKUTA}? to parse "\xaa\xe9"(=={VOWELS}{NUKTA}).

2014-01-18  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c:
	  U+950 and U+958-95e are converted to two ISCII characters.

	* ml_line_iscii.c, ml_logical_visual_iscii.c, ml_screen.c:
	  - The number of characters in lines is increased if visual iscii
	    glyphs need more. It is decreased as before when iscii characters
	    are converted to logical.
	  - iscii_render_line() is called from iscii_visual_line() in
	    ml_logical_visual_iscii.c.

	* ml_iscii.c:
	  - The rendering of iscii characters in ml_iscii() is fixed.
	  - ml_iscii_copy() copied has_iscii flag.

	* ml_logical_visual_bidi.c: Cleanup code.

	* x_screen.c: Minor fixes.

2014-01-12  Araki Ken  <arakiken@users.sf.net>

	* x_display_freebsd.c: Configuration for M_PC98_EGC640x400 is added.

	* x.h, x_display_wscons.c:
	  size_t plane_len is changed to size_t plane_offset[8] in Display structure.

	* doc/ja/Usage.win32: Added.

2014-01-11  Araki Ken  <arakiken@users.sf.net>

	* MLActivity.java:
	  - NativeContentView and TextInputConnection inner classes
	    are added to support Google IME.
	  - IME is hidden on pause and shown on restart.

	* android/jni/x_event_source.c: commitText and preeditTexit native methods
	  which output text from IME are added.

	* xwindow/Makefile.in:
	  fb/x_display_*.c are added to the dependency of x_display.o on framebuffer.

	* xwindow/libtype/Makefile.in:
	  x_font_ft.c is added to the dependency of x_font_cairo.o and x_font_xft.o.

2014-01-05  Araki Ken  <arakiken@users.sf.net>

	* android/jni/main.c, MLActivity.java: unifont.pcf is saved in
	  /data/data/mlterm.native_activity/files instead of /sdcard/.mlterm.

	* x_screen.c: Fixes because of the changes of x_window.[ch].

	* win32/x_window.c, xlib/x_window.c, x_window.h:
	  - x_window_send_picture_selection() which sends double-clicked picture
	    to other windows via clipboard.
	  - x_window_send_selection() is renamed to x_window_send_text_selection().

2014-01-01  Araki Ken  <arakiken@users.sf.net>

	* MLActivity.java: Minor changes around input method window in onCreate().

	* android/jni/x_display.c:
	  If no root window has been shown yet, width and height of x_display_t
	  and yoffset of Display are changed immediately in
	  Java_mlterm_native_1activity_MLActivity_visibleFrameChanged().

	* android/jni/x_display.c, MLActivity.java:
	  Double-click at the right bottom corner of the screen calls
	  showSoftInput() which is added to MLActivity.

2013-12-30  Araki Ken  <arakiken@users.sf.net>

	* x_display_wscons.c: 8 bpp on OpenBSD/luna88k is supported.

	* ml_model.c: Minor fixes.

	* mlterm/Makefile.in, ml_vt100_parser.c:
	  Read as large amount of data as possible from pty on NetBSD and
	  OpenBSD framebuffer for old machines.

2013-12-30  Araki Ken  <arakiken@users.sf.net>

	* jni/Android.mk: -DKIK_DEBUG is removed.

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* mlcc/comm.c, x_im_candidate_screen.c: Minor fixes.

2013-12-28  Araki Ken  <arakiken@users.sf.net>

	* android/jni/x_display.c:
	  - ANativeWindow_unlockAndPost() is not called in display_lock().
	  - AMotioinEvent_getY() - _display.yoffset

2013-12-28  Araki Ken  <arakiken@users.sf.net>

	* android/jni/x_display.c: _display.app = app in the first place in
	  x_display_init() because x_display_lock() can be called from update_window()
	  in init_window() if restarting mlterm from paused state.

2013-12-28  Araki Ken  <arakiken@users.sf.net>

	* android/jni/x_display.c, android/jni/x.h, MLActivity.java:
	  yoffset is added to the members of Display and the argumens of
	  MLActivity.visibleFrameChanged().

2013-12-26  Araki Ken  <arakiken@users.sf.net>

	* mlimgloader/none.c, gdk-pixbuf.c, gdiplus.cpp: Help message is added.

	* x_screen.c: "switch" value is available for x_screen_set_config().

2013-12-23  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display_x68kgrf.c: x68k_set_tvram_cmap() and x68k_set_use_tvram_colors()
	  are changed to static functions.

	* fb/x_display.[ch]: x_display_enable_to_change_cmap() is added.

	* version.h.in: 3.3.2 -> 3.3.2post

2013-12-22  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: Only if _display.pixels_per_byte is 8, multiple planes
	  of scrolled lines are copied.

2013-12-21  Araki Ken  <arakiken@users.sf.net>

	* 3.3.2 released.
	  (tag "rel-3_3_2")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.3.2.

2013-12-21  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: The bug which drew mouse cursor incorrectly on 4bpp is fixed.

	* gtk/vte.c:
	  - The bug which disabled true transparency on roxterm just after it
	    started is fixed.
	  - Hack for roxterm works if it started as "x-terminal-emulator" or
	    "exo-open --launch TerminalEmulator".

	* jni/x_display.c: x_display_set_use_ansi_colors() is added.

	* win32/x_window.c: x_window_{xct|utf}_selection_request() works as a thread.

	* ml_line.c: Segfault caused by zero column characters like 0x200e is fixed.

2013-12-19  Araki Ken  <arakiken@users.sf.net>

	* x_display_wscons.c: The palette of 4bpp framebuffer is initialized
	  to monochrome if --depth 1 option is specified.

	* fb/x_display.c: put_image_124bpp() is fixed.

	* c_imagelib.c, fb/x_imagelib.c, fb/x_display.c:
	  If the value of "use_ansi_colors" option is false on 4bpp framebuffer,
	  the colors used by the wall picture are set to framebuffer palette
	  by x_display_set_use_ansi_colors() and x_display_set_cmap().

	* win32/x_window.c: Fix error check of OpenClipboard().

	* x_main_config.c: Even if the default value is specified for "use_urgent_bell",
	  "exit_backscroll_by_pty", "allow_change_shortcut", "allow_scp", "use_clipboard",
	  "use_alt_buffer", "use_ansi_colors" and "leftward_double_drawing", it is applied.

2013-12-18  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: Fix the 4 bpp specific bug.

2013-12-18  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: Fix typo.

	* mlimgloader/gdk-pixbuf.c:
	  It is possible to convert image format by mlimgloader [windowid] [width]
	  [height] [src path] [dst path].

2013-12-17  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.win32, doc/ja/README.win32: Updated.

	* doc/en/README.ssh, doc/ja/README.ssh: Added.

	* libptyssh/ml_pty_ssh.c:
	  Agent authentication is tried only if no password is specified.

2013-12-15  Araki Ken  <arakiken@users.sf.net>

	* x_font_ft.c: FC_CHAR_WIDTH is not used for US-ASCII font on xft.

2013-12-15  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: U+2580 - U+259f is never Embolded by double drawing.

	* man/mlterm.1, README.ja, etc/main, etc/main.ja: Updated.

	* fb/x_font.c, fb/x_window.c, x_font_ft.c, x_window_cairo.c,
	  x_window_xft.c, win32/x_font.c, win32/x_window.c, xlib/x_font.c,
	  xlib/x_window.c, x_font_cache.[ch], x_font.h, x_main_config.c:
	  "leftward_double_drawing" option is added.

2013-12-14  Araki Ken  <arakiken@users.sf.net>

	* libptyssh/ml_pty_ssh.c: Opening a new channel after creating a session
	  works non-blocking for multi-threading.

2013-12-11  Araki Ken  <arakiken@users.sf.net>

	* x_picture.c: Double free of file names of inline pictures is fixed.

	* c_imagelib.c: Wrong address of free() is fixed.

2013-12-11  Araki Ken  <arakiken@users.sf.net>

	* c_imagelib.c:
	  - DCS P q without any parameters separated by ; is accepted.
	  - Pan;Pad;Ph;Pv is ignored.

	* ml_term.c: The bug of pty_args_new() which didn't clone env correctly is fixed.

2013-12-10  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: The bug of calculating the address of each plane in
	  x_display_fill_with() and x_display_copy_lines() is fixed.

	* x.h, fb/x_display_wscons.c, fb/x_display.c:
	  plane_len is added to Display.

2013-12-10  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: x_display_fill_with() and x_display_copy_lines() support 4 bpp.

	* kiklib/configure.in: NSLinkModule is enabled only if no other dynamic
	  loader is found.

2013-12-09  Araki Ken  <arakiken@users.sf.net>

	* mlterm.1, doc/en/README.fb, doc/ja/README.fb, gtk/INSTALL: Updated.

	* fb/x_display.c: plane > 0 => _disp.depth > 0 in put_image_124bpp().

	* x_color_manager.[ch], x_screen.c, vte.c:
	  x_color_manager_change_alpha() -> x_change_true_transbg_alpha().

	* mc_bgtype.c, mlconfig/po/*.po: Transparent => Pseudo transparent.

2013-12-08  Hayaki Saito <user@zuse.jp>

	* c_imagelib.c: Change DECGNL(-) behavior to move the active position to the
	  "beginning" of the next line.

2013-12-07  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c, x_display_wscons.c: 16 color mode by 4 planes is supported
	  on NetBSD/luna68k framebuffer.

	* x_imagelib.c: Sixel loaders for both 1 and 32 bpp are built in on
	  NetBSD and OpenBSD.

	* c_imagelib.c: It is enabled to include c_imagelib.c with SIXEL_1BPP after
	  including it without it.

2013-12-07  Araki Ken  <arakiken@users.sf.net>

	* libptyssh/ml_pty_ssh.c, ml_pty_ssh.c, ml_pty.h, ml_term.c:
	  ml_pty_ssh_new() gets thread safe by directly calling set_use_multi_thread()
	  which was ml_pty_ssh_set_use_multi_thread() originally.

	* ml_pty.h, ml_term.h: OPEN_PTY_ASYNC macro is moved from ml_term.h to ml_pty.h.

2013-12-06  Araki Ken  <arakiken@users.sf.net>

	* ml_term.c: ml_pty_ssh_set_use_multi_thread() is called before and after
	  ml_pty_new().

	* libptyssh/ml_pty_ssh.c: ml_pty_ssh_set_use_multi_thread() which enables or
	  disables multi threading of openssl/libssh2 is added.

	* configure.in: -lcrypto is specified with -lssh2 on win32.

2013-12-03  Araki Ken  <arakiken@users.sf.net>

	* c_imagelib.c: GdkPixbufLoader is used instead of g_unix_input_stream_new().

	* main.c, libptyssh/ml_pty_ssh.c:
	  main_tid used in ml_pty_ssh.c is initialized not in ml_pty_ssh.c but in main.c.

2013-12-02  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c, x_event_source.c: Minor fixes.

2013-12-02  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: Typo which disabled to paste UTF8 string is fixed.

2013-12-01  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: The limitation of the column width and the line height (< 32)
	  is removed.

2013-11-30  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: U+200c-200f and U+202a-202e aren't converted
	  even if -n option is specified.

2013-11-28  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: The bug which ignored win->hmargin and win->vmargin
	  in calling win->window_exposed() in expose_window() is fixed.
	  (If large value was specified for --border option, hidden input method
	  window wasn't cleared.)

	* fb/x_display.c, fb/x_virtual_kbd.c, fb/x_window.c, x_window_cairo.c,
	  x_window_xft.c, win32/x_window.c, win32/x_xic.c,
	  x_im_candidate_screen.c, x_im_status_screen.c, x_main_config.c,
	  x_main_config.h, x_sb_screen.c, x_screen.[ch], x_screen_manager.c,
	  x_scrollbar.c, x_window.h, xlib/x_window.c, xlib/x_xic.c:
	  "inner_border" option accepts [horizontal border],[vertical border].

	* kik_sig_child.c: Wait multiple zombie processes for one SIGCHLD signal.

2013-11-24  Araki Ken  <arakiken@users.sf.net>

	* x_screen_manager.c: Memory leak when opening pty fails on win32gdi
	  is fixed.

	* x_event_source.c: receive_next_event() assumes that ml_term_get_master_fd()
	  could return -1 in opening pty asynchronously on cygwin or mingw.

	* ml_term.[ch]: ml_term_open_pty() works asynchronously on cygwin or mingw.

	* version.h.in: 3.3.1 -> 3.3.1post

2013-11-23  Araki Ken  <arakiken@users.sf.net>

	* 3.3.1 released.
	  (tag "rel-3_3_1")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.3.1.

	* README, man/mlterm.1, doc/en/PROTOCOL, doc/en/README.win32,
	  doc/ja/README.win32: Updated.

2013-11-22  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c, ml_vt100_parser.c: "snapshot" is moved from x_screen.c
	  to ml_vt100_parser.c.

	* mlcc/main.c: Arguments of commands except mlclient, snapshot,
	  show_picture and scp aren't enclosed by "".

2013-11-20  Araki Ken  <arakiken@users.sf.net>

	* MLTermPty.c: ml_set_use_scp() -> ml_set_use_scp_full().

	* x_picture.c, x_screen.c: Minor fixes.

2013-11-19  Araki Ken  <arakiken@users.sf.net>

	* c_imagelib.c: -L option is added to curl.

	* mlimgloader/gdk-pixbuf.c, xlib/x_imagelib.c: Minor fixes.

2013-11-16  Araki Ken  <arakiken@users.sf.net>

	* configure.in: Don't link an external image library such as gdk-pixbuf
	  on win32gdi or framebuffer even if --with-imagelib option is specified.

2013-11-16  Araki Ken  <arakiken@users.sf.net>

	* fb/x_window.c: draw_string() which causes segfault by illegal
	  surrogate pairs is fixed.

	* xlib/x_font.c: https://bugzilla.novell.com/attachment.cgi?id=566444
	  (https://bugzilla.novell.com/show_bug.cgi?id=849342) is applied.

	* README.ja, man/mlterm.1: Updated.

	* ml_logs.[ch], ml_screen.h, ml_term.h, x_screen.c, x_sb_screen.c,
	  x_screen_manager.c, x_main_config.[ch], vte.c:
	  "logsize" option accepts "unlimited" which unlimits the number of
	  lines of backscroll logs.

	* mlcc/main.c: The argument of set_shortcut command isn't enclosed by "".

2013-11-10  Araki Ken  <arakiken@users.sf.net>

	* ml_pty_ssh.c: Minor fixes around processing path.

	* mlcc/main.c: Arguments of exec command are always enclosed by "".

2013-11-10  Araki Ken  <arakiken@users.sf.net>

	* ml_pty_ssh.c, ml_vt100_parser.c:
	  ml_set_use_scp() in ml_vt100_parser.c is moved to ml_pty_ssh.c
	  as ml_set_use_scp_full().

	* libptyssh/ml_pty_ssh.c: ml_pty_ssh_poll() doesn't check while scp
	  is executing.

	* kik_path.h: IS_RELATIVE_PATH() is added.

	* doc/ja/README.fb, doc/ja/README.win32, doc/en/PROTOCOL: Updated.

2013-11-06  Araki Ken  <arakiken@users.sf.net>

	* x_event_source.c, xlib/x_display.c: XFlush() is called directly in
	  x_event_source.c, not in x_display.c.

2013-11-04  Araki Ken  <arakiken@users.sf.net>

	* im_ibus.c: --im ibus:[conversion engine] is available.

2013-11-04  Araki Ken  <arakiken@users.sf.net>

	* im_ibus.c: ibus 1.5 is supported on framebuffer.

2013-11-03  Araki Ken  <arakiken@users.sf.net>

	* im_ibus.c: ibus 1.5 is supported on x11.

	* ml_term.[ch]: Following functions are changed to macros.
	  ml_term_set_bidi_mode
	  ml_term_set_use_ind
	  ml_term_set_vertical_mode
	  ml_term_set_use_dynamic_comb

	* ml_vt100_parser.[ch]: Following functions are changed to macros.
	  ml_vt100_parser_set_use_char_combining
	  ml_vt100_parser_set_use_multi_col_char
	  ml_vt100_parser_set_logging_vt_seq
	  ml_vt100_parser_set_unicode_policy
	  ml_vt100_parser_set_use_auto_detect

2013-11-03  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: Auto encoding detection is a little improved.

	* ml_vt100_parser.[ch], ml_term.h, x_screen.c:
	  ml_{term_}reset_pending_vt100_sequence() which resets pending DCS
	  sequence on ESC key is added.

2013-11-02  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: Minor fixes.

	* mkf_sjis_conv.c: The bug of converting to shift jis is fixed.

	* etc/main, etc/main.ja: Updated.

2013-11-02  Araki Ken  <arakiken@users.sf.net>

	* mlterm.1, README.ja, PROTOCOL: Updated.

	* ml_vt100_parser.c: ESC $ is available on non-ISO2022 encodings
	  such as UTF-8.

	* ml_vt100_parser.[ch], ml_term.h, x_screen_manager.c, x_screen.c,
	  x_main_config.[ch]:
	  "use_auto_detect" and "auto_detect_encodings" options are added.

2013-10-27  Araki Ken  <arakiken@users.sf.net>

	* README.androind: Updated.

	* android/build.sh, Android.mk: Support fribidi.

	* version.h.in: 3.3.0 -> 3.3.0post

2013-10-27  Araki Ken  <arakiken@users.sf.net>

	* 3.3.0 released.
	  (tag "rel-3_3_0")

	* configure.in, mlterm.spec, main/version.h.in,
	  MLTermPty.c, android/jni/version.h, doc/en/ReleaseNote:
	  updated for 3.3.0.

2013-10-26  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c, x_screen.c:
	  OSC 5379 logging_msg, word_separators, use_alt_buffer,
	  use_ansi_colors, unicode_noconv_areas and allow_scp are moved from
	  x_screen.c to ml_vt100_parser.c.

	* MLTermPty.c:
	  - Minor fixes around some options.
	  - ONLY_USE_UNICODE_BOXDRAW_FONT is alwasy enabled.

2013-10-24  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: Button3 motion event doesn't start selecting on libvte.

	* kik_conf.c: Illegal memory access is fixed.

2013-10-23  Araki Ken  <arakiken@users.sf.net>

	* x_screen_manager.c: config_saved() is called in x_screen_manager_startup()
	  on android.

	* x_screen.c:
	  - OSC 5379 snapshot rejects file names containing "..".
	  - OSC 5379 selected_text is removed.
	  - OSC 5379 paste is rejected.

	* x_screen.c, x_shortcut.[ch]: SWITCH_OSC52 shortcut is removed.
	  (Use "proto:allow_osc52=switch" instead.)

	* ml_vt100_parser.c, x_screen.c, x_main_config.c:
	  OSC 5379 scp is disabled by default, while "allow_scp" option is added.

	* ml_vt100_parser.c:
	  - The illegal memory access in ml_set_unicode_noconv_areas() is fixed.
	  - OSC 5383 requests challenge sequence.

	* ml_screen.c: The bug of freeing static data is fixed.

2013-10-22  Araki Ken  <arakiken@users.sf.net>

	* win32/x_window.c: The bug which makes the window smaller than necessary
	  in resizing is fixed.

2013-10-21  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display_wscons.c, fb/x_imagelib.c: BBGGRR style wsdisplay is supported.
	  (Thanks to @oshimayja san)

	* ml_model.[ch], ml_edit.c: Overflowed lines are scrolled out in ml_edit_resize().
	  (ml_model_get_num_of_filled_rows() is added.)

	* MLActivity.java: mkdir("/sdcard/.mlterm") before saving unifont.pcf.

2013-10-20  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.android: Added.

2013-10-20  Araki Ken  <arakiken@users.sf.net>

	* android/build.sh: target is changed from android-10 to android-14.

	* android/jni/Android.mk: -DDEBUG and -DKIK_DEBUG are added.

	* android/AndroidManifest.xml:
	  android.app.NativeActivity -> mlterm.native_activity.MLActivity

	* MLActivity.java, x_display.c, x_window.c:
	  - The terminal screen is resized by the software keyboard.
	  - AKEY_EVENT_ACTION_MULTIPLE is processed.

	* android/jni/main.c, x_screen_manager.c:
	  x_screen_manager_suspend() which closes only screen objects is called
	  instead of main_loop_final() at the end of android_main() in order to
	  make mlterm activity restartable.

	* MLActivity.java, android/jni/main.c, fb/x_font.c: unifont.pcf packed
	  in the apk package is saved in /sdcard/.mlterm/ and loaded by default
	  on startup.

	* android/jni/x.h, fb/x.h: width_bi -> width_full

	* ml_char_encoding.c: "auto" encoding is UTF-8 on Android.

2013-10-15  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, doc/ja/README.ja, doc/en/PROTOCOL: Updated.

	* ml_vt100_parser.[ch], x_main_config.c, x_screen.c:
	  ml_set_unicode_fixed_areas() is added, and
	  unicode_fixed_areas (a.k.a --ucsnoconv) option is added.

	* ml_char.[ch], x_font_config.c: ml_char_add_unicode_area_font() is added
	  and font configuration files support "U+XXX-XXX" key which designates a
	  font of specific unicode area.

	* BIWIDTH => FULLWIDTH, NARROW => HALFWIDTH

2013-10-12  Araki Ken  <arakiken@users.sf.net>

	* x_display_x68kgrf.c:
	  - The number of resetting T-VRAM palette in changing wall pictures is
	    decreased.
	  - Wall picture is never drawn in the Left and right margin of virtual
	    keyboard.
	  - TP_COLOR is changed from 8 to 12.

	* doc/en/PROTOCOL: Updated.

	* fb/x_screen.c: "locale" is added to OSC 5379 protocol.

	* fb/x_main_config.c: "locale" option is added.

2013-10-11  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display_x68kgrf.c, fb/x_imagelib.c, common/c_imagelib.c:
	  x68k_set_use_tvram_colors() and x68k_set_tvram_cmap() are added.

	* fb/x_display_netbsd.c -> fb/x_display_wscons.c, fb/x_display_x68kgrf.c

2013-10-10  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display_freebsd.c, fb/x_display_netbsd.c, fb/x_display_linux.c:
	  Platform dependent stuff is separated from fb/x_display.c.

2013-10-10  Araki Ken  <arakiken@users.sf.net>

	* fb/x_main_config.c: --multivram / separate_wall_picture option is added.

	* fb/x_window.c, fb/x_display.c:
	  x68k_tvram_set_wall_picture() and x68k_tvram_is_enabled() are added to
	  show the wall picture on the text vram and to improve the performance
	  of scrolling with the wall picture.

	* x_virtual_kbd.c: normal_pixmap and pressed_pixmap are swapped on 1bpp
	  to make normal keyboard visible.

2013-10-09  Araki Ken  <arakiken@users.sf.net>

	* main/main.c: main.c was overwritten by android/jni/main.c at the
	  revision 2098. It reverts to the revision 2097.

2013-10-06  Araki Ken  <arakiken@users.sf.net>

	* android/jni/x_display.c: _display.button_state is not changed
	  if action & AMOTION_EVENT_ACTION_POINTER_INDEX_MASK is 0.

2013-10-04  Araki Ken  <arakiken@users.sf.net>

	* fb/x.h, fb/x_display.h:
	  CLKED, NLKED, SLKED, ALKED macros are moved from x.h to x_display.h.

	* x_screen_manager.c, fb/x_imagelib.c, fb/x_font.c, kik_path.c:
	  #ifdef  __ANDROID__ is added.

	* android/: Support Android native-activity.

	* x_screen.c, vte.c: malloc() is used instead of alloca() in copying text
	  to avoid the failure of alloca().

	* ml_edit.c: Minor fixes of ml_edit_restore_cursor().

2013-09-24  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.c: Wraparound is stopped on DECRC.

	* android/: Minor fixes.

2013-09-21  Araki Ken  <arakiken@users.sf.net>

	* x_font.c: "Courier New" font is used by default.

	* x_dnd.c: #include <kiklib/kik_path.h> for cygwin_conv_to_posix_path.

	* kik_path.h: cygwin_conv_to_posix_path is replaced by cygwin_conv_path
	  on cygwin.

	* android/: Minor fixes.

2013-09-18  Araki Ken  <arakiken@users.sf.net>

	* kik_dlfcn_win32.c, tool/mlimgloader/none.c, gdk-pixbuf.c, gdiplus.cpp:
	  #include <kiklib/kik_path.h> for cygwin_conv_to_win32_path.

	* kik_path.h: cygwin_conv_to_win32_path is replaced by cygwin_conv_path
	  on cygwin.

	* configure.in: Fixed typo.

	* android/: Minor fixes.

2013-09-17  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: The result of ioctl(WSDISPLAYIO_SETGFXMODE) is ignored.

	* tool/mlimgloader/Makefile.in: Fix for Cygwin/X.

2013-09-10  Araki Ken  <arakiken@users.sf.net>

	* ml_pty.c: ml_pty_get_slave_name() returns /dev/vptyN instead of /dev/ptyN
	  if connected to the remote host.

2013-09-08  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: The bug of storing not only sixel graphics
	  data but also following sequence to ~/.mlterm/*.six is fixed.

	* ml_bidi.c: PICTURE_CHARSET is considered.

2013-09-08  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.[ch]: 'yield' member which is used to exit the parser
	  of vt100 sequence as soon as possible after OSC 5379 show_picture is
	  added to ml_vt100_parser_t.

2013-09-04  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: Mouse is supported on NetBSD/x68k.

	* etc/color: Updated.

2013-09-03  Araki Ken  <arakiken@users.sf.net>

	* win32/x_window.c: AltGr+VK_OEM* which can cause WM_*_CHAR message later
	  aren't converted to Ctrl+*.

	* win32/x.h: VK_Clear (Keypad key 5) is assigned to XK_Begin.

2013-09-01  Araki Ken  <arakiken@users.sf.net>

	* configure.in, fb/x_display.c, fb/x_imagelib.c: Whether the port on
	  NetBSD is x68k or not is checked by <machine/grfioctl.h> in configure.

2013-08-29  Araki Ken  <arakiken@users.sf.net>

	* win32/x_window.c: AltGr+key is supported.

	* ml_edit.c: Minor fixes.

2013-08-27  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.c:
	  - The bug which erased the end character of each line in scrolling
	    if DECSLRM set the right margin at the right end is fixed.
	  - The bug of DL/IL which scrolled the screen instead of insert or
	    delete lines from the cursor position.

	* win32/x_window.c:
	  - x_xic_filter_event() is called before win->key_pressed for
	    WM_SYSKEYDOWN message in x_window_receive_event() to make
	    Mod+XXX shortcut key settings work.
	  - Hack for AltGr is added in x_window_receive_event().

2013-08-24  Araki Ken  <arakiken@users.sf.net>

	* mkf_locale_ucs4_map.c: get_map_ucs4_to_func_for_current_locale()
	  never changes a cached map function after the first call.

	* mkf_ucs4_map.c: mkf_map_ucs4_to() doesn't cache the map functions of
	  non ISO2022 cs (GBK etc), in order not to map the following chars
	  automatically to GBK etc if a ucs4 character is mapped to the one of
	  GBK etc which doesn't exist in GB2312 etc.

2013-08-21  Araki Ken  <arakiken@users.sf.net>

	* version.h.in: 3.2.2post -> 3.2.3pre

	* ml_vt100_parser.c:
	  - OSC ? 80 h (disable sixel scrolling) is (ad-hoc) supported.
	  - A sixel next line character (-) is sent after a sixel dump.

2013-08-20  Araki Ken  <arakiken@users.sf.net>

	* win32/x_window.c: The background raster operation of MaskBlt is changed
	  from PATCOPY to 0xaa0029 which draws nothing to the destination device
	  context.

	* x_screen.c: x_window_set_bg_color() is called in x_screen_reset_view()
	  because RGB of the window bg color can be changed.

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* fb/x_display.c: 1024x768x1 is supported on NetBSD/x68k.

2013-08-16  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c, ml_color.c, c_imagelib.c:
	  Threshold to determine the closest pixel is changed from 31 to 640.

	* fb/x_display.c, fb/x.h: prev_pixel and prev_closest_pixel which cache
	  the closest pixel previously found in the color palette are added to
	  Display.

2013-08-15  Araki Ken  <arakiken@users.sf.net>

	* x_screen_manager.c: x_display_reset_cmap() is called in
	  color_config_updated().

	* fb/x_display.[ch]:
	  - x_cmap_reset() is renamed to x_display_reset_cmap().
	  - cleanup.

2013-08-15  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: orig_reg is copied from 768x512x4 crtc and videoc
	  (except videoc.r2 = 0x20) instead of being copied from reg in order
	  not to slide the screen on exit.

2013-08-14  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: Cleanup code for NetBSD/x68k.

2013-08-13  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: open_display() on NetBSD is separated to
	  open_display() for wscons and open_display() for x68k.

2013-08-12  Araki Ken  <arakiken@users.sf.net>

	* x_main_config.c: "fb_resolution" option is available on NetBSD/x68k
	  framebuffer.

	* fb/x_display.c, fb/x_imagelib.c:
	  /dev/grf1 support for NetBSD/x68k is added.

	* mkf/configure.in, mkf/libtbl/Makefile:
	  If --disable-dl-table is not specified, don't make at libtbl/.

2013-08-07  Araki Ken  <arakiken@users.sf.net>

	* fb/x_window.c: The bug of copy_area() which disabled redrawing
	  the margin area is fixed.

	* version.h.in: 3.2.1 -> 3.2.1 post

2013-08-06  Araki Ken  <arakiken@users.sf.net>

	* 3.2.2 released.
	  (tag "rel-3_2_2")

	* configure.in, mlterm.spec, main/version.h.in,
	  doc/en/ReleaseNote: updated for 3.2.2.

2013-08-05  Araki Ken  <arakiken@users.sf.net>

	* main.c: If __argv is NULL on win32, dummy_argv ({"mlterm",NULL}) is
	  used instead.

2013-08-04  Araki Ken  <arakiken@users.sf.net>

	* kiklib/configure.in: socklen_t of winsock is checked.

	* win32/x.h: _WINSOCK2_H is not defined unless __CYGWIN__ or __MSYS__
	  to fix compilation error with i686-pc-mingw32-gcc.

	* win32/x_xic.c: CFS_POINT is replaced by CFS_FORCE_POSITION and
	  x_xic_set_spot() in x_xic_set_focus() is removed.

2013-08-04  Araki Ken  <arakiken@users.sf.net>

	* win32/x_xic.c:
	  - Y of the preedit position is fixed.
	  - x_xic_set_spot() is called in x_xic_set_focus().

2013-08-03  Araki Ken  <arakiken@users.sf.net>

	* kik_dlfcn.c, x_event_source.c, main/main.c:
	  kik_dl_close_all() is called at the end of main() instead of
	  atexit(kik_dl_close_all).

	* x_xim.c: Fix segfault in x_xim_final().

2013-08-03  Araki Ken  <arakiken@users.sf.net>

	* kik_dlfcn.c: Double free is fixed.

	* x_screen.c: If screen->term != NULL is checked in window_unfocused()
	  in case of receiving unfocus event after screen->term was deleted.
	  (especially for win32.)

	* win32/x_xic.c: x_xic_font_set_changed() is called in x_xic_set_focus().

	* man/mlterm.1, doc/ja/README.ja: Updated.

	* x_main_config.c: The range of "inner_border" option is changed from
	  0-127 to 0-224.

2013-08-01  Araki Ken  <arakiken@users.sf.net>

	* win32/x_xic.c, x_font_manager.c: x_xic_font_set_changed() and x_get_fontset()
	  are implemented on win32.

	* doc/ja/README.win32, doc/en/README.win32, etc/main, etc/main.ja: Updated.

	* win32/x_window.c:
	  If the returned value of GlobalLock() or GetClipboardData() is NULL
	  or not is checked.

	* x_main_config.[ch]:
	  "skip_dialog" option is changed to "always_show_dialog" and the
	  default behavior is reversed.

	* x_screen_manager.[ch]:
	  main_config.default_server is temporarily replaced by uri of
	  the current pty in open_screen() and open_pty().

	* ml_term.[ch]:
	  - 'host' (uri) argument of ml_term_open_pty() is kept.
	  - ml_term_get_uri() is added.

	* main.c: kik_dl_close_all() is called at the end of main().

	* kik_dlfcn.c:
	  - close_at_exit() is renamed to kik_dl_close_all()
	  - kik_dl_close_all() closes from the last loaded library.

2013-07-26  Araki Ken  <arakiken@users.sf.net>

	* kik_dlfcn.c: Compilation error is fixed.

	* gdiplus.cpp: The leak of resources is fixed.

2013-07-24  Araki Ken  <arakiken@users.sf.net>

	* ml_pty_ssh.c: Compilation error is fixed.

2013-07-23  Araki Ken  <arakiken@users.sf.net>

	* ml_pty_ssh.[ch]:
	  - x11_callback is always set.
	  - Each session has its own use_x11_forwarding option.
	  - "ssh_session_t *" is added to the argument of
	    ml_pty_ssh_set_use_x11_forwarding().

	* winrs.rs, x_connect_dialog.h, win32/x_connect_dialog.c, fb/x_connect_dialog.c,
	  xlib/x_connect_dialog.c, x_main_config.[ch], x_screen_manager.c:
	  X11 forwarding checkbox is added to the connection dialog.

	* x_main_config.c: Minor fixes.

2013-07-22  Araki Ken  <arakiken@users.sf.net>

	* libssh2/ml_pty_ssh.c, common/c_imagelib.c: fclose() -> pclose()

2013-07-20  Araki Ken  <arakiken@users.sf.net>

	* x_main_config.c: The range of "inner_border" option is changed from
	  0-255 to 0-127.

	* x_event_source.c:
	  - ml_pty_ssh_poll() is used in receive_next_event().
	  - ml_pty_ssh_send_recv_x11() is not called after ml_term_parse_vt100_sequence()
	    but called before it.

	* MLTerm.java, MLTermApplet.java:
	  Thread.sleep() is used to change the executing thread instead of
	  wait/notify().

	* MLTermPty.c:
	  - Compilation error is fixed.
	  - Version number is fixed. (3.0.11 -> 3.2.1)
	  - ml_pty_ssh_poll() is used in waitForReading().
	  - ml_pty_ssh_send_recv_x11 is called in nativeRead() instead of
	    waitForReading().

	* libssh2/ml_pty_ssh.c:
	  - ml_pty_ssh_poll() which checks waiting data on pty and x11 channel
	    by libssh2_poll_channel_read() is added.
	  - MAX_NUM_OF_X11 which limits the number of X11 channels  is removed.

2013-07-19  Araki Ken  <arakiken@users.sf.net>

	* win32/x_display.c:
	  Not only GetMessage() but also PeekMessage() is called on win32 GDI.

	* ml_pty.h, ml_pty_pipewin32.c, libssh2/ml_pty_ssh.c, x_screen.c:
	  PostThreadMessage() is used instead of ml_pty_listener_t::read_ready.

	* libssh2/ml_pty_ssh.c:
	  - X11 forwarding is supported on win32.
	  - The shortage of alloca() memory for xauth command is fixed.

2013-07-18  Araki Ken  <arakiken@users.sf.net>

	* kik_config.h.in: _BSDTYPES_DEFINED macro is added to avoid
	  compilation error of i686-pc-mingw32-gcc at winsock2.h.

2013-07-17  Araki Ken  <arakiken@users.sf.net>

	* libptyssh/ml_pty_ssh.c: Compilation error on win32 is fixed.

	* mkf_tblfunc_loader.c, ml_iscii.c, ml_pty_ssh.c, x_imagelib.c,
	  x_im.c, x_type_loader.c:
	  kik_dl_close_at_exit() is called with handles created by
	  kik_dl_open().

	* kiklib/src/Makefile.in: 15.0 -> 15.1

	* kik_dlfcn.c: Added. (kik_dl_close_at_exit() is added.)

	* win32/x_window.c:
	  - button_motion event isn't called if mev.{x|y} are the same as
	    prev_button_press_event.{x|y}.
	  - Clipboard operations are fixed.

	* configure.in, kiklib/configure.in: *-*-mingw-gcc is supported.

2013-07-16  Araki Ken  <arakiken@users.sf.net>

	* x_event_source.c:
	  Minor fixes to improve the performance of x11 forwarding.

	* libptyssh/ml_pty_ssh.c:
	  - LIBSSH2_FLAG_COMPRESS is not enabled if x11 forwarding is
	    enabled because LIBSSH2_FLAG_COMPRESS might fail to decompress
	    highly compressed data.
	  - libssh2_channel_x11_req_ex() is called with untrusted xauth data.
	  - bidirection argument is added to ml_pty_ssh_send_recv_x11().

2013-07-13  Araki Ken  <arakiken@users.sf.net>

	* vte.c: Whether VteTerminal is realized or not is checked in setting
	  WINDOWID environmental variable in ml_term_open_pty_wrap().
	  (Segfault with synaptic 0.80 is fixed.)

	* gtk/vte.c: "logging_vt_seq" option works.

2013-07-12  Araki Ken  <arakiken@users.sf.net>

	* libptyssh/ml_pty_ssh.c: Workaround for libssh2/cygwin.

2013-07-12  Araki Ken  <arakiken@users.sf.net>

	* README, doc/ja/README.ja: Updated.

	* libptyssh/ml_pty_ssh.c:
	  SSH agent authentication and forwarding are supported.

2013-07-06  Araki Ken  <arakiken@users.sf.net>

	* ml_line_bidi.c: The cursor position in inserting RTL characters after
	  one LTR character (and vice versa) is fixed.
	  (There were no problem in inserting RTL characters after two or more
	  LTR characters.)

2013-06-30  Araki Ken  <arakiken@users.sf.net>

	* x_display.c: Minor fixes.

2013-06-30  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: DECALN(ESC#8) resets the screen margins.

	* x_display.c: Support for touch screen on NetBSD/OpenBSD is added.
	  (Experimental)

2013-06-30  Araki Ken  <arakiken@users.sf.net>

	* configure.in: configure error which --with-gui=xlib,fb option
	  causes is fixed.

	* version.h.in: 3.2.1 -> 3.2.1 post

2013-06-29  Araki Ken  <arakiken@users.sf.net>

	* 3.2.1 released.
	  (tag "rel-3_2_1")

	* configure.in, mlterm.spec, main/version.h.in,
	  doc/en/ReleaseNote: updated for 3.2.1.

	* man/mlterm.1, gtk/INSTALL, doc/ja/README.win32, doc/en/README.win32:
	  Updated.

2013-06-28  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* x_virtual_kbd.c: The trigger to start software keyboard is changed
	  from the click at the bottom of the screen to the double click at
	  the right bottom corner.

2013-06-27  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.c:
	  The behavior of ml_edit_goto_beg_of_line(), ml_edit_copy_area()
	  and ml_edit_erase_area() in origin mode is fixed.

	* ml_vt100_parser.c, ml_edit.h, ml_screen.h:
	  Relative-origin position of the cursor is reported to CPR sequence.

2013-06-25  Araki Ken  <arakiken@users.sf.net>

	* x_display.c:
	  - The bug which leaves the cursor shape in the virtual keyboard
	    area is fixed.
	  - EV_ABS events are processed on Linux framebuffer.

	* x_virtual_kbd.c:
	  - x_is_virtual_kbd_event() is added.
	  - x_virtual_kbd_stop() is renamed to x_virtual_kbd_hide().

2013-06-25  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* x_virtual_kbd.c: Error handling is fixed.

2013-06-24  Araki Ken  <arakiken@users.sf.net>

	* x_virtual_kbd.c, fb/x_imagelib.c, fb/x_display.c: Minor fixes.

2013-06-23  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: get_ps2_kcode() is added to convert usb keycode
	  to ps2 keycode for iBus on NetBSD/OpenBSD framebuffer.

	* x_virtual_kbd.c: kbd.six and pressed_kbd.six are used instead of
	  kbd.png and pressed_kbd.png.

	* doc/kbd/kbd.six, doc/kbd/pressed_kbd.six, doc/kbd/Makefile.in:
	  Replace kbd.png and pressed_kbd.six.

2013-06-22  Araki Ken  <arakiken@users.sf.net>

	* configure.in: doc/kbd is added to MAKE_DIRS and doc/kbd/Makefile is
	  added to OUTPUT_FILES.

	* fb/x_virsual_kbd.[ch], fb/x_display.c, fb/x.h, fb/Makefile.in:
	  Software keyboard support is added on framebuffer.

	* fb/x_virtual_kbd.[ch], doc/kbd/: Added.

2013-06-20  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.c: ICH is disabled if the cursor is outside of the left and
	  right margins

	* mc_font.c: The bug which outputs unchanged fontname is fixed.

	* etc/key: Minor fixes.

	* x_font_config.c: Minor fixes.

2013-06-18  Araki Ken  <arakiken@users.sf.net>

	* fb/x_font.c: The default font of bold ISO8859-1 or ISO10646-UCS4-1
	  is doubly drawn.

2013-06-17  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_font.c, x_font_ft.c: use_medium_for_bold argument is removed
	  from the functions of xft and cairo.

	* x_font.c: If "-*-bold-*-" is unable to be loaded on xcore, retry
	  "-*-medium-*-" which is drawn doubly.

	* x_font_ft.c: The column width of italic fonts is always treated as
	  variable on xft.

	* x_font_config.c: If DEFAULT=-foo-bar-medium-r-*--%d-*- is specified
	  in ~/.mlterm/font, -foo-bar-bold-r-*--%d-*-,
	  -foo-bar-medium-i-*--%d-*- or -foo-bar-bold-i-*--%d-*- are
	  automatically searched for a bold, italic or bold italic font.

	* kik_str.[ch]: kik_str_replace() is added.

2013-06-12  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* x_main_config.c: "geometry" option is disabled and the default value
	  of cols and rows is not 80x24 but 1x1 on framebuffer.

2013-06-12  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.c: CURSOR_IS_INSIDE_MARGIN() is not checked in
	  scroll_{up|down}ward_region() for vim.

2013-06-11  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.c:
	  - The bug of the cursor position in scrolling in
	    ml_edit_overwrite_chars() is fixed.
	  - scroll_{up|down}ward_region() doesn't scroll if the cursor
	    is outside of the scrolling region.

2013-06-11  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, doc/ja/README.ja: Updated.

	* ml_char.[ch], ml_color.c: 16 and 231 aren't treated as ML_FG_COLOR
	  and ML_BG_COLOR internally but as 256 colors.

2013-06-11  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_font.c: "fixed" fonts are preferred to other fonts if
	  nothing is specified in ~/.mlterm/font.

2013-06-10  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.c: Bug fixes of insert_chars().

	* ml_cursor.[ch]: ml_cursor_reset_col_in_char() is removed.

2013-06-10  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.[ch], ml_screen.h, ml_vt100_parser.c:
	  DECLRMM(CSI ? 69 h / CSI ? 69 l) and DECSLRM(CSI pl;pr s) are
	  supported.

	* ml_vt100_parser.[ch], ml_term.c: use_bidi flag is added to
	  ml_vt100_parser_t in order to determine whether
	  ml_is_arabic_combining() should be called.

2013-06-09  Araki Ken  <arakiken@users.sf.net>

	* ml_char.c: The bug of ml_char_code_equal() is fixed.

2013-06-08  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: x_window_set_selection_owner() is called after the
	  selected region is decided in order not to let parcellite reset
	  the selected region.

2013-06-07  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, doc/ja/README.ja, doc/ja/README.fb: Updated.

	* fb/x_window.c: draw_string() supports surrogate pair.

	* x_shortcut.c: The bug which disabled Control+Button1 and Control+Button3
	  is fixed.

	* mkf_char.[ch]: mkf_char_to_int() is changed from function to macro.

	* MLTermPty.c, MLTerm.java, Style.java: Italic font style is supported.

	* ml_char.[ch], ml_font.h, ml_line.c, ml_screen.[ch], ml_str.c,
	  ml_str_parser.c, ml_vt100_parser.[ch], fb/x_font.c, x_font_ft.c,
	  win32/x_font.c, x_draw_str.c, x_font.h, x_font_config.c, x_im.h
	  x_im_candidate_screen.c, x_im_status_screen.c, x_picture.[ch],
	  x_screen.c, xlib/x_font.c, libctl/ml_bidi.[ch], libctl/ml_iscii.c,
	  libctl/ml_line_bidi.c, libctl/ml_line_iscii.c,
	  libctl/ml_shape_bidi.c, libctl/ml_shape_iscii.c:
	  - ml_char_t::bytes == 32 bits  attr == 16 bits
	            => code  == 24 bits  attr == 24 bits
	    and related ml_char_*() functions are changed.
	  - is_italic is added to ml_char_t::attr.
	  - FOO_ITALIC key is available in ~/.mlterm/*font* files.

	* x_screen.c:
	  - Window is always resized according to the size of the pty
	    in x_screen_attach().
	  - Even if Button6 or Button7 is pressed, the reversed fg and bg colors
	    of the selected region aren't restored.

2013-06-03  Araki Ken  <arakiken@users.sf.net>

	* x_im_status_screen.c: The number of drawing string is reduced.

	* fb/x_font.c: Segfault if pcf.gz file is illegally gzipped is fixed.

2013-06-02  Araki Ken  <arakiken@users.sf.net>

	* fb/x_font.c, etc/font-fb: The default fonts of ISO10646_UCS4_1 and
	  ISO8859_1_R are not defined in etc/font-fb but in fb/x_font.c.

	* x_screen_manager.c: Error messages in the failure of x_font_manager_new()
	  are simplified.

	* x_font_config.[ch]: x_get_charset_name() is added.

	* xlib/x_window.c: The type for 32-bit format data of XChangeProperty()
	  is changed to u_long. (SF Bug #3614192)

	* kiklib/src/Makefile.in: 14.3 -> 15.0 (SF Bug #3614142)

2013-06-01  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.[ch], x_window.c, x_im_{candidate|status}_screen.[ch]:
	  Input method window on framebuffer is improved.

	* fb/x_display.c: Segfault in closing input method status window
	  is fixed.

	* x_screen_manager.c: Minor fixes.

2013-05-29  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* fb/x_display.c, main_loop.c: Minor fixes.

2013-05-28  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: Segfault in x_font_t::x_off > 0 is fixed.
	  (Thanks to @tsutsuii san)

2013-05-27  Araki Ken  <arakiken@users.sf.net>

	* main_loop.c: "fb_resolution" option is added for OpenBSD framebuffer.

	* fb/x_display.c: OpenBSD support is added.

	* etc/font-fb: JISC6226_1978, JISX0208_1990 and JISX0213_2000_1
	  are defiend as &JISX0208_1983.

	* mkf_ucs4_map.c: mkf_map_ucs4_to_jisx0213_2000_1 is not cached
	  in mkf_map_ucs4_to() to prefer JISX0208 to JISX0213 all the time.

	* version.h.in: 3.2.0 -> 3.2.0 post

2013-05-26  Araki Ken  <arakiken@users.sf.net>

	* 3.2.0 released.
	  (tag "rel-3_2_0")

	* configure.in, mlterm.spec, main/version.h.in,
	  doc/en/ReleaseNote: updated for 3.2.0.

	* kiklib/src/Makefile.in, mkf/lib/Makefile.in: Fixes for SunOS make.

	* win32/x_window.c: Compilation error on msys-dtk is fixed.

	* win32/x.h: Minor fixes.

	* fb/x_display.c:
	  - ENABLE_2_4_PPB is added. 2 and 4 ppb are disabled by default.
	  - _display.back_fb is free'ed in x_display_close_all().

2013-05-24  Araki Ken  <arakiken@users.sf.net>

	* fb/x_font.h: x_get_bitmap_line() and x_get_bitmap_cell() are changed from
	  functions to macros to be always inlined even if compiled with -Os option.

	* fb/x_window.c: Optimization of draw_string().

2013-05-23  Araki Ken  <arakiken@users.sf.net>

	* kik_util.h: BIT_MSBFIRST macro is removed.

	* fb/x_font.[ch], fb/x.h: LSB first glyphs are converted MSB first in loading
	  the font, x_get_bitmap_cell() is simplified and glyphs_same_bitorder member
	  is removed from XFontStruct.

	* fb/x_window.c: Optimization of draw_string().

	* win32/x.h: #define WINVER 0x0500 is added.

	* fb/x_window.c, fb/x_display.[ch], x_font.[ch]: The previous commit
	  of adding const modifier is cancelled.

2013-05-22  Araki Ken  <arakiken@users.sf.net>

	* fb/x_window.c, fb/x_display.[ch], x_font.[ch]: const modifier is
	  added.

2013-05-22  Araki Ken  <arakiken@users.sf.net>

	* fb/x_window.c: Minor optimization of draw_string().

	* ml_vt100_parser.c: get_home_file_path() is added to remove
	  duplicated codes.

2013-05-21  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: ESC [ 1 ; * A is output instead of ESC O 1 ; * A
	  if modifier keys + arrow key is pressed in applicatio cursor
	  key mode.
	  (Thanks to Mohammad_Alsaleh)

	* fb/x_display.c: Minor fixes.

2013-05-19  Araki Ken  <arakiken@users.sf.net>

	* x_shortcut.c:
	  - Button*Mask is disabled until Button* is specified in
	    ~/.mlterm/key to avoid such a problem as
	    http://sourceforge.net/mailarchive/message.php?msg_id=30866232
	  - The bug which disabled "UNUSED" key is fixed.

	* fb/x_display.c: Optimization of put_image_124bpp.

2013-05-19  Araki Ken  <arakiken@users.sf.net>

	* kik_util.h, fb/x_font.c: BIT_MSBLEFT => BIT_MSBFIRST

	* fb/x_display.c: BIT_MSBLEFT => VRAMBIT_MSBRIGHT

	* fb/x_window.c: Segfault in draw_string without bg_color (for example
	  in drawing a candidate window of input method plugin) is fixed.

2013-05-17  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: Off by one error in put_image_124bpp is fixed.

	* fb/x_window.c: Optimization of draw_string() for 1bpp.

2013-05-16  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: Optimization of put_image_124bpp() and x_display_fill_with().

	* fb/x_imagelib.c: Check of sixel picture size is fixed.

2013-05-15  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: The bug of draw_mouse_cursor_line() is fixed.

2013-05-14  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c, x_font_manager.c: Whether usascii_font_cs is actually
	  changed or not is checked in usascii_font_cs_changed().

	* fb/x_window.c:
	  - Mistake of need_fb_pixel in the previous commit is fixed.
	  - Optimization of draw_string().
	  - Hack in x_window_resize() is applied if scrollbar is hidden.

	* fb/x_display.c, fb/x_window.c: x_display_fill_with() for 8 or less bpp
	  is added, and x_window_fill_with() uses it.

2013-05-12  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c, fb/x_window.c: need_fb_pixel argument which triggers
	  memchr( BG_MAGIC) is added to put_image_124bpp.

2013-05-12  Araki Ken  <arakiken@users.sf.net>

	* fb/x.h, fb/x_display.c: Display structure has shift_0 and mask members which
	  stores the result of FB_SHIFT_0() and FB_MASK().

2013-05-12  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: All possible memmove is replaced by memcpy.

	* c_imagelib.c: realloc_pixels() is called before correct_height()
	  because correct_height() expects the width of pixels to be curtailed.

	* ml_char.c: Optimization of ml_char_size().

	* kik_conf.c: The initial size of kik_conf_entry_t table is changed from
	  128 to 16 to speed up starting mlterm.

	* doc/en/README.fb, doc/ja/README.fb: Updated.

2013-05-11  Araki Ken  <arakiken@users.sf.net>

	* kik_map.h: Uninitialization of KIK_MAP::hash_func is fixed.

	* kik_map.h, kik_conf.c, ml_color.c, mc_im.c, x_font_cache.c, x_font_config.c:
	  'result' argument is removed from kik_map_get().

	* doc/en/README.fb, doc/ja/README.fb: Updated.

2013-05-10  Araki Ken  <arakiken@users.sf.net>

	* kiklib/src/Makefile.in: MAJOR.MINOR 14.2 => 14.3

	* kik_unistd.h: #include <stdlib.h> is added for putenv.

	* x_font_cache.c, x_font_config.c:
	  font_hash => kik_map_hash_int

	* kik_map.[ch]:
	  - kik_map_hash_int_fast() is added.
	  - DEFAULT_MAP_SIZE is changed from 128 to 16.
	  - (map)->pairs_array is allocated in kik_map_get_pairs_array() instead
	    of kik_map_new_with_size().
	  - The bug which erases data unexpectedly in shrinking the map size
	    is fixed.

2013-05-09  Araki Ken  <arakiken@users.sf.net>

	* fb/x_imagelib.c: Minor fixes.

	* x_screen.c: F12 => F10 to invoke benchmark.

2013-05-08  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.[ch]:
	  - x_display_get_fb() -> get_fb() (static function)
	  - "Display * display" argument is removed from x_display_get_pixel(),
	    x_display_put_image(), x_display_copy_lines() and x_display_reset_cmap()
	    which is renamed to x_cmap_reset().
	  - "fb_cmap_t * cmap" argument is removed from x_get_closest_color() which
	    is renamed to x_cmap_get_closest_color().
	  - x_cmap_get_pixel_rgb() is added.

	* fb/x_font.[ch]:
	  x_get_bitmap_line() and x_get_bitmap_cell() are changed to inline
	  static functions.

2013-05-07  Araki Ken  <arakiken@users.sf.net>

	* mlimgloader/Makefile.in: Compilation error on framebuffer is fixed.

	* fb/x_display.c, fb/x_window.c: Optimization.

	* configure.in: If --disable-shared option is specified, --disable-dl-ctl,
	  --disable-kbd, --disable-dl-type, --disbale-dl-table and --without-scrollbars
	  options are automatically specified.

2013-05-06  Araki Ken  <arakiken@users.sf.net>

	* c_imagelib.c: Workaround for the pixel aspect ratio is added.

	* fb/x_font.c:
	  - The returned value of system("gunzip fontfile") is ignored
	    because it may return -1 with errno=ECHILD even if it succeeds.
	  - If a unicode font of biwidth characters is loaded, the width
	    of U+3000 is used.
	    (Hack for efont-unicode (b*.pcf.gz))

2013-05-06  Araki Ken  <arakiken@users.sf.net>

	* mkf/Makefile.in, kiklib/Makefile.in: The dependency of collect-headers
	  target is clarified.

	* Makefile.in, mkf/Makefile.in, tool/mlconfig/Makefile.in:
	  "cd xxx" is enclosed by ().

	* x_font_manager.[ch]: x_get_usascii_font() is changed from function
	  to macro.

2013-05-06  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.fb, doc/en/README.fb: Updated.

	* x_screen.c:
	  - Benchmark which is invoked by XK_F12 is added to shortcut_match().
	  - Segfault in preediting at the lower left corner of the screen is fixed.

2013-05-04  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: The previous fix which caused segfault is fixed again.

2013-05-04  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: The bug of drawing the mouse cursor if ENABLE_DOUBLE_BUFFER
	  is defined is fixed.

	* fb/x_window.c, x_draw_str.c: wall_picture_bg argument is added to
	  draw_str() in x_window.c to optimize drawing string with wall picture.

2013-05-03  Araki Ken  <arakiken@users.sf.net>

	* fb/x_window.c: copy_area() is optimized.

	* fb/x.h, fb/x_display.c:
	  Double buffering of 1,2 or 4 bpp framebuffer is added.

2013-05-03  Araki Ken  <arakiken@users.sf.net>

	* c_imagelib.c: correct_height() is added to try to correct the height
	  of sixel graphics.

2013-05-02  Araki Ken  <arakiken@users.sf.net>

	* ml_char.c: ml_char_set() allows is_biwidth, is_comb, is_bold and
	  is_underlined to be > 1.
	  (This fixes the bug of use_dynamic_comb option.)

	* ml_logical_visual.c: Minor fixes.

	* fb/x_font.c, fb/x_window.c: x_get_bitmap_line() is added.

	* fb/x_font.h: Added.

2013-05-02  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.[ch], fb/x_window.c:
	  x_display_copy_line() -> x_display_copy_lines()

	* fb/x_display.c, x.h: Display::fp -> Display::fb

2013-05-01  Araki Ken  <arakiken@users.sf.net>

	* fb/x_imagelib.c: If the difference between the specified height and
	  the height of the loaded sixel picture is less than 6, they are
	  regarded as the same ones.

	* fb/x_font.c: "% 8" is replaced by "& 7".

	* fb/x_display.c:
	  - "% ppb" is replaced by "& (ppb - 1)".
	  - Tune up FB_SHIFT.

2013-04-30  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: set_wall_picture() isn't called in window_realized()
	  if the window is unmapped (== not resized to the screen size yet)
	  in framebuffer.

	* fb/x_imagelib.c: load_sixel_1bpp_from_file() is added to tune up
	  loading sixel graphics in 1bpp framebuffer.

	* c_imagelib.c: load_sixel_from_file() returns 1bpp bitmap data if
	  SIXEL_1BPP is defined.

2013-04-28  Araki Ken  <arakiken@users.sf.net>

	* im_scim_mod_if.c: Fixed typo.

2013-04-28  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* fb/x_display.c: The value of WSKBD environmental variable is used for
	  the keyboard device.

2013-04-28  Araki Ken  <arakiken@users.sf.net>

	* x_display.c: Tune up drawing the wall picture in put_image_to_124bpp()
	  and x_display_get_pixel().

	* x_display.c, x_font.c: TOINT32 and TOINT16 macros are used to access
	  fb and pcf fonts.

	* kik_util.h: BE32DEC, BE16DEC, LE32DEC, LE16DEC, TOINT32 and TOINT16
	  macros are added.

2013-04-27  Araki Ken  <arakiken@users.sf.net>

	* mlimgloader/Makefile.in: mlimgloader can be built without X11 library.

	* configure.in, mlcc/Makefile.in: configure script at the top directory
	  generates Makefile of mlcc.

	* mlcc/configure, mlcc/configure.in, mlcc/config.h.in, mlcc/install-sh:
	  Removed.

2013-04-22  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, doc/ja/README.ja, gtk/INSTALL: Updated.

	* x_screen.c, x_window.h, xlib/x_window.c, win32/x_window.c, fb/x_window.c:
	  - "bel_mode" option accepts "sound|visual" value which enables both audible
	    and visual bell.
	  - "use_urgent_bell=true" works even if the value of "bel_mode" option
	    is "none".

	* configure.in: --with-gui option can accept "xlib,fb" which means
	  compiling both mlterm-xlib and mlterm-fb.

2013-04-21  Araki Ken  <arakiken@users.sf.net>

	* x_display.c: Minor fixes.

2013-04-21  Araki Ken  <arakiken@users.sf.net>

	* x.h, x_display.[ch], x_window.c:
	  Experimental support for less than 8bpp/framebuffer is added.

	* x_imagelib.c, x_color.c, x_display.c:
	  Drawing pictures is supported in 8 bpp/framebuffer.

2013-04-19  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: The wrong height of the preediting cursor of the input
	  method plugin in the case of inner_border != 2 is fixed.
	  (Thanks to @tsutsuii)

	* man/mlterm.1, doc/en/README.ja, doc/en/PROTOCOL: Updated.

	* x_main_config.c, x_screen.c: "use_urgent_bell" option is added.

	* x_window.h, xlib/x_window.c, win32/x_window.c:
	  x_set_use_urgent_bell() is added for "use_urgent_bell" option.

2013-04-17  Araki Ken  <arakiken@users.sf.net>

	* x_im_candidate_screen.c, x_im_status_screen.c:
	  x_window_clear_margin_area() is also called in redrawing the window frame.

	* fb/x_display.c: The number of redrawing input method window is decreased.

2013-04-17  Araki Ken  <arakiken@users.sf.net>

	* x_main_config.c: "ibus" is added to the message of --im option.
	  (Thanks to @tsutsuii)

	* fb/x_display.c: Minor fixes.

2013-04-16  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Minor fixes.

	* fb/x_window.c: Minor fixes.

2013-04-15  Araki Ken  <arakiken@users.sf.net>

	* im_uim.c, im_ibus.c, fb/x.h: XK_Hiragana_Katakana is supported.

	* x_screen_manager.c, im_ibus.c, fb/x_display.c: Minor fixes.

2013-04-14  Araki Ken  <arakiken@users.sf.net>

	* fb/x_window.c:
	  - x_window_resize() always calls clear_margin_area() for
	    input method window.
	  - x_window_map() calls clear_margin_area().

	* fb/x_display.c: Minor fixes around IME window.

	* im_scim_mod_if.c: Candidate window is shown after the 2nd candidate.

	* im_ibus.c: "show-lookup-table" and "hide-lookup-table" events are processed
	  in framebuffer.

2013-04-13  Araki Ken  <arakiken@users.sf.net>

	* README, doc/ja/README.fb: Updated.

	* configure.in, main/Makefile.in: -lpthread is added in compiling mlterm
	  in NetBSD if ./configure is executed with --enable-ibus, --enable-ssh2
	  or --with-type-engines=cairo option unless --without-pthread is
	  specified.

2013-04-13  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/READBE.fb: Updated.

	* inputmethod/kbd/Makefile.in:
	  libim-kbd.so -> libim-kbd-fb.so in framebuffer.

2013-04-13  Araki Ken  <arakiken@users.sf.net>

	* fb/x.h, win32/x.h: IsModifierKey() which is used by im_m17nlib.c is added.

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* libctl/ml_bidi.c: <fribidi/fribidi.h> -> <fribidi.h>

	* im_m17nlib.c: Compilation error is fixed.

	* inputmethod/m17nlib/Makefile.in:
	  libim-m17nlib.so -> libim-m17nlib-fb.so in framebuffer.

	* inputmethod/*/Makefile.in: Minor fixes.

	* x_im_candidate_screen.c: Minor fixes.

	* fb/x_display.c: /dev/wskbd is opened instead of /dev/wskbd0 because
	  "wsconsctl encoding" command returns "encoding=unknown_0" if
	  /dev/wskbd0 is opened.

2013-04-13  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: The region where input method window is opened
	  is always exposed in moving it.

2013-04-12  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: The region where input method window is opened
	  is always exposed in hiding it.

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* im_ibus.c: Framebuffer on Linux is supported.

2013-04-11  Araki Ken  <arakiken@users.sf.net>

	* im_ibus.c:
	  "hide-preedit-text" signal is processed.

	* im_ibus.c, ibus/Makefile.in, fb/x.h, fb/x_display.c, configure.in:
	  Framebuffer on NetBSD is supported.

	* im_scim_mod_if.c:
	  Minor fixes.

	* x_im.c: Compilation error is fixed.

2013-04-08  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, etc/main, etc/main.ja, doc/en/PROTOCOL:
	  Updated.

	* x_screen.c, x_main_config.c, ml_vt100_parser.[ch], ml_term.h,
	  x_font_manager.[ch], x_screen_manager.c, gtk/vte.c, main_loop.c:
	  - "box_drawing_font" option is added.
	  - It is possible to change "not_use_unicode_font" and
	    "only_use_unicode_font" dynamically.

	* ml_char_encoding.c: ml_is_msb_set() is tuned up.

2013-04-06  Araki Ken  <arakiken@users.sf.net>

	* Makefile.in: install-fb target is added.

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* x_im.[ch], x_screen.c:
	  - IM_API_VERSION 0x08 => 0x09.
	  - get_display, get_font_man and get_color_man are removed from
	    x_im_event_listener_t and get_unicode_policy is added.
	  - ml_is_msb_set is removed from x_im_export_syms and
	    ml_convert_to_internal_ch is added.

	* im_ibus.c, im_kbd.c, im_m17nlib.c, im_scim_mod_if.c, im_uim.c,
	  x_im_candidate_screen.c:
	  - ml_convert_to_internal_ch() is used for preedit or candidate
	    characters.
	  - MKF_BIWIDTH or MKF_AWIDTH property of preedit or candidate
	    characters is always checked even if they are not ISO10646_UCS4_1.

	* ml_term.h, ml_vt100_parser.h:
	  ml_{term|vt100_parser}_get_unicode_policy() is added.

	* ml_vt100_parser.c: ml_convert_to_internal_ch() is added.

	* fb/x_display.c, x_event_source.c: The minimum interval of
	  autorepeating is changed from 50ms to 25ms.

2013-04-05  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: Autorepeat bug is fixed.

2013-04-04  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* fb/x_imagelib.c: The bug which disabled sixel graphic images in 16bpp
	  is fixed.

	* x_main_config.c: --contrast, --gamma, --bright and --pic options are
	  removed if configure with --disable-image option.

	* main_loop.c: "wskbd_repeat_1" and "wskbd_repeat_N" options are added
	  in NetBSD framebuffer.

	* x_event_loop.c: addional_fds::handler() is called every 50ms in NetBSD
	  framebuffer.

	* fb/x.h, fb/x_display.c, fb/x_window.c: Support for NetBSD framebuffer.

	* ml_logical_visual.c: Inline pictures are correctly shown if use_dynamic_comb
	  option is true.

2013-03-24  Araki Ken  <arakiken@users.sf.net>

	* x_screen_manager.c: If term hasn't been attached to screen yet,
	  ml_term_change_encoding() is called instead of
	  ml_term_write_loopback("\x1b]5379;encoding=...\x07") in open_pty_intern().

	* fb/x_display.c: _mouse.button_state is reset when button is released
	  in FreeBSD.

	* version.h.in: 3.1.9 -> 3.1.9 post

2013-03-23  Araki Ken  <arakiken@users.sf.net>

	* 3.1.9 released.
	  (tag "rel-3_1_9")

	* configure.in, mlterm.spec, main/version.h.in,
	  doc/en/ReleaseNote: updated for 3.1.9.

	* libptyssh/ml_pty_ssh.c:
	  gethostbyname() is used if getaddrinfo() doesn't exist.

	* win32/x.h: VK_OEM_{1|3|4} macros are defined.

	* script/config.guess, mkf/script/config.guess, kiklib/script/config.guess,
	  script/config.sub, mkf/script/config.sub, kiklib/script/config.sub:
	  Updated (timestamp='2013-02-12')

	* etc/main, etc/main.ja: Updated.

2013-03-22  Araki Ken  <arakiken@users.sf.net>

	* libptyssh/ml_pty_ssh.c: If libssh2_channel_{write|read}() returns
	  LIBSSH2_ERROR_SOCKET_RECV, call kik_trigger_sig_child().

2013-03-21  Araki Ken  <arakiken@users.sf.net>

	* x_shortcut.c: The bug which ignored ButtonMask in x_shortcut_match()
	  is fixed.

	* etc/key: Examples are added.

	* x.h, win32/x.h, win32/x_window.c, fb/x_display.c: Button6 and Button7
	  (Tilt wheel) are supported.

2013-03-20  Araki Ken  <arakiken@users.sf.net>

	* mkf_parser.c:
	  If parser->next_char() returns error, mkf_parser_increment() is called
	  before continuting parsing.

	* x_screen.c:
	  Window title string is always terminated by U+0000 in xterm_set_window_name()
	  in win32.

	* README, doc/ja/README.ja: Updated.

2013-03-18  Araki Ken  <arakiken@users.sf.net>

	* x_screen_manager.c, accessories/google.sh: Minor fixes.

	* accessories/README: Added.

	* accessories/README.ja: Removed.

2013-03-16  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: mod_meta_mode=8bit works correctly in 8bit character
	  encodings except ISO8859-1.

	* README, man/mlterm.1, doc/ja/README.ja, doc/ja/BUGS: Updated.

	* mlterm/libptyssh/Makefile.in, mlterm/libptyssh/ml_pty_ssh.c,
	  mlterm/ml_pty_ssh.c:
	  ml_pty_ssh is separated to a dynamically loaded module in platforms
	  except win32.

	* ml_pty.h, ml_pty_ssh.c:
	  ml_pty_(un)use_loopback() -> ml_pty_set_use_loopback()

	* kiklib/src/Makefile.in:
	  MAJOR.MINOR: 14.1 -> 14.2

	* kik_conf.c, kik_map.[ch]:
	  kik_map_compare_str_nocase which compare strings ignoring case is added,
	  and kik_conf uses it to check key strings of configuration files.

	* configure.in: --without-pthread option is added.

2013-03-14  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c:
	  mod_meta_mode=8bit works in win32.

	* win32/x_window.c, win32/x_xic.c:
	  - Alt + symbol character works.
	  - Control + @ works.

2013-03-13  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: If the value of mod_meta_mode option is 8bit, input
	  character masked with 0x80 is encoded to the character encoding of pty.
	  (Thanks to Vladimir Elisseev)

	* x_main_config.c: Typo fixed.

2013-03-11  Araki Ken  <arakiken@users.sf.net>

	* doc/en/PROTOCOL: Updated.

	* tool/w3m-remoteimg/README, README.ja:
	  Moved to doc/en/README.w3m, doc/ja/README.w3m

	* tool/w3m-0.5.3-remoteimg.patch:
	  Removed. (Moved to bitbucket repository.)

	* tool/tlex:
	  Removed. (Moved to bitbucket repository.)

2013-03-10  Araki Ken  <arakiken@users.sf.net>

	* w3m-0.5.3-remoteimg.patch: Time to wait for the response of
	  "\x1b[14t\x1b[18t" is changed from 0.1 sec to 0.5 sec.

2013-03-09  Araki Ken  <arakiken@users.sf.net>

	* mlclient/main.c: Extra space in arguments of OSC 5379 mlclient is removed.

	* w3m-remoteimg/README.ja: Minor fixes.

	* x_screen.c: Minor fixes.

2013-03-08  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, doc/ja/README.ja: Updated.

	* x_main_config.c:
	  -P option is assigned as the short option as --clip, and -M option is as --im.

	* kik_conf.[ch]: kik_conf_set_default_value() is removed for buiding mlterm.

	* x_screen.c:
	  --shortcut and --osc52 options which are specified as the arguments of
	  OSC 5379 mlclient are ignored.

2013-03-07  Araki Ken  <arakiken@users.sf.net>

	* x_main_config.c, x_screen.[ch]: "allow_change_shortcut" option is added.

	* man/mlterm.1, doc/ja/README.ja: Updated.

	* configure.in: DEXPORT is set in Solaris.

2013-03-06  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.w3m -> tool/w3m-remoteimg/README.ja
	  doc/en/README.w3m -> tool/w3m-remoteimg/README

	* tool/w3m-remoteimg: Added.

	* tlex/main.c: The previous commit around disable_logging flag in
	  parse_vtseq() is undone.

2013-03-05  Araki Ken  <arakiken@users.sf.net>

	* tlex/main.c:
	  - tlex client skips parsing vt sequence in parse_vtseq().
	  - Wrong check of disable_logging flag in parse_vtseq() is fixed.

	* tlex/ChangeLog: Added.

2013-03-04  Araki Ken  <arakiken@users.sf.net>

	* c_imagelib.c, mlimgloader/Makefile.in: Minor fixes.

2013-03-02  Araki Ken  <arakiken@users.sf.net>

	* ml_config_menu.c: ml_pty_use_loopback() is called only if
	  ml_pty_get_slave_fd() returns -1 like mlterm-3.1.7 or before.

	* configure.in, x_screen_manager.c: Minor fixes.

2013-02-28  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: 0x90 is always processed as DCS.

	* fb/x_imagelib.c, win32/x_imagelib.c, xlib/x_imagelib.c, x_picture.[ch]:
	  If --diable-image is specified to configure, nothing is compiled.

	* configure.in, c_imagelib.c, ml_term.c, ml_vt100_parser.c,
	  mlimgloader/gdiplus.c, mlimgloader/gdk-pixbuf.c, mlimgloader/none.c,
	  x_draw_str.c, x_screen.c:
	  --enable-sixel option of configure (ENABLE_SIXEL macro) is replaced
	  by --disable-image option (NO_IMAGE).

	* fb/x_display.c: Error message is added.

2013-02-28  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: Fixes around parsing C1 characters.

	* mkf_iso2022_parser.c: C1 characters are regarded as US_ASCII
	  like C0 ones instead of being ignored.

	* mkf_*_parser.c: If error happens in parsing sequence,
	  the parsing position is reset.

	* mkf.c: Minor fixes.

2013-02-23  Araki Ken  <arakiken@users.sf.net>

	* README: Updated.

	* version.h.in: 3.1.8 -> 3.1.8 post

2013-02-23  Araki Ken  <arakiken@users.sf.net>

	* 3.1.8 released.
	  (tag "rel-3_1_8")

	* configure.in, mlterm.spec, main/version.h.in,
	  doc/en/ReleaseNote: updated for 3.1.8.

	* win32/x_font.c: Type engines except TYPE_XCORE are rejected.

	* win32/x.h: Fix compilation error in msys-1.0.

	* x_screen_manager.c: Minor fixes.

2013-02-22  Araki Ken  <arakiken@users.sf.net>

	* win32/x_window.c, x_screen.c: DragAcceptFiles() is moved from x_screen.c
	  to x_window.c.

	* ml_config_menu.[ch]: ml_config_menu_t::pid and ml_config_menu_t::fd are
	  changed from pid_t and int to void * (==HANDLE).

2013-02-20  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: "vertical_mode" option is dynamically changeable.

	* fb/x_window.c:
	  - x_window_resize() supports NOTIFY_TO_PARENT.
	  - window_realized() event show nothing by setting win->is_mapped = 0
	    to prevent segfault in startup.

2013-02-16  Araki Ken  <arakiken@users.sf.net>

	* fb/x_window.c, fb/x_display.[ch]: Conversion from Keypad keys to ASCII
	  character is moved from x_display.c to x_window_get_str() in x_window.c.

2013-02-16  Araki Ken  <arakiken@users.sf.net>

	* win32/x_window.c, win32/x_xic.c: F10 key is available.

	* win32/x_xic.c: Range check bug is fixed in x_xic_get_str().

	* win32/x.h:
	  - The definition of XK_Zenkaku_Hankaku, XK_Henkan_Mode and
	    XK_Muhenkan is added.
	  - Range check bug of IsKeypadKey() is fixed.

2013-02-15  Araki Ken  <arakiken@users.sf.net>

	* fb/x.h, fb/x_display.c: Numlock key is supported.

2013-02-13  Araki Ken  <arakiken@users.sf.net>

	* x.h, x_display.c: 0x100 is added to KEY_KPXX keys to distinguish them from
	  the same code keys.

2013-02-12  Araki Ken  <arakiken@users.sf.net>

	* x.c: XStringToKeysym() supports Zenkaku_Hankaku, Henkan_Mode and Muhenkan.

	* fb/x_display.c: Zenkaku_Hankaku, Henkan_Mode and Muhenkan key syms
	  are set from its scan codes.

	* doc/en/README.fb, doc/ja/README.fb: Updated.

2013-02-11  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: Minor fixes for FreeBSD termios.

	* fb/x.h: Minor fixes.

	* doc/en/README.fb, doc/ja/README.fb: Updated.

2013-02-10  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: The button state of any event mouse tracking is changed
	  from 3 to 35.

	* x_sb_screen.c, x_window.c: The hack of repositioning windows when
	  "scrollbar_mode" option is changed is moved from x_window_(un)map()
	  to change_sb_mode().

2013-02-10  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: Minor fixes.

	* x_im_status_screen.c: Minor fixes.

	* fb/x_window.c:
	  clear_margin_area() is not called if flag is not specified to
	  NOTIFY_TO_MYSELF in x_window_resize().
	  (Without this fix, segfault happens when kbd:arabic window is shown in
	  the bottom of the screen.)

	* fb/x.h, fb/x_display.c: Keyboard mode is set to K_CODE instead of K_XLATE
	  in order to handle modifier keys in framebuffer@FreeBSD.

2013-02-08  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* fb/x.h, fb/x_color.c, fb/x_display.c: Support for FreeBSD is added.

	* x_screen.c, x_screen_manager.c: Fixes for framebuffer.

	* x_scrollbar.c: The drawn area of draw_background() is fixed.

2013-02-03  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: Backscroll mode is not exited if pressing a mouse button.

	* ml_pty_ssh.c: Compression is enabled by libssh2_session_flag().

	* version.h.in: 3.1.7 -> 3.1.7 post

2013-02-02  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_imagelib.c, mlimgloader/gdk-pixbuf.c, c_imagelib.c:
	  The function of creating GdkPixbuf from the specified path is integrated
	  to gdk_pixbuf_new_from() in c_imagelib.c.

2013-01-30  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.ja, man/mlterm.1, etc/key, etc/main, etc/main.ja,
	  doc/en/PROTOCOL: Updated.

	* x_main_config.[ch]: -M/--menu, --button3 options are removed.

	* x_screen.c, x_screen_manager.c, vte.c:
	  button3_open and conf_menu_path_[1-3] are replaced by x_shortcut
	  using Button1-Button5.

	* x_screen.c:
	  - The bug which didn't redraw a part of full-width characters in
	    window_exposed() is fixed.
	  - "set_shortcut" is added to configuration protocol.

	* x_shortcut.c: Button1-Button5 are available.

	* doc/en/README.fb: Added.

	* doc/en/README.w3m: Updated.

2013-01-26  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.fb: Updated.

	* tool/mlimgloader/gdiplus.c: It is possible to be built with URL Monikers
	  even if IID_PPV_ARGS macro is not defined.

2013-01-25  Araki Ken  <arakiken@users.sf.net>

	* win32/x_connect_dialog.c: exec_cmd is not freed.

2013-01-24  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.c: The bug of copying overlapped area in ml_edit_copy_area()
	  is fixed.

2013-01-22  Araki Ken  <arakiken@users.sf.net>

	* 3.1.7 released.
	  (tag "rel-3_1_7")

	* configure.in, mlterm.spec, main/version.h.in,
	  doc/en/ReleaseNote: updated for 3.1.7.

	* fb/x_font.c: Whether a font has been already loaded or not isn't checked
	  by its gunzipped file path but by the one specified in ~/.mlterm/font-fb.

	* xlib/x_font.c: 0 width glyph is accepted for showing indic characters.

	* tlex/main.c: The size of a log file is shrinked after excessing over 5MB.

2013-01-20  Araki Ken  <arakiken@users.sf.net>

	* tool/tlex: Added.

2013-01-15  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: "vertical_mode" is not dynamic changeable.

	* x_picture.c: THRESHOLD for inline pictures is changed from 24 to 48.

	* fb/x_window.c:
	  - x_window_full_expose() and x_window_move_no_expose() are added.
	  - If input method screen is opened, x_window_is_scrollable() which
	    is implemented as a function instead of a macro returns 0.

	* fb/x_display.c: x_expose_window() is added.

	* fb/x_display.c, fb/x_window.c, fb/x.h:
	  - XK_Return is defined as 0x0d instead of 0x0a.
	  - Masking '@' ... '_' characters pressed with control key by 0x1f is
	    moved from kcode_to_ksym() in x_display.c to x_window_get_str() in
	    x_window.c.

	* im_uim.c, uim/Makefile.in, im_m17nlib.c, im_kbd.c, x_im.c:
	  Fixes for framebuffer.

	* x_im_candidate_screen.c, x_im_status_screen.c:
	  - x_im_status_screen.c uses x_window_full_expose() in framebuffer.
	  - x_im_candidate_screen.c uses x_window_no_expose() in framebuffer.
	  - line_height (x_im_status_screen alone), x and y members are added
	    to place screen correctly.

	* x_screen.c: window_exposed() is tuned up.

2013-01-09  Araki Ken  <arakiken@users.sf.net>

	* x_picture.c: The bug of decreasing num_of_inline_pics wrongly after the
	  failure of loading a picture is fixed.

	* win32/x_imagelib.c, xwindow/Makefile.in:
	  If CreateProcess("mlimgloader.exe") failed, try "c:\cygwin\bin\mlimgloader.exe".

	* mlimgloader/gdiplus.c: <kiklib/kik_debug.h> is enclosed by extern "C" to
	  fix compilation error.

	* c_imagelib.c: load_sixel_from_file() returns the pointer to cardinal + 2
	  in order to decrease the number of allocating and copying memory
	  if gdk_pixbuf is not used.

2013-01-07  Araki Ken  <arakiken@users.sf.net>

	* win32/x_display.c, xlib/x_display.c, main.c:
	  hide_console() is moved x_display.c to main.c.

	* win32/x_window.c: PlgBlt() is replaced by MaskBlt() in copy_area().

	* x_draw_str.c: The number of calling x_window_copy_area() is decreased.

	* ml_drcs.[ch]:
	  - ml_drcs_get() -> ml_drcs_get_font()
	  - ml_drcs_get_glyph() is added.

	* xlib/x_window.c, x_gc.[ch]: The number of calling XSetClipMask()
	  is decreased.

2013-01-04  Araki Ken  <arakiken@users.sf.net>

	* x_draw_str.c: Performance of draw_drcs() is improved.

2013-01-04  Araki Ken  <arakiken@users.sf.net>

	* x_draw_str.c:
	  - Segfault in drcs using ESC(I is fixed. (Thanks to saitoha san)
	  - Minor fixes for alpha mask.

	* fb/x_window.c, xlib/x_window.c, win32/x_window.c:
	  x_window_copy_area() accepts alpha mask.

	* xlib/x_imagelib.c, x_imagelib.h, fb/x.h, win32/x.h:
	  - Minor fixes for alpha mask.
	  - Fix memory leak (double g_object_ref) of pixbuf of sixel graphics
	    in load_file() in xlib/x_imagelib.c.

	* fb/x_imagelib.c, win32/x_imagelib.c: Alpha mask is loaded in
	  x_imagelib_load_file() if necessary.

	* c_imagelib.c: Alpha value in sixel graphics is supported in
	  load_sixel_from_file().

	* ml_drcs.[ch]: ml_drcs_final_full() is added.

2013-01-03  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: x_window_fill() is used for preediting of input method
	  plugins instead of x_window_draw_line().

	* x_draw_str.c: x_window_fill_with() is used for drawing drcs instead
	  of x_window_draw_line().

	* xlib/x_window.c, win32/x_window.c, fb/x_window.c:
	  x_window_draw_line() is removed.

2013-01-02  Araki Ken  <arakiken@users.sf.net>

	* win32/x_window.c: The point of x2/y2 is drawn in x_window_draw_line().

	* Makefile.in, ml_vt100_parser.c, x_draw_str.c: DECDLD (DCS ... { ... ST)
	  sequence is supported.

	* ml_drcs.[ch]: Added.

	* mkf_iso2022_parser.c, ml_vt100_parser.c: ISO2022 sequences like
	  "ESC ( SP Ft" are accepted.

	* doc/ja/README.w3m: Updated.

	* x_picture.[ch]: Fixes around cleaning up inline pictures.

2012-12-30  Araki Ken  <arakiken@users.sf.net>

	* mlcc/comm.[ch], mlcc/main.c:
	  - If OSC 5380 doesn't return anything, exit mlcc instead of segfault.
	  - 1000 usec -> 10000 usec for select() in read_stdin_timeout().

	* x_picture.c: Minor fixes around the timing of cleaning up inline pictures.

2012-12-29  Araki Ken  <arakiken@users.sf.net>

	* x_picture.c: Unused inline pictures aren't cleaned up until the
	  number of inline pictures reaches 24.

2012-12-28  Araki Ken  <arakiken@users.sf.net>

	* ml_config_menu.c, ml_pty_pipewin32.c, mlimgloader/gdiplus.cpp,
	  win32/x_imagelib.c: STARTF_FORCEOFFFEEDBACK is added to STARTUPINFO
	  for CreateProcess().

2012-12-28  Araki Ken  <arakiken@users.sf.net>

	* x_picture.[ch]: The inline picture which have the same file_path
	  is shared.

	* x_draw_str.c: The position of drawing inline pictures following
	  US ASCII characters is fixed.

	* ml_vt100_parser.c: The format of "show_picture" of configuration
	  protocol is changed from "WxH clip WxH+X+Y" to "WxH WxH+X+Y".

	* doc/ja/README.w3m: Added.

	* tool/mlimgloader/gdk-pixbuf.c, xlib/x_imagelib.c:
	  Remote access with curl is supported.

	* tool/mlimgloader/gdiplus.cpp: Remote access with URLMoniker is supported.

2012-12-24  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: "show_picture" of configuration protocol
	  accepts "clip WxH+X+Y" which clips region of the specified picture.

2012-12-23  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: {save|restore}_cursor() aren't called in
	  CSI ? 1047 h and CSI ? 1047 l.

2012-12-22  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: if(read() > 0) -> while(read() > 0)

	* x_screen.c: Memory leak in x_set_button3_behavior() is fixed.

2012-12-21  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: execv() -> execvp() in open_button3_command().

	* kik_args.c: kik_arg_str_to_array() parsed "\ " as a normal space
	  character not as an argument separator.

	* man/mlterm.1, README.ja: Updated.

2012-12-20  Araki Ken  <arakiken@users.sf.net>

	* x_im_candidate_screen.c, x_im_status_screen.c:
	  Compilation error is fixed.

2012-12-19  Araki Ken  <arakiken@users.sf.net>

	* configure.in, mlterm/Makefile.in, xwindow/Makefile.in,
	  ml_config_menu.[ch], xlib/x_imagelib.c:
	  --disable-use-tools option is added to configure.

2012-12-18  Araki Ken  <arakiken@users.sf.net>

	* x_draw_string.c:
	  "xfont->is_proportional && ! xfont->is_var_col_width" is replaced by
	  draw_alone of x_calculate_char_width().

	* xlib/x_font.c:
	  Whether the width of U+2580 - U+259f whose width is ambiguous
	  is the same as font->width or not is checked explicitly, because
	  their glyphs of some fonts (e.g. GNU Unifont) are full width.

	* x_font.h, fb/x_font.c, win32/x_font.c, xlib/x_font.c, x_screen.c:
	  draw_alone argument is added to x_calculate_char_width().

	* etc/main, etc/main.ja: Updated.

2012-12-16  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_display.c:
	  #include <windows.h> is placed before Xlib.h is included in order to
	  avoid compilation error in cygwin/X.

	* x_screen.c, win32/x_window.c:
	  UTF8 text is supported for setting the window title by OSC 0 or OSC 2
	  in win32.

	* mlcc/comm.c:
	  - Wait the next bytes until 0.01 second elapse in read_one().
	    ("\x1bOA" is separated to "\x1b", "O" and "A" without this in cygwin.)
	  - The way of determining KEY_BS and KEY_DEL is fixed.
	  - "use_ind", "alpha" and "use_clipboard" options are supported.

	* configure.in: Fix the way of checking the existence of gdiplus.h.

2012-12-15  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.win32, doc/ja/README.win32: Updated.

	* version.h.in: 3.1.6 -> 3.1.7pre

	* configure.in, xlib/x_imagelib.c:
	  USE_EXT_IMAGELIB => BUILTIN_IMAGELIB

2012-12-14  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_imagelib.c:
	  - Illegal format of cardinal data is fixed.
	  - Code cleanup.

2012-12-14  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_imagelib.c: If gdk-pixbuf is not built in mlterm,
	  "mlimgloader 0 0 0 path -c" creates cardinal data instead
	  of creating cardinal from Pixmap.

	* fb/x_window.c: Minor fixes.

	* c_imagelib.c, mlimgloader/gdk-pixbuf.c:
	  #ifndef USE_WIN32GUI -> #ifdef USE_X11

2012-12-13  Araki Ken  <arakiken@users.sf.net>

	* configure.in, tool/mlimgloader/Makefile.in, c_imagelib.c:
	  Fixes for tool/mlimgloader/none.c.

	* tool/mlimgloader/none.c: Added.
	  (none.c can handle sixel graphics alone.)

	* tool/mlimgloader/main.c -> gdk-pixbuf.c
	  tool/mlimgloader/main_gdi+.cpp -> gdiplus.cpp

	* xwindow/win32/x_font.c: Font names like "Courier 10 Pitch" which
	  was wrongly regarded as 10-point size "Courier" font is parsed
	  correctly.

2012-12-12  Araki Ken  <arakiken@users.sf.net>

	* doc/en/PROTOCOL, doc/en/README.win32, doc/ja/README.win32: Updated.

	* x_screen.c, x_screen_manager.c, ml_term.[ch], ml_vt100_parser.[ch],
	  ml_term_manager.[ch], vte.c, MLTermPty.c:
	  - CSI 22 0..2 t and CSI 23 0..2 t are supported.
	  - "title" is removed from configuration protocol.

	* configure.in, c_imagelib.c: Minor fixes for GDI+ support in win32.

	* tool/mlimgloader/main_gdk+.c: Added to support GDI+ not only gdk-pixbuf.

	* xlib/x_imagelib.c: create_pixbuf_from_cardinals() is disabled unless
	  ENABLE_CARD2PIXBUF macro is defined.

	* x_font.c, x_window.c: libtype functions are correctly declared if
	  libtype is statically linked to mlterm.

	* ml_logical_visual.h, ml_shape.h, ml_line.c: libctl functions are
	  correctly declared if libctl is statically linked to mlterm.

2012-12-10  Araki Ken  <arakiken@users.sf.net>

	* mlimgloader/Makefile.in:
	  -mwindows is added to link option in win32.

	* mlimgloader/main.c:
	  Retry with cygwin_conv_to_win32_path(file_path) if load_file() fails
	  in cygwin/msys.

	* mlimgloader/main.c, common/c_imagelib.c, xlib/x_imagelib.c:
	  SIZE_MAX -> SSIZE_MAX

2012-12-09  Araki Ken  <arakiken@users.sf.net>

	* mlimgloader/main.c: setmode(STDOUT_FILENO, O_BINARY) in win32.

	* win32/x_imagelib.c: Minor fixes.

2012-12-08  Araki Ken  <arakiken@users.sf.net>

	* fb/x_imagelib.c, xlib/x_imagelib.c:
	  kik_dl_open("libm.so") is tried not only with LIBMDIR but also without it.

	* fb/x_window.c:
	  Segfault in starting mlterm with --pic option in framebuffer is fixed.

	* doc/en/README.win32, doc/ja/README.win32: Updated.

	* win32/x_imagelib.c, mlimgloader/main.c, mlimgloader/Makefile.in,
	  c_imagelib.c, configure.in:
	  - mlimgloader is possible to be built in win32.
	  - Not only BMP format but also other image formats are supported in win32
	    by mlimgloader.
	  - "contrast", "gamma" and "brightness" options are supported in win32.

2012-12-07  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: The pty size of ml_term_t is fit to the screen size
	  when it is attached to x_screen_t in framebuffer.

2012-12-05  Araki Ken  <arakiken@users.sf.net>

	* libtype/x_font_ft.c: Font names like "Courier 10 Pitch" which
	  was wrongly regarded as 10-point size "Courier" font is parsed
	  correctly.

2012-12-04  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c:
	  - The bug of "button3_behavior" option rejecting "mlclient ..."
	    command is fixed.
	  - "mlclient ..." with "-e" and "--initstr" option can be specified
	    in ~/.mlterm/key.

2012-12-01  Araki Ken  <arakiken@users.sf.net>

	* 3.1.6 released.
	  (tag "rel-3_1_6")

	* configure.in, mlterm.spec, main/version.h.in,
	  doc/en/ReleaseNote: updated for 3.1.6.

	* ml_vt100_parser.c, ml_edit.[ch], ml_screen.h:
	  DECCRA(CSI...$v) and DECERA(CSI...$z) are supported.

2012-11-30  Araki Ken  <arakiken@users.sf.net>

	* x_sb_view_factory.c: Memory leak is fixed.

	* ml_term.[ch], ml_vt100_parser.[ch], x_draw_str.c, x_picture.[ch], x_screen.[ch]:
	  Sixel graphic pictures are divided to the screen cells.

	* MLTerm.java: F1-F20 key sequences are output.

2012-11-25  Araki Ken  <arakiken@users.sf.net>

	* sylalble.lex, lex.split.c: bzero() -> memset()

	* doc/en/README.fb, doc/ja/README.fb, gtk/INSTALL:
	  Updated. (Ubuntu 12.04 -> Ubuntu 12.10)

	* vte.c: g_object_ref(pty) is called in vte_terminal_set_pty_object().

	* version.h.in: 3.1.5post -> 3.1.6pre

	* configure.in: If --with-imagelib option is not specified, mlimgloader
	  is always built.

2012-11-24  Araki Ken  <arakiken@users.sf.net>

	* win32/x.h, win32/x_xic.c: The conflict between 0x61 and 0x7a ('a' - 'z'
	  <=> VK_K_MULTIPLY..VK_DIVIDE, VK_F1..VK_F11.NUMPAD1...9) is fixed.

	* ml_color.c: ~/.mlterm/color configurations for VT SYS colors
	  (0x0-0x0f) are applied.
	  (Thanks to Andi Cristian Serbanescu)

2012-11-23  Araki Ken  <arakiken@users.sf.net>

	* ml_config_menu.c, xlib/x_imagelib.c, fb/x_imagelib.c:
	  Code cleanup around execv().

	* configure.in: gio-2.0 is explicitly linked if gdk-pixbuf-2.0 is
	  2.14 or later.
	  (Thanks to Lotus Shih and rabin_y)

	* man/mlterm.1, doc/ja/README.ja, doc/en/PROTOCOL: Updated.

	* x_main_config.c, x_screen.[ch]: --exitbs / "exit_backscroll_by_pty"
	  option is added.

2012-11-22  Araki Ken  <arakiken@users.sf.net>

	* ml_color.c: ml_color_parse_rgb_name() returns RGB defined in ~/.mlterm/color.

2012-11-21  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: Minor fixes.

2012-11-20  Araki Ken  <arakiken@users.sf.net>

	* MLTermPty.c: "use_ansi_colors" option is added to set_config().

	* x_screen.c: Checking the argument of mlclient is moved from
	  set_config() to x_screen_exec_cmd().

	* ml_pty_unix.c: exit(1) is called explicitely if execv() failed.

2012-11-20  Araki Ken  <arakiken@users.sf.net>

	* mltracelog.sh: -b option is added to trachet.

2012-11-19  Araki Ken  <arakiken@users.sf.net>

	* gtk/INSTALL: Minor fixes.

	* tool/accessories/mltracelog.sh: Added.
	  Note that mltracelog.sh depends on trachet.
	  (http://pypi.python.org/pypi/trachet/).

2012-11-18  Araki Ken  <arakiken@users.sf.net>

	* gtk/INSTALL: Updated.

	* mlterm.spec: Fix the version number.

	* gtk/vte.c:
	  - x_display_idling() is called in vte_terminal_timeout().
	  - Cursor blinking is enabled not only by VTE_CURSOR_BLINK_ON
	    but also VTE_CURSOR_BLINK_SYSTEM.
	  - vte_terminal_set_cursor_blinks() is implemented.

2012-11-17  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, PROTOCOL: Updated.

	* ml_vt100_parser.[ch], x_screen.c, x_main_config.c:
	  --colors / "use_ansi_colors" option is added.

	* gtk/vte.c: Duplicate code is removed.

2012-11-16  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, man/mlclient.1, doc/en/PROTOCOL, doc/ja/README.ja:
	  Updated.

	* ml_vt100_parser.[ch], x_screen.c, x_main_config.c:
	  --altbuf / "use_alt_buffer" option is added.

	* main_loop.c, gtk/vte.c, x_screen_manager.c:
	  "click_interval" option is processed in x_screen_manager.c instead
	  of  main_loop.c and gtk/vte.c.

2012-11-15  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.ja, man/mlterm.1: Updated.

	* version.h.in: 3.1.5 -> 3.1.5 post

	* ml_vt100_parser.[ch], x_screen.c:
	  3 byte rgb color sequence is supported.
	  (<ESC>[38;2;<r>;<g>;<b>m and <ESC>[48;2;<r>;<g>;<b>m)

	* x_color_config.[ch], ml_color.[ch], x_color_cache.[ch]:
	  - x_color_config.[ch] are integrated to ml_color.[ch].
	  - Color names defined in ~/.mlterm/color are not available for
	    -fg, -bg, -sbfg and -sbbg options.

	* x_color.h, xlib/x_color.c, win32/x_color.c, fb/x_color.c:
	  x_get_xcolor_rgb() -> x_get_xcolor_rgba()

2012-11-13  Araki Ken  <arakiken@users.sf.net>

	* mkf_ucs_property.table:
	  - Updated to Unicode 6.2.0 (UnicodeData.txt and EastAsianWidth.txt)
	  - U+0160 - U+01ff (Jamo medial vowels and final consonants) are
	    treated as MFK_COMBINING|MKF_BIWIDTH.

	* x_draw_str.c: Minor fixes.

2012-11-12  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, doc/ja/README.ja: Updated.

2012-11-11  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, doc/ja/README.ja: Updated.

	* ml_vt100_parser.c, main_loop.c, gtk.c:
	  Unicode line drawing characters like U+2500 etc are converted to
	  dec special ones if -Y option is specified.

	* x_screen.c: Minor fixes.

2012-11-11  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* fb/x_font.c:
	  - glyph index in pcf font is casted to unsigned in order not
	    to be minus if it is over 32767.
	  - Gzipped pcf fonts are available.

2012-11-10  Araki Ken  <arakiken@users.sf.net>

	* x_termcap.[ch], x_screen.c:
	  kh and @7 settings are applied in application cursor key mode.

	* etc/font-fb, doc/ja/README.fb, doc/en/README.fb: Minor fixes.

2012-11-07  Araki Ken  <arakiken@users.sf.net>

	* etc/font-fb: unifont.pcf is added.

	* fb/x_font.c: ":[Percentage]" format is supported.

2012-11-06  Araki Ken  <arakiken@users.sf.net>

	* 3.1.5 released.
	  (tag "rel-3_1_5")

	* configure.in, mlterm.spec, main/version.h.in,
	  doc/en/ReleaseNote: updated for 3.1.5.

2012-11-06  Araki Ken  <arakiken@users.sf.net>

	* x_transparent_sample_sb_view.c: RIGHT_MARGIN is removed.

	* doc/ja/README.ja, man/mlterm.1: Updated.

	* x_screen.c, x_termcap.[ch]: k5 entry (ML_F5) is added.

	* xlib/x_window.c, fb/x_window.c, win32/x_window.c:
	  clear_margin_area() is called before window_exposed().
	  (For x_im_candidate_screen.c:window_exposed.)

2012-11-05  Araki Ken  <arakiken@users.sf.net>

	* configure.in: Minor fixes.

	* doc/en/README.fb, doc/ja/README.fb, doc/en/PROTOCOL: Updated.

	* x_screen.c, xlib/x_window.c, fb/x_window.c, win32/x_window.c, x_window.h:
	  - "update_all" is added to the configuration protocol.
	  - x_window_update_all() is added for "update_all".

2012-11-04  Araki Ken  <arakiken@users.sf.net>

	* x_font_config.c: The way to specify fonts like
	  JISX0213_2000_1=&JISX0208_1983 which means that the font specified
	  for JISX0208_1983 is also used for JISX0213_2000_1 is supported.

	* fb/x_font.c: Minor fixes.

	* xlib/x_font.c, mc_font.c: "jisx0208.1983-0" is added to the font
	  encoding candidates of JISX0213_2000_1.

	* xlib/x_font.c: The last element of cs_info_t::encoding_names is
	  removed.

2012-11-03  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: /sys/class/input/inputN/name is checked instead
	  of /sys/class/input/eventN/device/name to determine the type
	  (keyboard or mouse).

	* doc/en/README.fb, doc/ja/README.fb: Updated.

	* fb/x_color.c: The bug which disabled any colors except black
	  in 15,16,24,32 bpp is fixed.

	* x_sb_view.h, x_sb_view_factory.h: Support of x_sb_view_t
	  version 0 is dropped.

	* extra/athena.c, extra/motif.c, extra/mozmodern.c,
	  extra/next.c, pixmap_engine/pixmap_engine.c:
	  extra scrollbars and pixmap_engine are migrated to
	  x_sb_view_t version 1.

	* x_sample(2)_sb_view.c: malloc -> calloc.

2012-11-02  Araki Ken  <arakiken@users.sf.net>

	* libctl/dexport-fb.map: Added. (Symbolic link to dexport.map)

	* vte.c: Compilation error is fixed.

	* fb/x_color.c: "gray" and "lightgray" colors are available
	  in 256 colors.

	* x_sb_view_factory.c: Backward compatibility of scrollbar
	  plugins with the one before 2.4.0 is broken.

	* doc/ja/README.fb, doc/en/README.fb: Updated.

	* fb/x.h, fb/x_display, fb/x_simple_sb_view.c, fb/x_window.c,
	  x_screen_manager.c, x_scrollbar.c, x_sample_sb_view_fb.c,
	  x_sb_view_factory.c, configure.in, dexport-fb.map:
	  simple and sample scrollbars are supported in framebuffer.

	* win32/x_xic.c: Typo is fixed.

2012-10-31  Araki Ken  <arakiken@users.sf.net>

	* x_display.c:
	  - set_use_console_backscrolling() is added.
	  - If the console of mlterm-fb is not active, events from
	    /dev/input/event* aren't processed.
	  - ioctl(EVIOCGRAB) to keyboard and mouse device is removed.

	* ml_vt100_parser.c: DCS sequence except DCS q is also parsed and
	  ignored if sixel is enabled.

2012-10-30  Araki Ken  <arakiken@users.sf.net>

	* fb/x_window.c: Pixmap size check is added in x_window_copy_area().

	* doc/ja/README.fb, doc/en/README.fb: Updated.

	* fb/x_display.c, fb/x_color.c, fb/x.h:
	  - cmap is moved to Display structure.
	  - Original cmap is restored at exiting.

2012-10-29  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: Set EVIOCGRAB to keyboard and mouse device.

	* fb/x_color.c: 8bpp support is added.

	* fb/x_display.c: Compilation error is fixed.

2012-10-28  Araki Ken  <arakiken@users.sf.net>

	* x_picture.c, x_screen.c: The (sixel etc) pictures are redrawn correctly
	  in exiting backscrolling mode.

	* x_screen.c, x_selection.[ch]: The selection behavior of double or
	  tripple clicking and dragging is fixed.
	  (Thanks to Andi Cristian Serbanescu)

	* ml_vt100_parser.c: '4' which means sixel support is added to DA1
	  answerback string if configured with --enable-sixel opton.
	  (Thanks to saitoha san)

2012-10-27  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.fb: Added.

	* etc/Makefile.in: font-fb is installed to $(SYSCONFDIR).

	* fb/x_window.c: clear_margin_area() is called in x_window_set_bg_color().

	* x_window.h, {xlib|fb|win32}/x_window.c:
	  x_window_clear_margin_area() -> clear_margin_area() [static]

	* x_font_config.c: "OSC 5379;font;..." works in framebuffer.

	* win32/x.c: '0' - '9' keys are available for ~/.mlterm/key.

	* fb/x_window.c: Whether font->height or font->ascent excesses the
	  display height is checked in draw_string().

	* fb/x_font.c: font->width is always the same or exactly double.

	* fb/x_display.c: The way to convert keys combined with the control key
	  to control characters is fixed.

2012-10-26  Araki Ken  <arakiken@users.sf.net>

	* main_loop.c, fb/x_window.c, x.h , x_font_manager.c, x_main_config.c,
	  x_screen.c, x_window.h: Minor fixes.

2012-10-26  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: Minor fixes.

2012-10-26  Araki Ken  <arakiken@users.sf.net>

	* fb/x.h, fb/x_display.c: Minor fixes.

2012-10-25  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.fb: Updated.

	* fb/x_display.c, fb/x.h, fb/x_window.c:
	  /dev/input/event* of keyboard is processed instead of read(STDIN_FILENO).

2012-10-24  Araki Ken  <arakiken@users.sf.net>

	* fb/x_display.c: Minor fixes.

2012-10-23  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.fb: Updated.

	* fb/x_display.h, xlib/x_display.h: Added.

	* configure.in: Install mlterm-fb with -m 4755 -o root option
	  for mouse support.

	* fb/x_display.c, fb/x_window.c, fb/x.h: Mouse support is added.
	  (/dev/input/eventN device is used.)

2012-10-19  Araki Ken  <arakiken@users.sf.net>

	* fb/x_window.c: memmove is used instead of memcpy in copying overlapped
	  area in framebuffer.
	  (Thanks to uobikiemukot san)

	* tool/mlimgloader/main.c: Minor fixes.

2012-10-18  Araki Ken  <arakiken@users.sf.net>

	* configure.in:
	  - Fix the way to search libm for pow().
	  - mlimgloader is possible to be built in --with-gui=fb.

	* doc/ja/README.fb: Updated.

	* fb/x_color.c: 15 and 16 bpp are supported.

	* fb/x_imagelib.c, fb/x.h, mlimgloader/main.c, c_imagelib.c:
	  Wall picture and sixel graphics are supported except in 8 bpp.

2012-10-17  Araki Ken  <arakiken@users.sf.net>

	* README, doc/ja/README.ja, doc/ja/README.fb: Updated.

	* fb/x_window.c: Display width and height are applied forcibly even if
	  x_window_resize() is called with any value.

	* fb/x_font.c: Initialize XFontStruct::ref_count in loading a new font.

2012-10-16  Araki Ken  <arakiken@users.sf.net>

	* main_loop.c, x.h, x_dislay.h, x_font.h, x_font_config.c,
	  x_font_manager.c, x_main_config.c, x_screen_manager.c, x_window.h:
	  Minor fixes for framebuffer support.

	* window/fb, doc/ja/README.fb, etc/font-fb: Added for framebuffer support.

	* win32/x.[ch]:
	  - x_win32.[ch] -> x.[c]
	  - XParseGeometry() is added.

	* x_picture.c: Overlapped pictures are removed when a new picture is added
	  in x_picture_manager_add().

2012-10-03  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c, x_screen.c: CSI 14 t and CSI 18 t are supported.

	* win32/x_display.c: Minor fixes.

2012-09-29  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c, x_screen.c: "?" of OSC 4, 10 and 11 is supported.

	* version.h.in: 3.1.4 -> 3.1.4 post

2012-09-28  Araki Ken  <arakiken@users.sf.net>

	* 3.1.4 released.
	  (tag "rel-3_1_4")

	* configure.in, mlterm.spec, main/version.h.in,
	  doc/en/ReleaseNote: updated for 3.1.4.

2012-09-26  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: CSI ? 8840 -> CSI ? 8428(RLogin original)

	* vte.c: Fix vte_terminal_set_word_chars().

	* kik_str.h, x_imagelib.c: Minor fixes.

2012-09-23  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_imagelib.c, mlimgloader/main.c: Fix memory leaks.

	* ml_str_parser.c: Fix uninitialized value of ml_str_parser::comb_left.

2012-09-23  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: Fix segfault caused by "remove_picture" configuration
	  protocol with no argument.

	* c_imagelib.c: memcpy -> memmove.

	* xlib/x_imagelib.c, mlimgloader/main.c: Fix memory leaks.

	* x_selection.[ch], x_screen.c:
	  x_sel_lock() is added to fix the problem of reverting
	  back to selecting one character at a time by dragging
	  the pointer after double- or triple-clicking.

2012-09-17  Araki Ken  <arakiken@users.sf.net>

	* x_imagelib.c, ml_vt100_parser.c: ~/.mlterm/picture.six is changed to
	  ~/.mlterm/[pty name].six.

	* x_imagelib.c, mlimgloader/main.c, x_screen.c: Image files on remote
	  hosts are available for the wall picture via network protocols
	  supported by GVfs.

2012-09-15  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: Freeze in scrolling by CSI r is fixed. (Thanks to koie san)

	* dexport.map: http://ideone.com/N9xUw is merged.

	* ml_vt100_parser.c: Minor fixes around parsing sixel graphics sequence.

2012-09-13  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: Continuous DCS/FF/GS/RS/US sequences are saved
	  in one file (~/.mlterm/picture.six).

	* c_imagelib.c: Continuous DCS sequences (ESC P ... ESC \) for sixel
	  graphics are processed.

2012-09-08  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_imagelib.c: gdk_pixbuf of ~/.mlterm/picture.six is not cached.

2012-09-06  Araki Ken  <arakiken@users.sf.net>

	* android/Android.mk -> android/jni/Android.mk
	  android/kik_config.h -> android/jni/kiklib/src/kik_config.h

	* android/build.sh, android/build.xml, android/AndroidManifest.xml,
	  android/res/values/strings.xml, android/src/mlterm/android/MLTerm.java:
	  Added.

2012-09-05  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: Minor fixes.

	* c_imagelib.c: malloc() is used for picture file data instead of alloca().

2012-09-04  Araki Ken  <arakiken@users.sf.net>

	* MLTerm.java:
	  Application-cursor-keys sequences for Home and End keys are
	  ^[OH and ^[OF instead of ^[[H and ^[[F.

	* x_screen.c, x_termcap.c, etc/termcap:
	  - code cleanup
	  - ML_F1(k1), ML_F2(k2), ML_F3(k3), ML_F4(k4) are added.
	  - Application-cursor-keys sequences for XK_Home and XK_End are
	    ^[OH and ^[OF instead of ^[[H and ^[[F.
	  - Following key sequences are changed.
	    XK_BackSpace: \x7f -> \x08
	    XK_Home:   \x1bOH -> \x1b[H
	    XK_End:    \x1bOF -> \x1b[F
	    XK_F1:     \x1b[11~ -> \x1bOP
	    XK_F2:     \x1b[12~ -> \x1bOQ
	    XK_F3:     \x1b[13~ -> \x1bOR
	    XK_F4:     \x1b[14~ -> \x1bOS

	* x_screen.c:
	  PAGE_DOWN shortcut is checked even if it is not backscroll mode.

	* ml_edit.c, ml_edit_util.c, ml_line.c:
	  ml_line_t::is_continued_to_next flag is reset ml_edit_clear_line_to_right(),
	  ml_edit_clear_below(), ml_edit_clear_above(), ml_edit_fill_all() and
	  ml_edit_clear_lines() by using the new function ml_line_clear_with()
	  instead of ml_line_fill().

2012-08-23  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: 0x90 ... 0x9c are available for sixel graphics sequence.

2012-08-15  Araki Ken  <arakiken@users.sf.net>

	* mlterm.1: Spelling mistake is fixed.
	  (SF Patch #3557298, Thanks to Ahmed El-Mahmoudy)

	* ml_vt100_parser.c: The bug which didn't reset modifyOtherKeys by
	  "CSI>m" is fixed.

2012-08-14  Araki Ken  <arakiken@users.sf.net>

	* kik_utmp_utmper.c: Fix conflicting types of kik_utmp_new.
	  (Thanks to KATO Masashi san)

2012-08-12  Araki Ken  <arakiken@users.sf.net>

	* mkf_tblfunc_loader.[ch]: If NO_DYNAMIC_LOAD_TABLE is defined,
	  the functions in these files are removed.

	* android/prepare.sh, android/Android.mk: Minor fixes.

2012-08-11  Araki Ken  <arakiken@users.sf.net>

	* android/: Added.

	* kik_pty_streams.c: Fixes for android.

2012-08-10  Araki Ken  <arakiken@users.sf.net>

	* 3.1.3 released.
	  (tag "rel-3_1_3")

	* configure.in, mlterm.spec, main/version.h.in,
	  doc/en/ReleaseNote: updated for 3.1.3.

2012-07-13  Araki Ken  <arakiken@users.sf.net>

	* kik_pty_streams.c, kik_bsd_streams.c:
	  - Even if fcntl() fails, processing is continued with warning message.
	    (fcntl(fd,F_SETFL,O_NDELAY) fails in Darwin Kernel Version 11.4.0: Mon Apr 9
	     19:32:15 PDT 2012 / i686-apple-darwin11-llvm-gcc-4.2)
	  - fcntl(fd,F_SETFL,O_NDELAY) -> fcntl(fd,F_SETFL,fcntl(fd,F_GETFL,0)|O_NDELAY).
	  (Thanks to saitoha san)

2012-07-12  Araki Ken  <arakiken@users.sf.net>

	* MLTermPty.java: mkdir() -> mkdirs() in order to make sure
	  to make parent directories of %HOMEPTH%\mlterm\java.

2012-07-07  Araki Ken  <arakiken@users.sf.net>

	* etc/main, etc/main.ja, doc/ja/README.ja, man/mlterm.1: Updated.

	* ml_screen.[ch], ml_edit.[ch], ml_term.[ch], ml_term_manager.[ch],
	  ml_vt100_parser.[ch], x_font_config.c, x_main_config.[ch], x_screen.c,
	  x_screen_manager.c, gtk/vte.c, java/MLTermPty.c:
	  Local echo mode which reflects keyboard inputs immediately is supported.
	  --loecho / "use_local_echo" option which enables or disables local echo
	  mode is added.

2012-06-26  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: If x_shortcut_str() returns text in key_pressed(),
	  event->state is set 0 to ignore mod_meta_mode.

	* x_shortcut.c: ModMask check in x_shortcut_str() is fixed.

	* x_screen.[ch], ml_term.h, ml_vt100_parser.[ch]:
	  modify_other_keys flag is moved from x_screen_t to ml_vt100_parser_t.

2012-06-24  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: CSI ? 8840 n is supported.

2012-06-24  Araki Ken  <arakiken@users.sf.net>

	* x.h, x_win32.h: XK_FMAX is added. XK_F25 ... XK_F35 macros are removed in win32.

	* x_screen.c: If x_window_get_modifier_mapping() returns NULL,
	  is_alt is set by (state & ModMask).

	* ml_vt100_parser.[ch], x_screen.[ch]: CSI[>4;2m and CSI[>4;0m (enable and
	  disable modifyOtherKeys) are partially supported.
	  (Note that sequence from terminal is CSI [<code>;<mod>u,
	   not CSI [27;<mod>;<code>~.)

2012-06-24  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: Duplicated code is removed.

	* x_screen.c, x_window.c: Minor fixes related to GraphicsExpose.

2012-06-21  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: CSI Ps SP q (0 <= Ps <= 2) is supported.

2012-06-21  Araki Ken  <arakiken@users.sf.net>

	* x_window.[ch]: NoExpose and GraphicsExpose events caused by
	  XCopyArea are processed with wait_copy_area_response flag.

	* x_gc.c, vte.c: Default value of graphics_exposures of GCValue is
	  changed from False to True.

2012-06-13  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_window.c: FocusIn/FocusOut events not only to top windows
	  but also to child ones are processed.
	  (SF Bug #3528838. Thanks to Thomas Wolff)

	* ml_vt100_parser.c: CSI ? 8840 h and CSI ? 8840 l are supported.

	* x_font_config.c: Minor fixes.

2012-06-11  Araki Ken  <arakiken@users.sf.net>

	* README.ja, README.cairo: Fixed.

	* x_font_ft.c: If ":percent" is specified in ~/.mlterm/*font, x_off
	  is set to center a character in the cell.

	* x_draw_str.c: If current and next characters are bold or not is checked
	  by the value of ml_char_font() instead of xfont->id.

2012-06-09  Araki Ken  <arakiken@users.sf.net>

	* doc/en/PROTOCOL, doc/en/README.cairo: Updated.

	* x_screen.c: cursor blinking is stopped in unfocused.

	* xlib/x_font.c, x_font_ft.c, win32/x_font.c, xlib/x_window.c,
	  x_window_cairo.c, x_window_xft.c:
	  - If letter_space is larger than 0, x_off += letter_space / 2 to
	    center a character in the cell.
	  - If x_off is larger than 0, x_window_draw_string*() draws string
	    from x + x_off.

	* x_screen.c, x_font_manager.[ch], x_main_config.[ch], gtk/vte.c:
	  --bdfont / "use_bold_font" option is added.

	* MLTermPty.c: "ssh_x11_forwarding" option is supprted.

	* ml_pty_ssh.c: Minor fixes.

	* version.h.in: 3.1.2 post => 3.1.3 pre

2012-06-06  Araki Ken  <arakiken@users.sf.net>

	* etc/main, etc/main.ja, doc/ja/README.ja, main/mlterm.1: Updated.

	* x_event_source.c: x11 forwarding events are polled and dispatched.

	* x_main_config.c: "ssh_x11_forwarding" option is added.

	* ml_pty.h, ml_pty_ssh.c: X11 forwarding functions
	  (ml_pty_ssh_set_use_x11_forwarding, ml_pty_ssh_get_x11_fds and
	   ml_pty_ssh_send_recv_x11) are added.

2012-06-02  Araki Ken  <arakiken@users.sf.net>

	* x_event_source.[ch]: Macros -> Dummy functions.

	* x_screen_manager.c: If open_pty_intern() fails in open_screen_intern(),
	  new screen is not added to static variable screens.

	* ml_vt100_parser.c: MAX_PS_DIGIT macro is defined.

	* ml_screen.c: Max number of lines to be inserted or deleted is
	  number of screen rows.

2012-06-01  Araki Ken  <arakiken@users.sf.net>

	* win32/x_font.c: Minor fixes.

	* vte.c, ml_vt100_parser.c, x_imagelib.c: Usage of DIGIT_STR_LEN is fixed.

2012-05-31  Araki Ken  <arakiken@users.sf.net>

	* kik_unistd.h: Minor fixes.

2012-05-29  Araki Ken  <arakiken@users.sf.net>

	* contrib/tool/mlcc/Makefile.in: SF Patch #3530235 is merged.

	* doc/ja/README.ja, man/mlterm.1: Updated.

	* mlclient/main.c:
	  "--keepalive" is added to na_options.

	* ml_pty.h, ml_pty_ssh.c, main_loop.c, MLTermPty.c:
	  "ssh_keepalive_interval" option is added.

	* kik_mem.c: Minor fixes.

	* ml_pty.c: Declaration of ptsname() is enabled by defining _GNU_SOURCE.

2012-05-27  Araki Ken  <arakiken@users.sf.net>

	* x_color_manager.c: Minor fixes.

2012-05-26  Araki Ken  <arakiken@users.sf.net>

	* x_color_manager.[ch], x_screen.c:
	  - sys_colors are loaded from the beginning.
	    (sys_colors.is_loaded flag is removed)
	  - If illegal color name is specified for sys_color, current sys_color
	    is not changed. (Not falls back to white or black.)

2012-05-25  Araki Ken  <arakiken@users.sf.net>

	* indian.h, lex.split.c, syllable.lex, ml_vt100_parser.c, mc_im.c:
	  SF Patch #3529392 and #3529386 are merged.
	  (Thanks to Ahmed El-Mahmoudy)

2012-05-24  Araki Ken  <arakikenS@users.sf.net>

	* xlib/x_window.c: If background color is changed, margin area is cleared
	  in x_window_set_bg_color().

	* ml_vt100_parser.c:
	  OSC 5;0 and OSC 5;1 are supported.

	* ml_vt100_parser.c, x_color_config.c, x_color_manager.c:
	  - "?" which query color spec in OSC 4, 10, 11 and 12 is ignored.
	  - If unknown color name is specified for fg color, it falls back to white.
	  (Related to SF Bug #3528836, Thanks to Thomas Wolff)

	* kik_mem.h, x_imagelib.c: If glib/galloca.h is included before kik_mem.h,
	  alloca check in kik_mem.h is disabled.

	* kiklib/configure.in, kik_config.h.in, kik_unistd.[ch]:
	  If setenv doesn't exist, __kik_setenv is used instead.
	  (Related to SF Bug #3509744, Thanks to Thomas Wolff)

	* version.h.in: 3.1.2 => 3.1.2 post

2012-05-19  Araki Ken  <arakiken@users.sf.net>

	* 3.1.2 released.
	  (tag "rel-3_1_2")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 3.1.2.

	* README, doc/en/README.win32, doc/ja/README.win32, gtk/INSTALL: Updated.

	* x_screen.c, x_screen_manager.c, doc/en/PROTOCOL:
	  "close_pty" command is added to configuration protocol.

	* x_screen.c: ml_term_write( term) is replaced by ml_term_write( screen->term)
	  in get_config().

	* mc_im.c: Current directory is searched for im-xxx modules
	  if IM_DIR is not found.

	* mlterm-menu.c: Ptys attached to other screens are not displayed in the menu list.

	* ml_vt100_parser.c:
	  - buf length < vt100_parser->r_buf.len is checked.
	  - Pp of DA2 is changed from 0 (xterm default) to 1(VT220).

	* x_screen_manager.c: Minor fixes.

	* x_event_source.h: Minor fixes.

	* ml_screen.c: Minor fixes.

2012-05-17  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.win32, doc/en/README.win32: Updated.

	* x_main_config.c, win32/x_window.c, win32/x_win32.h:
	  -g +X+Y is possible to be specified.

	* configure.in, x_im_candidate_screen, x_im_status_screen.c,
	  win32/x_window.c, x_screen.c, inputmethod/kbd/im_kbd.c:
	  inputmethod/kbd is possible to be enabled in win32.

	* ml_vt100_parser.c: ESC Z is processed.

	* inputmethod/*/Makefile.in: @TYPE_CFLAGS@ is removed and @GUI_CFLAGS@ is added.

2012-05-14  Araki Ken  <arakiken@users.sf.net>

	* x_font_xft.c, x_font_cairo.c: undef unnecessary USE_TYPE_XXX macro.

	* x_font_ft.c: Minor fixes.

2012-05-14  Araki Ken  <arakiken@users.sf.net>

	* README: Updated

	* libind/*.c: u_int -> unsigned int

	* MLTermPty.java: A bug which disabled loading libMLTermPty.so in mlterm.jar
	  is fixed.

	* ml_vt100_parser.c: FF(0x0c) is processed.

	* configure.in, main/Makefile.in, libctl/Makefile.in, mlclient/Makefile.in,
	  xwindow/Makefile.in, libtype/Makefile.in: Minor fixes.

	* libctl/ml_shape_bidi.c: Minor fixes.

	* x_draw_str.c: Minor fixes.

2012-05-12  Araki Ken  <arakiken@users.sf.net>

	* README, mlterm.spec: Minor fixes.

	* README.ja, doc/en/PROTOCOL, man/mlterm.1: Updated.

	* x_draw_str.[ch], x_screen.[ch], x_screen_manager.[ch],
	  x_main_config.[ch], vte.c, x_im_{candidate|status}_screen.c:
	  "hide_underline" option is added.

	* ml_vt100_parser.c: It is possible to process sequences whose length
	  is more than PTY_RD_BUFFER_SIZE.

	* x_draw_str.c: Minor fixes.

	* version.h.in: 3.1.1 post => 3.1.2 pre

2012-05-10  Araki Ken  <arakiken@users.sf.net>

	* Makefile.in, kik_pty_helper.c, ml_config_menu.c, x_imagelib.c:
	  SF Patch #3524577 and #3524578 are merged.
	  (Thanks to Ahmed El-Mahmoudy)

	* etc/key: Updated.

2012-05-07  Araki Ken  <arakiken@users.sf.net>

	* ml_pty_ssh.c: Command string to be executed over ssh connection is
	  braced by "" if it contains a space.

	* x_screen_manager.c: A problem which failed to open a new screen because
	  command string to be executed over ssh connection wasn't initialized
	  is fixed.

2012-05-06  Araki Ken  <arakiken@users.sf.net>

	* ml_pty.[ch], ml_term.[ch], ml_term_manager.c, ml_vt100_parser.c,
	  ml_pty_intern.h, x_screen.c, x_screen_manager.c:
	  Experimental implementation of multiple windows per one pty
	  (MULTI_WINDOWS_PER_PTY) is removed.

2012-05-06  Araki Ken  <arakiken@users.sf.net>

	* im_ibus.c, x_im.c: Hack to avoid calling ibus_init() more than once
	  is added. (If ibus daemon was not found last time and ibus_init() is
	  called again, segfault happens.)

2012-05-06  Araki Ken  <arakiken@users.sf.net>

	* etc/font.win32.indic: Added.

	* README.indic, aafont.indic: Updated.

	* ml_iscii.c: libiscii_xxx.so modules are possible to be loaded from
	  current working directory.

	* win32/x_font.c: is_var_col_width of ISCII font is always true.

2012-05-05  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.[ch], x_screen.c:
	  FocusIn/FocusOut event tracking (CSI ? 1004 h and CSI ? 1004 l) is supported.

2012-05-04  Araki Ken  <arakiken@users.sf.net>

	* MLTerm.java:
	  The way to get mouse position is improved.

	* MLTermPty.java:
	  isTrackingMouse() method is added to check mouse traking mode is on or off.

	* ml_vt100_parser.[ch], x_screen.c, java/MLTermPty.c:
	  Extended mouse report(SGR/URXVT) is supported.

	* x_draw_str.c: Even if fg/bg color is reversed, bd_color and ul_color
	  options work correctly.
	  (Thanks to Andi Cristian Serbanescu)

	* mkf/script/config.guess, kiklib/script/config.guess,
	  script/config.guess: updated (timestamp='2012-02-10')

	* mkf/script/config.sub, kiklib/script/config.sub,
	  script/config.sub: updated (timestamp='2012-04-18')

	* win32/x_window.c: Fixed typo.

2012-04-30  Araki Ken  <arakiken@users.sf.net>

	* doc/en/PROTOCOL: Updated.

	* configure.in: --enable-sixel option is added.

	* ml_vt100_parser.c: DCS .. q .. ST sequence is supported.

	* Sixel format picture is partially supported.

	* "add_picture" and "remove_picture" are added to configuration protocol.

	* version.h.in: 3.1.1 => 3.1.1 post

2012-04-29  Araki Ken  <arakiken@users.sf.net>

	* 3.1.1 released.
	  (tag "rel-3_1_1")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 3.1.1.

	* configure.in: If xlib is not found, configure script exits.

	* kik_pty_streams.c:
	  <kik_config.h> is included instead of <kik_def.h> to
	  fix segfault in 64bit Linux.

	* mlterm.1, mlclient.1: Updated.

	* x_main_config.c, main_loop.c:
	  --sep, --button3, --clip, --restart and --logmsg options are
	  moved from main_loop.c to x_main_config.c to enable to specify
	  them for mlclient.

2012-04-22  Araki Ken  <arakiken@users.sf.net>

	* ml_color.[ch], x_color_config.c:
	  It is possible to change 0-15 colors by OSC 4 sequence.

2012-04-21  Araki Ken  <arakiken@users.sf.net>

	* 3.1.0 released.
	  (tag "rel-3_1_0")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 3.1.0.

	* x_main_config.c, MLTermPty.c, ml_pty.h, ml_pty_ssh.c,
	  etc/main, etc/main.ja, man/mlterm.1, README.ja:
	  "cipher_list" option is added.

	* kik_debug.c, kik_utmp_sysv.c: Minor fixes.

2012-04-16  Araki Ken  <arakiken@users.sf.net>

	* MLTermPty.c: Minor fixes.

2012-04-14  Araki Ken  <arakiken@users.sf.net>

	* x_color_manager.[ch], x_draw_str.c, x_main_config.[ch],
	  x_screen.c, x_screen_manager.c:
	  "bd_color" (equivalent to colorBD of xterm) and "ul_color" (equivalent
	  to colorUL of xterm) options are added.

	* kik_str.[ch]: kik_compare_str() which accepts NULL as arguments is added.

	* ml_term.[ch], ml_pty.[ch]:
	  ml_term_flush() and ml_flush_pty() which rarely work is removed.

	* vte.c, x_font_ft.c, xlib/x_font.c, win32/x_font.c, x_draw_str.[ch],
	  x_im_candidate_screen.c, x_im_status_screen.c, x_screen.[ch], x_decsp_font.[ch]:
	  height_to_baseline -> ascent

2012-04-13  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c, x_xic.c: Even if X*LookupString() returnes XBufferOverflow,
	  all input text is received.

	* kik_dialog.[ch]: kik_dialog_style_t is added.

	* win32/x_display.c, win32/x_window.c:
	 - Callback function of kik_dialog is set.
	 - MessageBox is replaced by kik_dialog.

2012-04-12  Araki Ken  <arakiken@users.sf.net>

	* MLTermPty.c, MLTermPty.java: '\r' characters at end of lines are removed.

2012-04-11  Araki Ken  <arakiken@users.sf.net>

	* MLTermPty.c: If ssh server is unknown, message box is shown.

	* kiklib/src/Makefile.in, java/Makefile.in: Fixed.

	* ConfirmDialog.java: Added.

	* kik_dialog.[ch]: Added.

	* ml_pty_ssh.c: ~/.ssh/known_hosts or ~/.mlterm/known_hosts are checked.

2012-04-08  Araki Ken  <arakiken@users.sf.net>

	* ml_line_bidi.c: BiDi mirroring is supported.
	  (Thanks to Khaled Hosny)

	* ml_bidi.c: ml_bidi_get_mirror_char() is added.

2012-04-08  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c:
	  Characters which failed to be converted from or to ucs in -u and -n
	  option are displayed as they are, instead of being ignored.

	* MLTermListener.java:
	  cellSizeChanged() -> sizeChanged()

	* MLTerm.java:
	  - Max number of pty windows is changed from 10 to 32.
	  - Size of window decorations is cached.
	  - Ctrl+F2 which opens pty in current window is supported.
	  - Ctrl+F3 which switches to a next free pty is supported.

	* MLTermPty.java, MLTermPty.c:
	  - listener object is managed not in MLTermPty.java but in MLTermPty.c.
	  - getRows() and getCols() methods are implemented.
	  - {set|get}AuxData() methods which are used to store StyledTextContent
	    for the pty are added.

	* ml_char.c: If IS_REVERSED is true and IS_BOLD is true, ml_char_fg_color() masks
	  ML_BOLD_COLOR_MASK and ml_char_bg_color() doesn't mask ML_BOLD_COLOR_MASK.

	* x_screen.c:
	  - ml_char_reverse_color() is used to draw cursor.
	  - unhighlight_cursor() in bs_* functions is removed.

	* x_screen.c, x_window.c, x_main_config.[ch]:
	  - x_window_t::idling event is added, and cursor blinking is supported by
	    using it.
	  - "blink_cursor" option is added.
	  - "inner_border" option is added.

2012-04-01  Araki Ken  <arakiken@users.sf.net>

	* configure.in: --enable-vt52 is added.

	* ml_vt100_parser.[ch]: VT52 emulation is added.

	* README: Updated

	* version.h.in: 3.0.11 => 3.1.0 pre

2012-03-31  Araki Ken  <arakiken@users.sf.net>

	* mlterm/ml_char.c, x_draw_str.c, x_screen.c:
	  ml_char_cols() returns 0 for some control characters of Unicode,
	  and characters which ml_char_cols() returns 0 for aren't drawn.
	  (Thanks to phcoder)

	* doc/en/ReleaseNote: Updated.

2012-03-26  Araki Ken  <arakiken@users.sf.net>

	* ml_pty_pipewin32.c:
	  If cmd_argv is { "...\plink.exe" , NULL }, its options which are
	  input from dialogbox are appended.

	* MLTermPty.java:
	  Native shared libraries are saved at ~/.mlterm/java or %HOMEPATH%/java
	  instead of /tmp.

	* MLTermPty.java, MLTermPty.c:
	  - setAltLibDir() -> setLibDir()
	  - PATH and LD_LIBRARY_PATH are set instead of mkf_set_alt_lib_dir().

	* mkf/lib/Makefile.in, mkf_tblfunc_loader.[ch], mkf/lib/dexport.map:
	  MAJOR.MINOR version 16.1 -> 16.0.
	  mkf_set_alt_lib_dir() is removed.

	* kik_debug.c:
	  fseek( fp , 0 , SEEK_SET) is called after checking if EOF character is
	  '\n' or not by fseek( fp , -1 , SEEK_END), because it fails to write
	  messages in win32 without this.

2012-03-25  Araki Ken  <arakiken@users.sf.net>

	* xlib/x_display.c:
	  Add a hack not to inclulde <winspool.h> in order to avoid compilation
	  failure in Cygwin/X. (SF Bug #3509743)
	  (Thanks to Thomas Wolff)

	* x_screen_manager.c, win32/x_connect_dialog.c, winrs.rs,
	  ConnectDialog.java, MLTerm.java, MLTermApplet.java:
	  "Exec cmd" is possible to be input in connecting to a ssh server.

	* MLTerm.java:
	  "geometry" option is supported.

	* ml_term_manager.c:
	  unsetenv -> kik_unsetenv (SF Bug #3509744)
	  (Thanks to Thomas Wolff)

	* kik_unistd.[ch]:
	  - kik_setenv is defined as setenv or SetEnvironmentVariable().
	  - kik_unsetenv is defined as unsetenv, setenv(...,"") or
	    SetEnvironmentVariable(...,NULL).
	    __kik_unsetenv() is removed.

2012-03-24  Araki Ken  <arakiken@users.sf.net>

	* MLTerm.java:
	  The place to dispose font and color objects is moved from PtyWather
	  thread to a dispose event listener of a display.

	* MLTermPty.c:
	  If libssh2 is used in win32, prevent a thread to watch pty in ml_pty_ssh.c
	  from spawning.

2012-03-24  Araki Ken  <arakiken@users.sf.net>

	* MLTerm.java:
	  After display is disposed, font and color objects are disposed, too.

	* MLTermApplet.java:
	  lineHeightChanged -> cellSizeChanged

	* xlib/x_imagelib.c, tool/mlimgloader/main.c:
	  <X11/Xlib.h> is included.

2012-03-23  Araki Ken  <arakiken@users.sf.net>

	* kik_types.h, kik_def.h, xlib/x_imagelib.c:
	  SIZE_MAX is defined in kik_def.h, not in kik_types.h to fix a compilation
	  error in x_imagelib.c. (SF Bug #3509744)
	  (Thanks to Thomas Wolff)

	* ml_vt100_parser.c:
	  "\x1b[0;96;0c" is returned as the value of Secondary DA in order for
	  vim to decide ttymouse=xterm2 automatically.

	* MLTerm.java:
	  Drag&Drop is supported.

	* MLTerm.java, MLTermPtyListener.java, MLTermPty.c:
	  Audible bell is supported.

	* MLTerm.java, MLTermPty.java, MLTermPty.c:
	  "fg_color", "bg_color" options are supported.
	  (MLTermPty.getColorRGB() method is added.)

	* MLTerm.java, MLTermPty.c, MLTermPty.java:
	  Mouse tracking sequences ("CSI ? 1000 h/l", "CSI ? 1002 h/l"
	  and "CSI ? 1003 h/l") are supported.

	* mltermlet.html:
	  Meta tags to disable cache is added.

2012-03-21  Araki Ken  <arakiken@users.sf.net>

	* MLTerm.java: getProperty() method is added to apply configuration in
	  ~/.mlterm/main.

	* MLTerm.java, MLTermPtyListener.java, MLTermPty.c:
	  - Lines are scrolled out only if not line_scrolled_out but
	    window_scroll_upward_region of ml_screen_event_listenert is called.
	    (Fixed failure of 7th test of vttest test type 2.)
	  - resize() of ml_xterm_event_listener_t is implemented and
	    MLTerm handles resize event of MLTermPtyListener to support
	    "CSI ? 3 h", "CSI ? 3 l", "CSI 4 t" and "CSI 8 t".

	* MLTermPty.c:
	  If next line is modified, set mog_beg = 0 in
	  Java_mlterm_MLTermPty_nativeGetRedrawString() to enable combining
	  modified characters in current line and next line and to decrease
	  the number of calling replaceTextRange().

	* mkf/lib/Makefile.in: MAJOR.MINOR version 16.0 -> 16.1

2012-03-19  Araki Ken  <arakiken@users.sf.net>

	* MLTerm.java:
	  replaceTextBuffering() is added to decrease number of calling
	  replaceTextRange().

2012-03-18  Araki Ken  <arakiken@users.sf.net>

	* MLTerm.java:
	  - Application cursor key is supported.
	  - setTextLimit( 100000)

	* MLTermPty.java: isAppCursorKeys() is added.

	* MLTermPty.c:
	  - nativeIsAppCursorKeys() is added.
	  - ml_screen_event_listener_t::window_scroll_{up|down}ward_region are
	    partially implemented.
	  - Each native_obj_t has its MLTermPtyListener object, which was
	    set to static variable.

2012-03-17  Araki Ken  <arakiken@users.sf.net>

	* MLTerm.java: The way of calling wait/notifyAll is fixed.

	* java/Makefile.in: Minor fixes.

2012-03-17  Araki Ken  <arakiken@users.sf.net>

	* MLTermPty.java:
	  waitForReading() is added.

	* MLTermPty.c:
	  Java_mlterm_MLTermPty_waitForReading() is added.

	* MLTerm.java:
	  - startPtyWatcher() to check MLTermPty.waitForReading() added.
	  - setCaret(null)

2012-03-16  Araki Ken  <arakiken@users.sf.net>

	* ConnectDialog.java:
	  SWT.PASSWORD is removed to create "Encoding" text field.

	* MLTerm.java:
	  - numOfScrolledOutLines member is added.
	  - Redrawing performance is improved.
	  - Shift-tab key is processed.

	* MLTermPtyListener.java:
	  redraw() is renamed to lineScrolledOut().

	* MLTermPty.java: numOfScrolledOutLines member is removed.

	* MLTermApplet.java: Minor fixes.

	* mlterm.html -> mltermlet.html

2012-03-14  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, doc/ja/README.ja: Updated.

	* x_shortcut.c:
	  Not only "Mod" but "Mod1"-"Mod5" keys are available for ~/.mlterm/key.
	  (SF Patch #3496423 is merged, Thanks to Kevin Schoedel)

	* mkf_tblfunc_loader.c: mkf_set_alt_lib_dir() is added.

	* java/INSTALL: Updated.

	* java/Makefile.in: Minor fixes.

	* java/manifest.mf: Renamed to java/manifest.mf.in.
	  java/manifest-win32.mf: Removed.

	* java/MLTermPty.c: Added.
	  - ml_config_listener_t::{set|get}_config and ::exec_cmd are implemented.
	  - Options in ~/.mlterm/main are applied.

	* java/mlterm/ConnectDialog.java, java/mlterm/MLTermListener.java,
	  java/mlterm/MLTermPtyListener.java, java/mlterm/MLTermApplet.java,
	  java/mlterm.html: Added.

	* java/mlterm/MLTerm.java:
	  - "-km", "-dialog", "-g" and "-e" options are added.
	  - "-pass" option is removed.
	  - Screen scroll is supported.
	  - Screen resize is supported.

	* configure.in, java/Makefile.in:
	  @CYGPATHW@ is added.

2012-03-09  Seiichi SATO  <seiichi@pylone.jp>

	* README, configure, configure.in, doc/ja/README.ja, etc/key,
	  etc/main, etc/main.ja, man/mlterm.1, xwindow/x_main_config.c,
	  inputmethod/iiimf/LICENCE, inputmethod/iiimf/Makefile.in,
	  inputmethod/iiimf/im_iiimf.c, inputmethod/iiimf/im_iiimf.h,
	  inputmethod/iiimf/im_iiimf_aux.c, inputmethod/iiimf/keymap.c,
	  inputmethod/iiimf/keymap.h:
	  removed IIIMF plugin

2012-03-03  Araki Ken  <arakiken@users.sf.net>

	* xwindow/win32/x_window.c:
	  WM_SIZE message is ignored if window is iconified.

	* xwindow/win32/x_win32.c:
	  Added. XStringToKeysym() is implemented for ~/.mlterm/key in win32.

2012-03-01  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c:
	  SM, RM, DECSET and DECRST accept multiple numeric parameters.
	  (Thanks to Iwamoto Kouichi san)

	* ml_color.h:
	  Range of IS_VALID_COLOR() is changed from "<= 0x101" to "< 0x100"
	  in order for ml_get_color_rgb(ML_{FG|BG}_COLOR) to return 0.

	* man/mlterm.1, doc/ja/README.ja, doc/ja/README.win32, doc/en/README.win32:
	  Updated.

	* x_main_config.c:
	  - The default value of "col_size_of_width_a" option is changed from 1 to 2
	    if locale is "ja_XX.XXX".
	  - If "auto" is specified as the value of "encoding" option not only if
	    nothing is specified, set x_main_config_t::is_auto_encoding = 1.

	* java/: Added.

	* ml_edit.[ch], ml_pty_{pipewin32|ssh}.c: Minor fixes.

	* mkf_tbl_func_loader.h: Minor fixes.

2012-02-14  Araki Ken  <arakiken@users.sf.net>

	* x_draw_str.c:
	  Starting position to draw combining character is fixed. (SF Bug #3487163)
	  (Thanks to raghavkrishna)

2012-02-13  Araki Ken  <arakiken@users.sf.net>

	* x_sb_screen.c:
	  button_press() event is implemented for wheel mouse in win32.
	  (Wheel mouse in win32 hasn't worked since 2012-08-26 commit.)

	* mkf_tblfunc_loader.h:
	  If mkf module is not found, mkf_map_func() and mkf_map_func2()
	  return 0 to avoid segfault.

	* xwindow/Makefile.in, configure.in, win32/x_dnd.c, xlib/x_dnd.c:
	  @DND_OBJ@ is obsolete. If DISABLE_XDND is defined, comment out
	  all source code in x_dnd.c.

2012-02-12  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.win32, doc/en/README.win32, README: Updated.

	* win32/x_font.c:
	  - use_variable_column_width and letter_space options are supported.
	  - x_convert_ucs4_to_utf16() is moved from x_draw_str.c

	* win32/x_window.c:
	  x_window_scroll_{left|right}ward_region() are implemented to
	  scroll screen correctly in vertical mode.

	* ml_vt100_parser.c:
	  trigger_xterm_event argument of start_vt100_cmd() after
	  xterm_listener::bel() is changed from 0 to 1 in order to erase
	  cursor which xterm_listener::bel() drew if bel_mode is visual.

2012-02-11  Araki Ken  <arakiken@users.sf.net>

	* x_display.[ch], xlib/x_window.c, win32/x_window.c:
	  x_display_t::width and x_display_t::height members are added and
	  used instead of calling Display{Width|Height}() or
	  GetSystemMetrics(SM_C{X|Y}SCREEN) directly.

	* x_screen.c, x_window.h, {xlib|win32}/x_window.c:
	  A problem that margin area isn't cleared after visual bell is fixed.

	* configure.in, mlterm-menu/Makefile.in, main/Makefile.in, xwindow/Makefile.in,
	  scrollbar/sample/Makefile.in, tool/mlconfig/Makefile.in:
	  @WIN32TAG@ -> _@GUI@

	* xwindow/:
	  x_color.c       -> xlib/x_color.c
	  x_color_win32.c -> win32/x_color.c
	  x_connect_dialog.c -> xlib/x_connect_dialog.c, win32/x_connect_dialog.c
	  x_display.c     -> xlib/x_display.c
	  x_display_win32.c -> win32/x_display.c
	  x_dnd.c         -> xlib/x_dnd.c
	  x_dnd_win32.c   -> win32/x_dnd.c
	  x_font.c        -> xlib/x_font.c
	  x_font_win32.c  -> win32/x_font.c
	  x_gc.c          -> xlib/x_gc.c, win32/x_gc.c
	  x_imagelib.c    -> xlib/x_imagelib.c
	  x_imagelib_win32.c -> win32/x_imagelib.c
	  x_simple_sb_view.c -> xlib/x_simple_sb_view.c
	  x_simple_sb_view_win32.c -> win32/x_simple_sb_view.c
	  x_win32.h       -> win32/x_win32.h
	  x_window.c      -> xlib/x_window.c
	  x_window_win32.c -> win32/x_window.c
	  x_xic.c         -> xlib/x_xic.c
	  x_xic_win32.c   -> win32/x_xic.c
	  winrs.rs        -> win32/winrs.rs
	  x_gdiobj_pool.[ch] -> win32/x_gdiobj_pool.[ch]
	  x_decsp_font.[ch] -> xlib/x_decsp_font.[ch]
	  x_xim.[ch]      -> xlib/x_xim.[ch]

2012-02-04  Araki Ken  <arakiken@users.sf.net>

	* x_window.h, x_window.c, x_window_win32.c:
	  - x_event_dispatch_t -> x_resize_flag_t
	  - Only if LIMIT_RESIZE flag is passed to x_window_resize(),
	    x_window_resize() never resizes over DisplayWidth or DisplayHeight.

	* ml_vt100_parser.[ch], ml_term.h, x_screen.[ch]:
	  - Extended mouse report(UTF8) is supported.
	  - ml_{vt100_parser|term}_is_extended_mouse_report_mode() are added.

	* configure.in, ml_pty_unix.c, ml_pty.c, kik_utmp*:
	  Utmp support is fixed. (SF Bug #3481552)
	  (Thanks to Kobayashi Hiroaki san)

	* daemon.[ch], xwindow/main.c, xwindow/version.h.in, xwindow/dexport.map:
	  Moved to main/ directory.

	* x_term_manager.[ch] => x_screen_manager.[ch], x_event_loop.[ch], daemon.[ch]

	* x_term_manager.c, doc/ja/README.ja, man/mlterm.1, etc/main, etc/main.ja:
	  "startup_ptys" option is removed.

2012-01-15  Araki Ken  <arakiken@users.sf.net>

	* 3.0.11 released.
	  (tag "rel-3_0_11")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 3.0.11.

2012-01-08  Araki Ken  <arakiken@users.sf.net>

	* version.h.in: 3.0.10 => 3.0.11 pre

	* x_window_win32.c: WM_SYSKEYDOWN event is processed to receive
	  Alt+key events.

	* x_xic_win32.c: Combination of Control + space ^ _ / 2 3 4 5 6 7 8
	  is supported.

2012-01-03  Araki Ken  <arakiken@users.sf.net>

	* mlcc/main.c:
	  - Help message is fixed. ("exec" was omited in "mlcc exec [command]")
	  - 'mlcc exec select_pty /dev/xxx' is available instead of
	    'mlcc exec "select_pty /dev/xxx"'.

	* x_window.c: Processing Expose events is optimized.

	* x_screen.c: "paste", "open_pty", "select_pty", "open_screen", "snapshot",
	  "search_next" and "search_prev" of configuration protocol
	  doesn't keep backward compatibility with mlterm 3.0.10 or before
	  which accepts '=' like "paste=".

	* ml_pty.[ch], ml_pty_*.c, ml_term.[ch], ml_term_manager.[ch],
	  ml_vt100_parser.c, x_screen.[ch], x_term_manager.[ch]:
	  Experimental implementation of multiple windows per one pty is added.
	  (Open window by OSC 115 and close it by OSC 116.)
	  (This feature is enabled by MULTI_WINDOWS_PER_PTY macro).

2012-01-01  Araki Ken  <arakiken@users.sf.net>

	* malloc() to create objects is mostly replaced by calloc().

2011-12-31  Araki Ken  <arakiken@users.sf.net>

	* configure, configure.in: Fixed SF Bug #3464878.
	  (Thanks to Daniel Lublin)

2011-12-30  Araki Ken  <arakiken@users.sf.net>

	* vte.c: If ConfigureNotify events are queued or not is checked in
	  toplevel_configure() to improve performance of pseudo transparency.

2011-12-29  Araki Ken  <arakiken@users.sf.net>

	* x_window.c, x_window_win32.c:
	  - x_window_clear_margin_area() is called not after but before
	    win->window_exposed().
	  - x_window_clear() doesn't clear margin area in order to suppress flickering
	    of im_{candidate|status}_screen.

	* x_draw_str.c:
	  - Characters outside the right end of screen aren't drawn.

	* x_im_{status|candidate}_screen.c:
	  x_window_draw_rect_frame() is called in window_exposed(), not in draw_screen().

2011-12-28  Araki Ken  <arakiken@users.sf.net>

	* x_window.c, x_window_win32.c: window->exposed() is called after
	  x_window_clear_margin_area() when window is exposed, because
	  border of x_im_candidate_screen and x_im_status_screen is erased.

	* gtk/INSTALL: Updated.

	* gtk/vte.c:
	  - vte_terminal_paste_primary() is implemented.
	  - If vte_terminal_set_font_(string_)full is called before widget is
	    realized, dummy terminal->pvt->screen->term is set to avoid segfault.
	  - The value of WINDOW_MARGIN is changed from 2 to 1 because lxterminal-0.1.11
	    always regards the value of inner-border property as 1.

2011-12-24  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, ReleaseNote, gtk/INSTALL: Updated.

	* gtk/vte.c: Hack for supporting VtePty is implemented.

	* kik_conf_io.c: If ~/.config/mlterm exists, it is used as a
	  user config directory instead of ~/.mlterm.

	* kik_debug.c: File to output messages by --logmsg option is changed
	  from ~/.mlterm/msg[pid].log to ~/.mlterm/msg.log.

	* x_window.c, x_window_win32.c:
	  x_window_resize( larger than the size of display ) resizes window
	  to the size of display.

	* ml_vt100_parser.[ch], x_screen.c: "CSI 8;rows;cols t" and
	  "CSI 4;height;width t" sequence is supported partially.

2011-12-17  Araki Ken  <arakiken@users.sf.net>

	* 3.0.10 released.
	  (tag "rel-3_0_10")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 3.0.10.

	* doc/ja/README.ja, doc/ja/README.dl, gtk/INSTALL: Updated.

	* x_imagelib.c, mlimgloader/main.c:
	  - The cases of passing 24 as bitmap_pad argument to XCreateImage().
	    and passing 0 as pixmap to XFreePixmap() is fixed.
	  - create_cardinals_from_image() supports 8 and 16 depth color.

	* tool/mlclient/Makefile.in, contrib/tool/mlcc/Makefile.in: @LDFLAGS@ is added.

	* xwindow/x_decsp_font.c: SF Patch #3459267 is merged.
	  (Thanks to Kusanagi Kouichi san)

2011-11-18  Araki Ken  <arakiken@users.sf.net>

	* 3.0.9 released.
	  (tag "rel-3_0_9")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 3.0.9.

	* mlterm.1, mlclient.1: Updated.

	* kik_types.h, x_imagelib.c: Definition of SIZE_MAX macro is moved
	  from x_imagelib.c to kik_types.h.

	* kik_mem.h, kiklib/src/configure.in: If calloc doesn't check possibility
	  of integer overflow, kik_mem_calloc is used instead.

2011-11-17  Araki Ken  <arakiken@users.sf.net>

	* x_window_win32.c, x_window.c: Typo is fixed in x_window_clear().

2011-11-16  Araki Ken  <arakiken@users.sf.net>

	* mlterm.1, README.ja, PROTOCOL, ReleaseNote: Updated.

	* x_screen.c, ml_vt100_parser.[ch], x_shortcut.[ch], x_main_config.[ch]:
	 - OSC 52 sequence is partially supported.
	   (OSC 52 is not accepted by default and allowed by pressing Control+Insert.)
	 - SWICH_OSC52 shortcut key and "allow_osc52" option is added.

	* vte.c: WINDOWID, TERM, DISPLAY and COLORFGBG environmental variables
	  are added to 'envv' in ml_term_open_pty_wrap().

2011-11-12  Araki Ken  <arakiken@users.sf.net>

	* x_imagelib_win32.c: file_path is converted from cygwin path to win32 path
	  in x_imagelib_load_file_for_background().

	* tool/mlconfig/main.c: "Brightness", "Contrast" and "Gamma" boxes
	  are revived.

	* mc_*.c: g_free() is used instead of free() to free returned value of
	  gtk_editable_get_chars().

	* tool/mlconfig/mc_alpha.[ch]: Added.

	* x_picture.c: Normal alpha value is changed from 255 to 0.

	* README.ja, ReleaseNote, doc/en/README.win32, doc/ja/README.win32: Updated.

2011-11-09  Araki Ken  <arakiken@users.sf.net>

	* x_imagelib.c: Behavior of "alpha" option is reversed.
	  (255=transparency, 0=opacity => 255=opacity, 0=transparency)

	* vte.c: kik_sig_child_init() which internally calls signal(3) and which
	  confuses VteReaper is never called from vte.c.

2011-11-05  Araki Ken  <arakiken@users.sf.net>

	* x_imagelib.c: Minor fixes.

	* ml_term.c: Check if term->pty is NULL or not in ml_term_zombie().

	* im_ibus.c:
	  - ibus_proxy_destroy() is used instead of ibus_object_destroy in ibus-1.4.
	  - g_main_context_iteration() is called in key_event().

2011-11-02  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: The order of x_im_new and x_im_delete is reversed in
	  x_screen_attach() to avoid to delete all resources inside im-module.

	* x_imagelib.c: x_imagelib_get_transparent() supports root pixmap
	  whose depth is different from that of my window.

2011-10-31  Araki Ken  <arakiken@users.sf.net>

	* im_ibus.c: GDBusConnection ibus-1.4.0 depends on is partially supported.
	  (Experimental)

	* vte.c: x_color_manager_change_alpha( ... , 0xff) if wall picture is set
	  in update_wall_picture().

	* x_imagelib.c: 0xff000000 is added to pixel value passed to XPutPixel()
	  in 32 bit depth in pixbuf_to_ximage_truecolor().

2011-10-29  Araki Ken  <arakiken@users.sf.net>

	* ml_screen.c: copy_or_check_region() and reverse_or_restore_region() are
	  rewritten becase chars argument in copy_or_check_region() could be
	  overflown occasionally.

	* x_gc.c: Initial foreground/background colors of GC always equal to
	  those of x_gc_t in x_gc_new().
	
	* vte.c:
	  - Fixed mistakes of macros for vte-2.18 or before.
	  - x_window_update() is called appropriately.
	  - x_color_manager_change_alpha() and x_window_set_bg_color() are called
	    in vte_terminal_realize().

	* vtetypebuiltins.c: vte_pty_flags_get_type() and vte_pty_error_get_type()
	  are added.

	* x_color.c: Alpha blended pixel is set in 32 bit depth in x_load_rgb_xcolor().

	* x_sample(2)_sb_view.c, x_sample_sb_view.h: Black and white pixel are gotten
	  by XAllocColor(), not BlackPixel and WhitePixel macros.

	* x_gc.c: Default values of fg and bg colors are 0xff000000 and 0xffffffff
	  respectively instead of BlackPixel and WhitePixel.

2011-10-23  Araki Ken  <arakiken@users.sf.net>

	* x_picture.[ch]: x_root_pixmap_available() is removed.

	* x_window.c, x_imagelib.c: If depth of root pixmap isn't equal to one of current
	  window, background (translucent) pixmap is not set.

	* README, README.ja, etc/main, etc/main.ja: Updated.

	* ml_pty_ssh.c: Previous commit is canceled and libssh2_channel_setenv_ex()
	  is used instead of libssh2_channel_setenv().

2011-10-22  Araki Ken  <arakiken@users.sf.net>

	* ml_pty_ssh.c: Not *env but kik_str_alloca_dup( *env) is used in
	  overwriting its memory to separate it to key and value.

2011-10-22  Araki Ken  <arakiken@users.sf.net>

	* ml_pty.c: Minor fixes for win32 native.

2011-10-21  Araki Ken  <arakiken@users.sf.net>

	* x_term_manager.c: "version" varaible was freed unjustly in
	  x_term_manager_final() and mlterm@cygwin was prevented from exiting
	  normally. So "version" variable and so on is removed.
	  (Thanks to Iwamoto Kouichi san)

2011-10-21  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  - x_window_set_transparent(terminal->pvt->screen) is called if
	    GdkWindow of VteTerminal is re-configured.
	  - If envv argument of vte_terminal_fork_command(_full) and
	    vte_terminal_forkpty is NULL, TERM, WINDOWID, DISPLAY and COLORFGBG
	    environmental variables are set for a child process.

2011-10-19  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  - Almost all parts of code in vte_terminal_unrealize() is moved to
	    vte_terminal_finalize().
	  - Dummy x_screen_t is created before x_display_remove_root() in
	    vte_terminal_unrealize() in case terminal will be realized again.

	* xwindow.[ch]: x_window_hide() is added.

	* gtk/Makefile.in, configure.in: Name of libvte using gtk+-3.0 is libvte2_90.

2011-10-17  Araki Ken  <arakiken@users.sf.net>

	* vte.c: pty_list and open_pty of x_system_event_listener_t are
	  implemented for mlterm-menu.

	* ml_term_manager.c, mlterm/Makefile.in:
	  If executing auto_restart_cmd failed, do execl(BINDIR "/mlterm")
	  instead of execlp("mlterm").

2011-10-16  Araki Ken  <arakiken@users.sf.net>

	* kiklib/kik_conf.[ch]:
	  - kik_conf_new(): No argument.
	  - kik_init_prog(), kik_get_prog_path(): Added.

	* kiklib/Makefile.in: 13.1 => 14.0

	* ml_term_manager.c:
	  - Even if SIGSEGV, SIGABRT, SIGBUS or SIGQUIT is received, all opened ptys
	    survive and are inherited to restarted mlterm, unless "auto_restart" option
	    is "false".

	* mc_combo.c, mc_font.c: gtk_widget_set_size_request(... , 0) ->
	  gtk_widget_set_size_request(... , -1)

	* vte.c:
	  - PROP_VADJUSTMENT property is supported.
	  - "word_separators", "compose_dec_special_font" and "use_cp932_ucs_for_xft"
	    options in ~/.mlterm/main are avaialble.

2011-10-12  Araki Ken  <arakiken@users.sf.net>

	* vte.c: "inner-border" property is set in GTK+-3.0.

2011-10-11  Araki Ken  <arakiken@users.sf.net>

	* configure.in: --with-gtk=(2.0|3.0) option is added.

	* tool/mlconfig/*.c, contrib/tool/mlterm-menu/mlterm-menu.c:
	  Experimental support for GTK+ 3.0 is added.

	* gtk/vte.c:
	  - Experimental support for GTK+ 3.0 is added.
	  - If child_pid is NULL or not is checked in vte_terminal_fork_full_command_full()
	    is checked.

2011-10-09  Araki Ken  <arakiken@users.sf.net>

	* x_window.c, x_window_win32.c: Edges of a window is cleared,
	  margin area is cleared at the same time in x_window_clear().

	* im_ibus.c: "forward-key-event" is processed.

2011-10-09  Araki Ken  <arakiken@users.sf.net>

	* x_window.h, x_window_win32.c:
	  - x_window_t::wall_picture_is_set is removed in win32.
	  - x_window_has_wall_picture() macro is added.

2011-10-08  Araki Ken  <arakiken@users.sf.net>

	* x_window_win32.c:
	  - x_window_{un}set_wall_picture() functions reflect screen immediately.
	  - Background image is redrawn in margin area.

	* x_window_cairo.c, x_window_xft.c, x_window.c, x_window_win32.c:
	  Spaces at the end of lines are ignored by x_window_draw_string() and
	  x_window_{cairo|xft}_draw_string8().

	* x_window_cairo.c: cairo_move_to()/cairo_show_text() is replaced by
	  cairo_scaled_font_text_to_glyphs()/cairo_show_glyphs().

	* ml_vt100_parser.c: IGNORE_SPACE_FG_COLOR macro is removed.

2011-10-05  Araki Ken  <arakiken@users.sf.net>

	* x_font_ft.c: CAIRO_HINT_STYLE_NONE is applied in cairo_font_open().

	* x_window.c: GraphicsExpose event is processed instead of
	  VisibilityNotify event to improve performance.

2011-10-03  Araki Ken  <arakiken@users.sf.net>

	* im_ibus.c: A result of ibus_input_context_is_enabled() is cached in
	  im_ibus_t.

	* x_window_cairo.c: 0x80 - 0xff characters are converted to UTF-8 in
	  x_window_cairo_draw_string8().

2011-10-02  Araki Ken  <arakiken@users.sf.net>

	* x_font_ft.c: CAIRO_HINT_METRICS_OFF is not applied in cairo_font_open().
	
	* gtk/vte.c: If font size is changed, gtk_widget_queue_resize_no_redraw()
	  is called in vte_terminal_set_font_from_string().

2011-09-29  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, README.indic, ReleaseNote: Updated.

	* x_screen.c: -V option is no longer automatically turned on to show
	  indic characters.

	* x_font_fc.c, x_font.c: If minus value is returned as text width,
	  xxx_calculate_char_width() returns 0 instead.

	* ml_line_iscii.c: A line who contains indic characters is forced to
	  be redrawn to EOL in ml_line_iscii_render().

	* ml_line.c: If end_char_index argument of ml_line_set_modified() is larger
	  than line->num_of_filled_chars, ml_line_is_cleared_to_end() returns true.

	* x_font.c: ISCII font is always loaded as variable column width one.

2011-09-27  Araki Ken  <arakiken@users.sf.net>

	* version.h.in: 3.0.8 => 3.0.8 post

	* gtk/Makefile.in: @GTK_LIBS@ is added.

	* doc/ja/FAQ, doc/ja/README.fontproto, doc/term/README.term: Updated.

2011-09-24  Araki Ken  <arakiken@users.sf.net>

	* 3.0.8 released.
	  (tag "rel-3_0_8")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 3.0.8.

	* man/mlterm.1, README.ja, etc/main, etc/main.ja: Updated.

	* x_main_config.c: Default value of "use_ind" option is changed from
	  true to false.

	* mc_char_encoding.c: ISCII-XXX encodings are added.

2011-09-23  Araki Ken  <arakiken@users.sf.net>

	* ml_logical_visual.c: u_int -> int in container_delete() and container_logical().

	* ml_edit.c: ml_edit_set_absolute_origin() sets edit->is_relative=0.
	  (Thanks to Konosuke Watanabe san)

	* Makefile.in: Merged ID:3412453 patch. (Thanks to Ahmed El-Mahmoudy)

	* README.ja: Fixed.

2011-09-19  Araki Ken  <arakiken@users.sf.net>

	* 3.0.7 released.
	  (tag "rel-3_0_7")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 3.0.7.

	* man/mlterm.1, doc/ja/README.ja: Updated.

	* inputmethod/ibus/im_ibus.c: ' ' character is available even if input context
	  is enabled in key_event().

2011-09-19  Araki Ken  <arakiken@users.sf.net>

	* libctl/ml_bidi.o, libctl/ml_iscii.o: Memory size passed to malloc() is fixed
	  in ml_bidi_new() and ml_iscii_new().

	* mlterm/Makefile.in: ml_bidi.o and ml_iscii.o are moved from OBJ_CORE to OBJ.

	* x_window.h: xft_draw and cairo_draw are never removed from x_window_t.

	* im_scim.cpp: KeyEvent::layout is initialized explicitly in im_scim_key_event().

2011-09-16  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c:
	  - -V and -m options are forcibly enabled if -ind option is specified.
	  - -m options are forcibly enabled if -bi option is specified.

	* doc/en/README.dl: Added.

	* libctl/ml_functbl_{bidi|iscii}.c, ml_ctl_loader.[ch]:
	  API compatibility check by CTL_API_COMPAT_CHECK_MAGIC is added.

	* Type engine modules are loaded dynamically.
	  - xwindow/libtype/: Added.
	  - x_window.c, x_font.c: Separated to xwindow/libtype/.
	  - x_main_config.c, x_screen.c, mlconfig/main.c:
	    USE_FRIBIDI, USE_IND macros are removed.

	* gtk/Makefile.in: @VTE_LIBS@ are not linked.

	* x_window.c: XftDrawRect() is not used.

	* x_color.c: XftColor is not used.

2011-09-11  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: Set use_variable_column_width = true or use_combining = true
	  forcibly in bidi or indic rendering.

	* libctl/ml_bidi.h: base_is_rtl and has_rtl members of ml_bidi_state_t are
	  integrated to rtl_state, and some macros to operate rtl_state are added.

	* Bidi and indic rendering modules are loaded dynamically.
	  - mlterm/libctl/: Added.
	  - ml_line.[ch], ml_logical_visual.[ch], ml_shape.[ch], ml_bidi.[ch],
	    ml_iscii.[ch]: Separated to mlterm/libctl/.
	  - x_main_config.c, x_screen.c, mlconfig/main.c:
	    USE_FRIBIDI, USE_IND macros are removed.

	* configure.in, xwindow/Makefile.in, mlterm/Makefile.in:
	  --disable-dl-ctl option which disable dynamic loading of
	  BiDi and Indic rendering modules.

	* mkf/lib/mkf_ucs4_xxx.c, mkf_tblfunc_loader.[ch]:
	  The way of loading modules is improved.

	* x_font_config.c:
	  In x_get_all_config_font_names(), when size == 1 and d_size == 0 and
	  array[0]->key == DEFAULT_FONT, neither strcpy() nor sprintf() are done,
	  thus p is left at the first character of the blank buffer font_name_list.
	  In that case it's wrong to do simply *(p - 1) = '\0'.
	  (Thanks to Noda, Kai san)

	* ml_bidi.c: Double free problem is fixed.
	  (Thanks to NODA, Kai san)

	* ml_edit.[ch], ml_screen.[ch], x_screen.c, mlterm-menu/menu, etc/key:
	  Minor fixes.

2011-09-04  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.win32, doc/ja/README.ja, mlterm.1: Updated.

	* x_main_config.c:
	  - Default value of "logging_msg" option is changed from false to true.
	  - mlterm/core configuration file which was used by mlterm 1.9.44 or before
	    is not read.

	* ml_vt100_parser.c: If "CSI ? 6 l" or "CSI ? 6 h" sequence is received,
	  cursor position is reset. On the other hand, if "CSI ! p" is received
	  and origin is reset, cursor position is not reset.

	* ml_edit.c: ml_edit_set_{relative|absolute}_origin() don't reset cursor position.

	* doc/en/PROTOCOL.font, doc/en/PROTOCOL.color: Removed.

	* ml_vt100_parser.[ch], ml_config_proto.[ch], x_screen.[ch], mlcc/comm.c,
	  mlconfig/mc_io.h, vte.c:
	  - OSC 5384 - 5391 are integrated to OSC 5379 - 5383.
	  - Format of "select_pty", "search_prev", "search_next"  "snapshot" in
	    OSC 5379 sequence is changed as follows.
	    select_pty=<pty dev name> => select_pty <pty dev name>
	    search_prev=<pattern> => search_prev <pattern>
	    search_next=<pattern> => search_next <pattern>
	    snapshot=<encoding name>:<file name> => snapshot <file name> <encoding name>
	  - OSC 5382 is dropped.

	* ml_pty.c, ml_term.c: ml_{pty|term}_get_slave_name() always return
	  non-NULL value.

2011-08-28  Araki Ken  <arakiken@users.sf.net>

	* version.h.in: 3.0.6 post => 3.0.7 pre

	* doc/en/README.tp: Updated.

	* ml_vt100_parser.c: OSC 10, OSC 11, OSC 12 are supported.

2011-08-27  Araki Ken  <arakiken@users.sf.net>

	* gtk/dexport.map: Added.

	* ml_pty_unix.c: Set delete, write, read and etc members of ml_pty_t
	  in ml_pty_unix_new() if cmd_path argument is NULL and nothing is
	  executed in child process. (vte_terminal_forkpty() didn't work
	  correctly by this bug.)

2011-08-26  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: Fixed a problem which didn't clear selected region
	  by pressing key if use_ind option was enabled.

	* doc/en/PROTOCOL, RADME.win32: Fixed.

	* code cleanup.

2011-08-23  Araki Ken  <arakiken@users.sf.net>

	* tool/mlconfig/mc_font.c: Fixed a problem which crashed mlconfig
	  if type_engine is cairo and use_anti_alias is true.

	* ml_pty_ssh.c:
	  - SCP is processed in non-blocking mode.
	  - "Cancel" button is removed. "Return" and "Exit" buttons are added.

	* ml_pty.c: ml_pty_(un)use_loopback() and related fucntions are
	  moved to ml_pty_ssh.c.

	* ml_pty_ssh.c: Source and destination file names are convered
	  to system locale encoding and terminal encoding respectively.

2011-08-22  Araki Ken  <arakiken@users.sf.net>

	* ml_pty.c, ml_pty_intern.h : pty->stored->count member is added.

	* ml_pty_ssh.c:
	  - Destination of scp is always directory.
	  - Only one scp process works at the same time.

	* tool/mlconfig/main.c: Front-end window for SSH SCP is added.

	* doc/en/PROTOCOL: Fixed.

2011-08-20  Araki Ken  <arakiken@users.sf.net>

	* README, doc/en/PROTOCOL: Updated.

2011-08-20  Araki Ken  <arakiken@users.sf.net>

	* --logmsg/logging_msg option which writes messages to ~/.mlterm/msg[pid].log
	  is added.
	  - kik_debug.[ch]: kik_set_msg_log_file_name() is added.
	  - screen.c, x_main_config.[ch]: Fixed.

	* kik_path.[ch]:
	  - __kik_basename() supports '\' as a separator.
	  - __kik_basename() is forcibly used in win32 even if system basename()
	    is provided.

	* ml_pty.c:
	  - File descriptors by _socketpair() are used for pty loopback in win32
	    in order to select(2) it.
	
	* ml_config_menu.[ch]: mlconfig is available in using libssh2.
	  - ml_pty_ptr_t is passed to ml_config_menu_start() instead of slave fd.
	  - pty loopback is enabled by ml_pty_(un)use_loopback() while mlconfig works.

	* ml_vt100_parser.c: DECTCEM is reset in DECSTR.

2011-08-16  Araki Ken  <arakiken@users.sf.net>

	* "scp <src> <dst>" is added to configuration protocol.
	  - ml_pty.[ch], ml_pty_intern.h: ml_pty_(un)use_loopback() are added.
	  - ml_pty_ssh.c: scp is supported.
	  - ml_vt100_parser.c: "scp" key of configuration protocol calls ml_pty_ssh_scp().
	  - doc/en/PROTOCOL: Updated.
	  - configure.in: If pthread is available or not is checked.
	  - tool/accessories/mlscp.sh: Added.

2011-08-14  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: If x or y of XButtonEvent is less than 0, it is treated as 0
	  in reporting mouse position. (Thanks to Iwamoto Kouichi san)

	* ml_char_encoding.c: non_iso2022_illegal_char() is added to enable
	  copy DEC Special characters in non iso2022 encodings(e.g. UTF-8).
	
2011-08-13  Araki Ken  <arakiken@users.sf.net>

	* x_window_win32.c: Check if win->pointer_motion is NULL or not before
	  calling win->pointer_motion function.
	  (Thanks to Iwamoto Kouichi san)

	* x_font.c, x_font.c, x_font_config.c, x_font_win32.c:
	  ISO10646_UCS2_1(_BIWIDTH) is removed.

	* doc/en/README.indic: E-mail from sumeet inani is added.
	  (Thanks to sumeet inani)

	* ml_vt100_parser.c: DECOM and DECAWM are reset in DECSTR.

2011-08-11  Araki Ken  <arakiken@users.sf.net>

	* x_window_win32.c: WM_WHEELMOUSE event which is sent to a top level window
	  is passed to a child window.
	  (Thanks to Iwamoto Kouichi san)

	* x_screen.c, ml_line.[ch]:
	  - Mouse position outside window is not reported.
	    (Thanks to Iwamoto Kouichi san)
	  - Mouse report position is not visual but logical one in rtl lines.
	    (ml_bidi_convert_visual_char_index_to_logical() is added for this.)

2011-08-08  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.[ch], x_screen.c: Application escape mode ("CSI ? 7727 h"
	  "CSI ? 7727 l" sequences are supported.

	* mkf/libtbl/table/*.table: CONV_XXX_TO_XXX is declared as static.

	* ml_vt100_parser.c: Application keypad, application cursor, application escape,
	  bracketed paste and mouse report modes are reset by DECSTR.

2011-08-07  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.tp: Updated.

	* x_window_win32.c: Position in WM_MOUSEWHEEL event is processed by
	  ScreenToClient().
	  (Thanks to Iwamoto Kouichi san)

	* ml_vt100_parser.c, ml_term.[ch], x_screen.c: "CSI ? 1002 h" "CSI ? 1003 h"
	  "CSI ? 1002 l" "CSI ? 1003 l" sequences are supported.

	* kiklib/configure.in: Not only if posix_openpt and /dev/ptmx exist but
	  also if they work is checked.

	* Makefile.in: 'make uninstall' is supported.

2011-08-02  Araki Ken  <arakiken@users.sf.net>

	* x_window_win32.c: Width and height of window decorations like caption
	  are calculated by difference between WindowRect and ClientRect.

2011-08-01  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: The way of parsing intermediate or parameter
	  characters is improved.

2011-07-31  Araki Ken  <arakiken@users.sf.net>

	* doc/en/README.win32, doc/ja/README.win32: Updated.

	* x_font_win32.c, x_window_win32.c:
	  "Tera Special" font is used for DEC Special characters.

2011-07-30  Araki Ken  <arakiken@users.sf.net>

	* gtk/vte.c: Fixed typo.

	* ml_vt100_parser.c: CSI sequence inside OSC is interpreted.

2011-07-27  Araki Ken  <arakiken@users.sf.net>

	* vte.c: A problem which overwrites disp.gc->gc more than once and
	  causes leak of GC resource is fixed.

	* ml_screen.h: ml_screen_logical_visual_is_reversible() is added.

	* ml_logical_visual.[ch]: "is_reversible" flag is added to ml_logical_visual_t.

2011-07-25  Araki Ken  <arakiken@users.sf.net>

	* x_window.c: Fixed typo in x_window_ft_draw_string8().
	  (cairo_show_text( ... , str) -> cairo_show_text( ... , buf))

	* x_font.c:
	  - If x_font_t::id has FONT_BOLD, x_font_t::is_double_drawing
	    is always 1 in cairo because the width of normal font is different
	    from that of bold font in some cases.
	  - pixel_size passed to cairo_matrix_scale() is rounded up to multiple of 2.

	* x_window_win32.c: x_set_use_clipboard_selection() and
	  x_is_using_clipboard_selection() return 0 in win32.

2011-07-24  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c, ml_term.[ch], x_screen.c: Bracketed paste mode
	  (CSI ? 2004 h , CSI ? 2004 l) is supported.

	* version.h.in: 3.0.6 -> 3.0.6 post

2011-07-23  Araki Ken  <arakiken@users.sf.net>

	* 3.0.6 released.
	  (tag "rel-3_0_6")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 3.0.6.

	* etc/main, etc/main.ja, mlterm.1, README.ja: Updated

	* ml_line.c: ml_char_bytes_equal() is used instead of ml_char_equal()
	  in ml_line_get_num_of_filled_chars_except_spaces().

2011-07-19  Araki Ken  <arakiken@users.sf.net>

	* x_window_win32.c: x_window_set_use_cairo() is added.

	* x_im_candidate_screen.c, x_im_status_screeen.c:
	  x_window_set_use_cairo() is called in window_realized().

	* x_font.c: CAIRO_HINT_METRICS_OFF is set in cairo_font_open.

	* UTF_MAX_SIZE in ml_char.h is changed from 8 to 6.

2011-07-17  Araki Ken  <arakiken@users.sf.net>

	* README, README.ja, gtk/INSTALL, man/mlterm.1: Updated

	* gtk/Makefile.in: Set valid value to SYSCONFDIR macro in CFLAGS.
	
	* cairo is supported for type_engine option.
	  - x_window.[ch]:
	    x_window_xft_draw_string{8|32} => x_window_fc_draw_string{8|12}.
	    x_window_set_use_cairo() is added.
	  - x_font.[ch]: cairo_calculate_char_width() and cairo_font_open() are
	    implemented.
	  - mc_font.c, mc_flags.[ch]: "cairo" checkbox is added.
	  - configure.in: --with-type-engines option accepts "cairo" as value.
	  - doc/en/README.cairo: Added.

	* x_font_config.c: The way of searching shared font tables in
	  create_shared_font_config() and x_release_font_config() is fixed.

	* ml_char_encoding.[ch]:
	  ml_convert_to_ucs4, ml_use_cp932_ucs_for_xft and ml_convert_to_xft_ucs4,
	  are moved to x_font.c

	* x_type_engine.c: Added

2011-07-12  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  - If command is not NULL and argv is NULL, argv(= {command,NULL})
	    is allocated in vte_terminal_fork_command().
	  - If name is NULL, "monospace" font is loaded in
	    vte_terminal_set_font_from_string().

	* mlconfig/main.c: "Indic" checkbox is selectable only if "Bidi(UTF8 only)"
	  checkbox is not selected.

	* version.h.in: 3.0.5 post -> 3.0.6 pre

	* vte.c: gtk_style_{attach|detach}() and gdk_window_set_user_data() are
	  not called.

	* README: Updated

2011-07-04  Araki Ken  <arakiken@users.sf.net>

	* vte.c: If command and argv arguments of vte_terminal_fork_command()
	  is NULL, default shell is executed in child process.

	* x_gdiobj_pool.h: Include <kiklib/kik_types.h>.
 
	* README.ja, gtk/INSTALL: Updated.

2011-07-02  Araki Ken  <arakiken@users.sf.net>

	* x_sb_view.h, x_win32.h: Independent from kik_types.h.

	* libind/lex.split.c: Added. (generated by lex)

	* im_kbd.c: If opt is NULL or not is checked before calling
	  ml_get_char_encoding(opt) in im_kbd_new().

	* x_font_win32.c: Fixed cs_info_table.

	* mlsearch.sh: "mlsearch.sh [pattern]" (without "prev" or "next") is available.

	* mkf_ucs4_iscii.c: Fixed ISCIICS_TO_INDEX() macro.

	* mkf/lib/dexport.map: Added.

	* ml_char.[ch]: ml_combine_chars -> ml_char_combine_simple

	* ml_line.[ch]: ml_get_num_of_filled_chars_except_spaces ->
	  ml_line_get_num_of_filled_chars_except_spaces

	* README.ja, README.indic: Updated.

2011-06-29  Araki Ken  <arakiken@users.sf.net>

	* mlconfig/main.c, mc_flags.c:
	  - Button of "use_ind" option is added.
	  - Combo box of "iscii_lang" option is removed.

	* mc_iscii_lang.c: Removed.

	* mc_font.c: Fonts for ISCII_XXX encodings are possible to select.

	* x_font_manager.[ch]: x_(de)activate_local_font_config() are removed.
	
	* x_term_manager.c, x_main_config.c, x_screen.c: "use_ind" option is added.

	* ml_vt100_parser.c: Indic unicode characters are always converted to ISCII.
	
	* ml_logical_visual.c: iscii_logical_visual_t::visual_lines are removed.

	* ml_line.[ch]:
	  - Cursor movement is fixed in ml_bidi_convert_logical_char_index_to_visual().
	  - ml_line_t::bidi_state -> ml_line_t::ctl_info.bidi
	                          -> ml_line_t::ctl_info.iscii
	  - ml_line_is_using_iscii(), ml_line_use_iscii(), ml_line_unuse_iscii() and
	    ml_line_iscii_render() are added.

	* ml_iscii.[ch]:
	  - ml_iscii_get_lang(), ml_iscii_get_lang_name(), ml_iscii_lang_new() and
	    ml_iscii_lang_delete() are removed.
	  - ml_iscii_keymap_new() and ml_iscii_keymap_delete() are renamed to
	    ml_isciikey_state_new() and ml_isciikey_state_delete().
	  - ml_iscii_new(), ml_iscii_delete(), ml_iscii_copy(), ml_iscii_reset()
	    and ml_iscii() are added.
	  - ml_iscii_lang_t -> ml_iscii_state_t
	  - Iscii conversion tables are loaded dynamically.
	
	* ml_bidi.c: ml_bidi_copy() is added.
	
	* ml_char_encoding.[ch]:
	  - ML_ISCII -> ML_ISCII_XXX
	  - mkf_iscii_lang_t is removed.

	* mkf/lib/Makefile.in: MAJOR.MINOR version 15.0 -> 16.0
	
	* mkf_8bit_conv.[ch], mkf_8bit_parser.[ch]:
	  mkf_iscii_conv_new -> mkf_iscii_xxx_conv_new
	  mkf_iscii_parser_new -> mkf_iscii_xxx_parser_new

	* mkf_charset.h: ISCII -> ISCII_XXX

	* mkf/lib/mkf_ucs4_iscii.c:
	  mkf_map_iscii_to_ucs4 -> mkf_map_iscii_xxx_to_ucs4

	* mkf/libtbl/mkf_ucs4_iscii.c: Added.

	* libind/: Added for processing indic characters.

	* etc/aafont.indic, etc/font.indic: Added.

	* README.iscii: Renamed to README.indic and updated.

	* README, README.ja, man/mlterm.1, PROTOCOL: Updated.

	* configure.in, xwindow/Makefile.in: Checking if regex.h exists or not is added.

2011-06-20  Araki Ken  <arakiken@users.sf.net>

	* "CSI < r", "CSI < s" and "CSI < t" sequences are supported.
	  - x_im.h, im_ibus.c, im_iiimf.c, im_kbd.c, im_m17nlib.c, im_scim_mod_if.c,
	    im_uim.c: is_activate() method is added.
	  - im_ibus.c, im_scim.c: switch_mod() method is implemented.
	  - x_xic.c, x_xic_win32.c: x_xic_is_active() and x_xic_switch_mode()
	    are added.
	  - ml_vt100_parser.c: sequences above are parsed.

	* x_term_manager.c, x_screen.c: Cursor color if input method is activated
	  is changeable by "im_cursor_color" option.
	  (Available only if built with USE_IM_CURSOR_COLOR macro.)

2011-06-19  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  - vte_terminal_search_set_gregex(), vte_terminal_search_get_gregex(),
	    vte_terminal_search_previous() and vte_terminal_search_next() are
	    implemented.
	  - Columns and rows which are passed to ml_term_create() are
	    replaced by main_config.cols and main_config.rows, not 80 and 25.
	  - line_scrolled_out() is fixed.

	* "search_prev" and "search_next" which search specified pattern (regex)
	  in mlterm screen are added to configuration protocol.
	  - ml_screen.[ch]:
	    ml_screen_t::search member is added.
	    ml_screen_search_{init|final|reset|find}() are added.
	  - tool/accessories/mlsearch.sh: Added
	  - x_scrollbar.[ch]: x_scrollbar_move_to() is added.
	  - x_screen.c: match() and search_find() are added.

	* gtk/Makefile.in: "-Wall" is replaced by @CFLAGS@ and @CPPFLAGS@ in CFLAGS.

	* x_font_cache.c: x_font_cache_t::prev_cache is initialized in
	  x_acquire_font_cache() before init_usascii_font() which
	  accesses x_font_cache_t::prev_cache in x_font_cache_get_xfont()
	  is called.

	* UTF_MAX_CHAR_SIZE and XCT_MAX_CHAR_SIZE are moved to ml_char.h and
	  renamed to MLCHAR_UTF_MAX_SIZE and MLCHAR_XCT_MAX_SIZE.

	* ml_line.[ch]: ml_line_copy_str() is renamed to ml_line_copy_logical_str().

	* ml_char_encoding.[ch]: ml_char_encoding_convert{_with_parser}()
	  are added.

	* README, README.ja, README.win32: Updated.

	* version.h.in: 3.0.5 -> 3.0.5 post

2011-06-04  Araki Ken  <arakiken@users.sf.net>

	* 3.0.5 released.
	  (tag "rel-3_0_5")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 3.0.5.

	* configure.in: gtk/ directory is added to compilation targets
	  only if vte library is installed to system.

	* doc/en/README.win32, doc/ja/README.win32: Updated.

	* "ssh_public_key" and "ssh_private_key" options are added.
	  - ml_pty_ssh.c, x_term_manager.c: Modified.
	  - mlterm.1, README.ja: Updated.

	* kik_path.c: kik_get_home_dir() is added.

2011-05-29  Araki Ken  <arakiken@users.sf.net>

	* 3.0.4 released.
	  (tag "rel-3_0_4")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 3.0.4.

	* configure.in: configure script doesn't stop if gdk-pixbuf-2.0 is not found.

	* configure: re-generated

	* mlconfig/main.c, mc_font.c: Tooltip text is set to widgets changing font size.

	* x_font.c: "-*-biwidth-*-" font is automatically loaded only for unicode
	  biwidth characters.

	* etc/main, etc/main.ja: Updated.

	* mlclient.1: Fixed.

2011-05-25  Araki Ken  <arakiken@users.sf.net>

	* mlterm/ml_pty.c: Revived.
	  (Thanks to Koie Hidetaka san)

	* xwindow/Makefile.in, mlimgloader/Makefile.in:
	  $(OBJ:.o=.lo).libs => $(OBJ:.o=.lo) .libs
	  (Thanks to Koie Hidetaka san)

2011-05-22  Araki Ken  <arakiken@users.sf.net>

	* README.ja: Updated.

	* mkf_charset.h: Error of IS_BIWIDTH_CS macro is fixed.

	* x_font_config.c: "XXX_NARROW" key for font configuration is supported.
	  (JISX0208_1983 for biwidth font, JISX0208_1983_NARROW for narrow font.)

	* ml_font.h: NORMAL_FONT_OF checks IS_BIWIDTH_CS and sets FONT_BIWIDTH.

	* mlclient/main.c: If mlterm server returns error, retry by configuration
	  protocol(ESC ] 5379 ; mlclient BEL).

	* vte.c: kik_sig_child_init and kik_sig_child_final are called.

	* kik_mem.h: undef alloca before defining it.

2011-05-21  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, README.ja, README.win32: Updated.

	* x_font_win32.c: Proportional font is not assumed in order to prefer
	  drawing performance.

	* x_font.c, x_font_win32.c: IS_BIWIDTH_CS is removed from x_font_new().

	* x_window_win32.c: Rectangle() is replaced by FillRect().

	* vte.c: Hack for roxterm is added.

2011-05-15  Araki Ken  <arakiken@users.sf.net>

	* "use_unicode_property" option which enables properties of unicode in
	  other codesets is added.(Thanks to Hidetaka Koie san)
	  - ml_vt100_parser.[ch]:
	    Unicode property of received characters is checked.
	  - x_main_config.[ch]: "use_unicode_property" option is added.
	  - ml_char.c: IS_BIWIDTH_CS is removed from ml_char_biwidth() and
	    is checked in ml_vt100_parser.c. Its result is given to ml_char_set().

	* Support libssh2.
	  - ml_pty_ssh.c, ml_pty_intern.h are added.
	  - configure.in: --enable-ssh2 option is added.
	  - "default_server" option is available in unix and value format of it
	    is changed.
	  - x_connect_dialog is partially implemented in unix.
	  - kiklib/src/kik_path.c: kik_parse_uri() is added.
	  - xwindow/main.c: WSAStartup and WSACleanup are added in win32.

	* winrs.rs, x_connect_dialog.c:
	  Port number is possible to specify in dialog.
	
	* kiklib/src/Makefile.in: MAJOR.MINOR version 12.1 => 13.0

	* kik_pty_xxx.c: kik_pty_helper_close(int) => kik_pty_close(int)

	* mlclient/main.c
	  - A bug which has broken mlclientx since 3.0.3 is fixed.

	* x_font_config.c: Bug fix in x_deactivate_local_font_config().

2011-04-25  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: Fixed SF Bug #3280196 by accepting 0x80-0x9f characters
	  as Pt in get_pt_in_esc_seq().
	  (Thanks to Yoshiaki Kasahara san)

	* im_ibus.c: Fixed result->id in im_ibus_get_info(). ("iBus" => "ibus")
	  (Thanks to shitamo san)

	* im_kbd.c, x_screen.c, ml_term.c: If 'not_use_unicode_font' option
	  is specified, indic characters in unicode are drawn as iscii ones.

	* x_screen.c: Number of calling flush_scroll_cache() is decreased.

	* mkf_charset.h, ml_iscii.h: ml_iscii_lang_type_t in ml_iscii.h is
	  replaced by mkf_iscii_lang_t in mkf_charset.h.

	* mkf_ucs4_map.c, mkf_locale_ucs4_map.c: Mapping function used previously
	  is cached to improve performance.

	* mkf_{viscii|iscii}_{conv|parser}.[ch]: Integrated to mkf_8bit_{conv|parser}.[ch]
	  and removed.

	* mkf_ucs4_iscii.[ch]: Added.

	* version.h.in: 3.0.3 -> 3.0.4 pre

2011-04-02  Araki Ken  <arakiken@users.sf.net>

	* mkf/lib/Makefile.in: increased MAJOR version. (14->15)

	* ml_char_encoding.[ch], mkf_8bit_conv.[ch], mkf_8bit_parser.[ch],
	  mkf_charset.h, mkf_ucs4_cp125x.[ch], mkf_ucs4_map.c, mc_font.c,
	  x_font.c, x_font_manager.c: CP874 which requires "-u" option is
	  supported.

	* x_draw_str.c: All fonts use the same ascent (ascent of US-ASCII font)
	  in order to align baseline.
	  (Merged a part of ID:3243231 patch, Thanks to Kusanagi Kouichi san)

2011-03-30  Araki Ken  <arakiken@users.sf.net>

	* ml_iscii.c:
	  - Support "%d" which is converted to font size in "FONT" entry
	    of /etc/libind.conf.
	  - Fixed minor bugs.

	* ml_edit_scroll.c: ml_edsl_delete_line() and ml_edsl_insert_new_line()
	  use CopyArea or BitBlt in scrolling.

	* x_window_win32.c: x_set_use_clipboard_selection() and
	  x_is_using_clipboard_selection() are added.

	* x_window.c:
	  x_set_clipboard_selection() -> x_set_use_clipboard_selection()

	* ml_char.c:
	  ml_(un)use_multi_col_char() -> ml_set_use_multi_col_char()
	  ml_(un)use_char_combining() -> ml_set_use_char_combining()

	* man/mlterm.1: Merged ID:3243508 patch. (Thanks to Ahmed El-Mahmoudy)

2011-03-22  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.c: Fixed wraparound problem in ml_edit_overwrite_chars().

	* configure.in: Fixed a bug which forcibly disabled "--with-imagelib=gdk-pixbuf1"
	  option of configure if gdk-pixbuf2 was installed to your system.

	* mlimgloader/main.c: Fixed error in compiling with gdk-pixbuf1.

2011-03-20  Araki Ken  <arakiken@users.sf.net>

	* 3.0.3 released.
	  (tag "rel-3_0_3")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 3.0.3

	* configure: re-generated

	* man/mlterm.1, doc/en/README.win32, doc/ja/README.win32, README.ja: Updated

	* win32/setup-msys.bat: "set CYGWIN=tty" is added.

	* x_term_manager.c, x_window.c: "use_clipboard" option which enables CLIPBOARD
	  selection (not only PRIMARY selection) is added.

	* tool/mlconfig/main.c, mc_flags.c: "use_clipboard" option is added.

2011-03-11  Araki Ken  <arakiken@users.sf.net>

	* vte.c: palette settings are reflected in vte_terminal_set_colors().

	* x_screen.c: "--initstr" option is prohibited in "mlclient"
	  configuration protocol.

2011-03-09  Araki Ken  <arakiken@users.sf.net>

	* im_iiimf_aux.c: Compilation error is fixed.

	* x_color_cache.c: x_color_cache_256_t.is_loaded is cleared
	  in unloading 256 colors in x_color_cache_unload() instead of
	  x_color_cache_t.is_loaded.

	* vte.c:
	  - Implementation of gdk_color_to_string() is added for gtk+ < 2.12.
	  - Checking if GtkWidget.allocation is a initial one or not is added
	    before x_window_resize() in vte_terminal_fork_command and vte_terminal_forkpty.
	  - If a wall picture is set and 'alpha' option is less than 255,
	    run-time change of 'bg_color' option automatically causes
	    alpha blending of wall picture.

	* x_screen.c: If 'use_transbg' option is unset, screen->pic_mod.alpha
	  is never reset.

2011-03-06  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  - Members of x_main_config_t is not changed dynamically.
	  - gtk_widget_set_rc_style is used instead of gtk_widget_ensure_style
	    in vte_terminal_init.

	* im_ibus.c:
	  - RGB of foreground or background of IBusAttribute is not used,
	    but if background of IBusAttribute is specified, ML_FG_COLOR and ML_BG_COLOR
	    are reversed in update_preedit_text().
	  - DBus functions are used directly in connection_handler(_idling).

2011-03-05  Araki Ken  <arakiken@users.sf.net>

	* im_ibus.c:
	  - im_ibus_get_info() is added.
	  - IBusText->attrs is applied.

2011-03-03  Araki Ken  <arakiken@users.sf.net>

	* inputmethod/ibus: Native iBus support is added. (Experimental)

	* ml_vt100_parser.c: ISO2022 escape sequence which was wrongly parsed by
	  parse_vt100_escape_sequence() in ml_vt100_parser.c is correctly passed to mkf.

	* kik_mem.h: alloca is wrapped by memset(..0xff..) if KIK_DEBUG is defined.

2011-02-27  Araki Ken  <arakiken@users.sf.net>

	* x_imagelib.c: Size of args array in load_file() is fixed from 4 to 6.

	* configure.in:
	  - '\r' which can be output by pkg-config in win32 is removed
	    from GDK_PIXBUF_CFLAGS and GDK_PIXBUF_LIBS.
	  - mlimgloader is not built in win32.

	* mkf_iso2022_parser.c: iso2022_parser->g1_is_decsp = 0 if cs except
	  decsp is set to g1.

2011-02-26  Araki Ken  <arakiken@users.sf.net>

	* tool/mlconfig/po/Makefile.in.in: $(mkinstalldirs) is removed and
	  $(MKINSTALLDIRS) is used directly.
	  (Thanks to Iwamoto Kouichi san)

	* x_screen.c: ml_term_set_modified all_lines_in_screen() is always called
	  in x_screen_attach() regardless of result of update_special_visual().

	* ml_term.c, ml_screen.c: Meaning of return value of
	  ml_term_update_special_visual() and ml_screen_delete_logical_visual()
	  is changed.

2011-02-24  Araki Ken  <arakiken@users.sf.net>

	* x_imagelib.c: "/" is appended to LIBMDIR in kik_dl_open().
	    (Thanks to Iwamoto Kouichi san)

	* configure.in: If gdk-pixbuf is linked to mlterm, DLOPEN_LIBM
	  and LIBMDIR macros are never defined.

2011-02-23  Araki Ken  <arakiken@users.sf.net>

	* libtool: version down to 1.5.26

	* x_window.c: x_decsp_font_draw_string() is used instead of
	  x_decsp_draw_image_string() in x_window_draw_decsp_string().
	  (Thanks to Iwamoto Kouichi san)

	* vte.c: Returned value of gdk_screen_get_resolution() is used for DPI
	  of xft font.
	
	* x_font.c: x_font_set_dpi_for_xft() is added.

2011-02-23  Araki Ken  <arakiken@users.sf.net>

	* configure.in, Makefile.in: @DL_LIBS_SB@ is removed from gtk/Makefile.in
	  in order to avoid --version-script=\$(top_srcdir)/xwindow/dexport.map
	  option in building libvte library.

	* version.h.in: 3.0.2 post -> 3.0.3 pre

2011-02-21  Araki Ken  <arakiken@users.sf.net>

	* xwindow/Makefile.in: $(LMLTERM) is moved before $(LMKF) in LIBS1.
	  (This bug causes link error in win32.)

	* configure, aclocal.m4, ltmain.sh: Updated to libtool 2.2.6b.

	* configure.in: 'nm -D libm.so' is used instead of 'objdump -T libm.so'.

2011-02-19  Araki Ken  <arakiken@users.sf.net>

	* kik_debug.c: Wrong modification in 2011-02-08 is fixed.

	* configure.in, xwindow/Makefile.in:
	  - Check if libm is possible to dlopen by 'objdump -T libm.so'.
	  - SYSLIBDIR => LIBMDIR
	  - MATH_CFLAGS and MATH_LIBS are added.

	* x_display.c: x_display_get_visual_info() is added.

	* x_imagelib.c, mlimgloader/main.c: code clean up.

2011-02-18  Araki Ken  <arakiken@users.sf.net>

	* pixmap_engine.c: Common pixmaps are shared by multiple scrollbar views.

2011-02-16  Araki Ken  <arakiken@users.sf.net>

	* x_imagelib.c: Fixed create_cardinals_from_image().

2011-02-13  Araki Ken  <arakiken@users.sf.net>

	* README, doc/ja/README.ja: Updated.

	* tool/mlimgloader/main.c, Makefile.in: Added.
	  mlimgloader which depends on gdk-pixbuf loads image files.
	  If --with-imagelib option is not specified to configure,
	  mlterm uses mlimgloader for wall picture, icon picture and pixmap_engine.

	* xwindow/dexport.map: Added. It specifies dynamic symbols for pixmap_engine.

	* ml_shape.c, ml_logical_visual.c: If USE_FRIBIDI or USE_IND is not defined,
	  related codes are removed in building mlterm binary.

2011-02-08  Araki Ken  <arakiken@users.sf.net>

	* xwindow/Makefile.in: Fixed SF Bug #3158963.
	  (Thanks to Jyun-Yan You)

	* ml_vt100_parser.c: Fixed a bug in previous commit.
	  (Thanks to Iwamoto Kouichi san)

2011-01-29  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c:
	  Unsupported but valid escape / CSI sequence format is correctly ignored.
	  (Thanks to Iwamoto Kouichi san)

	* x_imagelib_win32.c, x_window_win32.c:
	  "wall_picture" option is partially supported in win32.
	  (Supported BMP format only.)

2011-01-09  Araki Ken  <arakiken@users.sf.net>

	* ml_char.c:
	  ML_BOLD_COLOR_MASK is not set for background color.

2011-01-06  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.c:
	  - If beg >= end (not beg > end), ml_edit_set_scroll_region fails.
	  - wraparound is supported in vertical_tabs.

	* ml_vt100_parser.c:
	  - "ESC [ b"(REP) is supported.

	* xwindow/version.h.in: 3.0.2 => 3.0.2 post

2011-01-02  Araki Ken  <arakiken@users.sf.net>

	* 3.0.2 released.
	  (tag "rel-3_0_2")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 3.0.2

	* configure: re-generated

	* pixmap_engine.c: First argument of x_imagelib_load_file() is changed
	  from Display to x_display_t.

	* mc_letter_space.[ch]: Added.

	* etc/main.ja: Updated.

	* x_color_cache.c:
	  x_color_cache_t::is_loaded and x_color_cache_256_t::is_loaded are
	  initialized to zero.

	* vte.c:
	  IS_MLTERM_SCREEN() macro uses PARENT_WINDOWID_IS_TOP() instead of
	  checking win->parent_window is None or not, because win->parent_window
	  is never None in xlib.
	
	* ml_vt100_parser.c:
	  - "ESC [ ! p"(DECSTR) is partially supported.
	  - ml_screen_goto_home() is called with ml_screen_set_scroll_region()
	    in "ESC [ r" sequence.
	
	* ml_edit.c:
	  ml_edit_set_scroll_region() doesn't let cursor go home in order to
	  support DECSTR which resets terminal but doesn't reset cursor position.

2011-01-01  Araki Ken  <arakiken@users.sf.net>

	* gtk/vte.c: vte_terminal_fork_command_full, vte_terminal_search_set_gregex,
	  vte_terminal_search_get_gregex, vte_terminal_search_set_wrap_around,
	  vte_terminal_search_get_wrap_around, vte_terminal_search_find_previous,
	  vte_terminal_search_find_next are added.

	* gtk/Makefile.in: `pkg-config vte --cflags` is used instead of
	  `pkg-config gtk+-2.0 --cflags`

	* x_term_manager.c: SF Bug #3148132 is fixed.
	  (Thanks to Orgad Shaneh)

	* "letter_space" option is added.

	* ml_vt100_parser.c: Minor fixes.

	* x_screen.c:
	  "mlclient(x) -e ..." configuration protocol in vt100 sequence is prohibited.

2010-12-29  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c:
	  "ESC [ r" and "ESC c" reset scrolling region.
	  (Thanks to Iwamoto Kouichi san)

2010-12-28  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.c:
	  - 'use_bce' flag is managed in ml_edit.c, not in ml_screen.c.
	  - Bug which disabled vttest 11.4.5 are fixed.

	* ml_edit_util.c:
	  Bug which disabled vttest 11.4.6 are fixed.

	* ml_screen.c:
	  "|()[]{}" is added to default value of word_separators option.

2010-12-25  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  - vte_terminal_set_word_chars is implemented.
	  - vte_terminal_match_add_regex and vte_terminal_match_check are partially implemented.
	  
	* button3_behavior option accepts "mlclient -e w3m", "/usr/bin/emacs" and so on.
	  In this case, specified program which gets selected text as arguments
	  starts when button3 is clicked.

	* word_separators and button3_behavior options are possible to change by
	  configuration protocol.

	* kiklib/src/Makefile.in:
	  MINOR = 0 => MINOR = 1

	* kik_args.[ch]: kik_arg_str_to_array is added.

2010-12-20  Araki Ken  <arakiken@users.sf.net>

	* x_sample_sb_view_win32.c, x_sample_sb_viwe_lib_win32.c:
	  Wrong arguments of x_get_icon_pixmap are fixed.

	* x_imagelib_win32.c: Wrong argument of x_imagelib_load_file is fixed.

	* x_window_win32.c: x_set_window_name is partially implemented.

2010-12-18  Araki Ken  <arakiken@users.sf.net>

	* x_color.c: fall-backs code for "black"/"white" (see 2006-03-14 ChangeLog)
	  is removed because color_cache->black is loaded by rgb, not "black".

	* doc/ja/README.ja, man/mlterm.1: Minor fixes.

2010-12-16  Araki Ken  <arakiken@users.sf.net>

	* x_im_{candidate|status}_screen.c:
	  x_window_set_xft is added to x_window_t::realized event handler.

	* x_display.c: Minor fixes.

	* x_window.c, x_window_win32.c:
	  Double buffering code is removed.

2010-12-15  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  If visual of parent window is not default one, visual, colormap and depth
	  attributes from parent window are set to x_display members.

	* scrollbar/sample, contrib/scrollbar/extra, contrib/scrollbar/pixmap_engine:
	  visual, colormap and depth are obtained from window attributes.

	* x_window.c:
          - Type of {fg|bg}_color members is changed from u_long to x_color_t.
	  - x_window_set_xft function which creates or destroys xft_draw member
	    of x_window_t is added.
	  - XCreateWindow is used instead of XCreateSimpleWindow in order to
	    specify visual and colormap.
	  - XftDrawRect is used instead of xlib functions in xft mode.
	
	* x_color.c, x_color_win32.c, x_color_cache.c, x_imagelib.c:
	  x_display_t is used instead of Display in order to use visual, colormap and
	  depth of x_display_t.

	* x_display.c:
	  visual, colormap and depth are managed in x_display_t.

	* x_term_manager.c, x_display.c, doc/ja/README.ja, man/mlterm.1:
	  'depth' option is added.

	* x_gc.c:
	  DefaultGC is used in x_gc_new if drawable is not specified.
	
	* x_color.c, ml_color.c:
	  - alpha is processed.
	  - "rgba:RR/GG/BB/AA" or "#RRGGBBAA" format is supported.

	* gtk/INSTALL: Minor fixes.

2010-11-28  Araki Ken  <arakiken@users.sf.net>

	* version.h.in:
	  3.0.1 post -> 3.0.2 pre

	* vte.c:
	  - vte_terminal_key_press is added.
	  - "encoding-changed" signal is supported.
	  - Minor fixes.

2010-11-25  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: Hidden value "none" is added to button3_behavior option.

	* vte.c:
	  - Button and key signals to enable popup menu of gnome-terminal, roxterm and etc
	    are supported.
	  - vte_terminal_get_has_selection is implemented.
	  - vte_terminal_reset is partially implemented.
	  - vte_terminal_get_text, vte_terminal_get_text_include_trailing_spaces,
	    vte_terminal_get_text_range and vte_terminal_match_check return NULL
	    instead of "".
	  - gtk_widget_queue_resize_no_redraw in processing ConfigureNotify event
	    in vte_terminal_filter is removed. (Fixed a problem of resizing gnome-terminal.)

2010-11-21  Araki Ken  <arakiken@users.sf.net>

	* vte.c: Value of type_engine option can be specified in ~/.mlterm/main
	  in vte compatible library.

	* reaper.c: #include <gtk/gtktypeutils.h> is added.

2010-11-19  Araki Ken  <arakiken@users.sf.net>

	* vte.c: "window-title-changed" / "icon-title-changed" signals and
	  "window-titel" / "icon-title" properties are supported.

	* gtk/Makefile.in: x_simple_sb_view.lo is removed.

	* x_font_cache.c: Call of kik_map_new_with_size() is collected to xfont_table_new().

2010-11-10  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  term_type static variable and TERM_TYPE macro are removed
	  and main_config.term_type is used instead.

	* doc/en/PROTOCOL, man/mlterm.1, doc/ja/README.ja:
	  Explanation about "bidi_mode" is added.
	
	* ml_bidi.[ch], ml_line.[ch], ml_logical_visual.[ch], ml_term.[ch],
	  ml_term_manager.[ch], x_main_config.[ch], x_screen.c, x_term_manager.c:
	  "bidi_mode" option is added.

	* x_font.c: get_xft_col_width() is rewritten.

2010-10-27  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  - If backscroll mode is BSM_STATIC, GtkAdjustnemt::value
	    is not changed when line is scrolled out.
	  - gtk_widget_queue_resize_no_redraw() is added to vte_terminal_size_allocate()
	    because gnome-terminal(2.29.6) isn't resized correctly without it.
	  - Following functions are implemented.
	    vte_terminal_select_all
	    vte_terminal_select_none
	    vte_terminal_set_color_cursor
	    vte_terminal_get_emulation
	    vte_terminal_get_default_emulation
	    vte_terminal_get_window_title
	    vte_terminal_get_icon_title

	* gtk/INSTALL: Unsupported vte api functions, signals and property
	  are enumerated.

	* x_imagelib.c: Checking if *file_path is '\0' or not is added to
	  x_imagelib_load_file_for_background() because following
	  strncmp( "" , "pixmap:" , 0) can return 0.

2010-10-22  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  - VteTerminal doesn't catch x_system_event_listener_t::pty_closed
	    but ml_pty_event_listener_t::pty_closed event.
	  - vte_terminal_set_background_saturation() is implemented.
	  - Minor fixes.

	* x_imagelib.c: GdkPixbuf which load_file() returns is copyed before
	  modify_image.
	
	* ml_term.c: ml_term_zombie() is added.
	
	* ml_term_manager.c: ml_term_manager_enable_zombie_pty() is added.

2010-10-15  Araki Ken  <arakiken@users.sf.net>

	* x_font.c: x_font_use_point_size() is added.

	* vte.c:
	  - configure_toplevel() is added to process ConfigureNotify event
	    of top level window for transparency.
	  - vte_terminal_set_opacity() is implemented.
	  - kik_sig_child_init is not called. VteReaper is used to manage child
	    process instead.
	  - vte_terminal_forkpty() returns 0 for child process.
	  - vte_terminal_hierarchy_changed() is added.
	  - x_font_use_point_size(1) is called in vte_terminal_class_init().
	
	* reaper.c: Added.

	* configure.in:
	  - SYSLIBDIR is added.
	  - USE_IMAGELIB => USE_EXT_IMAGELIB

	* x_window.c: MapNotify is ignored.

	* x_imagelib_none.c, x_imagelib_gdk => x_image_lib.c
	  - x_imagelib_get_transparent_background() is supported without
	    gdk-pixbuf. (alpha option is enabled not only in win32 but
	    also in xlib.)
	  - Cashing mechanism in x_imagelib_load_file_for_background() and
	    x_imagelib_get_transparent_background() is mostly moved to x_picture.c.

	* x_picture.h: blend_color => blend_red, blend_green and blend_blue.
	
	* x_picture.c:
	  - x_picture_modifiers_equal() is added.
	    Then, x_picture_modifier_is_normal() is rewritten as macro using
	    x_picture_modifiers_equal(), and is_picmod_eq() in x_imagelib.c
	    is removed.
	  - x_bg_picture_init(), x_bg_picture_final(), x_bg_picture_load_file(),
	    x_bg_picture_get_transparency()
	    => x_acquire_bg_picture(), x_release_bg_picture()

2010-10-04  Araki Ken  <arakiken@users.sf.net>

	* x_window.c:
	  - XCheckTypedWindoEvent is used instead of XCheckMaskEvent
	    in x_window_receive_event.
	  - Checking win->wall_picture_is_set is removed in
	    x_window_unset_wall_picture().
	  - x_window_resize_with_margin() checks if width or height is larger
	    than win->margin * 2.
	  - Fixed wrong definition of IS_INHERIT_TRANSPARENT macro.
	  - x_window_enable_inherit_transparent() is added.

	* kiklib/src/Makefile.in: increased MAJOR version. (11->12)

	* kiklib/src/kik_pty*:
	  - slave_name is removed from arguments of kik_pty_fork().
	  - kik_pty_helper_close and kik_pty_helper_set_flag functions
	    are added.
	
	* kiklib/src/kik_pty_helper.c: Added for gnome-pty-helper.

	* kiklib/configure.in:
	  - --enable-pty-helper option is added.
	  - recvmsg, setpgid and socketpair are checked.

	* gtk/vte.c:
	  - vte_terminal_forkpty is not called in vte_terminal_realize().
	  - vte_reaper_get and vte_reaper_add_child functions are added.
	  - width and height members of x_window_t are set if GtkWidget
	    is not still realized in vte_terminal_set_font_from_string().
	  - "inner-border" property is available.
	  - vte_terminal_size_allocate() is fixed.

2010-09-25  Araki Ken  <arakiken@users.sf.net>

	* x_window.c: XK_Num_Lock is added to default_keysyms in
	  x_window_get_mod_ignore_mask() to fix SF Bug #3072833
	  which was caused by 2010-06-03 fix.
	  (Thanks to Andreas Metzler)

2010-09-24  Araki Ken  <arakiken@users.sf.net>

	* kik_utmp_sysv.c, gtk/INSTALL: Minor fixes

2010-09-23  Araki Ken  <arakiken@users.sf.net>

	* kik_pty_streams.c: '#if && defined(I_PUSH)' is added at ioctl( .. I_PUSH .. ).
	
	* kik_utmp_sysv.c (kik_utmp_new):
	  - setut(x)ent() is moved after kik_priv_restore_egid() from before it.
	    (putut(x)line() could fail without this fix.)
	    (SF Bug #3051467, Thanks to David Kolovratnik)
	  - kik_priv_change_egid(getgid()) is called not only if pututxline()
	    succeeds but also if it fails.
	  - endut(x)ent() is called after putut(x)line().
	  - ut.ut_session = getsid(0) is added.

	* gtk/INSTALL: Added

	* gtk/mlvte.h, mlvte-in.c, mlvte-ex.c, main.c: Removed

	* USE_IMLIB, USE_GDK_PIXBUF => USE_IMAGELIB

2010-09-22  Araki Ken  <arakiken@users.sf.net>

	* vte.c: vte_terminal_set_alternative_screen_scroll() function
	  (which is empty yet) is added.
	  (Thanks to Usama Akkad)

	* x_imagelib_none.c: cleanup

	* gtk/Makefile.in: '-lX11' is added to 'gmlterm-in' and 'gmlterm-ex'
	  targets. (Thanks to to Hicham Haouari)

	* xwindow.c:
	  Code related to Pseudo transparency (especially around ParentRelative
	  transparency) is cleaned up.
	  PropertyNotify of "_XSETROOT_ID" is supported.
	
2010-09-22  Araki Ken  <arakiken@users.sf.net>

	* Imlib support is dropped.
	  x_imagelib_imlib.c and x_imagelib_imlib2.c: Removed
	  configure.in and configure: 'imlib' is removed from value of
	    --with-imagelib option. (To tell the truth, 'imlib' is still
	    possible to specify as a value of --with-imagelib option if
	    x_imagelib_imlib.c file is revived.)
	  README, README.ja, mlterm.1, mlterm.spec: Updated

	* gtk-1.x support is dropped.
	  mc_font.c, gtkxlfdsel.c, tool/mlconfig/main.c mlterm-menu.c:
	    Anything related to gtk-1.x is removed.
	  configure.in: gtk-1.x is not supported.
	  README, README.ja, mlterm.1: Updated
	
2010-09-20  Araki Ken  <arakiken@users.sf.net>

	* vtetypebuitins.c: Added

	* vte.c:
	  vte_terminal_set_{backspace|delete}_binding() are implemented.
	  
2010-09-19  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  adj_value_changed_by_myself is set to 1 in line_scrolled_out(),
	  otherwise bidi text is not correctly drawn.
	  (Thanks to Usama Akkad)
	
	* tool/mlconfig/Makefile.in
	  -lX11 is added to LIBS2 variable.
	  (Thanks to Hicham Haouari)

2010-09-18  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  pango_font_description_to_string() is used in vte_terminal_set_font().
	
2010-09-18  Araki Ken  <arakiken@users.sf.net>

	* vte.c:
	  Font and color configuration protocol updates font setting immediately.
	  Pressing button3 opens menu whose items are still just "Copy" (which copys
	  selected text to clipboard) and "Paste".

2010-09-16  Araki Ken  <arakiken@users.sf.net>

	* gtk/marshal.[ch], vte.c: Added for vte compatible api.

	* man/mlterm.1, doc/ja/README.ja: updated

	* "default" value which makes mlterm follow default setting
	  of anti-alias is added to "use_anti_alias" option.
	  If -A option is not specified in startup, the value of
	  "use_anti_alias" is "default" by default.
	  If you want to disable anti alias explicitly, specify
	  "use_anti_alias=false" or -A=false.

	* scim/im_scim_mod_if.c, im_scim.cpp: code clean up.

	* ml_color.c: Fixed a bug of shifting 16 bit color to 8 bit
	  in ml_color_parse_rgb_name(). (">> 4" => ">> 8")

	* ml_vt100_parser.c: Check of VTE_CJK_WIDTH environment is added
	  (but disabled for now).

	* x_screen.[ch]: x_screen_get_config is removed (not public).

2010-09-01  Araki Ken  <arakiken@users.sf.net>

	* x_im_candidate_screen.c, x_im_status_screen.c: Fixed a bug of argument of
	  x_display_show_root().
	  (SF Bug #3051467, Thanks to Khaled Hosny)

	* man/mlterm.1, doc/ja/README.ja: parent_window option is added.

	* gtk/Makefile: Renamed to Makefile.in
	
	* gtk/mlvte-in.c: Added. It wraps xwindow/x_screen.c.
	
	* gtk/mlvte.c: Renamed to mlvte-ex.c

2010-08-16  Araki Ken  <arakiken@users.sf.net>

	* gtk/main.c: Wrong arguments of g_signal_emit_by_name( "focus-in-event" ... ) are fixed.

	* gtk/mlvte.c: sig_int() is added for SIGINT.
	               waitpid() after fork() is added.

	* mlclient/main.c: If mlterm server is daed, mlclient returns 1 instead of
	  writing "\x1b]5379;mlclient\x07".

2010-07-28  Araki Ken  <arakiken@users.sf.net>

	* mlvte.c: reset_size() is added.

2010-07-27  Araki Ken  <arakiken@users.sf.net>

	* x_window.c: XSetInputFocus() is called in ButtonPress event.

	* x_screen.c, x_display.c: --parent("parent_window") option is added.

	* gtk/Makefile, main.c, mlvte.[ch]: Added.

2010-06-29  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: fg and bg colors of bce character are changed
	  by "ESC[48;5;Xm" sequence. (Thanks to Anonymous bin ich)

	* ml_vt100_parser.c: 0x7f is ignored. (Thanks to Y.Amagai)
	  (see http://vt100.net/docs/vt100-ug/table3-10.html)

2010-06-22  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: Fixed a bug which disabled transparency of mlterm
	  without image library like gdk-pixbuf.
	  (SF Bug #3014219, Thanks to Khaled Hosny)

2010-06-10  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: Fixed a bug which disabled delete key in win32.
	
	* ml_char.c: 'is_comb' flag check which destroys Lam Alef ligature
	  is excluded in ml_char_combine.
	  (SF Bug #3012762, Thanks to Khaled Hosny)
	
	* xwindow/version.h.in: 3.0.1 => 3.0.1 post

2010-06-07  Araki Ken  <arakiken@users.sf.net>

	* 3.0.1 released.
	  (tag "rel-3_0_1")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 3.0.1

	* configure: re-generated

2010-06-06  Araki Ken  <arakiken@users.sf.net>

	* x_win32.h: XK_Begin, XK_KP_Begin and IsKeypadKey macros are added
	  for win32.

	* etc/termcap: kh and @7 definitions are added to "xterm" and "*".

	* x_screen.c: Fixed a bug which disabled keyboard input in application
	  keypad mode.

2010-06-03  Araki Ken  <arakiken@users.sf.net>

	* x_font.c: Returned value of get_cs_info() is checked.

	* x_screen.c:
	  Modifier keys with Del/Home/End are distinguished.
	  The keypad middle key (XK_Begin, XK_KP_Begin) is mapped to ^[[E, ^[[1;5E etc.
	  (SF Bug #2818015, Thanks to Thomas Wolff)

	* x_screen.c: If Num_Lock is pressed, application keypad is ignored.
	
	* x_window.c: XK_Num_Lock is not ignored in XModifierKeymap by default.

2010-05-23  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, doc/ja/README.ja: Updated.

	* x_screen.c: The default value of button3_behavior option is changed
	  from "menu1" to "xterm".

	* x_screen.c: Release events for the wheel buttons are not reported.
	  (SF Bug #2818018, Thanks to Thomas Wolff)

2010-05-22  Araki Ken  <arakiken@users.sf.net>

	* xwindow/version.h.in: 3.0.0 post -> 3.0.1 pre

	* mc_flags.c: "Ambiguouswidth = fullwidth (UTF8 only)" checkbox
	  is added for "col_size_of_width_a" option.

	* x_screen.c: "col_size_of_width_a" option is added to configuration protocol.

	* x_screen.c: Screen is redrawn in selection_cleared().

2010-05-19  Araki Ken  <arakiken@users.sf.net>

	* Performance of 256colors2.pl(1999/07/11 version) is improved by reducing
	  number of redrawing screen in "\x1b]4;%d;rgb:..." seqeunce. (Thanks to
	  Konosuke Watanabe san.)
	  (set_{font|color}_config in x_term_manager.c are moved to x_screen.c, and
	  {font|color}_updated which are called from stop_vt100_cmd() in x_screen.c
	  are added to x_term_manager.c.)

2010-05-08  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: "ESC[9Nm" and "ESC[10Nm" sequences are supported.

	* x_color_cache.c: get_cached_vtsys_xcolor() returns colors compatible
	  with xterm.

	* x_screen.c: Even if screen is not selection owner, "selected_text"
	  protocol returns former value.

2010-05-05  Araki Ken  <arakiken@users.sf.net>

	* --button3/button3_behavior option is added.
	  Now pressing button3 shows conf_menu_path_1 program (mlterm-menu)
	  like gnome-terminal by default except in win32. If "xterm" is
	  specified as a value of this option, pressing button3 works like
	  xterm as before.

	* mlterm-menu.c: "Copy" and "Paste" menus are added.
	  "Copy" copys selected text to clipboard.
	  "Paste" works like INSERT_SELECTION.

	* x_screen.c: "selected_text" and "paste" options are added
	  to configuration protocol.

	* ml_term.c: revert_visual argument is added to ml_term_unhighlight_cursor().
	  If revert_visual is 0, ml_term_unhighlight_cursor() leaves ml_term_t logical.
	  start_vt100_cmd functions in x_screen.c and ml_vt100_parser.c are also fixed.

2010-04-29  Araki Ken  <arakiken@users.sf.net>

	* ml_char.c: ML_WHITE | ML_BOLD_COLOR_MASK is used to replace
	  0xe7 color internally instead of ML_WHITE.

	* x_color_cache.h: x_color_cache_256_t is added for caching
	    all 256 colors.
	  x_color_cache.c: Fixed.

	* x_color.h: x_color_t structure is defined instead of
	    typedef X(ft)Color x_color_t in order to shrink x_color_t size.
	  x_color.c: Fixed.

	* man/mlclient.1, man/mlterm.1:
	  Merged id:2988801 patch. (Thanks to Ahmed El-Mahmoudy)

2010-04-17  Araki Ken  <arakiken@users.sf.net>

	* configure.in, mkf/Makefile.in, tool/mlclient/Makefile.in:
	  Merged id:2987646 patch. (Thanks to Ahmed El-Mahmoudy)

	* ml_vt100_parser.[ch]: xterm_listener->start or xterm_listener->stop
	  event is called once from ml_parse_vt100_sequence().
	  Maximum size read from pty in ml_parse_vt100_sequence() is increased
	  from PTY_RD_BUFFER_SIZE to PTY_RD_BUFFER_SIZE * 3.

	* xwindow/version.h.in: 3.0.0 -> 3.0.0 post

2010-04-10  Araki Ken  <arakiken@users.sf.net>

	* 3.0.0 released.
	  (tag "rel-3_0_0")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 3.0.0

	* configure: re-generated

	* x_sb_view_factory.c: If mlterm is not built with -export-dynamic option,
	  functions related to pixmap_engine are removed from x_sb_view_factory.c.
	
	* x_sb_view.c: ver0_color_changed which is a wrapper function of version 0
	  library calls x_sb_view_ver0_t::draw_decoration for update_color of motif.c.
	
	* ml_line.c: if LTR-base is changed to RTL-base, line is redrawn in
	  ml_line_bidi_render().

2010-04-04  Araki Ken  <arakiken@users.sf.net>

	* man/mlterm.1, doc/ja/README.ja, doc/en/README.win32, doc/ja/README.win32:
	  Updated
	
	* x_main_config.c: -d/--display option is removed in win32.

	* ml_vt100_parser.c: Fixed a bug which treated VPR as VPB wrongly. (See
	  http://slashdot.jp/~doda/journal/503828 in detail.)
	  VPB and HPB sequences are supported.

	* configure.in, version.h.in, x_term_manager.c: CVS_REVISION is replaced
	  by CHANGE_DATE. mlterm -v shows "mlterm version N.N.N pre(or post)/YYYY-MM-DD".

2010-04-01  Araki Ken  <arakiken@users.sf.net>

	* tool/mlconfig/mc_font.c, gtkxlfdsel.c: If G_PLATFORM_WIN32 is defined,
	  GtkXlfdSelection is not used.

2010-03-31  Araki Ken  <arakiken@users.sf.net>

	* doc/en/PROTOCOL: Fixed.

	* doc/en/README.win32, doc/ja/README.win32: Updated.

	* tool/mlclient/Makefile.in: mlclientx command is added.
	
	* tool/mlclient/main.c: mlclient tries "\x1b]5379;mlclient...\x07" sequence
	  if mlterm server is dead.

	* x_display_win32.c: kik_file_set_cloexec(Display::fd) is added.

2010-03-28  Araki Ken  <arakiken@users.sf.net>

	* tool/mlconfig/gtkxlfdsel.[ch]: Added. GtkXlfdSelection which is ported from
	  gtkfontsel.[ch] in GTK+-1.2.10 shows XLFD font in GTK+ >= 2.0.
	  mc_font.c: Fixed around gtkxlfdsel.[ch].

	* kik_utmp_sysv.c: /dev/ttypN format is supported.

	* configure.in, tool/mlconfig/Makefile, contrib/tool/mlterm-menu/Makefile: Fixed.

2010-03-21  Araki Ken  <arakiken@users.sf.net>

	* README: updated.

2010-03-20  Seiichi SATO  <seiichi@pylone.jp>

	* ml_pty.c: add missing #include <kiklib/kik_utmp.h>

	* scim: drop support for scim-1.2

2010-03-17  Araki Ken  <arakiken@users.sf.net>

	* xwindow/Makefile.in, tool/mlconfig/Makefile.in, x_sb_view_factory.c, mc_sb_view.c:
	  DATADIR macro is renamed to XDATADIR to avoid conflicting with DATADIR
	  structure in w32api/objidl.h.

	* "static_backscroll_mode" option is added to configuration protocol.
	  ('set' only)

	* "open_screen" configuration protocol or Ctrl+F1 opens a new
	  screen in the display which the screen where it is executed
	  belongs to.

	* scrolled_out_lines_finished event is added to ml_edit_scroll_event_listener_t.
	  If ml_screen_set_modified_all() is called in receive_scrolled_out_line event
	  in which ml_model_t is not scrolled yet, redrawing screen can fail.

	* --maxptys option which specifies maximum number of ptys to open
	  simultaneously is added.

	* 'mlclient <prefix options> <options>' and 'mlclientx <prefix options> <options>'
	  are supported in configuration protocol. (see doc/en/PROTOCOL.)

	* x_screen instead of x_display and x_window manages an icon picture.

	* x_picture.[ch]: x_icon_picture_t and related functions are added.

	* etc/main.ja: Updated.

	* doc/en/README.win32, doc/ja/README.win32: Updated.

	* doc/term/mlterm.ti: colors#8 => colors#256

	* doc/term/mlterm.tc: Co#8 => Co#256

	* x_main_config.c: -I/--icon option is removed in win32.

2010-02-28  Araki Ken  <arakiken@users.sf.net>

	* x_term_manager.c: -pw option of plink is specified only with SSH in
	  open_pty_intern().

	* x_term_manager.c: 'init_str' is output after open_pty_intern() in
	  open_screen_intern().

	* tool/accessories/Makefile, README.ja, google.sh: Fixed.
	  tool/accessories/viewsfml.sh: Removed.

	* */Makefile.in: Remove @X_PRE_LIBS@ because mlterm doesn't depend on them.

	* mkf/libtbl/table/mkf_ucs_property.table, mkf_ucs4_unified_hangul_to_uhc.table:
	  Removed. (2009/12/30 commit failure.)

	* doc/en/README.win32, doc/ja/README.win32: Fixed.
	
2010-02-26  Araki Ken  <arakiken@users.sf.net>

	* tool/mlconfig/main.c, contrib/tool/mlterm-menu/mlterm-menu.c:
	  kik_set_sys_conf_dir(".") in win32 without cygwin or msys.

	* winrs.rs: ',' is added after label text. (Fixed syntax error).
	
	* configure.in: If CC="cc -mno-cygwin" in cygwin, $(OBJ) contains
	  x_connect_dialog.o.

	* tool/mlmenu/main.c: Fixed.

	* tool/mlmenu/menu-simple: Added for mlmenu.

	* x_sb_screen.c: button_pressed event is dispatched to x_screen.c in win32
	  because WM_MOUSEWHEEL message is sent to root window.

	* x_win32.h: Use VK_SHIFT, VK_CONTROL and VK_MENU for XK_Shift_L, XK_Control_L and
	  XK_Alt_L instead of VK_LSHIFT, VK_LCONTROL and VK_LMENU.

	* mkf/script/config.guess, kiklib/script/config.guess,
	  script/config.guess: updated (timestamp='2009-12-30')

	* mkf/script/config.sub, kiklib/script/config.sub,
	  script/config.sub: updated (timestamp='2010-01-22')
	
	* doc/en/README.win32,doc/ja/README.win32,README.ja,mlterm.1,README.server: Updated.

	* PROTOCOL.color, README.fontproto: Fixed.

	* contrib/tool/mlcc/main.c: Help messages are shown by -h or --help option.

2010-02-23  Araki Ken  <arakiken@users.sf.net>

	* x_dnd_win32.c: Added for supporting simple drag and drop in win32.

	* x_dnd.c: "src[len-1] = '\0'" in parse_mlterm_config() is removed and
	  strchr() is used instead of while() loop in parse_text_uri_list() because
	  XGetWindowProperty() always allocates one extra byte in prop_return and
	  sets it to zero. (Thanks to Kouichi Kusanagi san)

	* x_window_win32.c: WM_MOUSEHWEEL message is processed. (Not tested yet.)

	* mkf_utf16_parser.c: Fixed typo. (Renamed utf16_parser_init() to
	  utf16le_parser_init() in mkf_utf16le_parser_new().)

2010-02-20  Araki Ken  <arakiken@users.sf.net>

	* scrollbar/*/Makefile.in, inputmethod/*/Makefile.in: Target library names
	  are renamed to 'lib[name].la'.

	* x_term_manager.c,mlclient/main.c: Merged id:1574764 patch(fixed a little).
	  Unix domain socket file is changed from /tmp/.mlterm-[UID] to ~/.mlterm/socket.
	  (Thanks to Christian Biere)

	* ml_config_proto.c: "~/.mlterm" directory is created before ml_gen_proto_challenge()
	  in ml_config_proto_init().
	
	* kik_conf_io.c: kik_fopen_with_mkdir() is used in kik_conf_write_open().
	
	* kik_file.c: kik_fopen_with_mkdir() and kik_mkdir_for_file() are added.

2010-02-18  Araki Ken  <arakiken@users.sf.net>

	* x_dnd.c: Merged id:2879800 patch(fixed a little). (Thanks to Kouichi Kusanagi san)

2010-02-17  Araki Ken  <arakiken@users.sf.net>

	* tool/mlconfig/mc_font.c: my_gtk_font_selection_dialog_set_font_name()
	  doesn't escape '-' in win32.

	* x_font.c, x_font_win32.c: A bug which can cause buffer overrun in
	  parse_(xft_)font_name() is fixed. (e.g. If "Hoge L" is passed to old
	  parse_(xft_)font_name() as font name, then
	  if( strncasecmp( p(=="L") , "light" , K_MIN(1,5)) == 0) becomes true and
	  "p += 5" (not "p += 1") is processed.

	* etc/font.win32: Added.

	* README.dev: Removed.

2010-02-14  Araki Ken  <arakiken@users.sf.net>

	* kik_file.c: If a file which doesn't end with '\n' is read, '\0' is appended
	  to the end of file in kik_file_get_line(). Configuration files which don't
	  end with '\n' is treated correctly by this.

	* mc_font.c: If "Variable column width" check box is toggled, font name entry
	  is reset.

	* kik_map.h: kik_map_erase_simple() is added.

	* x_mod_meta_mode.c, x_sb_mode.c, x_bel_mode.c: Simplified.

	* x_scrollbar.c: x_window_update( ..., FGCOLOR_CHANGED|BGCOLOR_CHANGED) is
	  called after sb->view->realized() in x_scrollbar_(un)set_transparent and
	  x_scrollbar_change_view.

	* x_screen.c:
	  If specified picture is loaded successfully, screen->pic_file_path retains
	  in spite of failure of x_window_set_transparent() in set_wall_picture().

	* x_window_win32.c:
	  Sound and visual bell are supported.
	  x_window_bell() is implemented.
	  x_window_fill_all() is renamed to x_window_blank() and implemented.

	* doc/ja/README.fontproto: Added.

	* x_gc_new() in x_gc.c: Fixed a bug which makes background color
	  forcibly black until color except white is spcified.

	* x_font_config.c: Fixed. "DEFAULT" key is avaiable.
	  
	* x_color_config.c: Fixed.

2010-02-05  Araki Ken  <arakiken@users.sf.net>

	* x_font_config.c:
	  Fixed vaafont and taafont file names("vaafont_file" => "vaafont",
	  "taafont_file" => "taafont") and some bugs.

	* x_font_manager.c: If you set type_engine=xcore in anti-aliased,
	  use_anti_alias automatically becomes false in order for type_engine
	  option to be xcore.

	* mlcc/main.c: Font and color configuration protocol is supported in
	  non-interactive mode.
	  ex) mlcc font ISO8859_1 *--%d-*-iso8859-1
	      mlcc font ISO8859_1,12

	* mlcc/main.c,w3mmlconfig/section/appearance: type_engine option is
	  supported.

2010-01-30  Araki Ken  <arakiken@users.sf.net>

	* x_display.c: "#include <X11/Xproto.h>" which causes compiling error
	  in cygwin-xlib is removed.

	* setup-msys.bat, setup-cygwin.bat: Added. These batch files create
	  mlterm.bat which starts mlterm.exe in MSYS or Cygwin.

	* x_sb_view_factory.c: Careless mistakes in dlsym_sb_engine_new_func
	  which causes failure of loading pixmap_engine module.

2010-01-28  Araki Ken  <arakiken@users.sf.net>

	* winrs.rs,x_display_win32.c: mlterm-icon-win32.ico is loaded as icon of mlterm.exe.

	* contrib/icon/mlterm-icon-win32.ico: Added.

	* Bidi rendering using fribidi is supported in win32.

	* configure.in: 'pkg-config fribidi' instead of 'fribidi-config' is supported.

2010-01-25  Araki Ken  <arakiken@users.sf.net>

	* winrs.rs: Input characters of password entry is masked.

	* x_connect_dialog.c,winrs.rs,x_term_manager.c:
	  Format of default_server(--serv) and server_list(--servlist) options
	  is changed.
	  (<user>@)(<protocol>:)<server> => (<user>@)(<protocol>:)<server>(:<encoding>)

	* x_display.c: If BadValue error happens in XLoad(Query)Font function,
	  mlterm doesn't stop(Thanks to Hirose Masaaki san).

	* ml_char_encoding.c: If -E/--km/encoding option is "AUTO" or not specified,
	  encoding is set UTF8 regardless of kik_get_codeset() in mlterm built with
	  MSYS-DTK or Cygwin.

2010-01-16  Araki Ken  <arakiken@users.sf.net>

	* version.h.in: 2.9.4 post XXX => 3.0.0 pre XXX

	* man/mlterm.1: Updated.
	
	* doc/en/README.win32: Added.

	* x_term_manager.c: Fixed a bug around SendMessage(WM_CLOSE) which
	  causes mlterm (win32 GUI) to dump core in exiting if fade_ratio
	  is less than 100.
	  
	* x_font_win32.c: ':[percentage]' format of ~/.mlterm/font font name
	  is validated. And width of each font is adjusted to that of US-ASCII
	  font if at all possible.

2010-01-13  Araki Ken  <arakiken@users.sf.net>

	* x_window_win32.c: US_ASCII characters in utf8 encoding are shown
	  as unicode. (They are converted to UTF16 in x_window_draw_{image_}string.)

	* button_motin in x_scrollbar.c: A bug in button_motion() which leaves
	  garbage in scrollbar area if you grab and move scrollbar is fixed.

	* x_display_win32.c, x_window_win32.c, x_xic_win32.c, x_win32.h:
	  Characters are received as UTF16 by WM_IME_CHAR message if UTF16_IME_CHAR
	  macro (which is defined by default) is defined.

	* x_screen.c: Memory leak of font_name in get_font_config() is fixed.

	* x_font_win32.c: Double drawing method is used by default to draw
	  bold characters.

	* parse_{xft_}font_name() in x_font{_win32}.c: "Oblique", "Light",
	  "Semi-bold", "Heavy" and "Semi-condensed" are acceptable in
	  Xft and win32 font name.

	* mlconfig/mc_font.c:
	  If font size is changed, new_fontname_list is reset.
	  If font name of selected charset is empty and "select" button is
	  pressed, default font name in font selection dialog is set by
	  selected font size and charset.

	* x_font_manager.c: usascii_font_cs_table follows ml_char_encoding_t
	  in ml_char_encoding.h.

	* README.sb: Updated.

2009-12-31  Araki Ken  <arakiken@users.sf.net>

	* xwindow/Makefile.in: 'winres' is renamed to 'winrs'.

	* output_separated() in ucs_mappings.pm: The way of outputting
	  "static ${fromcs}_to_${tocs}_table_t ${fromcs}_to_${tocs}_tables[]"
	  is fixed. According to this, some mkf/libtbl/table/mkf_*.table's are
	  also fixed.

2009-12-30  Araki Ken  <arakiken@users.sf.net>

	* CP1250,CP1252,CP1253,CP1254,CP1256,CP1257,CP1259 related codes are
	  added to mkf. (Binary compatibility is broken.)

	* 'daemon_mode = genuine' is rejected (only 'blend' is accepted) in win32.

	* mkf_utf16_{parser|conv}.c: Processing surrogate pair is fixed.

	* x_draw_str.c: convert_ucs4_to_utf16 which is used to convert
	  ucs4 code to XChar2b(Xlib) or WCHAR(win32) is added.

	* ucs property table(mkf): Updated and data structure is changed.
	  mkf/libtbl/mkf_ucs_property.c,table/mkf_ucs_*_property.table
	  (which becomes libmkf_ucsprop.la) are removed and
	  mkf/lib/table/mkf_ucs_property.table(statically linked to libmkf.la)
	  is added.

	* mkf/libtbl/table/mkf_*.table: Shrunk.

	* mkf/table: Scripts which generates mkf tables are added.

2009-12-11  Araki Kena  <arakiken@users.sf.net>

	* mkf_tblfunc_loader.h: 'kik_dl_open( "" , libname)' is added to
	  mkf_map_func2 and mkf_prop_func.

	* mkf/mkf_utf16_conv.c: use_bom member is added to mkf_utf16_conv_t
	  and use_bom is false by default.

	* x_window_win32.c: text_out function which outputs text
	  by TextOutW or TextOutA appropriately is added. UCS2 text encoded
	  by UTF8 is supported.
	  
	* ml_term_manager.c: ml_destroy_term() which is used when
	  ml_term_open_pty() fails is added.

	* ml_pty_pipewin32.c: Error handling codes are added in pty_open().

	* /dev/windows is used for waiting for windows messages in msys and
	  cygwin(win32 native GUI). Fixed the problem that mlterm sometimes
	  hung up in GetMessage() when child process exited.

	* mlterm server and mlclient seems to work in msys and cygwin(win32 native GUI).

	* Dialog box to input server, protocol, user name and password
	  is introduced to mlterm built in MinGW.
	  o 'default_server'(--serv) and 'server_list'(--servlist) options
	    which are shown by default in dialog box are introduced.
	  o x_connect_dialog.[ch],winrs.rs: added.

	* Configuration protocol(get) 'gui' which mlconfig uses to determine
	  if mlterm is built with xlib or win32 is added.

	* kik_str.[ch]: kik_count_char_in_str() is added.

2009-11-21  Araki Ken  <arakiken@users.sf.net>

	* kik_conf_io.c: Search %HOME% directory if %HOMEPATH% directory does not
	  exist in win32.

	* tool/mlconfig and contrib/tool/mlterm-menu: Possible to be built with
	  win32 native gtk+-2.0.

	* ml_config_menu.c: Added win32API implementation(which is used when
	  mlterm is bulit without cygwin.dll and msys.dll.).

	* For the first time, a folder in which mlterm is installed is searched
	  for configuration files and menu progurams in win32.

	* x_font_win32.c: Format of font file is changed as follows(() is omittable).
	     [Family] => [Family]( [Weight] [Slant] [Size]:[Percentage])

	* x_window.c: Set is_focus 0 by default in order to call XSetICFocus(x_xic_set_focus)
	  in startup FocusIn event. (If XSetICFocus() is not called, KeyPress event is discarded
	  in XFilterEvent.)

	* Added: win32/mlterm-xcygwin.bat

2009-11-07  Araki Ken  <arakiken@users.sf.net>

	* x_display.[ch]: Added x_display_get_cursor().

	* scrollbar plugin libraries: Removed XDefineCursor and XCreateFontCursor,
	  which are called with shape according to scrollbar name in x_scrollbar.c.

	* kik_locale.c: sys_locale is strdup'ed.

	* x_xic_get_{utf8_}string(x_xic.c): If XBufferOverflow happens, overflowed
	  input string is ignored. This is temporary expedient.

	* ml_pty_delete(ml_pty_pipewin32.c): Moved TerminateProcess() before
	  CloseHandle().

	* ml_vt100_parser.c: If parsing protocol sequence failed, "#error"
	  is returned to pty in config_protocol_get() and config_protocol_get_font().
	  If challenge_it() in ml_config_protocol.c failed, "#forbidden" is returned
	  to pty in config_protocol_get_font().

	* x_term_manager.c: Process is terminated if all mlterm screens are
	  closed in win32.

2009-11-03  Araki Ken  <arakiken@users.sf.net>

	* x_color_manager.c: Merged id:2879623 patch(Thanks to Kouichi Kusanagi).
	
	* x_xic_{fg|bg}_color_changed(x_xic.c): Added ->pixel after
	  win->xim_listener->get_{fg|bg}_color.

	* Added 'get' method to font configuration protocol(doc/en/PROTOCOL.font).
	  Changed font and color configuration protocol numbers(not compatible with
	  cvs-2009/10/20 or before.).

	* mc_font.c: Added font selection dialog.

	* Renamed mc_fontsize.[ch] to mc_font.[ch].

	* "type_engine" configuration is changeable in run time.
	  (Added to configuration protocol(doc/en/PROTOCOL).)
	
	* x_color_manager.c/x_color_cache.c: Color fading was broken. Fixed.

	* Font format of aafont is changed as follows(() is omittable).
	     [Family]-[Encoding](:[Percentage])
	  => [Family]( [Weight] [Slant] [Size]-[Encoding]:[Percentage])

	* ml_parse_proto2(ml_config_proto.c): Fixed process of parsing 'key'
	  and added do_challenge flag.

2009-10-20  Araki Ken  <arakiken@users.sf.net>

	* ml_vt100_parser.c: Recognize "ESC [ > ..." sequence.

	* x_window_win32.c: Added check_scrollable() function to check if
	  window is visible or not when window focus, position or size is
	  changed. And related to this change, is_focused member is added
	  to x_window_t and remove from x_screen_t.

	* doc/ja/README.ja: Added explanation of -*/--type/type_engine option
	  at this late date...

	* x_imagelib_gdk.c,x_imagelib_imlib2.c: Renamed win->display and
	  win->screen to win->disp->display and win->disp->screen.

	* configure.in: Fixed bugs related to imlib2.
	  
	* mkf/lib/Makefile.in: Added "-DLIBDIR=\"$(LIBDIR)\" to CFLAGS.

	* x_term_manager.c: mlterm server related codes are excluded if
	  USE_WIN32GUI is defined.

	* win32/mlterm-msys_cygwin.bat: Added.

	* x_display_win32.c: Added hide_console().

	* configure.in,xwindow/Makefile.in: Added -Wl,--subsystem,console
	  option to CFLAGS for MSYS-DTK and cygwin.

	* kik_pty_streams.c: Added close(0..2) between fork() and setsid()
	  for MSYS-DTK.

	* Added -X/--alpha option(effective in win32).

	* x_window_win32.c: Implemented x_window_{un}set_transparent()
	  (which just uses SetLayeredWindowAttributes()).

	* ml_vt100_parser.c: Added kik_file_set_closexec(vt100_parser->log_file).

	* read_challenge() in ml_config_proto.c: Added fclose( file).

	* x_window_fill{_with}(x_window_win32.c): Added win->margin to x and
	  y position.

	* kiklib/configure.in: kik_dlfcn_win32.c is always used in cygwin
	  regardless of libtool decision.

	* kiklib/kik_locale.c: Added kik_get_codeset_win32() which is used
	  in USE_WIN32GUI.

2009-09-10  Araki Ken  <arakiken@users.sf.net>

	* x_gdiobj_pool.[ch]: Added.

	* scrollbar/sample/x_sample_sb_view{_lib}_win32.c: Added.
	  ('sample' scrollbar in win32.)

	* x_window{_win32}.[ch]: Added x_window_get_{fg|bg}_gc() which is
	  used in x_scrollbar.c.

	* x_sb_view_factory.c:
	  Added hack for source and binary backward compatibility of x_sb_view_t.

	* x_{transparent_}{simple|sample}_sb_view.c: Adujsted to new x_sb_view_t.

	* x_sb_view: Changed members of x_sb_view_t structure for win32.

2009-08-13  KATO Kazuyoshi  <kzys@8-p.info>

	* scrollbar/sample/Makefile.in: Added @KIK_CFLAGS@.
	  (Thanks to AIDA Shinra)

	* contrib/scrollbar/*/Makefile.in: Added @KIK_CFLAGS@.
	  (Thanks to AIDA Shinra)

	* xwindow/x_imagelib_none.c (x_imagelib_get_transparent_background):
	  Follow the changes of x_window_t.
	  (Thanks to AIDA Shinra)

2009-08-06  Araki Ken  <arakiken@users.sf.net>

	* Added imlib2 support(experimental).
	  (Thanks to Frederic Heulin).

	* x_window.c(x_window_receive_event,MotionNotify):
	  Check if button is pressed before win->button_motion is called.
	  (Thanks to shirai hideyuki)

2009-07-29  Araki Ken  <arakiken@users.sf.net>

	* Added: win32/mlterm-win32.bat.

	* README, README.win32: Modified.
	
	* kiklib/src/kik_conf_io.c: kik_get_sys_rc_path() returns SYSCONFDIR\mlterm and
	  kik_get_user_rc_path() returns %HOMEPATH%\mlterm in win32.

	* kiklib/src/kik_util.c: Added kik_getuid() and kik_getgid().

	* x_window_win32.c: win->is_scrollable is 0 in WM_KILLFOCUS and 1 in WM_SETFOCUS.

2009-07-26  Araki Ken  <arakiken@users.sf.net>

	* x_display_win32.c: Implemented x_get_opened_displays().
	  (Could be core dumped in time_proc(x_term_manager.c) without this modification.)

2009-07-26  Araki Ken  <arakiken@users.sf.net>

	* IME Window pursues cursor position.

	* Added: doc/ja/README.win32.

	* Supported multiple pty, startup options and configuration by 'main' file in win32.
	  x_term_manager.[ch], main.[ch] and x_main_config.[ch] are built in win32.
	  x_window_manager*.[ch] are removed and united to x_display*.[ch].
	  Removed: main_win32.c
	  Added: x_display_win32.c
	
	* Ucs property table is separated from libmkf as a shared library.
	  Added: mkf/libtbl/mkf_ucs_property.c and libmkf_ucsprop.la.
	  Moved: mkf/lib/table/mkf_ucs_*_property.table to mkf/libtbl/table/
	  Renamed: mkf/lib/mkf_map_loader.h to mkf_tblfunc_loader.h

	* kik_debug.h: Use __FILE__:__LINE__ instead of __FUNCTION__.
	
2009-07-17  Araki Ken  <arakiken@users.sf.net>

	* libtool: version up to 1.5.26
	  autoconf: version up to 2.63
	  (for win32 compilation.)
	
	* Separated mkf table from mkf as dynamic shared library(LIBDIR/mkf/libmkf_*.so).
	  (Added configure option --enable(disable)-dl-table)
	
	* Added scrollbar support in win32.
	  (Added x_simple_sb_view_win32.c)

	* x_window_win32.c: Apply min_{width|height} and {width|height}_inc
	                    when window resized.

	* *_color_*.[ch]: u_short changed to u_int8_t.

	* etc/mlterm/color: Supported rgb:RR/GG/BB format as value.

	* mlterm/ml_color.[ch]: Added ml_color_parse_rgb_name() function.

2009-07-11  Seiichi SATO  <seiichi@pylone.jp>

	* get rid of compiler warnings.

2009-07-11  Seiichi SATO  <seiichi@pylone.jp>

	* mkf/script/config.guess, kiklib/script/config.guess,
	  script/config.guess: updated (timestamp='2009-04-27')

	* mkf/script/config.sub, kiklib/script/config.sub,
	  script/config.sub: updated (timestamp='2009-04-17')

2009-07-11  Seiichi SATO  <seiichi@pylone.jp>

	* x_sb_screen.c, x_dnd.c: s/utf8_selection_notified/utf_selection_notified/
	(see x_window.h rev 1.42)

2009-06-30  Araki Ken  <arakiken@users.sf.net>

	* Supported "ESC ] 4 ; ... ; rgb:%02x/%02x/%02x BEL" sequence.

	* Added 5384-5387 protocol(see doc/en/PROTOCOL.font and PROTOCOL.color).
	
	* configure: Added --with-gui option.

	* xwindow/*.[ch]: USE_WIN32API => USE_WIN32GUI

	* ml_pty_win32.c: Renamed to ml_pty_pipewin32.c.

2009-06-16  Araki Ken  <arakiken@users.sf.net>

	* mkf_utf16_conv.[ch]: Added mkf_utf16le_conv_new()

	* Support 256 color sequence(ESC[38;...m,ESC[48;...m).
	  (Thanks to shinichiro.h).

	* x_gc.[ch]: added(for sharing GC with all x_window except scrollbar and xim).

	* x_color_cache.[ch]: added.

2009-06-04  Araki Ken  <arakiken@users.sf.net>

	* win32: Supported mouse and clipboard.
	
	* README.ja: Fixed explanation of default value of
	  use_multi_column_char option.

2009-05-31  Araki Ken  <arakiken@users.sf.net>

	* Fixed many bugs.

2009-05-28    Araki Ken  <arakiken@users.sf.net>

	* win32/Makefile.in,main.c: deleted.

	* ml_pty_unix.c: renamed to ml_pty.c

	* ml_pty_win32pipe.c: renamed to ml_pty_win32.c

	* x.h x_win32.h main_win32.c,x_color_win32.c,x_font_win32.c,
	  x_imagelib_win32.c,x_window_manager_win32.c,x_window_win32.c,
	  x_xic_win32.c: added

2009-03-24  Araki Ken  <arakiken@users.sf.net>

	* Incomplete win32 support added.

	* win32/: added.

	* ml_pty_win32.c: renamed to ml_pty_win32pipe.c
	  ml_pty.c: renamed to ml_pty_unix.c

2008-11-26  MINAMI Hirokazu  <minami@mistfall.net>, Seiichi SATO  <seiichi@pylone.jp>

	* inputmethod/uim/im_uim.h, xwindow/x_im_candidate_screen.[ch]: honor heading labels.

2008-11-22  Jun Inoue  <jun.lambda@gmail.com>

	* inputmethod/uim/im_uim.c: fix dangling pointer dereference that
	  can cause initialization to fail.

2008-10-21  Seiichi SATO  <seiichi@pylone.jp>

	* inputmethod/iiimf/Makefile.in, configure.in: To detect libiiimcf,
	use pkg-config if available.

2008-08-17  Seiichi SATO  <seiichi@pylone.jp>

	* mkf/script/config.guess, kiklib/script/config.guess,
	  script/config.guess: updated (timestamp='2008-01-23')

	* mkf/script/config.sub, kiklib/script/config.sub,
	  script/config.sub: updated (timestamp='2008-01-16')

	* contrib/tool/mlterm-menu/mlterm-menu.c: apply the patch from FreeBSD
	ports x11/mlterm. (files/patch-contrib_tool_mlterm-memu_mlterm-menu.c)

2008-08-02 MINAMI Hirokazu  <minami@mistfall.net>

	* kiklib/configure.in: added GNU libc detection. 
	* kik_src/kik_pty_sterams.c:
	 - no longer define _XOPEN_SOURCE to avoid problems on misc. platforms.
	  - define _GNU_SOURCE iff compiled with glibc to get ptsname()
	    prototype (its mandantory on LP64).
	  - #define for _BSD_SOURCE/__EXTENSIONS__ should be no longer needed.
	(SF Bug#1999220, thanks to Christian Biere).

2008-07-22 MINAMI Hirokazu  <minami@mistfall.net>

	* inputmethod/uim/im_uim.c: tweaked initialization order to make
	automatic engine detection work again.

	uim_get_default_im_name() seems to return a non-GC-protected string
	which do not survive uim_create_context(). though it seems like a
	uim's bug, calling uim_get_default_im_name() iff uim_create_context()
	should be efficient anyway.

2008-05-28  MINAMI Hirokazu <minami@mistfall.net>

	* inputmethod/uim/im_uim.c: add stdio.h to includes for BUFSIZ.

2008-04-26  MINAMI Hirokazu <minami@mistfall.net>

	* mlterm/ml_edit.c: should not loop forever when window was too narrow.

2008-03-13  MINAMI Hirokazu <minami@mistfall.net>

	* mlterm/ml_vt100_parser.c: fixed infinite loop.
	 when a sequence-like input was actually so looooong, mlterm should
	 assume it was just not properly terminated (Thanks to shinichiro.h).

2007-12-26  MINAMI Hirokazu <minami@mistfall.net>

	* code cleanup using Sparse.
	 - use NULL properly insted of (int)0.
	 - added/fixed typos for #include.

2007-12-20  MINAMI Hirokazu <minami@mistfall.net>

	* mlterm/ml_term.c: plugged a memory leak.

2007-12-11  KATO Kazuyoshi  <kzys@8-p.info>

	* kiklib/src/kik_pty_streams.c:
	don't define _XOPEN_SOURCE on Mac OS X.
	* kiklib/src/kik_pty_streams.c (kik_pty_fork):
	MacOS X >= 10.4 has posix_openpt() but needs ioctl(TIOCSTTY)
	instead of open(slavetty) to acquire a controlling tty.
	(thanks to AIDA Shinra for sending a patch)

2007-11-30  Seiichi SATO  <me@seiichisato.jp>

	* xwindow/version.h.in: 2.9.4 -> 2.9.4 post

2007-11-30  Seiichi SATO  <me@seiichisato.jp>

	* 2.9.4 released.
	  (tag "rel-2_9_4")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 2.9.4
	* configure: re-generated

2007-11-30  Seiichi SATO <me@seiichisato.jp>

	* mkf/script/config.guess, kiklib/script/config.guess,
	  script/config.guess: updated (timestamp='2007-07-22')

	* mkf/script/config.sub, kiklib/script/config.sub,
	  script/config.sub: updated (timestamp='2007-06-28')

2007-11-22  MINAMI Hirokazu <minami@mistfall.net>

	* xwindow/x_screen.c: yank(paste) of a selection is now done
	when Button-2 was released, not pressed.

2007-11-12  Mike FABIAN  <mfabian@suse.de>

	* inputmethod/scim/im_scim_1.4.cpp: add "#include <string.h>"
	to fix the build with gcc 4.3.

2007-09-28  MINAMI Hirokazu <minami@mistfall.net>

	* mlterm/x_screen.c: added config key string "title" to allow 
	change pty title by "mlcc title foobar".

2007-04-27  MINAMI Hirokazu <minami@mistfall.net>

	* mlterm/ml_term.h: updated for ml_vt100_parser_set_logging_vt_seq.
	* xwindow/x_dnd.h: handle zero-length property properly.

2007-04-13  MINAMI Hirokazu <minami@mistfall.net>

	* xwindow/x_screen.c: selection can be expanded on right-click.
	(Thanks to ssakane)

2007-01-24  Mike FABIAN  <mfabian@suse.de>

	* kiklib/src/kik_time.c: add missing day of week to avoid
	that the array subscript gets above the array bounds.
	Fix by Dominique Leuenberger <dominique.leuenberger@tmf-group.com>.

2006-11-20  Seiichi SATO <me@seiichisato.jp>

	* xwindow/x_window.c, xwindow/x_window.h xwindow/x_screen.c: specify
	32-bit format in the call to XChangeProperty, when the data is Atom.
	(thanks to Kusanagi Kouichi for sending a patch)

	* xwindow/x_term_manager.c (x_term_manager_add_fd):
	set close-on-exec flag to file descriptor of input method helpers.

	* xwindow/version.h.in: 2.9.3 post -> 2.9.4 pre

2006-11-02  MINAMI Hirokazu <minami@mistfall.net>

	* kiklib/src/kik_sysv.c: #include missing kik_privilege.h.

2006-11-01  Seiichi SATO <me@seiichisato.jp>

	* kiklib/src/kik_utmp_sysv.c: fixed compilation error on biarch
	systems. (Debian Bug#396532, thanks to Kenshi Muto for sending a patch)

2006-10-24  MINAMI Hirokazu <minami@mistfall.net>

        * mlterm/ml_screen.[ch]: API addition(ml_screen_is_alternate_edit()).
	* mlterm/ml_vt100_parser.[ch]: states of a screen can now be save/restored
	separately for normal/alternate screens.
	(SF Bug#1472143)
	
	* xwindow/x_xim.c: always setting close-on-exec flag should be harmless.

2006-10-20  Seiichi SATO <me@seiichisato.jp>

	* kiklib/configure.in: swapped the order of setutent() and logout().
	(Debian BUG #329194, thanks to David Kolovratnik)

	* kiklib/configure: regenerated.

2006-10-19  MINAMI Hirokazu <minami@mistfall.net>

	* xwindow/x_term_manager.c, mlterm/ml_conf_menu.c,
	kiklib/src/kik_pty_stream.c, kiklib/src/kik_pty_bsd.c
	xwindow/x_display.c, xwindow/x_xim.c:
	plugged file descriptor leaks.
	* kiklib/src/kik_file.[ch]: added new functions to
	add/remove close-on-exec flag on a file descriptor.
	(SF Patch #1576044, thanks to Christian Biere)

	* kiklib/src/Makefile.am: increased library version
	to reflect API addition.

2006-10-14  MINAMI Hirokazu <minami@mistfall.net>

	* xwindow/x_shortcut.c: fixed typo.
	(SF Bug#1568596, thanks to nakada-san)

	* kiklib/src/kik_util.h: DIGIT_STR_LEN() macro should be safe
	for signed types. (SF Patch#1574241, thanks to Christian Biere)

2006-09-30  Seiichi SATO  <me@seiichisato.jp>

	* xwindow/x_term_manager.c: applied a patch from Nakada-san. (#1534313)

2006-08-13  Seiichi SATO  <me@seiichisato.jp>

	* tool/mlconfig/po/ar.po: Arabic translation contributed by Khaled
	  Hosny.
	* tool/mlconfig/po/LINGUAS: added 'ar'.

2006-05-07  Seiichi SATO  <me@seiichisato.jp>

	* xwindow/version.h.in: 2.9.3 -> 2.9.3 post

2006-05-07  Seiichi SATO  <me@seiichisato.jp>

	* 2.9.3 released.
	  (tag "rel-2_9_3")

	* configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated for 2.9.3
	* configure: re-generated
	* doc/en/PLATFORMS: updated

2006-04-18  Seiichi SATO  <me@seiichisato.jp>

	* tool/mlconfig/po/vi.po: Vietnamese translation contributed by Pham
	Thanh Long.

	* tool/mlconfig/po/LINGUAS: added 'vi'.

2006-04-09  Seiichi SATO  <me@seiichisato.jp>

	* xwindow/x_screen.c (compare_key_state_with_modmap): allowed NULL
	as arguments such as is_shift and is_meta.

	* xwindow/x_screen.c (key_pressed): changed to be more compatible
	with xterm. (e.g., Shift + F5: ESC [ 15 ; 2 ~)
	(Thanks to Konosuke Watanabe)

	* doc/term/mlterm.ti: added kf13-63.

	* xwindow/x_screen.c (im_changed), xwindow/x_im.h (im_changed):
	u_char -> char

	* xwindow/x_screen.c (key_pressed): allowed 'OSI <modifier> <final>'
	format as escape sequence.

	* configure, kiklib/configure, mkf/configure: regenerated.

2006-04-06  Seiichi SATO  <me@seiichisato.jp>

	* configure.in, kiklib/configure.in, mkf/configure.in: fixed
	a few of compilation errors with /usr/ccs/bin/ld of Solaris 9.
	- AC_CANONICAL_TARGET -> AC_CANONICAL_BUILD.
	- HAVE_POSIX_OPENPT should not be defined, when posix_openpt() is
	  not available.

	* doc/en/PLATFORMS: updated

2006-04-05  Seiichi SATO  <me@seiichisato.jp>

	* mkf/lib/mkf_iso2022_parser.c (parse_escape): fixed typo.

	* aclocal.m4 (PKG_CHECK_MODULES): added AC_MSG_RESULT(no).

	* mkf/script/config.guess, kiklib/script/config.guess,
	  script/config.guess: updated (timestamp='2005-08-03')

	* mkf/script/config.sub, kiklib/script/config.sub,
	  script/config.sub: updated (timestamp='2005-07-08')

	* configure.in, inputmethod/uim/im_uim.c: removed support for old uim.

	* configure.in:
	AC_CONFIG_SUBDIRS(kiklib, mkf) -> AC_CONFIG_SUBDIRS([kiklib mkf])

2006-03-21  Seiichi SATO <me@seiichisato.jp>

	* mlterm/ml_edit.c (ml_edit_set_scroll_region): changed to be more
	compatible with xterm. (ESC [ Ps ; Ps r)
	(Thanks to SHIOTA Shoichi and Takashi SHIRAI)

	* mlterm/ml_vt100_parser.c (parse_vt100_escape_sequence): removed
	checks for ps[0] and ps[1] for ml_screen_set_scroll_region().

2006-03-15  MINAMI Hirokazu <minami@mistfall.net>

	* kiklib/configure.in: POSIX_OPENPT should be checked unconditionally.
	* configure.in: use literals for AC_CONFIG_SUBDIRS() to make 
	./configure --help=recursive work with autoconf 2.5x.

2006-03-14  MINAMI Hirokazu <minami@mistfall.net>

	* xwindow/x_screen.c: set PATH_MAX if it's not already defined
	in limits.h.

	* xwindow/x_color.c: added fall-backs for "black"/"white"
        i.e. don't die even if rgb.txt was missing.

2006-03-12  MINAMI Hirokazu <minami@mistfall.net>

	* configure.in: try to trick pkg-config in the right manner.
	* man/mlclient.1: documented --kill option.

2006-03-10  MINAMI Hirokazu <mianmi@mistfall.net>
	
	* configure.in: allow pkg-config to be a wrapper script
	for happy cross-compiling.

	* tool/cross/cross-pkg-config: (NEW) a sample wrapper
	to make pkg-config search only under
	 /usr/$PKG_CONFIG_CROSS_TARGET/lib/pkgconfig
	, where recent dpkg-cross places converted config files (*.pc).

2006-03-01  Seiichi SATO <me@seiichisato.jp>

	* xwindow/x_font.c (set_xft_font): added workaround for Debian Bug
	  #350590.
	# The latest fontconfig (>= 2.3.0?) has 'Synthetic emboldening'.

2006-02-06  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_window.c: Don't trust the value of 'property' from
	a selection requester. Some outdated client may fill 'None' to it.

2006-01-08  KATO Kazuyoshi  <kzys@8-p.info>

	* doc/en/PROTOCOL: added "logging_vt_seq" to configuration protocol.

	* xwindow/x_screen.c (set_config),
	  xwindow/x_screen.c (get_config): added logging_vt_seq.

	* mlterm/ml_term.c (ml_term_set_logging_vt_seq),
	  xwindow/x_term_manager.c (create_term_intern):
	use ml_term_set_logging_vt_seq instead of ml_term_enable_logging_vt_seq.

	* mlterm/ml_vt100_parser.h,
	  mlterm/ml_vt100_parser.c (ml_vt100_parser_set_logging_vt_seq):
	use ml_vt100_parser_set_logging_vt_seq instead of ml_vt100_parser_enable_logging_vt_seq.

	* mlterm/ml_vt100_parser.c (receive_bytes): changed to be more compatible with xterm.

2005-11-12  Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/version.h.in: 2.9.2 post -> 2.9.3 pre

2005-11-21  MINAMI Hirokazu <minami@mistfall.net>

	* kiklib/src/kik_pty_streams.c: fixed typo.

2005-11-12  Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/scim/im_scim_1.4.cpp: allowed to switch property.

2005-11-11  MINAMI Hirokazu <minami@mistfall.net>

	* kiklib/configure.in, kiklib/src/kik_pty_streams.c:
	use posix_openpt() instead of open(/dev/ptmx", ...) whenever possible.
	
	# according to IEEE Std 1003.1-2001, the name of a device to clone
	master pseudo-terminals can be other than /dev/ptmx.

	* kiklib/configure: regenerated.

2005-11-10  Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/scim/im_scim_1.4.cpp: new file
	* inputmethod/scim/im_scim_1.0.cpp: removed

2005-11-01  MINAMI Hirokazu <minami@mistfall.net>

	* xwindow/x_font_config.c: added sanity checks for
	fontname templates.

2005-10-31 MINAMI Hirokazu  <minami@mistfall.net>

	* mkf/lib/mlf_locale_to_ucs4.c: minor code cleanup.
	- K_MIN is no longer used here.
	- sorted candidates alphabetically.

2005-10-30  MINAMI Hirokazu  <minami@mistfall.net>

	* doc/term/mlterm.t[ic]:
	- dropped unused entries from acsc.
	- made sgr0 to be xterm compatible.

2005-10-19  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_window.c: do not try to align full-width chars
	to a half-width char when variable column width is enabled
	(Thanks to "Oibane" for reporting and helping to fix this).

	* xwindow/x_dnd.c: added sanity checks.

	*  xwindow/x_screen.c: while pseudo-transparency or wallpaper
	is in use, draw cursor as using background
	(this looks better in most case IMHO).

2005-10-17  MINAMI Hirokazu  <minami@mistfall.net>
	
	* doc/term/mlterm.t[ci]: disable mouse position reporting
	in "reset" sequence for Debian BTS#55637.
	(stolen from ncurses-5.5/misc/terminfo.src)

2005-10-13  MINAMI Hirokazu  <minami@mistfall.net>

	* mlterm/ml_char.c:
	- Since LP64 glibc's malloc() is known to always return
	16-byte aligned chunks, sanity check can be omitted.

	- changed nl_ch and sp_ch from file-local to function-local.

2005-10-05  Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/iiimf/aux.c: renamed to ..
	* inputmethod/iiimf/im_iiimf_aux.c: this.
	(see http://www.cygwin.com/faq/faq_toc.html#TOC58)

2005-09-29  MINAMI Hirokazu  <minami@mistfall.net>

	* mlterm/ml_vt100_parser.c: do not reset parser state in
	restore_cursor().

	* xwindow/x_im.h: #include <stdio.h> for sprintf.

2005-09-26  MINAMI Hirokazu  <minami@mistfall.net>

	* doc/term/mlterm.t[ic]: use xterm like sequences for
	rmcup/smcup since
	- length of termcap/terminfo entries can be a bit shorter.
	- we may implement titeInhibit someday.

2005-09-25  MINAMI Hirokazu  <minami@mistfall.net>

	* mlterm/ml_vt100_parser.c: now passes test #2 of the vttest
	on ja_JP.EUC-JP.

2005-09-23  MINAMI Hirokazu <minami@mistfall.net>

	* mkf/lib/mkf_gb18030_2000_intern.c, mkf/lib/mkf_xct_parser.c:
	added casts to clarify signedness.

2005-09-23  Mike FABIAN  <mfabian@suse.de>

	* kiklib/src/kik_utmp_utmper.c, tool/mlclient/main.c:
	fix implicit function declarations (patch by
	MINAMI Hirokazu <minami@mistfall.net>).

2005-09-19 MINAMI Hirokazu <minami@mistfall.net>
	
	* kiklib/src/kik_conf_io.c: added a debugging feature.
	The user configuration directory can be overridden using CONF_DIR.

2005-09-18 MINAMI Hirokazu <minami@mistfall.net>

	* contrib/tool/mlcc/main.c: mlcc [parameter name] now
	generates a corresponding query sequence so that
	you can get a list of ptys by "mlcc pty_list".

2005-09-18 MINAMI Hirokazu <minami@mistfall.net>

	* mlterm/ml_vt100_parser.c: try to restore a parser's GL when
	restore_cursor() was called.
	- only works on non-iso2022 locales at present.
	(I'm not yet sure how the parser's internal states should be
	 save/restored on iso2022 locales.)
	- test#2 of the vttest should be passed on UTF-8 locales.
	(Thanks to Thomas Dickey for suggestions)

	* mlterm/ml_vt100_parser.c: declare digits[] as char[]
	since atoi() expects maybe-(un)signed-char and not u_char.
	(We should add some more casts to make gcc4 happy, though.)
	
2005-09-09 MINAMI Hirokazu <minami@mistfall.net>

	* mlterm/ml=vt100_parser.c: // -> /**/

2005-09-03 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/mlconfig/po/de.po:
	applied a patch from Jens Seidel. (Debian BTS #313970)

2005-09-04 Seiichi SATO <ssato@sh.rim.or.jp>

	* kiklib/configure.in:
	applied a patch from Mike FABIAN. (SUSE Bug #105320)

2005-09-04 Seiichi SATO <ssato@sh.rim.or.jp>

	* kiklib/configure.in: suppress libxpg4 check, if setlocale() is
	available in libc. (Thanks to SHIOTA Shoichi and MANTANI Nobutaka)

2005-09-04 Seiichi SATO <ssato@sh.rim.or.jp>

	* doc/ja/README.ja: fixed typo. (Thanks to SHIOTA Shoichi)

2005-09-01 Seiichi SATO <ssato@sh.rim.or.jp>

	* contrib/scrollbar/pixmap_engine/HOWTO.html: fixed typo.

2005-08-31 Seiichi SATO <ssato@sh.rim.or.jp>

	* kiklib/configure.in: fixed a bug that kiklib didn't link libutmpter
	even if available. (SUSE Bug #105320)

2005-05-23 MINAMI Hirokazu <minami@mistfall.nrt>

	* xwindow/x_scrollbar.c:
	applied a patch from Takeshi Hakamata. (SF Bug #1206515)

2005-03-31 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/iiimf/aux.c:
	applied a patch from Andreas Jochens. (Debian BTS #302231)

2005-03-18 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/kbd/im_kbd.c: added Hebrew key mapping table.
	* README, doc/ja/README.ja, man/mlterm.1: updated.

2005-03-14 Seiichi SATO <ssato@sh.rim.or.jp>

	* mlterm/ml_screen.c (receive_scrolled_out_line): if backscrolling
	mode is BTS_NONE, do nothing to make the scroll caching mechanism in
	x_screen.c to work correctly. (#1161050)

2005-03-13 Seiichi SATO <ssato@sh.rim.or.jp>

	* kiklib/src/Makefile.in, mkf/lib/Makefile.in,
	  inputmethod/iiimf/Makefile.in, inputmethod/kbd/Makefile.in,
	  inputmethod/m17nlib/Makefile.in, inputmethod/scim/Makefile.in,
	  inputmethod/uim/Makefile.in, contrib/scrollbar/extra/Makefile.in,
	  contrib/scrollbar/pixmap_engine/Makefile.in:
	  fixed incorrect paths for -rpath of libtool. (#1161055)

2005-03-10 MINAMI Hirokazu <minami@mistfall.net>

	* xwindow/x_imagelib_gdk.c: don't try to be translucent
	if root pixmap is not available.

2005-03-05 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/version.h.in: 2.9.2 -> 2.9.2 post

2005-03-05 Seiichi SATO <ssato@sh.rim.or.jp>

	* 2.9.2 released.
	  (tag "rel-2_9_2")

	* xwindow/x_imagelib_gdk.c: fixed possible integer overflow.

	* configure, configure.in, mlterm.spec, xwindow/version.h.in,
	  doc/en/ReleaseNote: updated.

2005-03-04 Seiichi SATO <ssato@sh.rim.or.jp>

	* doc/en/PLATFORM: updated.
	* README: updated.
	* man/mlterm.1: changed date. (->2005/02/18).

2005-03-03  Mike FABIAN  <mfabian@suse.de>

	* inputmethod/scim/im_scim_1.0.cpp, inputmethod/scim/im_scim_1.2.cpp,
	  mlterm/ml_term.c: add "return 1 ;" to some functions to avoid
	  compiler warning "Control reaches end of non-void function".

2005-03-02 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/x_window.h: added x_window_remove_icon().
	* xwindow/x_screen.c (change_char_encoding): use change_im().

	* inputmethod/uim/im_uim.c:
	  - removed unnecessary #ifdef. (Thanks to Etsushi Kato)
	  - code cleanup.

	* inputmethod/iiimf/im_iiimf.c: fixed a segfault when using Wnn8.
	* inputmethod/iiimf/keymap.c: added key mappings for auxiliary
	functions (XK_F*) and keypad (XK_KP_*).

	* tool/mlconfig/mc_im.c: minor code cleanup.

2005-03-01 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/uim/im_uim.c:
	  - applied a patch from Etsushi Kato. (for focus problem)
	  - get rid of compiler warning.
	  - allow to work with uim-0.3.8.

	* inputmethod/iiimf/im_iiimf.c, inputmethod/iiimf/im_iiimf.h,
	  inputmethod/iiimf/aux.c, inputmethod/iiimf/keymap.c,
	  inputmethod/m17nlib/im_m17nlib.c, inputmethod/scim/im_scim_mod_if.c,
	  inputmethod/scim/im_scim_1.0.cpp, inputmethod/scim/im_scim_1.2.cpp:
	  get rid of compiler warning.

	* kiklib/src/kik_dlfcn_dyld.c: fixed a segfault that occurred when the
	module was loaded multiply. (Thanks to Etsushi Kato for report)

	* contrib/scrollbar/extra/exsb_comon.c:
	  - removed.
	  - To avoid multiple definitions problem on Mac OS X, exsb_get_pixel()
	    was moved to exsb_common.h as static function.

	* contrib/scrollbar/extra/Makefile.in: removed exsb_common.o

	* xwindow/x_im_candidate_screen.c (init_candidates): cleanup.

2005-02-28 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/iiimf/im_iiimf.c: minor code cleanup.
	* inputmethod/iiimf/aux.c: minor code cleanup.

	* configure.in: IIIMF plugin cannot be used with --with-libltdl.

	* xwindow/x_term_manager.c (client_connected):
	  - argv[argc + 1] = NULL ;   --->   argv[argc] = NULL ;
	  - "mlclient --foo=bar" does not work. fixed.

2005-02-26 MINAMI Hirokazu <minami@mistfall.net>

	* mlterm/ml_screen.h: reverted the last change.
	(it should be done in 3.x)

2005-02-25 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/iiimf/im_iimf.c: minor code cleanup.
	* inputmethod/iiimf/aux.c: minor code cleanup.

	* inputmethod/uim/im_uim.c: minor code cleanup.
	* inputmethod/uim/LICENCE: new file

	* inputmethod/m17nlib/LICENCE: new file

	* inputmethod/kbd/LICENCE: new file

	* configure.in: removed -DSCIM_1_2_0
	* inputmethod/scim/im_scim_1.0.cpp: renamed from im_scim.cpp
	* inputmethod/scim/im_scim_1.2.cpp: new file
	* inputmethod/scim/Makefile.in: added im_scim_@SCIM_VERSION@.o
	* inputmethod/scim/im_scim_mod_if.c: code cleanup
	* inputmethod/scim/LICENCE: new file

	Note: In the next release, SCIM plugin will be distributed under LGPL.
	      See inputmethod/scim/LICENCE for more detail.

2005-02-24 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/m17nlib/im_m17nlib.c: minor code cleanup.

	* configure.in:
	  - fixed typo. (scim=$enable_m17nlib)
	  - added -DSCIM_1_2_0. (beginning of #ifdef hell)

2005-02-24 Seiichi SATO <ssato@sh.rim.or.jp>

	supported IIIMF X aux object.
	* inputmethod/iiimf/aux.c:
	  new file (heavily based on iiimpAux.c of IIIMXCF)
	* inputmethod/iiimf/keymap.c:
	  - renamed from im_iiimf_keymap.h.
	  - fixed wrong mappings. ("%", "|", "~". "`", "?")
	* inputmethod/iiimf/LICENCE: new file
	* inputmethod/iiimf/keymap.h: new file
	* inputmethod/iiimf/im_iiimf.c:
	 - code cleanup.
	 - check for HTT_DISABLE_STATUS_WINDOW environment variable.
	 - removed IM_IIIMF_ATOKX_HACK.

	Note: In the next release, IIIMF plugin will be distributed under MIT/X
	      license. See inputmethod/iiimf/LICENCE for more detail.

2005-02-23 MINAMI Hirokazu <minami@mistfall.net>

	* xwindow/x_screen.c: report meta while mouse tracking mode.
	* mlterm/ml_screen.h: modified definitions for back scroll mode.
	* mlterm/ml_vt100_parser.c: fixed typo.

2005-02-22 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/x_im.c (x_im_new): return NULL when input_method is "none".

2005-02-22 MINAMI Hirokazu <minami@mistfall.net>

	* x_term_manager.c: mlterm daemon can be killed by 
	"mlclient --kill".
	* tool/mlclient/main.c: _K/--maxpts options was removed long ago...
	* mlterm/ml_vt100_parser.c: try to mimic term's extended 
	escape sequences(1047/1048/1049).

2005-02-21 MINAMI Hirokazu <minami@mistfall.net>

	made a window icon to belong a pty not a window.
	* xwindow/x_screen.c: added change_icon() and
	  set/reset an icon when a term is attache/detached.
	* xwindow/x_term_manager.c: handle term->icon_path.
	* xwindow/x_window_manager.c: added x_window_manager_set_icon.
	* xwindow/xwindow.c: added x_window_remove_icon() and
	  x_window_set_icon_from_file.
	* doc/en/PROTOCOL: updated.

2005-02-19 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/im_common.h (im_convert_encoding): initialized converter
	before conversion.

2005-02-18 Seiichi SATO <ssato@sh.rim.or.jp>

	* kiklib/src/kik_dlfcn_dl.c, kiklib/src/kik_dlfcn_dld.c,
	  kiklib/src/kik_dlfcn_dyld.c, kiklib/src/kik_dlfcn_ltdl.c,
	  kiklib/src/kik_dlfcn_win32.c: supported prefix-less library name such
	  as foo.so, foo.sl and foo.dll.

2005-02-18  Mike FABIAN  <mfabian@suse.de>

	* inputmethod/scim/Makefile.in: add "CC      = @CC@"
	* man/mlterm.1: fix typo.

2005-02-17 MINAMI Hirokazu <minami@mistfall.net>

	* mlterm/ml_logs.c: use calloc to fail when integer overflow.
	* kiklib/src/kik_mem.c: detect integer overflow in calloc()  while debugging.
	* mlterm/ml_term.[ch]: added a new member "icon_path" to ml_term_t for
	future expansion.
	
2005-02-15 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/uim/im_uim.c, configure.in: uim_prop_update_custom()

	* xwindow/x_im_candidate_screen.c (draw_screen_vertical):
	  10 -> num_per_window

2005-02-10 Seiichi SATO <ssato@sh.rim.or.jp>

	* doc/term/mlterm.tc: revived.

2005-02-10 MINAMI Hirokazu <minami@mistfall.net>

	* xwindow/x_term_manager.c,
	xwindow/x_window_manager.[ch]: mlclient now accepts --iconpath option
	and the value is used as a icon of the newly created window.

	* minor code cleanup.

2005-02-10 MINAMI Hirokazu <minami@mistfall.net>
	
	* man/mlterm.1: updated many out-of-date descriptions.

2005-02-09 MINAMI Hirokazu <minami@mistfall.net>

	* xwindow/x_main_config.c: now accepts --iconpath option.

2005-02-05 Seiichi SATO <ssato@sh.rim.or.jp>

	* doc/en/PLATFORM: updated.

	* configure.in: if scim is enabled, try to detect c++ compiler. if not,
	do nothing.

	* mkf_char.c, mkf_char.h
	(mkf_char_to_int) (mkf_int_to_bytes) (mkf_bytes_to_int)
	* mkf_parser.c mkf_parser.h
	(__mkf_parser_increment) (__mkf_parser_n_increment) (__mkf_parser_mark)
	(__mkf_parser_reset)
	* ml_char.c, ml_char.h
	(ml_char_init) (ml_char_final) (ml_char_set) (ml_char_combine)
	(ml_combine_chars) (ml_remove_combining_char) (ml_get_base_char)
	(ml_get_combining_chars) (ml_char_move) (ml_char_copy) (ml_char_bytes)
	(ml_char_size) (ml_char_set_bytes) (ml_char_cs) (ml_char_is_comb)
	(ml_char_font) (ml_char_cols) (ml_char_is_biwidth) (ml_char_fg_color)
	(ml_char_set_fg_color) (ml_char_bg_color) (ml_char_set_bg_color)
	(ml_char_is_underlined) (ml_char_reverse_color)
	(ml_char_restore_color) (ml_char_copy_color_reversed_flag)
	(ml_char_is_null) (ml_char_equal) (ml_char_bytes_is)
	(ml_char_bytes_equal) (ml_sp_ch) (ml_nl_ch)
	* ml_str.c, ml_str.h
	(ml_str_copy) (ml_str_cols) (ml_str_equal) (ml_str_bytes_equal):
	removed 'inline' from all global functions. (#1081111)

2005-02-04 MINAMI Hirokazu <minami@mistfall.net>

	* xwindow/x_window.c: * use Mapnotify as a trigger of transparency
	processing.

2005-02-04 MINAMI Hirokazu <minami@mistfall.net>
	
	* xwindow/x_screen.c: During mouse tracking,
	try to report sane location even if there was no character
	under clicked column.
	(This is not perfect when variable-width font is used, though)

2005-02-04 MINAMI Hirokazu <minami@mistfall.net>

	* man/mlterm.1: added description for PREV/NEXT_PTY. 
	(SF#1110868. Thanks to John Foerch)

2005-02-03 Seiichi SATO <ssato@sh.rim.or.jp>

	* mlterm/ml_edit.c (ml_edit_go_back),
	  mlterm/ml_vt100_parser.c (parse_vt100_escape_sequence):
	  fixed #1048321 (autowrap test of vttest-2.7).

2005-02-03 MINAMI Hirokazu <minami@mistfall.net>

	* xwindow/x_screen.c:
	- changed to ignore un-reportable mouse click.
	- fixed a bug for sending button4/5 events.

2005-02-03 Seiichi SATO <ssato@sh.rim.or.jp>

	* man/mlterm.1: removed xim_open_in_startup. (#1115198)
	* etc/main.ja:
	- removed xim_open_in_startup. (#1115198)
	- added input_method

2005-02-02 MINAMI Hirokazu <minami@mistfall.net>

	* xwindow/x_screen.c: For mouse tracking, 
	report the maximum value, not random value, when the clicked
	position was out of protocol-supported range.

2005-01-31 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/version.h.in: 2.9.1 post -> 2.9.2 pre
	* configure.in: utmp is still experimental feature.

2005-01-28 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/x_im_candidate_screen.c (draw_screen_vertical):
	  snprintf() -> kik_snprintf

2005-01-27 Seiichi SATO <ssato@sh.rim.or.jp>

	* contrib/scrollbar/pixmap_engine/HOWTO.html,
	  contrib/scrollbar/pixmap_engine/HOWTO.images/fig*.png: new files.

	The following changes are made to fix compilation errors on mingw32.
	* kiklib/src/Makefile.in, mkf/lib/Makefile.in:
	  -rpath $(PREFIX)/lib  --->  -rpath $(LIBDIR)
	* mkf/configure.in:
	  KIK_LIBS='-L${top_builddir}/kiklib/src -lkik'
	* configure.in:
	  KIK_LIBS_FOR_MODULE='-L${top_builddir}/kiklib/src -lkik'
	  MKF_LIBS_FOR_MODULE='-L${top_builddir}/mkf/lib -lmkf'

	* inputmethod/scim/im_scim_mod_if.c: fixed typo.

2005-01-26 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/scim/im_scim.cpp, inputmethod/scim/im_scim_mod_if.c.
	  inputmethod/scim/im_scim.h:
	  - cleaned up error messages.
	  - removed im_changed callback.
	  - use replace_instance method for changing the factory.
	  - removed find_factory().

	* README, doc/ja/README.ja, man/mlterm.1, xwindow/x_main_config.c:
	  updated.

	* inputmethod/kbd/im_kbd.c (mlterm_syms): renamed to syms.

	* inputmethod/scim/im_scim.cpp (send_help_description): implemented.

	* inputmethod/scim/im_scim_mod_if.c (im_scim_get_info): num_of_args = 0

	* tool/mlconfig/mc_im.c: allow im_info.num_of_args is 0.

2005-01-25 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/uim/im_uim.c
	  (xksym_to_ukey): fixed typo.
	  (candidate_shift_page): implemented.

	* inputmethod/scim/im_scim_mod_if.c (im_scim_get_info):
	  fixed a segfault when scim daemon is not running.

	* xwindow/x_im.c (x_im_new): cleaned up error messages.
	* inputmethod/im_uim.c (im_uim_new): cleaned up error messages.

	* inputmethod/scim/im_scim.cpp (find_factory): saved selected factory to
	  SCIM_GLOBAL_CONFIG_DEFAULT_IMENGINE_FACTORY

2005-01-24 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/iiimf/im_iiimf.c (show_available_gui_objects):
	  new function for debugging.

	* inputmethod/iiimf/im_iiimf.c, configure.in: added
	  -DHAVE_HOTKEY_NOTFY_EVENT and -DHAVE_AUX_GETVALUES_EVENT

	* inputmethod/uim/im_uim.c
	* inputmethod/m17nlib/im_m17nlib.c
	* inputmethod/iiimf/im_iiimf.c
	  (mlterm_syms): renamed to syms

	* inputmethod/scim/im_scim_mod_if.c (preedit_update):
	  dropped candidates, when position of editing segment was changed,

2005-01-23 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/scim/im_scim.cpp: minor bug fix.

2005-01-23 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/scim/im_scim.cpp: implemented property.

2005-01-23 MINAMI Hirokazu <minami@mistfall.net>

	* tool/mlconfig/mc_im.c: increased MAX_IM_INFO to make room for scim.

2005-01-23 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/scim/im_scim.cpp (im_scim_create_context): moved
	be->signal_connect_*() into
	* inputmethod/scim/im_scim.cpp (im_scim_initialize): this.

2005-01-23 Seiichi SATO <ssato@sh.rim.or.jp>

	SCIM (Smart Common Input Method platform) support:
	* configure.in:
	  - added '--enable-scim'
	  - added AC_PROG_CXX
	* inputmethod/scim/im_scim.cpp: new file
	* inputmethod/scim/im_scim.h: new file
	* inputmethod/scim/im_scim_mod_if.c: new file
	* inputmethod/scim/Makefile.in: new file

	* inputmethod/uim/im_uim.c, xwindow/x_im.c, xwindow/x_im.h:
	minor code cleanup.

2005-01-23 MINAMI Hirokazu <minami@mistfall.net>

        Made cursor looks better (thanks to Ian Ward). 
	* mlterm/ml_vt100_parser.c: stopped to unify cursor color.
	* xwindow/x_screen.c, xwindow/x_color_manager.*: cursors are now 
	drawn using the colors of characters under them.
	
2005-01-21 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/uim/im_uim.c: minor code cleanup.

2005-01-16 Seiichi SATO <ssato@sh.rim.or.jp>

	* mlterm/ml_pty.c (ml_pty_new): In the forked pty process, reset the
	signal handler for SIGPIPE. (SIG_IGN -> SIG_DFL)

	* configure.in, tool/mlconfig/Makefile.in,
	contrib/tool/mlterm-zoom/Makefile.in: revived DL_SELF (-dlopen self).

2005-01-15 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/x_term_manager.c (x_term_manager_init): ignore SIGPIPE.
	* inputmethod/uim/im_uim.c: removed a handler for SIGPIPE.

2005-01-13 Seiichi SATO <ssato@sh.rim.or.jp>

	Allow to use static linked IM plugins with libltdl.
	(./configure --disable-shared --enable-static --with-libltdl)

	* configure.in, tool/mlconfig/Makefile.in, xwindow/Makefile.in,
	  contrib/tool/mlterm-zoom/Makefile.in:
	- separated DL_LIBS to DL_LIBS_SB and DL_LIBS_IM.
	- when using libltdl, add "-dlopen /path/to/libim-foo.la" to libtool
	  option.
	- removed DL_SELF (-dlopen self).

	* kiklib/src/kik_dlfcn_ltdl.c (kik_dl_is_module):
	  added check for "la" suffix.

	* tool/mlconfig/mc_im.c: im_get_info --> im_<IMNAME>_get_info
	* xwindow/x_im.c: im_new --> im_<IMNAME>_new

	* inputmethod/kbd/im_kbd.c
	  (im_new): renamed to im_kbd_new.
	  (im_get_info): renamed to im_kbd_get_info.
	* inputmethod/uim/im_uim.c
	  (im_new): renamed to im_uim_new.
	  (im_get_info): renamed to im_uim_get_info.
	* inputmethod/iiimf/im_iiimf.c
	  (im_new): renamed to im_iiimf_new.
	  (im_get_info): renamed to im_iiimf_get_info.
	* inputmethod/m17nlib/im_m17nlib.c
	  (im_new): renamed to im_m17nlib_new.
	  (im_get_info): renamed to im_m17nlib_get_info.

2005-01-10 Seiichi SATO <ssato@sh.rim.or.jp>

	* doc/ja/README.ja: minor cleanup.

2005-01-01 MINAMI Hirokazu <minami@Mistfall.net>

	* xwindow/x_screen.c: BackSpace/Delete couldn't be used
	as a shortcut key. 
	(Thanks to Yusuke Sakai)

2004-12-29 Seiichi SATO <ssato@sh.rim.or.jp>

	* configure.in: applied a patch from Ken'ichi Handa.
	<http://sourceforge.net/mailarchive/message.php?msg_id=10412050>

2004-12-22 MINAMI Hirokazu <minami@mistfall.net>

        * configure.in: noted about --with-type-engines in the
	description of --enable-anti-alias to make upgrade easier
	(for lusers).

2004-12-21 MINAMI Hirokazu <minami@mistfall.net>

        * kiklib/src/kik_mem.h: When HAVE_ALLOCA_H was defined,
	alloca.h should be always #include'ed even if __GNUC__ was defined.
	(alloca() may remain undefined otherwise). 
	
2004-12-17 Seiichi SATO <ssato@sh.rim.or.jp>

	* doc/en/PROTOCOL: updated. (#1084176)

2004-12-09 MINAMI Hirokazu <minami@mistfall.net>

	*  minor code cleanup.

2004-12-09 MINAMI Hirokazu <minami@mistfall.net>

	*  mkf/lib/, kiklib/src/kik_debug.c: minor code cleanup.
	
2004-12-09 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/x_im_candidate_screen.c: fixed a syntax error inside #ifndef
	USE_IM_PLUGIN. (Thanks to SHIOTA Shoichi for sending a patch)

2004-12-06 MINAMI Hirokazu <minami@mistfall.net>

	* xwindow/x_window_manager.c: pointer should be initialized by NULL. 
	* xwindow/x_screen.c, xwindow/x_im_candidate_screen.c:
	  minor code cleanup.
	* tools/mlconfig/*.c: use kiklib/*.h instead of standard headers
	  for better memory usage tracking.

2004-12-03 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/w3mmlconfig/Makefile.in: /usr/bin/perl -> @PERL@

2004-11-28 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/version.h.in: 2.9.1 -> 2.9.1 post

2004-11-28 Seiichi SATO <ssato@sh.rim.or.jp>

	* 2.9.1 released.
	  (tag "rel-2_9_1)

	* configure.in, mlterm.spec, xwindow/version.h.in, doc/en/ReleaseNote:
	  updated.

2004-11-27 Seiichi SATO <ssato@sh.rim.or.jp>

	* doc/en/PLATFORM: updated. (Thanks to MURASE, Masaki)

2004-11-25 MINAMI Hirokazu <minami@mistfall.net>

	* tool/mlconfig/mc_im.c: fixed typo.

2004-11-25 MINAMI Hirokazu <minami@mistfall.net>

	* common/c_intl.h: removed "#define const " which seems to be useless.
	* tool/mlconfig/*.c: tried to be -Wall clean.

2004-11-25 Seiichi SATO <ssato@sh.rim.or.jp>

	* mlterm.spec:
	- fixed #1072304
	- FHS compliance

2004-11-21 Seiichi SATO <ssato@sh.rim.or.jp>

	* doc/en/PLATFORM: updated supported platforms.

2004-11-21 Seiichi SATO <ssato@sh.rim.or.jp>

	* mlterm/ml_term_manager.c (sig_child): if(pid == -1) --> if(pid <= 0)

2004-11-21 Seiichi SATO <ssato@sh.rim.or.jp>

	* kiklib/configure.in, kiklib/src/kik_config.h.in: added check for
	stdint.h.

	* inputmethod/iiimf/im_iiimf.c:
	"#define HAVE_STDINT_H 1" -> #include <kiklib/kik_types.h>

2004-11-21 Seiichi SATO <ssato@sh.rim.or.jp>

	Fixed #1069725.
	* kiklib/src/kik_conf.c (kik_conf_parse_args): check whether argc is 0.
	* xwindow/x_term_manager.c (client_connected): argv[argc] = NULL.
	(POSIX exec family style)

	* xwindow/x_screen.c, xwindow/x_im.c:
	screen->input_method=strdup("none"); -> screen->input_method=NULL;

2004-11-19 Seiichi SATO <ssato@sh.rim.or.jp>

	* mkf/lib/Makefile.in, inputmethod/kbd/Makefile.in,
	inputmethod/uim/Makefile.in, inputmethod/iiimf/Makefile.in,
	inputmethod/m17nlib/Makefile.in: Workaround for HP-UX's make.

	;-(
	Makefile.in -- s/@FOO@/foo/g, s/@BAR@//g --> Makefile
	target:                                      target:
	< TAB >@FOO@ \                               < TAB >foo \
	< TAB >@BAR@                                 < TAB >

	:-)
	Makefile.in -- s/@FOO@/foo/g, s/@BAR@//g --> Makefile
	target:                                      target:
	< TAB >@FOO@ @BAR@                           < TAB >foo

	* doc/en/PLATFORM: updated supported platforms.

	* configure, mkf/configure: synchronized with configure.in.

2004-11-18 Seiichi SATO <ssato@sh.rim.or.jp>

	* doc/en/PLATFORM: updated supported platforms.

2004-11-18 MINAMI Hirokazu <minami@mistfall.net>

	* configure.in, mkf/configure.in: added AC_C_INLINE.
	* xwindow/x_window.c: added workaround for
	stupid application which sends Atom "NONE" instead of None.  
	
2004-11-17 Seiichi SATO <ssato@sh.rim.or.jp>

	* doc/en/PLATFORM: updated supported platforms.

2004-11-17 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/version.h.in: 2.9.0 post -> 2.9.1 pre

2004-11-17 MINAMI Hirokazu <minami@mistfall.net>

	* kiklib/src/kik_sig_child.c: changed the handler for SIGCHLD 
	from SIG_IGN to SIG_DFL to be old POSIX compliant.

2004-11-16 Seiichi SATO <ssato@sh.rim.or.jp>

	* mlterm/ml_term_manager.c (sig_child): ignore SIGCHLD from non pty
	  process. (pid == -1)

	* inputmethod/uim/im_uim.c
	  (helper_read_handler): An empty message ("") from helper crased
	  mlterm, fixed.
	  (im_new): removed workaround for SIGCHLD problem with prime.
	  (sig_pipe): New function to handle SIGPIPE from prime.

2004-11-15 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/kbd/Makefile.in: @MKF_LIBS@ -> @MKF_LIBS_FOR_MODULE@

2004-11-14 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/w3mmlconfig/Makefile: moved to...
	* tool/w3mmlconfig/Makefile.in: this for autoconfication.

	* configure.in, tool/w3mmlconfig/mlconfig.cgi.in,
	  tool/w3mmlconfig/w3mmlconfig.in, tool/w3mmlconfig/Makefile.in:
	  autoconfication

2004-11-14 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/w3mmlconfig/mlconfig.cgi.in: ~/.mlterm/challenge support.

	* tool/w3mmlconfig/section/encoding:
	  "xim", "xim_locale" -> "input_method"

2004-11-12 Seiichi SATO <ssato@sh.rim.or.jp>

	* kiklib/src/kik_map.h: An expanded hash table was broken. Fixed.
	  (#1061470)

2004-11-12 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/x_im.c, xwindow/x_im_candidate_screen.c,
	  xwindow/x_im_candidate_screen.h, inputmethod/iiimf/im_iiimf.c,
	  inputmethod/m17nlib/im_m17nlib.c, inputmethod/uim/im_uim.c:
	  allowed to list candidates horizontally.

	* xwindow/x_im.h: increased IM_API_VERSION.

2004-11-07 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/mlconfig/mc_im.c: "None" -> _("None")

2004-11-04 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/x_im.c: don't increase ref_count_uim and ref_count_m17nlib if
	  x_im_new() failed.
	
	* tool/mlconfig/mc_sb_view.c (has_rc_file): I forgot closing dir, fixed.

2004-11-04 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/m17nlib/im_m17nlib.c:
	- - fixed a bug that the last preedit text was not cleared when
	    deactivating the input method. (Thanks to Ken'ichi HANDA)
	    <http://sourceforge.net/mailarchive/message.php?msg_id=9913473>
	  - changed the format in the status window.
	  - minor cleanups.

	* man/mlterm.1: added explanation for keyboard input method to
	  'GUI CONFIGURATOR'.

2004-10-29 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/mlconfig/Makefile.in: -lmkf (required from libim-iiimf.so)

2004-10-29 Seiichi SATO <ssato@sh.rim.or.jp>

	Removed -lkik and -lmkf from linker flag of modules.
	Note: Both libraries are linked if the platform does not support
	undefined symblos such as Cygwin and AIX.

	* configure.in: added MKF_LIBS_FOR_MODULE and KIK_LIBS_FOR_MODULE.

	* inputmethod/kbd/Makefile.in, inputmethod/iiimf/Makefile.in,
	  inputmethod/uim/Makefile.in, inputmethod/m17nlib/Makefile.in:
	  KIK_LIBS -> KIK_LIBS_FOR_MODULE, MKF_LIBS -> MKF_LIBS_FOR_MODULE

	* mkf/configure.in, mkf/lib/Makefile.in: KIK_LDFLAGS -> KIK_LIBS

2004-10-29 Seiichi SATO <ssato@sh.rim.or.jp>

	* doc/ja/README.ja: added description about kbd and m17nlib.

	* configure.in: discontinue if imlib-config is not available.

2004-10-28 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/uim/im_uim.c:
	  - don't send engine_name to helper.
	  - removed engine_name from im_uim_t.
	  - allow to debug using MOD_KEY_DEBUG environment variable.
	    (e.g., MOD_KEY_DEBUG=1 mlterm --im=uim)

2004-10-27 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/m17nlib/im_m17nlib.c (key_event): ingore invalid
	key event. Thanks to Kenichi Handa for report.
	<http://sourceforge.net/mailarchive/message.php?msg_id=9893670>

2004-10-27 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/x_screen.c, xwindow/x_im.c, xwindow/x_im.h,
	  inputmethod/m17nlib/im_m17nlib.c, inputmethod/iiimf/im_iiimf.c,
	  inputmethod/kbd/im_kbd.c:
	  added parameter 'mod_ignore_mask' to x_im_new().

	* inputmethod/uim/im_uim.c: clear pressing_mod_key in focused() and
	  unfocused().

	* xwindow/x_im.h: increased IM_API_VERSION.

2004-10-26 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/m17nlib/im_m17nlib.c:
	  - use EUC-JP instead of EUC-JISX0213 for the internal code convertion.
	  - fixed a segfault with ISO-2022-JP[123].
	  - show error messages if code convertion failed.

2004-10-26 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/iiimf/im_iiimf.c, inputmethod/m17nlib/im_m17nlib.c,
	tool/mlconfig/po/de.po, tool/mlconfig/po/mlconfig.pot,
	tool/mlconfig/po/zh_TW.po, xwindow/x_im.c:
	fixed typo (Cound -> Could).

2004-10-26 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/uim/im_uim.c (key_event): for exact matching mechanism
	in uim_press_key(), if and only if the target modifier key is pressing
	modifier bit will be set. (Thanks to gabor for reporting)

	* doc/en/PLATFORM: updated supported platforms.

2004-10-24 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/version.h.in: 2.9.0 -> 2.9.0 post

2004-10-24 Seiichi SATO <ssato@sh.rim.or.jp>

	* 2.9.0 released.
	  (tag "rel-2_9_0)

	* configure.in, mlterm.spec, xwindow/version.h.in, doc/en/ReleaseNote:
	  updated.

2004-10-24 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/x_window.h (x_window_t):
	  added following dummy members to keep the size of x_winodw_t.
	  - void *  xft_draw; (used if USE_TYPE_XFT is undefined)
	  - void *  dnd; (used if DISABLE_DND is defined)
	  - void *  set_xdnd_config; (used if DISABLE_DND is defined)

	* inputmethod/uim/Makefile.in:
	* inputmethod/iiimf/Makefile.in:
	* inputmethod/m17nlib/Makefile.in:
	* inputmethod/kbd/Makefile.in:
	  removed AA_CFLAGS and DND_CFLAGS.

2004-10-23 Seiichi SATO <ssato@sh.rim.or.jp>

	* README: fixed typo. (for X -> on X)

2004-10-23 Seiichi SATO <ssato@sh.rim.or.jp>

	* man/mlclient.1: AUTHOR -> CONTACT

2004-10-23 Seiichi SATO <ssato@sh.rim.or.jp>

	* man/mlterm.1, man/mlclient.1:
	  - fixed typo. (MLTERM -> MLCLIENT)
	  - changed date. (->2004/10/23)

2004-10-23 Seiichi SATO <ssato@sh.rim.or.jp>

	* man/mlterm.1: fixed typo. (for X -> on X)

2004-10-23 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/x_term_manager.c (open_pty_intern): set COLORFGBG
	  environment variable to "default;default" (hardcorded).

2004-10-23 Seiichi SATO <ssato@sh.rim.or.jp>

	* kiklib/src/kik_pty_streams.c: moved linux specific error message
	  into #ifdef __linux__.

2004-10-23 Seiichi SATO <ssato@sh.rim.or.jp>

	* xwindow/version.h.in: 2.8.0 post -> 2.9.0 pre

2004-10-22 MINAMI Hirokazu <minami@mistfall.net>

        * kiklib/src/kik_net.h: when neither PF_LOCAL nor PF_UNIX was defined, 
	use AF_LOCAL (which may be an alias of AF_UNIX) instead.

2004-10-22 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/uim/im_uim.c:
	  - strlen() -> strlen() + 1
	  - fixed typo in comment.

	* inputmethod/iiimf/im_iiimf.c: strlen_utf16() -> strlen_utf16() + 1

	* inputmethod/m17nlib/im_m17nlib.c: fixed typo in comment.

	* inputmethod/im_common.h: fixed a minor bug.

2004-10-21 Seiichi SATO <ssato@sh.rim.or.jp>

	* doc/en/PLATFORM: updated supported platforms.

2004-10-21 Seiichi SATO <ssato@sh.rim.or.jp>

	* kiklib/src/kik_net.h: defined PF_LOCAL as PF_UNIX on the system which
	  doesn't have PF_LOCAL.

2004-10-21 Seiichi SATO <ssato@sh.rim.or.jp>

	* configure.in: removed "echo -n" for portability.

	* doc/ja/BUGS: updated.

	* README, doc/en/PLATFORM: updated supported platforms.

	* inputmethod/uim/im_uim.c (im_new):
	  - added workaround for setlocale() in make_locale() of m17nlib.
	  - save/restore a signal handler for SIGCHLD when prime is specifed.

	* inputmethod/m17nlib/im_m17nlib.c (im_new): added workaround for
	  setlocale() in make_locale() of m17nlib.

	* tool/mlconfig/po/ja.po: updated.

	* man/mlterm.1: minor cleanup.

2004-10-20  Araki Ken  <arakiken@users.sf.net>

	* xwindow/x_shortcut.h: Removed XIM_OPEN XIM_CLOSE from x_key_func.
	  (This bug has broken default shortcut keys.)

2004-10-20 MINAMI Hirokazu <minami@mistfall.net>

        * xwindow/x_term_mmanager.c: fixed typo.

2004-10-18 Seiichi SATO <ssato@sh.rim.or.jp>

	* man/mlterm.1: conf_menu_path -> conf_menu_path_[123].

2004-10-18 Seiichi SATO <ssato@sh.rim.or.jp>

	* README, doc/en/PLATFORM: updated supported platforms.

2004-10-18 Seiichi SATO <ssato@sh.rim.or.jp>

	* configure.in: could not find IIIMF's path (/usr/lib/im/) on Fedora
	  Core 2, fixed.

	* doc/en/PLATFORM: updated supported platforms.

2004-10-17 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/iiimf/im_iiimf.c: minor cleanups.

	* inputmethod/im_common.h: fixed a minor bug.

2004-10-17 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/iiimf/im_iiimf.c: hide a status window when conversion
	  mode is off.

	* configure.in: minor cleanups.

2004-10-17 MINAMI Hirokazu <minami@mistfall.net>

	* doc/term/mlterm.tc: removed.
	* doc/term/README.term: updated.

2004-10-16 Seiichi SATO <ssato@sh.rim.or.jp>

	* README, doc/en/PLATFORM: updated supported platforms.

2004-10-16 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/mlconfig/mc_im.c (is_im_plugin): fixed a stupid bug.
	  (strstr() == 0 -> strstr())

2004-10-15 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/mlconfig/mc_im.c:
	  - removed a workaround for gettext problem in uim, since the problem
	    fixed at uim-0.4.5-beta1.
	  - fixed a bug with 'cyg' prefix for DLL on cygwin.

	* configure.in:
	  - fixed minor bugs in the configuration result message.
	  - added USE_KBD into IM_CFLAGS.

2004-10-14 Seiichi SATO <ssato@sh.rim.or.jp>

	* x_xim.c: fixed a segfault.
	  how to reproduce:
	  1. $ LANG=UNSUPPORTED_LOCALE mlterm --im=foo
	  2. switch input method

2004-10-14 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/m17nlib/im_m17nlib.c (im_new):
	  - fixed a segfault with an invalid parameter.
	    (e.g., --im=m17nlib:non_supported_lang)
	  - minor cleanups.

	* inputmethod/uim/im_uim.c (im_new): allowed --im=uim:

2004-10-13 Seiichi SATO <ssato@sh.rim.or.jp>

	xim could not get the rectangle information of maximized window. fixed.

	* x_window.c (x_window_receive_event): moved x_xic_resized() into...
	* x_screen.c (window_resized): this.

2004-10-13 MINAMI Hirokazu <minami@mistfall.net>

	* man/mlclient.1: Updated.

2004-10-13 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/*/Makefile.in: fixed a stupid bug.
	  (-I${top_builddir}/xwindow -> -I${top_srcdir}/xwindow)

2004-10-12 Seiichi SATO <ssato@sh.rim.or.jp>

	* x_xim.c (search_xim): fixed a bug with multiple displays. (#1034630)

2004-10-11 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/iiimf/im_iiimf.c (im_get_info): fixed a segfault with
	  htt server provided within ATOK X.

2004-10-11 Seiichi SATO <ssato@sh.rim.or.jp>

	I got "YOUR MEMORY MANAGEMENT IS PERFECT!" message from kik_mem by
	these changes:

	* inputmethod/iiimf/Makefile.in, inputmethod/kbd/Makefile.in,
	  inputmethod/m17nlib/Makefile.in, inputmethod/uim/Makefile.in:
	  added DEB_CFLAGS

	* inputmethod/iiimf/im_iiimf.c, inputmethod/kbd/im_kbd.c,
	  inputmethod/m17nlib/im_m17nlib.c, inputmethod/uim/im_uim.c:
	  - #include <kiklib/kik_mem.h>
	  - minor cleanups.

	* inputmethod/uim/im_uim.c: #include <uim-im-switcher.h>

	* x_im.c, x_im.h: fixed a segfault which is caused by using uim and
	  m17nlib together.

2004-10-10 Seiichi SATO <ssato@sh.rim.or.jp>

	* configure.in:
	  - --disable-kbd.
	  - --enable-dnd -> --disable-dnd
	  - USE_IM_PLUGIN in IM_CFLAGS.
	
	* README.iscii, README.ja, man/mlterm.1, etc/key, x_screen.c,
	  x_screen.c, x_shortcut.c, x_shortcut.h:
	  - removed screen->kbd.
	  - removed XIM_OPEN and XIM_CLOSE.
	  - added IM_HOTKEY.

	* x_screen.h (compare_key_state_with_modmap): new function for
	  callback of input methods.

	* inputmethod/iiimf/im_iiimf.c, inputmethod/uim/im_uim.c,
	  inputmethod/m17nlib/im_m17nlib.c (switch_mode): new functions for
	  IM_HOTKEY.

	* inputmethod/m17nlib/im_m17nlib.c: added status window.

	* inputmethod/iiimf/im_iiimf.c, inputmethod/uim/im_uim.c,
	  inputmethod/m17nlib/im_m17nlib.c (im_get_info):
	* tool/mlconfig/mc_im.c (get_im_info):
	  added 'encoding' argument.

	* x_kbd.c, x_kbd.h: moved to ..
	* inputmethod/kdb/im_kbd.c: this.

	* inputmethod/kdb/Makefile.in: new file.

	* xwindow/Makefile.in:
	  - removed x_kbd.o.
	  - added IM_CFLAGS.

	* x_im.h, x_im.h: added ml_iscii_keymap_new, ml_iscii_keymap_delete and
	  ml_convert_ascii_to_iscii into x_im_export_syms_t.

	* x_main_config.c: minor cleanup.

2004-10-09 Seiichi SATO <ssato@sh.rim.or.jp>

	* ml_cursor.h: added missig #endif.

2004-10-09  Araki Ken  <arakiken@users.sf.net>

	* ml_cursor.[ch]: Intensified cursor operations.

	* ml_screen.c,ml_edit_util.c,ml_logical_visual.h,ml_mode.h,ml_edit.[ch]:
	  Fixed because of ml_cursor.[ch] being added.

2004-10-06 Seiichi SATO <ssato@sh.rim.or.jp>

	* configure.in:
	  - removed test for uim_get_im_short_desc().
	  - -DUIM_CAN_GET_DEFAULT_IM -> -DUIM_0_4_4_OR_LATER
	  - defined USE_UIM, USE_IIIMF and USE_M17NLIB in IM_CFLAGS.
	  - --enable-m17nlib.
	  - added /usr/lib/im/ to the library search paths for libiiimcf.
	  - minor cleanups.

	m17n library support:
	* inputmethod/m17nlib/Makefile.in: new file.
	* inputmethod/m17nlib/im_m17nlib.c: new file.

	* inputmethod/uim/Makefile.in, inputmethod/iiimf/Makefile.in: added
	  IM_CFLAGS into CFLAGS.

	* inputmethod/iiimf/im_iiimf.c:
	  - fixed a segfault when moving the cursor in pre-editing.
	  - minor cleanups.

	* inputmethod/iiimf/im_iiimf.c (status_start, status_change,
	  status_done): new functions to handle status events.

	* inputmethod/iiimf/im_iiimf.c (dispatch): removed
	  IIIMCF_EVENT_TYPE_AUX_GETVALUES to avoid compilation error on FC2.

	* inputmethod/iiimf/im_iiimf.c (delete):
	  - return reference count.
	  - added finalization for status window.
	
	* inputmethod/iiimf/im_iiimf.c (im_get_info): new function to provide
	  information of IM plugins to external tools.

	* inputmethod/im_info.h: new file used for im_get_info() API.

	* inputmethod/uim/im_uim.c:
	  - disabled IM_UIM_COMPAT_0_3_8 under uim-0.4.4 or later.
	  - added uim_list to manage all im_uim_t objects.
	  - minor cleanups.
	  - hold terminal encoding name in im_uim_t.
	  - fixed an invalid memery read detected by valgrind.

	* inputmethod/uim/im_uim.c (delete):
	  - return reference count.
	  - removed im_uim_t from uim_list.
	  - don't call uim_quit(), when m17nlib is enabled.

	* inputmethod/uim/im_uim.c (helper_send_imlist, helper_im_changed):
	  new functions to handle "im_*" messages from helper.

	* inputmethod/uim/im_uim.c (im_new): inserted newly-created im_uim_t
	  object into uim_list.

	* inputmethod/uim/im_uim.c (im_get_info): new function to provide
	  information of IM plugins to external tools.

	* kiklib/src/Makefile.in: increased MAJOR version. (9->10)

	* kik_dlfcn.h, kik_dlfcn_dl.c, kik_dlfcn_dld.c, kik_dlfcn_dyld.c,
	  kik_dlfcn_ltdl.c, kik_dlfcn_none.c, kik_dlfcn_win32.c
	  (kik_dl_is_module): new functions to check if a file name has
	  module suffix such as ".so", ".sl" and ".dll".

	* man/mlterm.1: updated --im option.

	* tool/mlconfig/Makefile.in:
	  - added LIBDIR for loading module.
	  - removed @UIM_LIBS@ and @IIIMF_LIBS@. now mlconfig is not linked to
	    libuim and libiiimcf.

	* tool/mlconfig/mc_im.c:
	  - added IM_OTHER intended to unify functions for pluggable IMs.
	  - get IM specific information from plugins.

	* tool/mlconfig/mc_im.c (is_im_plugin, get_im_info): new functions.

	* tool/mlconfig/mc_im.c (uim_selected, uim_widget_new, iiimf_set_item,
	  iiimf_selected, iiimf_best_match_index, iiimf_widget_new,
	  button_uim_checked, button_iiimf_checked, button_none_checked):
	  - removed. (unified to below functions)

	* tool/mlconfig/mc_im.c (im_selected, im_widget_new,
	  button_im_checked): new functions for pluggable IMs.

	* x_im.h:
	  - added ml_get_char_encoding_name and x_im_status_screen_new
	    into x_im_export_syms_t.
	  - added im_changed callback into x_im_event_listener_t.
	  - increased IM_API_VERSION.

	* x_im.c (dlsym_im_new_func): return module handle.

	* x_im.c (x_im_delete): new function to be used for deleting IM objects
	  and unloading modules.

	* x_im_candidate_screen.c: minor cleanups.

	* x_im_status_screen.c, x_im_status_screen.h: new files for status
	window of input methods.

	* x_screen.c (im_changed): new function for im-switcher.

	* xwindow/Makeile: added x_im_status_screen.o.

2004-09-26 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/mlconfig/mc_im.c: fixed a minor bug.

2004-09-26 Seiichi SATO <ssato@sh.rim.or.jp>

	* man/mlterm.1: fixed typo. (JISX0201_KANA -> JISX0201_KATA)
	  (Thanks to Konosuke WATANABE for reporting)

2004-09-19 Seiichi SATO <ssato@sh.rim.or.jp>

	* mlterm/ml_vt100_parser.c (change_char_attr): kept is_reversed when
	  'ESC [ 39 m' or 'ESC [ 49 m' was received.

2004-09-19 Seiichi SATO <ssato@sh.rim.or.jp>

	* x_im.h: increased IM_API_VERSION.

	* etc/xim: removed uim-*.

	* inputmethod/uim/im_uim.c (prop_list_update, prop_label_update):
	  - sent engine name to uim helper.
	  - minor cleanups.

	* inputmethod/iiimf/im_iiimf.c (atokx_lookup_show, atokx_lookup_hide,
	  atokx_lookup_select, atokx_lookup_set, atokx_lookup): new functions
	  for handling the candidate window using ATOK X LookupAux event.

	* inputmethod/iiimf/im_iiimf.c (show_iiimcf_version): new function
	  for debugging.

	* inputmethod/iiimf/im_iiimf.c: minor cleanups.

	* inputmethod/im_common.h (im_convert_encoding): minor cleanups.

	* x_im_candidate_screen.c (init_candidates)
	  x_im_candidate_screen.h (x_im_candidate_t):
	  added new parameter 'num_per_window'.

2004-09-19 MINAMI Hirokazu <minami@mistfall.net>

	* mkf_ucs4_koi8.c: fixed mapping for cyryllic capital letter
	ukrainian ie. Thanks to Eugeniy Meshcheryakov(Debian BTS #267631).

2004-09-17 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/mlconfig/mc_im.c (uim_widget_new): added workaround for htt
	server included in ATOK X for Linux.

	* inputmethod/iiimf/im_iiimf.c: minor cleanups.

2004-09-16 Seiichi SATO <ssato@sh.rim.or.jp>

	* ml_edit.c (delete_cols): fixed a bug. (#1028815)

2004-09-15 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/mlconfig/mc_im.c (uim_widget_new): minor bug fix.

2004-09-15 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/uim/im_uim.c (im_new),
	  tool/mlconfig/mc_im.c:
	  - use uim_get_default_im_name() if available.
	  - unset the signal handler for SIGCHLD before calling
	    uim_create_context().

	* configure.in: added tests for uim_get_default_im_name() and
	  uim_get_im_short_desc()

2004-09-15 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/mlconfig/mc_im.c: fixed a small bug in auto selector for IIIMF.

2004-09-15 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/mlconfig/mc_im.c:
	- fixed segfault when the combo box for IIIMF was changed.
	- minor improvements around IIIMF.
	- minor cleanups.

2004-09-14 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/mlconfig/mc_im.c: cleanups.

2004-09-13 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/mlconfig/mc_sb_view.c (has_rc_file): new function to check
	scrollbar has 'rc' file.

2004-09-13 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/mlconfig/mc_im.c(iiimf_best_match_index): select default language
	automatically. (according to current locale)

2004-09-13 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/mlconfig/mc_im.c: cleaned up.

	* tool/mlconfig/po/POTFILES.in: mc_xim -> mc_im.c.

	* tool/mlconfig/po/mlconfig.pot, tool/mlconfig/po/ja.po: updated.

2004-09-13 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/uim/im_uim.c(preedit_pushback): fixed a segfault in
	encoding conversion.

2004-09-12 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/iiimf/im_iiimf.c, inputmethod/uim/im_uim.c, x_im.c:
	- initialized the common object in x_im_new().
	- minor cleanups.

	* x_im.h: increased IM_API_VERSION.

2004-09-12 Seiichi SATO <ssato@sh.rim.or.jp>

	* configure.in: fixed typo.

2004-09-12 Seiichi SATO <ssato@sh.rim.or.jp>

	* etc/Makefile.in: removed uim.

2004-09-12 Seiichi SATO <ssato@sh.rim.or.jp>

	* configure.in: added output to show how you configured mlterm.

	* updated config.sub (timestamp='2004-06-24')
	* updated config.guess (timestamp='2004-08-13')

2004-09-11 Seiichi SATO <ssato@sh.rim.or.jp>

	* man/mlterm.1: fixed typo.

2004-09-11 Seiichi SATO <ssato@sh.rim.or.jp>

	* man/mlterm.1: fixed typo.

2004-09-11 Seiichi SATO <ssato@sh.rim.or.jp>

	* x_im.c, x_main_config.c, x_screen.c, tool/mlconfig/mc_im.c:
	allowed "input_method=none".

	* man/mlterm.1: updated. (--im=none)

2004-09-11 Seiichi SATO <ssato@sh.rim.or.jp>

	* tool/mlconfig/mc_im.c, tool/mlconfig/Makefile.in:
	- get available conversion engines from libuim directly.
	- added IIIMF support.

	* man/mlterm.1: added IIIMF related things into 'GUI CONFIGURATOR'
	section.

2004-09-11 Seiichi SATO <ssato@sh.rim.or.jp>

	* etc/uim: removed

2004-09-11 Seiichi SATO <ssato@sh.rim.or.jp>

	* man/mlterm.1:
	- removed xim_open_in_startup.
	- added input_method and --im.
	- 'GTK+ 1.2' -> 'GTK+ 1.2 or later'.
	- added 'Input Method' into 'GUI CONFIGURATOR' section.

2004-09-10 Seiichi SATO <ssato@sh.rim.or.jp>

	* README, doc/ja/README.ja:
	- removed xim_open_in_startup.
	- added input_method.
	- added --enable-dnd, --enable-uim and --enable-iiimf.
	- reformatted to fit in 80 columns.

	* LICENCE: updated. (Contents are not changed)

	* kiklib/configure.in:
	applied SuSE's patches(mlterm-configure.patch).

	* aclocal.m4:
	applied SuSE's patch(autoconf.patch).

2004-09-10 Seiichi SATO <ssato@sh.rim.or.jp>

	* x_im.h (x_im_t):
	- remove draw_preedit.
	- increased IM_API_VERSION.

	* inputmethod/uim/im_uim.c(drar_preedit),
	  inputmethod/iiimf/im_iiimf.c(drar_preedit): moved to ..
	* x_im.c (x_im_redraw_preedit): ..this

	* inputmethod/iiimf/im_iiimf.c: minor cleanups.

	* inputmethod/im_common.h:
	- minor cleanups.
	- fixed a memory leak.

2004-09-10 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/uim/Makefile.in:
	* inputmethod/iiimf/Makefile.in:
	- fixed typo.
	- added LIBS_LOCAL.

	* inputmethod/iiimf/im_iiimf.c: fixed compilation errors with
	libiiimcf in Fedora Core 2.

2004-09-10 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/im_common.h: new file

	* xwindow/x_im.h (x_im_convert_encoding): moved to..
	* inputmethod/im_common.h (im_convert_encoding): ..this

2004-09-10 Seiichi SATO <ssato@sh.rim.or.jp>

	IIIMF (Internet Intranet Input Method Framework) support:

	* configure.in: added '--enable-iiimf'.

	* inputmethod/iiimf/im_iiimf.c: new file
	* inputmethod/iiimf/im_iiimf_keymap.h: new file
	* inputmethod/iiimf/Makefile.in: new file

	How to use:
	--im=iiimf .............  use IIIMF in the default language.
	--im=iiimf:ar ..........  use IIIMF in Arabic.
	--im=iiimf:ja:CannaLE ..  use IIIMF in Japanese using CannaLE
	                          languages engine.

	about IIIMF:
	<http://www.openi18n.org/subgroups/im/IIIMF/>

2004-09-10 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/uim/im_uim.c (convert_encoding): moved to...
	* xwindow/x_im.h (x_im_convert_encoding): ..this

	* inputmethod/uim/im_uim.c: minor cleanups.

2004-09-08 Seiichi SATO <ssato@sh.rim.or.jp>

	* inputmethod/uim/im_uim.c (im_new):
	- u_int32_t -> u_int64_t
	- minor cleanups.

	* inputmethod/uim/Makefile.in: fixed incorrect VPATH.

2004-09-07 Seiichi SATO <ssato@sh.rim.or.jp>

	some improvements around input method:

	* x_im.h:
	- increased IM_API_VERSION.
	- expanded IM_API_COMPAT_CHECK_MAGIC to 64bits.

	* x_im_candidate_screen.c (set_candidates): renamed to..
	* x_im_candidate_screen.c (set_candidate): ..this

	* x_im_candidate_screen.c (set_candidate): removed a unused argument.

	* x_im_candidate_screen.h: removed func_ prefix from x_im_export_syms_t.

	* inputmethod/uim/im_uim.c (convert_encoding): new function to convert
	received strings to term encoding.

	* inputmethod/uim/im_uim.c:
	- fixed some wrong comments.
	- minor cleanups.

2004-09-06 Seiichi SATO <ssato@sh.rim.or.jp>

	* x_draw_str.c: fixed an incorrect position of #endif.
	(Thanks to Fanatic for report)

2004-09-06  Mike FABIAN  <mfabian@suse.de>

	* man/mlterm.1:
	- fixed typo (CONFIGURATABLE -> CONFIGURABLE)

2004-09-06 Seiichi SATO <ssato@sh.rim.or.jp>

	* x_im_candidate_screen.c: fixed a compiler warning.
	(Thanks to Mike FABIAN for sending a patch)

2004-09-01 Seiichi SATO <ssato@sh.rim.or.jp>

	* man/mlterm.1:
	- Added cursor_bg_color and cursor_fg_color.
	- fixed a typo (encoding -> ENCODING).

2004-08-31 Seiichi SATO  <ssato@sh.rim.or.jp>

	* x_screen.c: fixed a deadkey problem with uim.

2004-08-30 Seiichi SATO  <ssato@sh.rim.or.jp>

	* man/mlterm.1: fixed a typo.

2004-08-29 Seiichi SATO  <ssato@sh.rim.or.jp>

	* inputmethod/uim/im_uim.c: converted X modify key to uim key.

2004-08-28 MINAMI Hirokazu <minami@mistfall.net>
 
        * doc/term/mlterm.* : reversed the order of sequences in sgr0.

2004-08-15 MINAMI Hirokazu <minami@mistfall.net>

	* doc/term/mlterm.* : updated information. 

2004-08-06 MINAMI Hirokazu <minami@mistfall.net>

	* mlterm/ml_vt100_parser.* : enhanced support for "save/restore cursor"
	escape sequence. 

2004-08-01 Seiichi SATO  <ssato@sh.rim.or.jp>

	* kik_pty_streams.c (kik_pty_fork): more verbose error message for
	Linux.

2004-08-01 MINAMI Hirokazu <minami@mistfall.net>

	* mlterm/ml_edit.c: allowed multiple restore cursor request.

2004-08-01 Seiichi SATO  <ssato@sh.rim.or.jp>

	* mlterm/ml_edit.c (ml_edit_overwrite_chars): fixed a wrap-around bug.

2004-07-16 Seiichi SATO  <ssato@sh.rim.or.jp>

	* contrib/icon/mlterm-icon.svg, contrib/icon/mlterm-icon-trans.svg:
	contributed from Tobias Kieslich.

2004-07-11 MINAMI Hirokazu <minami@mistfall.net>

	* doc/term/mlterm.*: changed some sequences to be rxvt compatible. 

2004-07-07 Seiichi SATO  <ssato@sh.rim.or.jp>

	* inputmethod/uim/Makefile.in: Added X_CFLAGS.

	* inputmethod/uim/im_uim.c: fixed wrong header path.

2004-06-27  Araki Ken  <arakiken@users.sf.net>

	* x_window.c: Fixed a failure of compilation.

2004-06-21 Seiichi SATO  <ssato@sh.rim.or.jp>

	* tool/mlconfig/mc_im.c (uim_read_conf): Renamed to ...
	* tool/mlconfig/mc_im.c (read_uim_conf): ..this.

	* tool/mlconfig/mc_im.c (xim_read_conf): Renamed to ...
	* tool/mlconfig/mc_im.c (read_xim_conf): ..this.

	* tool/mlconfig/mc_im.c (read_uim_conf): Fixed a minor bug.

2004-06-20  Seiichi SATO  <ssato@sh.rim.or.jp>

	* x_im_candidate_screen.c(set_candidates): In encoding conversion, set
	msb if need be.

2004-06-20  Seiichi SATO  <ssato@sh.rim.or.jp>

	* x_term_manager.c(x_term_manager_init):
	* x_main_config.c(x_prepare_for_main_config):
	Some cleanups against help messages. The words in round brackets
	indicate available values, and the square bracket quoted value is
	default. (description (value1/value2/...) [default])

	* x_screen.c, x_screen.h:
	To unify input method related options and configuration keys,
	--openim(xim_open_in_startup) option, 'xim' key and 'xim_name' key are
	removed. How to use new input method option:
	--im=xim .... use XIM with the default server specified by XMODIFIERS
	--im=xim:xcin ... use XIM with xcin on the current locale.
	--im=xim:Ami:ko_KR.eucKR ... use XIM with Ami on ko_KR.eucKR locale.
	--im=uim ... use uim with the default conversion engine.
	--im=uim:anthy ... use uim with anthy engine.

	- Added 'default_xim_name' key to allow mlconfig to select xim server
	automatically.

	* x_xic.c, x_xic.h(x_xic_get_default_xim_name):
	* x_xim.c, x_xim.h(x_get_default_xim_name):
	New functions for 'default_xim_name' key, used to get the name of XIM
	server which is set by XMODIFIERS.

	* tool/mlconfig/mc_xim.c, tool/mlconfig/mc_xim.h: Removed.

	* tool/mlconfig/mc_im.c tool/mlconfig/mc_im.h:
	* tool/mlconfig/Makefile.in:
	* tool/mlconfig/main.c:
	* etc/uim:
	Supported uim.

	* x_im.c, x_im.h:
	- added a symbol for ml_is_msg_set() to x_im_export_syms_t.
	- increased IM_API_VERSION.

	* inputmethod/uim/im_uim.c(preedit_pushback): In encoding conversion,
	set msb if need be.

2004-06-16  Seiichi SATO  <ssato@sh.rim.or.jp>

	* x_im_candidate_screen.c(init_candidates): cleared index of candidate
	table.

2004-06-14  Seiichi SATO  <ssato@sh.rim.or.jp>

	* im_uim.c: updated for uim-0.3.9.

	* x_term_manager.c: cleanup.

2004-06-13  Seiichi SATO  <ssato@sh.rim.or.jp>

	* x_screen.c(x_screen_new, x_screen_delete): duplicated
	conf_menu_path_[1-3] and input_method.

2004-06-13  Seiichi SATO  <ssato@sh.rim.or.jp>

	* xwindow/x_uim.c, xwindow/x_uim.h: moved to...
	* inputmethod/uim/im_uim.c, inputmethod/uim/im_uim.h: this.

	Uim related things have been implemented as plug-ins(pluggable
	modules). This change enables mlterm to be compiled without -luim in
	case of either --enable-uim or --disable-uim, and libuim is
	required from this module only.

	* x_im.c, x_im.h: new file, used to load input method plug-ins.

	* x_im_candidate_screen.c, x_im_candidate_screen.h: new file, used to 
	show the candidates for conversion received from uim.

	* x_window.c(x_window_set_override_redirect): new function, separated
	from x_window_set_borderless_flag().

	* x_screen.c(draw_str, draw_str_to_eol): moved to x_draw_str.c

	* x_draw_str.c, x_draw_str.h: New files, separated from x_screen.c to
	share draw_str() and draw_str_to_eol() with x_im_candidate_screen.c
	and x_screen.c.

	* x_main_config.c, x_main_config.h: remove 'uim_engine' and add
	'input_method' option. (input_method=<input method>:<conversion engine>)

	* x_term_manager.c, x_term_manager.h: removed 'use_uim' option.

	* x_term_manager.c, x_term_manager.h (x_term_manager_add_fd,
	x_term_manager_remove_fd): new functions, used to add/remove file
	descriptors to/from the event source.

2004-05-24 MINAMI Hirokazu <minami@mistfall.net>

	* x_xic.c: type of event mask should be long.
	* kiklib/configure*: added some includes to a test for socklen_t.
	(thanks to Waldemar Brodkorb) 

2004-05-23 MINAMI Hirokazu <minami@mistfall.net>

	* x_screen.c: fixes for underlines placement.
	- shouldn't displaced by bottom_margin.
	- use the same bottom_margin to draw a cursor.

	* x_xic.c: load_fontset() should return NULL in case of failure.

2004-05-16 MINAMI Hirokazu <minami@mistfall.net>

	* x_window.c: use ct.encoding instead of xselection.property 
	to reject garbage data. 

2004-05-16  Seiichi SATO  <ssato@sh.rim.or.jp>

	* ml_screen.c(ml_screen_is_cursor_visible): new function
	* ml_term.c(ml_term_is_cursor_visible): new function
	* x_screen.c(draw_cursor): Don't draw cursor if cursor is unvisible.

2004-05-16  MINAMI Hirokazu <minami@mistfall.net>

	* x_window.c: pasting text using incremental transfer
	is supported.  

2004-05-07  MINAMI Hirokazu <minami@mistfall.net>

	* x_imagelib_gdk.c: gdk_pixbuf_ref() was deprecated and 
	  shouldn't be called on GTK2.

2004-04-23  Tomohiro KUBOTA <kubota@debian.org>

	* The --borderless option was not documented in the manpage.
	  Patch from Nicolas Kratz <nick@ikarus.dyndns.org>,
	  Debian Bug#244657.

2004-04-18 MINAMI Hirokazu <minami@mistfall.net>

	* x_shortcut.c: before assigning new function to a key,
	clear already registered function.

2004-04-18  Seiichi SATO  <ssato@sh.rim.or.jp>

	* x_screen.c: Moved all callbacks for uim inside #ifdef USE_UIM.

2004-04-15  Seiichi SATO  <ssato@sh.rim.or.jp>

	* pixmap_engine.c: fixed tiny memory leak.

2004-04-12  Seiichi SATO  <ssato@sh.rim.or.jp>

	* x_uim.c (x_uim_delete): To plug a file descriptor leak, closed pipes
	for uim-helper-candwin-gtk.

	* x_uim.c (x_uim_new): Plugged a memory leak detected by valgrind. It
	was caused by uninitialized variable 'uim->encoding'.

	* x_screen.c (draw_preedit_str, get_segment_spot): Calculate the preedit
	position correctly in the back scroll mode.

	* x_uim.c (candwin_update_position): Hide a candidate window when the
	cursor position is out of screen.

2004-04-11  Seiichi SATO  <ssato@sh.rim.or.jp>

	* Added uim support.

2004-04-03  MINAMI Hirokazu  <minami@mistfall.net>

	* tool/mlconfig/Makefile.in: re-introduced IMAGELIB_CFLAGS.   
	(thanks to TAKAHASHI Tamotsu)

2004-03-28  MINAMI Hirokazu  <minami@mistfall.net>

	* xwnidow/x_shortcut.c: default shortcut should be disabled
	if some string is assigned to the key combination.

2004-03-23  MINAMI Hirokazu  <minami@mistfall.net>

	* mlterm/ml_char.c: ml_char_set() now checks its input values
	when compiled with -DDEBUG.

2004-03-22  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_font.c: added a sanity check.
	(in *aafont, an encoding must follow a font family name)

2004-03-15  MINAMI Hirokazu  <minami@mistfall.net>

	* kiklib/src/kik_pty_streams.c: warn if /dev/ptmx could not be opened.

2004-03-12  MINAMI Hirokazu  <minami@mistfall.net>

	* tools/mltconfig/po/Makevars:
	set subdir to the correct relative path.
	(SF#906977. Thanks to Min Sik Kim )

2004-03-09  MINAMI Hirokazu  <minami@mistfall.net>

	* configure.in: warn if some tools cannot be compiled
	due to the lack of gtk headers.

2004-03-05  MINAMI Hirokazu  <minami@mistfall.net>

	* added --enable-dnd configure option[default=yes].
	* mlterm/m_char.c: ml_char_t can be initialized single movq
	on LP64 systems and call to memset() is not neccesary.

2004-03-04  Tomohiro KUBOTA  <kubota@debian.org>

	* "-p"/"--pic" option was not enabled when using gdk-pixbuf2.
	  Fixed.

2004-03-03  Araki Ken  <arakiken@users.sf.net>

	* Moved ml_line_copy_color_reversed_flag() to ml_logical_visual.c
	  from ml_line.c.

	* Added ml_char_copy_color_revsered_flag()
	  Removed ml_char_is_color_reversed()

	* Crossed over line->chars array boundary in shape_iscii(ml_shape.c) and
	  ml_iscii_convert_logical_char_index_to_visual(). Fixed.

2004-03-01  MINAMI Hirokazu  <minami@mistfall.net>

	* mlterm/ml_vt100_parser.c: ignore leading zeroes in numeric
	arguments of escape sequences to pass vttest.

2004-02-29  MINAMI Hirokazu  <minami@mistfall.net>

	* documentation updates.

2004-02-27  MINAMI Hirokazu  <minami@mistfall.net>

	* configure.in, aclocal.m4, configure:
	- use PKG_CHECK_MODULES() where possible.
	- accept "gdk-pixbuf" as a target of with-imagelib.
	- mlconfig/mlterm-menu will be linked against gtk+-2.x when
	  apropreate libraries are available.

	* xwindow/x_imagelib_gdk.c: minor code cleanup.

	* mlterm/ml_edit.c: try to feed a line if next char does not
	fit in curent line.

2004-02-22  Araki Ken  <arakiken@users.sf.net>

	* Added ml_str.[ch].(separated from ml_char.[ch].)

2004-02-20  MINAMI Hirokazu  <minami@mistfall.net>

	* kiklib/src/kik_pty_streams.c: setsid() seems to detach
	control terminal. Don't call ioctl TIOCNOTTY when HAVE_SETSID
	is defined.

2004-02-19  MINAMI Hirokazu  <minami@mistfall.net>

	* kiklib/src/kik_pty_streams.c: stopped use of ioctl TICNOTTY
	on glibc2 for happy valgrinding.

2004-02-16  Seiichi SATO  <ssato@sh.rim.or.jp>

	* Don't use -no-undefined libtool option, expect that
	$allow_undefined_flag is "unsupported".

2004-02-13  Tomohiro KUBOTA  <kubota@debian.org>

	* configure: synchronized with configure.in (2004-01-31).

2004-02-12  MINAMI Hirokazu  <minami@mistfall.net>

	* **/Makefile.in:
	- use @X_LIBS@/@X_PRE_LIBS@/@X_EXTRA_LIBS@ when possible.
	- mlconfig does not needs IMAGELIB_CFLAGS to compile.

2004-02-11  Araki Ken  <arakiken@users.sf.net>

	* Region selection and backscrolling are disabled in
	  vertical mode.

	* Color was not reversed in selecting in ISCII mode. Fixed.

2004-02-11  Tomohiro KUBOTA  <kubota@debian.org>

	* xwindow/xfont.c, xwindow/xfont.h, xwindow/x_term_manager.c:
	  mlterm will print an error message if mlterm cannot start
	  because of lacking of fonts.

2004-02-09  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/Makefile.in, scrollbar/sample/Makefile.in,
	contrib/scrollbar/extra/Makefile.in: replaced hard-coded
	path by @X_CFLAGS@/@X_LIBS@ for cross compile.

2004-02-05  MINAMI Hirokazu  <minami@mistfall.net>

	* x_descsp_font.c:
	- backgorund wasn't cleared in draw_image_string.
	- when xft is used for rendering, always compose dec special
	chars since we can see nothing otherwise. (XXX to be fixed)

2004-02-03  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c: If screen->line_space is over zero, XClearArea()
	  and XDrawString() are used instead of XDrawImageString().

2004-02-03  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_decsp_font.c:
	- In x_decsp_font_draw_string(), reset a clip mask when unknown
	char was passed so that dummy rectangle can be drown correctry.
	- In x_decsp_font_draw_image_string(), draw a rectangle for
	unknown char.
	(Thanks to Mike FABIAN for reporting)

2004-01-31  Seiichi SATO  <ssato@sh.rim.or.jp>

	* kik_pty_stream.c: If ptsname() fails, show an error message.

2004-01-31  Seiichi SATO  <ssato@sh.rim.or.jp>

	* mlterm/ml_edit.c(ml_edit_resize): Clear char_index of cursor, when
	the cursor position was reset. This change fixes a bug that caused a
	segfaul when resizing window over and over.

2004-01-31  KATO Kazuyoshi  <kzys@users.sf.net>

	* configure.in: mlterm-zoom can be specified as a value of
	--with-tools option.

	* contrib/tool/mlterm-zoom: Added.

2004-01-31  Tomohiro KUBOTA  <kubota@debian.org>

	* xwindow/x_font.c: wrong comment was fixed.

2004-01-29  Seiichi SATO  <ssato@sh.rim.or.jp>

	* xwindow/x_term_manager.c: fixed a segfault when initial font size
	was out of range.
	(Thanks to Mike FABIAN for sending a patch)

2004-01-29  MINAMI Hirokazu  <minami@mistfall.net>

	* mlterm/ml_edit.c: Fixed infinite loop when the number of columns
	needed to display a character is greater than screen width.

2004-01-26  Tomohiro KUBOTA  <kubota@debian.org>

	* Added an explanation for -*/--type option for man/mlterm.1.

2004-01-25  KATO Kazuyoshi  <kzys@users.sf.net>

	* tool/mlmenu/Makefile.in: Fixed a installation path.

2004-01-21  MINAMI Hirokazu  <minami@mistfall.net>

	* made font size range specification options work again.
	(THanks to Mike FABIAN for patchs)

2004-01-17  Tomohiro KUBOTA  <kubota@debian.org>

	* When "configure --with-type-engines=xcore,xft" or "configure
	  --enable-anti-alias", xcore was not enabled.  Fixed.
	* "mlterm --help" says the default of --type-engine is always
	  xcore regardless of the real default (which depends on the
	  compilation option).  Fixed.

2004-01-15  MINAMI Hirokazu  <minami@mistfall.net>

	* x_imagelib_gdk.c: When gtk2 is choosed(-with-imagelib=gdk-pixbuf2),
	use g_object_unref insted of (deprecated)gdk_pixbuf_unref.

	* kik_pty_streams.c: #define __EXTENSIONS__ for solaris.

2004-01-14  Tomohiro KUBOTA  <kubota@debian.org>

	* mlconfig lists scrollbars in user's configuration directory
	  and system directory.

2004-01-13  Seiichi SATO  <ssato@sh.rim.or.jp>

	* tool/mlclient/main.c: arguments specified by -e option were able to
	estimate(e.g., mlclient -e w3m -v). fixed.
	(Thanks to Murano Naoki san for sending a patch)

2004-01-12  MINAMI Hirokazu  <minami@mistfall.net>

	* kiklib/src/kik_pty_streams.c: #defined _BSD_SOURCE to
	get rid of compile error on glibc.
	
2004-01-12  Tomohiro KUBOTA  <kubota@debian.org>

	* Include <string.h> in xwindow/x_sb_mode.c for usage of
	  strcmp().

2004-01-08  MINAMI Hirokazu  <minami@mistfall.net>

	* kiklib/src/kik_pty_streams.c: #defined _XOPEN_SOURCE as 500
	to make features defined in UNIX98 pty available.
	(should fix debian Bug#226654. Thanks to lamont for reporting)

2004-01-07  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_main_config.c: minor bugfix.
	* xwindow/x_font_manager.c: fixed segv when changing font size
	using escape sequence.

2004-01-06  MINAMI Hirokazu  <minami@mistfall.net>

	* mlterm/ml_vt100_parser.c: replaced magic constant "20" by DIGIT_STR_LEN(int).
	* xwindow/x_screen.c: mod_meta_mode = 8bit (set MSB) was not working. fixed.

2004-01-05  Seiichi SATO  <ssato@sh.rim.or.jp>

	* mlterm/ml_edit.c (cursor_goto_intern): If requested row is larger
	than terminal size, round it to end of row.

2004-01-03  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_main.config.c: type_engine was not initialized when
	no option had been specified. fixed.

	* xwindow/x_font_cache.c: "font_name_list" should not be accessed
	after realloc.

	* xwindow/x_window.c: #ifdef'ed not-yet-implemented features.

2003-12-30  Araki Ken  <arakiken@users.sf.net>

	* Core X Font Subsystem can be removed by --with-type-engines=xft.

2003-12-28  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_screen.c: reverted the last change.

2003-12-28  MINAMI Hirokazu  <minami@mistfall.net>

	* configure.in, configure: changed VERSION from 2.7.0->2.8.0
	* xwindow/x_screen.c: fixed segv (use_anti_alias should do nothing
	 when USE_TYPE_XFT is not defined).

2003-12-27  Seiichi SATO  <ssato@sh.rim.or.jp>

	* tool/mlconfig/main.c: ANTI_ALIAS -> USE_TYPE_XFT

2003-12-27  Seiichi SATO  <ssato@sh.rim.or.jp>

	* If confiugre detects that pkg-config and xft2 library are available,
	  define USE_TYPE_XFT.

2003-12-27  Araki Ken  <arakiken@users.sf.net>

	* Added --type-engines option to configure and obsoleted --anti-alias option.
	* Added -*,--type,type_engine option to mlterm.
	  You can specify which engine you use, xcore or xft.

2003-12-27  Seiichi SATO  <ssato@sh.rim.or.jp>

	* mlterm/ml_pty_win32.c: cleaned up error handling.
	* updated config.sub and config.guess. (timestamp='2003-10-07')

2003-12-25  MINAMI Hirokazu  <minami@mistfall.net>

	* tools/mlconfig/main.c: made gettext work with GTK2.

	* Re-mapping of keys using xmodmap now should be handled properly.
	* Keys that can be locked(Num_Lock/Scroll_Lock/ISO-Level3_Lock)
	 are no longer regarded as a valid modifier key.

2003-12-24  Seiichi SATO  <ssato@sh.rim.or.jp>

	* contrib/scrollbar/pixmap_engine/pixmap_engine.c: fixed a problem when
	  slider images were not presented.

2003-12-22  MINAMI Hirokazu  <minami@mistfall.net>

	* x_window.c: selection conversion request type "TARGETS"
	 is now supported( clipboard now should work with KDE klipper).

2003-12-21  Seiichi SATO  <ssato@sh.rim.or.jp>

	* mlterm/ml_pty_win32.c: Added:-)
	* configure.in mlterm/Makefile.in: Only a few changes for ml_pty_win32.c
	* man page: Updated the maximum number of windows in MULTIPLE PTY
	  section.
	* etc/xim: Added uim-anthy, uim-skk, uim-tcode, uim-prime and
	  uim-tutcode.
	  Notes:
	  - Uim is available at http://www.freedesktop.org/Software/uim
	  - uim-xim version 0.2.0 said 'Now only supports Japanese' on startup.
	  - I've tested uim-anthy and uim-prime for a little while, both seem
	    to work fine with mlterm.

2003-12-11  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_screen.c: fixed an off-by-one error in get_mod_meta_mask().
	  (modifiermap[8*max_keypermod] shouldn't be accessed)
	* removed redundant spaces/ corrected typo.

2003-11-24  Seiichi SATO  <ssato@sh.rim.or.jp>

	* configure.in, mlterm/Makefile: Added AC_CANONICAL_HOST,
	  AC_CANONICAL_TARGET and mingw32-dependent stuff.

2003-11-24  Seiichi SATO  <ssato@sh.rim.or.jp>

	* kiklib/configure.in, kiklib/src/kik_config.h.in:
	  Added AC_CHECK_TYPE(ssize_t,int), since mingw32 does not have ssize_t.
	  (Does anybody know if this will work on Win64?)

2003-11-03  Araki Ken  <arakiken@users.sf.net>

	* Enbugged by [2003-10-31-2]. Fixed.

2003-10-31  Araki Ken  <arakiken@users.sf.net>

	* The color of log lines sometimes reversed or restored
	  incorrectly. Fixed.

	* Supported borderless window by _MOTIF_WM_HINTS atom.

2003-10-16  Araki Ken  <arakiken@users.sf.net>

	* A snapshot file name must not contain ".." and its suffix is
	  always ".snp" for security issues.

2003-10-12  Araki Ken  <arakiken@users.sf.net>

	* 'snapshot' protocol allows no value.

2003-10-12  Araki Ken  <arakiken@users.sf.net>

	* Added 'snapshot' to 5379 protocol.

2003-10-12  Araki Ken  <arakiken@users.sf.net>

	* doc/ja/README.ja: Updated and fixed typo.

2003-10-12  Araki Ken  <arakiken@users.sf.net>

	* Removed tool/viewsfml/.

	* Added tool/accessories/.

2003-10-12  Araki Ken  <arakiken@users.sf.net>

	* mlmenu/main.c: Fixed a critical bug.

	* mlmenu/Makefile: Removed.

	* configure.in: mlmenu can be specified as a value of --with-tools option.

2003-10-12  Araki Ken  <arakiken@users.sf.net>

	* x_font_config.[ch]: Renamed x_configize_... to x_customize_...

	* version.h.in: Validated CVS_REVISION.

2003-10-12  Araki Ken  <arakiken@users.sf.net>
	
	* Minor cleanups.

2003-10-12  Araki Ken  <arakiken@users.sf.net>

	* mlmenu/main.c: ~/.mlterm/menu couldn't be loaded correctly. Fixed.

2003-10-11  Araki Ken  <arakiken@users.sf.net>

	* Renamed font_custom and color_custom to font_config and font_custom.

	* Added x_main_config.[ch] pulled out from x_term_manager.c

2003-10-11  Araki Ken  <arakiken@users.sf.net>

	* After options saved by 5382 or 5383 protocol, new terminals start
	  with the new options.

2003-10-11  Araki Ken  <arakiken@users.sf.net>

	* Added -&,--borderless,borderless option.

	* Added tool/mlmenu.

2003-10-05  Araki Ken  <arakiken@users.sf.net>

	* 2.8.0 released.
	  (tag "rel-2_8_0")

	* Visual bel didn't work as expected. Fixed.

2003-10-04  Araki Ken  <arakiken@users.sf.net>

	* Added --with-tools and --with-scrollbars description to README and
	  README.ja.

2003-10-01  Araki Ken  <arakiken@users.sf.net>

	* Modified some documents.

2003-10-01  MINAMI Hirokazu  <minami@lissie.chem.s.u-tokyo.ac.jp>

	* etc/*aafont: UCS2->UCS4

2003-09-30  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c(window_exposed): Consider vertical mode.

2003-09-30  Araki Ken  <arakiken@users.sf.net>

	* x_sb_view_factory.c: Memory leaked if specified scrollbar not found and
	  "simple" scrollbar used. Fixed.

	* x_sb_view_factory.c: Removed stuff about lib_ref_table.

	* ml_char.c(ml_char_move): Use ml_char_init instead of memset.

2003-09-29  Araki Ken  <arakiken@users.sf.net>

	* version.h: 2.8.0

	* mlconfig: "Font size (temporal)" changed to "Font size (temporary)".

2003-09-26  Araki Ken  <arakiken@users.sf.net>

	* Added font.ja and main.ja

2003-09-25  Araki Ken  <arakiken@users.sf.net>

	* x_screen.c(draw_line): RTL lines shown incorrectly when variable fonts
	  used and region being selected.

2003-09-25  Araki Ken  <arakiken@users.sf.net>

	* ml_char.[ch]: Supported little endian machines in 64bit.

2003-09-21  Seiichi SATO <ssato@sh.rim.or.jp>

	* x_window.c(x_window_receive_event): Fixed incorrect width and/or
	  height of the exposed area. For example, at event->expose.height = 1
	  and event->expose.y = 0, height should be 0 not -1.

2003-09-21  Araki Ken  <arakiken@users.sf.net>

	* ml_logical_visual.c(comb_logical): Usage of ml_char_at() was wrong. Fixed.

	* ml_char.c: IS_COMB(attr) used wrong mask. Fixed.

2003-09-21  Araki Ken  <arakiken@users.sf.net>

	* x_font_cache.c,x_font_custom.c: minor fixes.

2003-09-21  Araki Ken  <arakiken@users.sf.net>

	* mlterm.spec,ml_char.h: minor fixes.

2003-09-20  Araki Ken  <arakiken@users.sf.net>

	* ml_char.[ch]: ml_char_t is 64bit in LP64 system. LSB 4bits of attr
	  are always valid even if characters combined.

2003-09-19  MINAMI Hirokazu  <minami@lissie.chem.s.u-tokyo.ac.jp>

	* x_dnd.c: code cleanup.

2003-09-18  Araki Ken  <arakiken@users.sf.net>

	* ml_char.[ch]: If ml_char_t combined or not could not be distinguished. Fixed.
	  (96bit in LP64 system now) (Thanks to Minami Hirokazu san)

2003-09-17  Seiichi SATO <ssato@sh.rim.or.jp>

	* doc/ja/README.sb: Fixed a typo.

2003-09-16  Seiichi SATO <ssato@sh.rim.or.jp>

	* configure.in : Disabled pixmap_engine by default.

	* README, README.ja, README.sb: Updated.

2003-09-16  MINAMI Hirokazu  <minami@mistfall.net>

	* ml_config_menu.c: call kik_remove_sig_child_listener()
	  when the config menu is finalized.

2003-09-15  Araki Ken  <arakiken@users.sf.net>

	* mlterm-menu/Makefile.in: Added $(SYSCONFDIR) target.

	* x_font_cache.c(x_get_font_name_list_for_fontset): Load "-*-*-medium-r-*--%d-*-*-*-*-*"
	  font by default for FontSet.

2003-09-15  Araki Ken  <arakiken@users.sf.net>

	* ml_char.[ch]: ml_char_t is 64bit in LP64 system.

2003-09-15  Araki Ken  <arakiken@users.sf.net>

	* x_term_manager.c(start_daemon,client_connected): If multiple mlterms
	  started with -j {genuine|blend} option, both of or either of them
	  could die. Fixed.

2003-09-15  MINAMI Hirokazu  <minami@mistfall.net>

	* x_term_manager.c:
	 - dead mask for screens is now also stored in u_long like
	the one for terms in ml_term_manager.c .
	 - renamed MAX_TERMS to MAX_SCREENS .
	
2003-09-15  Seiichi SATO <ssato@sh.rim.or.jp>

	* x_font_manager.c (x_get_fontset): Fixed a compilation error with
	  --enable-debug.

2003-09-15  Araki Ken  <arakiken@users.sf.net>

	* configure.in: Added --enable-optimize-redrawing option.

2003-09-15  KATO Kazuyoshi  <kzys@users.sf.net>

	* xwindow/x_screen.c (button_pressed): Ctrl+Middle button don't launches external program. Fixed.

2003-09-14  Araki Ken  <arakiken@users.sf.net>

	* tool/mlclient/Makefile.in: Added $(BINDIR) target which creates
	  $(BINDIR) if it doesn't exist.

2003-09-14  Araki Ken  <arakiken@users.sf.net>

	* x_font_custom.c(x_get_all_custom_font_names): Returns fontname list
	  separated by ','. (Illegal font name list returned before.)

2003-09-14  Araki Ken  <arakiken@users.sf.net>
	
	* x_font.c(x_font_new): Surrounded xft_font by #ifdef  ANTI_ALIAS - #endif.

2003-09-14  Araki Ken  <arakiken@users.sf.net>

	* Added mlterm/API.

	* ml_screen.c(ml_screen_set_modified_all): Removed '== NULL'.

	* x_screen.c(flush_scroll_cache): The second and third arguments
	  of ml_set_modified_lines() if screen->scroll_cache_rows < 0 was reversed.
	  Fixed.
	
	* x_screen.c: Don't use ml_line_updated(). Use ml_term_updated_all() instead.

2003-09-14  Araki Ken  <arakiken@users.sf.net>

	* ml_logical_visual.c(iscii_visual): cleaned and tuned up.

	* ml_term.c, x_screen.c: ml_model_t and ml_logs_t states must not be
	  modified by x_screen.c, in other words, functions in ml_term.c must
	  not modify them unless these are logicalized in advance.
	  But it was not complied. Fixed.

2003-09-13  Araki Ken  <arakiken@users.sf.net>

	* xwindow/Makefile.in: Added x_font_cache.o.
	
	* x_screen.c:selecting_with_motion(): A character which is after expected one
	  was selected. Fixed.

	* x_screen.c: Use x_get_font_size() instead of accessing
	  screen->font_man->font_cache->font_size directly.

	* x_font_manager_t.font_cache_table can be shared by multiple font managers
	  as x_font_cache_t.

2003-09-10  MINAMI Hirokazu  <minami@mistfall.net>

	* ml_term_manager.c: dead_mask is now u_long instead of u_int32.
	 Up to 64 pty (not window) may be opened on 64-bit systems.

	* x_term_manager.c: stopped to check whether unused screen
	should be closed.

	* contrib/tool/dnd: Added smaple.c to show how to configure mlterm
	using X Drad and Drop protocol.

2003-09-08  Araki Ken  <arakiken@users.sf.net>

	* x_font_custom.[ch]: Added default_font_name_table to x_font_custom_t.
	  Shrunk wasted memory if many default font names specified in
	  ~/.mlterm/*font files.

2003-09-01  Araki Ken  <arakiken@users.sf.net>

	* Dumped core in selecting region in some situations. Fixed.

2003-08-29  MINAMI Hirokazu  <minami@mistfall.net>

	* x_dnd.c:
	 - fixed sgev in incremental data transfer.
	 - code cleanup.

2003-08-27  Araki Ken  <arakiken@users.sf.net>

	* The colors of lines next to empty ones were not reversed correctly
	  in selection. Fixed.

2003-08-25  Araki Ken  <arakiken@users.sf.net>

	* version.h.in: 2.8.0pre

2003-08-20  MINAMI Hirokazu  <minami@mistfall.net>

	* x_dnd.c: added a handler for DestroyNotity.

2003-08-18  MINAMI Hirokazu  <minami@mistfall.net>

	* x_window.c, x_dnd.h: code cleanup.
	  XDnD subsystem is separated into x_dnd.c and should be easily
	  disabled if it's desired.
	* x_dnd.c: plugged tiny memory leaks.

2003-08-14  Araki Ken  <arakiken@users.sf.net>

	* Added tool/viewsfml/README,tool/viewsfml/Makefile.
	
	* viewsfml.sh: Replace charset=iso-8859-1 with charset=iso-2022-jp.

2003-08-14  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.c(ml_edit_clear_line_to_right,ml_edit_clear_line_to_right_bce):
	  Garbage could be left even if line is cleared by ESC [ K. Fixed.
	  (Thanks to Kubota Tomohiro san)

	* Added tool/viewsfml/viewsfml.sh.

2003-08-12  MINAMI Hirokazu  <minami@mistfall.net>

	* x_dnd.c: for incremental transfer, parser/converter
	  should be kept to remember its state(endianess/fragments etc.)

2003-08-10  MINAMI Hirokazu  <minami@mistfall.net>

	* x_xim.c:
	- xim->im should be cleared when im was closed due to an error.
	- Default XIM name is now "none", not "@im=none".

2003-08-10  Araki Ken  <arakiken@users.sf.net>

	* Cursor wasn't redrawn under vertical writing mode.
	  Added ml_xterm_event_listener_t.start_2 and fixed this problem.

	* Using ml_char_at() instead of refering to ml_line_t:chars[] array
	  directly.

	* ml_edit_intern.c: renamed to ml_edit_util.c.

2003-08-05  Araki Ken  <arakiken@users.sf.net>

	* ml_screen.c(receive_scrolled_out_line): Adhoc workaround
	  to fix strange selection in backscroll mode.

2003-08-03  Seiichi SATO  <ssato@sh.rim.or.jp>

	* configure.in: I forgot appending '-export-symbol' to DL_LIBS.

2003-08-03  Seiichi SATO  <ssato@sh.rim.or.jp>

	* configure.in, configure, kiklib/configure.in, kiklib/configure
	  kiklib/src/Makefile.in, kik_dlfcn_ltdl.c, xwindow/Makefile.in
	  tool/mlconfig/Makefile.in, contrib/tool/mlterm-menu/Makefile.in:
	  Added libltdl support.
	  (Thanks to Aida Shinra san for sending a patch)

	* kik_dlfcn_dld.c, kik_dlfcn_win32.c: Some cleanups.

2003-08-03  Araki Ken  <arakiken@users.sf.net>

	* ml_line.c(ml_line_set_modified):
	  Fixed a bug in dealing with multi-byte character.
	  (Thanks to Kubota Tomohiro san)

2003-07-27  Seiichi SATO  <ssato@sh.rim.or.jp>

	* mkf/lib/Makefile.in: My change(2003-03-21) seems to be wrong. Fixed.

2003-07-27  Araki Ken  <arakiken@users.sf.net>

	* Added OPTIMIZE_REDRAWING macro, which is defined by default, to ml_line.c.

2003-07-27  Tomohiro KUBOTA <kubota@debian.org>

	* contrib/tool/mlterm-menu/Makefile.in: SYSCONFDIR is changed
	  from $(sysconfdir)/mlterm to $(sysconfdir) because "mlterm"
	  is added by source-file-side.  This fixes a problem that
	  mlterm-menu refers /etc/mlterm/mlterm/menu (which should be
	  /etc/mlterm/menu) as system-wide configuration file.

2003-07-27  Araki Ken  <arakiken@users.sf.net>

	* Fixed scrollbar behavior bug(BTS:762666).
	  (Thanks to Murase Masaki san)

2003-07-22  Seiichi SATO  <ssato@sh.rim.or.jp>

	* kik_dlfcn_dl.c: Fixed a typo.

2003-07-21  Seiichi SATO  <ssato@sh.rim.or.jp>

	* mkf/lib/Makefile.in: Cleaned up.
	  - ${top_builddir}/kiklib/src/libkik.la -> -lkik
	  - -L${top_builddir}/kiklib/src/.libs -> -L${top_builddir}/kiklib/src

2003-07-21  Seiichi SATO  <ssato@sh.rim.or.jp>

	* kik_dlfcn_dl.c: Could not dynamically load HP-UX library(.sl). Fixed.
	  NOTE: Recent HP-UX has dlopen() and shl_load(). At first configure
	  scripts do check for dlopen(). If we don't find dlopen(), shl_load()
	  will be used.

2003-07-21  Seiichi SATO  <ssato@sh.rim.or.jp>

	* kik_dlfcn_dyld.c: Supported the Darwin dynamic module loading via
	  dyld APIs.

2003-07-18  MINAMI Hirokazu  <minami@mistfall.net>

	* x_dnd.c: tweaked mime-type preference order.

2003-07-17  MINAMI Hirokazu  <minami@mistfall.net>

	* x_dnd.c: fixed bugs in the parsing of configuration protocol.

2003-07-17  Seiichi SATO  <ssato@sh.rim.or.jp>

	* Started porting to MS Windows.

	* kik_dlfcn.c: Removed.

	* kik_dlfcn_dl.c: Taken from kik_dlfcn.c. (dlopen() in libdl)

	* kik_dlfcn_dld.c: Taken from kik_dlfcn.c. (shl_load() of HP-UX)

	* kik_dlfcn_dyld.c: Added for Mac OS X. (not written yet)

	* kik_dlfcn_win32.c: Added for Windows. (native Win32 and Cygwin)

	* kik_dlfcn_none.c: Dummy functions.

	* kik_pty_win32.c: Dummy functions.

	* kik_unistd.c (kik_usleep): Replaced usleep() with Sleep() in Win32API.

	* kiklib/configure.in: Added AC_CANONICAL_TARGET and cleaned up.

	* mkf/configure.in: Added AC_CANONICAL_HOST and AC_CANONICAL_TARGET.

2003-07-17  Seiichi SATO  <ssato@sh.rim.or.jp>

	* kik_pty_streams.c: slave -> *slave (line 243)

2003-07-14  Seiichi SATO  <ssato@sh.rim.or.jp>

	* Applied a keypad patch from Mike Fabian.

2003-07-14  Araki Ken  <arakiken@users.sf.net>

	* Bidi characters in backward-scrolled area were not correctly
	  selected. Fixed.

	* The end characters of lines in backward-scrolled area couldn't
	  be selected. Fixed.

2003-07-13  Seiichi SATO  <ssato@sh.rim.or.jp>

	* Added "lang" and "country" into map_ucs4_to_func_table struct instead
	  of "locale", and get_map_ucs4_to_func_for_current_locale() function
	  was changed to select UCS mapping table by sys_lang and sys_coutry.
	  Probably it is useful, if your system have no posix locale mechanism,
	  or broken one such as old UN*X and Mac OS X.
	  (Thanks to Aida Shinra san for sending a patch)

2003-07-13  Seiichi SATO  <ssato@sh.rim.or.jp>

	* kik_config.h.in: Added gid_t. It is required on some platforms, and
	  defined by AC_TYPE_UID_T.
	
	* kiklib/configure.in: Cleaned up platform dependent stuff.

2003-07-09  Araki Ken  <arakiken@users.sf.net>

	* Fixed 0x0 core dump bug.
	  (BTS:762681)

	* ml_vt100_parser.c: Enabled IGNORE_SPACE_FG_COLOR.
	  (redrawing optimized)

	* Added -%,--logseq,logging_vt_seq option.

2003-07-07  MINAMI Hirokazu  <minami@mistfall.net>

	* fixed a compilation error.
	(Thanks to Hironori SAKAMOTO san)

2003-07-08  Seiichi SATO <ssato@sh.rim.or.jp>

	* Previous fix for sizehint bug still had a problem in
	  x_window_set_normal_hints(). Fixed.
	* Now pixmap_engine does not require *_use_mask key in rc file.
	  (Thanks to Minami Hirokazu san)

2003-07-08  Seiichi SATO <ssato@sh.rim.or.jp>

	* x_imagelib_imlib.c: fixed a small bug in x_imagelib_load_file().

2003-07-08  Seiichi SATO <ssato@sh.rim.or.jp>

	* My fix for sizehints bug (2002-08-29) seems not to be enough. Fixed.

2003-07-06  Araki Ken  <arakiken@users.sf.net>

	* Cursor character was not correctly drawn in window unfocused. Fixed.

2003-07-06  Seiichi SATO <ssato@sh.rim.or.jp>

	* pixmap_engine.c: minor cleanup

2003-07-06  Araki Ken  <arakiken@users.sf.net>

	* ml_edit.c, ml_line.c: Optimized the way of redrawing.

2003-07-05  Seiichi SATO <ssato@sh.rim.or.jp>

	* fixed a small bug in pixmap_engine.c

2003-07-05  MINAMI Hirokazu  <minami@mistfall.net>

	* x_imagelib_gdk.c:x_imagelib_load_file() now retuens None as "mask"
	when there's no alpha plane in the specified image file.

2003-07-05  Seiichi SATO <ssato@sh.rim.or.jp>

	* Updated pixmap_engine since x_imagelib_load_file() was changed.

2003-07-05  MINAMI Hirokazu  <minami@mistfall.net>

	* Changed API of the x_imagelib_load_file() function.

2003-07-03 Araki Ken <arakiken@users.sf.net>

	* Modified a little README,man/mlterm.1,doc/ja/README.ja

2003-07-01 Araki Ken <arakiken@users.sf.net>

	* Updated tool/mlconfig/po/de.po.
	  (Thanks to Mike Fabian)

2003-07-01 Araki Ken <arakiken@users.sf.net>

	* Updated tool/mlconfig/po/zh_TW.po.
	  (Thanks to Ambrose Li)

2003-06-30 Araki Ken <arakiken@users.sf.net>

	* Compiled mlcc and pixmap_engine by default.
	* Added sample3 description to doc/en/README.ja and man/mlterm.1.
	* Added sample3 to mc_sb_view.c.

2003-06-29 Araki Ken <arakiken@users.sf.net>

	* If 5380 request is denied as a result of challenge failure,
	  #forbidden is returned.
	* Set "@im=none" as the value of XMODIFIERS by default.
	* Fixed contrib/tool/mlcc/Makefile.in and removed contrib/tool/mlcc/Makefile.
	* Added mlcc to --with-tools in configure.in.

2003-06-29 Seiichi SATO <ssato@sh.rim.or.jp>

	* Renamed entry function name of scrollbar engine to x_*_sb_engine_new.
	* '-export-dynamic' is only used when you specify
	  -with-scrollbars=pixmap_engine.
	* Fixed a description for --with-scrollbars.

2003-06-29  MINAMI Hirokazu  <minami@mistfall.net>

	* re-introduced "mlcc" for as a sample of a configurator
	on the mlterm.

2003-06-29 Araki Ken <arakiken@users.sf.net>

	* Minor fixes of pixmap_engine.c and x_sb_view_factory.c.

2003-06-29 Seiichi SATO <ssato@sh.rim.or.jp>

	* Fixed segfault with scrollbar rcfile which does not specify engine.
	* Added VPATH to Makefile.in of pixmap_engine
	* Minor bugfix of Makefile.in of mlterm-menu.

2003-06-29 Seiichi SATO <ssato@sh.rim.or.jp>

	* Extended an API of scrollbar plugin to load new style scrollbar
	  which has an rcfile.
	* To use x_imagelib_load_file() from plugin side, added
	  '-export-dynamic' to link option.
	* Added 'pixmap_engine' scrollbar library.(depends on imlib or
	  gdk-pixbuf)
	* Added 'sample3' scrollbar to show the usage of pixmap_engine.

2003-06-29 Araki Ken <arakiken@users.sf.net>

	* If a text was folded into multiple lines and one of them were ended with
	  space character, the space character couldn't be selected in copy&paste.
	  Fixed.
	  (Thanks to Sakamoto Hironori san)

2003-06-28 Araki Ken <arakiken@users.sf.net>

	* Added description of -6,--stbs,static_backscroll_mode option to
	  mlterm.1 manual.

2003-06-26 Seiichi SATO <ssato@sh.rim.or.jp>

	* Fixed a installation path for mlterm-menu.
	  ($(DESTDIR)$(sysconfdir) -> $(DESTDIR)$(sysconfdir)/mlterm)
	* Moved "$(INSTALL) -m 644 menu $(SYSCONFDIR)" to install target
	  from mlterm-menu target in Makefile.in.

2003-06-23  Araki Ken <arakiken@users.sf.net>

	* Added authorization mechanism by ~/.mlterm/challenge and
	  revived protocol 5380.

2003-06-23  MINAMI Hirokazu  <minami@mistfall.net>

	* Priority of "text/plain" in XDND is degraded
	so that work around mozilla's buggy DND handling.

2003-06-22  MINAMI Hirokazu  <minami@mistfall.net>

	* Added support of window group.
	
2003-06-22 Araki Ken <arakiken@users.sf.net>

	* 'make distclean' failed. Fixed.
	  (Thanks to Kubota Tomohiro san)

2003-06-21 Araki Ken <arakiken@users.sf.net>

	* kik_conf_io_write() could misunderstand a value string
	  as its key string. Fixed.

2003-06-21 Araki Ken <arakiken@users.sf.net>

	* In some cases, combining characters couldn't be drawn. Fixed.
	  (Thanks to Kubota Tohomiro san)

2003-06-15 Tomohiro KUBOTA <kubota@debian.org>

	* A typo in doc/en/PROTOCOL.

2003-06-14 Araki Ken <arakiken@users.sf.net>

	* Released 2.7.0
	  (rel-2_7_0)

2003-06-14 Tomohiro KUBOTA <kubota@debian.org>

	* Update mlterm.1 for "proto:" prefix.
	* Tiny typo fixes.

2003-06-13 Araki Ken <arakiken@users.sf.net>

	* Supported "proto:" prefix which is a part of shortcut key string
	  and designates its following string as mlterm configuration
	  protocol.

2003-06-13 Araki Ken <arakiken@users.sf.net>

	* If pty device not opened, mlterm died. Fixed.
	  (Thanks to Minami Hirokazu san)

2003-06-11  MINAMI Hirokazu  <minami@mistfall.net>

	* Don't free color cells even if mlterm was compiled with Xft.

2003-06-09 Seiichi SATO <ssato@sh.rim.or.jp>

	* Changed parse_xft_font_name() to allow XftFont name to include
	  hyphens, e.g. "Foo\-Bold-iso10646-1"
	  (Thanks to Ambrose Li)

2003-06-08 Araki Ken <arakiken@users.sf.net>(1.449)

	* Rewritten documentations(doc/en/*,doc/ja/*)

2003-06-08 Araki Ken <arakiken@users.sf.net>

	* http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=196228 fixed.
	  (Thanks to Sato Seiichi san)
	* Available '\n','\r','\e','\n' chars in key config file.

2003-06-05  MINAMI Hirokazu  <minami@mistfall.net>

	* Icon handling is re-designed.
	 - do not hinder window property anymore
	 - smaller memory consumption
	(Thanks to Tatsuya Kinoshita san and Seiichi SATO san)
	
2003-06-04 Seiichi SATO <ssato@sh.rim.or.jp>

	* Added $CPPFLAGS to CFLAGS.

2003-06-04 Seiichi SATO <ssato@sh.rim.or.jp>

	* Fixed a problem with occuring an incorrect size hint when changing
	  scrollbar. (change the order of x_window_resize() and
	  x_window_set_normal_hints() in x_scrollbar_change_view().)

2003-06-03 Tomohiro KUBOTA <kubota@debian.org>

	* Update man/mlterm.1 (The default of --sb is "true".)

2003-06-03 Araki Ken <arakiken@users.sf.net>

	* Renamed 'ut.name' to 'ut.user' in kik_utmp_sysv.c.
	* Fixed typo in kik_dlfcn.c.
	  (Thanks to Sakamoto Hironori san)

2003-06-03 Araki Ken <arakiken@users.sf.net>

	* Added doc/ja/README.pty
	* Updated doc/ja/README.ja
	* Ctrl+[F2-F4] are assigned to OPEN_PTY,NEXT_PTY,PREV_PTY shortcut by default.
	* If --sb=false is specified, ignored --title and --icon options. Fixed.

2003-06-03  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_imagelib_gdk.c:
	 - support MSBFirst screen
	 - fixed bugs in PseudoColor visual

2003-06-02  MINAMI Hirokazu  <minami@mistfall.net>

	* Removed obsoleted config tools(mlcc/mlconf_curses)
	* xwindow/x_dnd.c: code cleanup
	* xwindow/x_imagelib_imlib.c: added mask support
	* xwindow/x_imagelib_gdk.c: plugged leak
	
2003-05-25 Tomohiro KUBOTA <kubota@debian.org>

	* Japanese translation for a new item in tool/mlconfig/po .
	* Current automatic (locale-sensible) encoding is now shown
	  like "ISO-8859-15" instead of "ISO885915" on mlconfig.

2003-05-25 Seiichi SATO <ssato@sh.rim.or.jp>

	* Added a search path to kiklib/src/.libs/libkik.* for -lkik to
	  mkf/lib/Makefile.in.
	  (Thanks to Kubota Tomohiro san and Minami Hirokazu san)

2003-05-25 Araki Ken <arakiken@users.sf.net>

	* The free'd 'root' could be accessed at close_screen_intern() in x_term_manager.c. Fixed.
	  (Thanks to Minami Hirokazu san)
	* As soon as the child 'make' process exits, the parent one also exits.
	  (Thanks to Minami Hirokazu san)
	* Added 'is_auto_encoding' to doc/en/PROTOCOL.
	  (Thanks to Kubota Tomohiro san)

2003-05-25 Araki Ken <arakiken@users.sf.net>

	* Cursor position could be illegal after a window resized. Fixed.

2003-05-24 Tomohiro KUBOTA <kubota@debian.org>

	* Removed description on -%/--class command option from manpage.
	* Removed non-ASCII (well, seems to be intended to be EUC-JP)
	  characters from this ChangeLog.

2003-05-24 Araki Ken <arakiken@users.sf.net>

	* Fixed set_xdnd_config() in x_screen.c

2003-05-22  MINAMI Hirokazu  <minami@mistfall.net>

	* Removed unused functions from x_window.c.

2003-05-22 Araki Ken <arakiken@users.sf.net>

	* Compilation failed in ml_logical_visual.c. Fixed.
	  (Thanks to Kubota Tomohiro san)

2003-05-20  MINAMI Hirokazu  <minami@mistfall.net>

	* make XDND handler call start/stop_vt100_cmd()
	before/after processing a config sequence.

2003-05-20 Araki Ken <arakiken@users.sf.net>

	* Fixed some problems in resizing window.
	  (Thanks to >>796)

2003-05-19  MINAMI Hirokazu  <minami@mistfall.net>

	* support DND from nautilus's background setting dialog.
	* support application/x-color as DND type and
	reflect the color to the window's background.
	* added lots of debug messages.

	* In DND session, "text/x-mlterm.config" is now preffered
	to other mime types.

2003-05-18 Araki Ken <arakiken@users.sf.net>

	* Renamed x_font_set_x{ft_}font() to x_font_load_x{ft_}font().

2003-05-18  MINAMI Hirokazu  <minami@mistfall.net>

	* Really fixed the XDND bug
	(Thanks to Seiichi SATO san)

2003-05-18 Araki Ken <arakiken@users.sf.net>

	* BEL character after ESC ] ... was ignored. Fixed.

2003-05-18 Araki Ken <arakiken@users.sf.net>

	* Supported ESC [ ? 6 h(relative origin), ESC [ ? 6 l(absolute origin).
	* Supported ESC [ ? 7 h(auto wrap), ESC [ ? 7 l(no auto wrap).

2003-05-18  MINAMI Hirokazu  <minami@mistfall.net>

	* fixed yet another XDND bug.

2003-05-18 Araki Ken <arakiken@users.sf.net>

	* Support cursor control characters possibly anywhere inside escape sequences.

2003-05-18 Araki Ken <arakiken@users.sf.net>

	* If bold font not found in anti-alias mode, pseudo bold processing enabled.
	  (Thanks to >>619)

2003-05-18 Araki Ken <arakiken@users.sf.net>

	* Set adhoc_right_align of bidi_logical_visual off.

2003-05-17  MINAMI Hirokazu  <minami@mistfall.net>

	* mlterm now accepts configuration strings
	through XDND protocol.

2003-05-17 Araki Ken <arakiken@users.sf.net>

	* ml_convert_col_to_char_index() could access invalid characters
	  if BREAK_BOUNDARY flag is set. Fixed.

2003-05-17 Araki Ken <arakiken@users.sf.net>

	* The width of U+300A, (U+300B,) U+301A, U+301B chars changed from
	  "ambiguous" to "wide" for xterm compatibility.
	  (Thanks to Sakamoto Hironori san)

2003-05-17 Araki Ken <arakiken@users.sf.net>

	* Removed -%/--class/app_class.
	* Fixed the behaviors of --name,--title,--icon options.
	  (Thanks to Gareth Jones)
	* x_dnd_process_xxx() functions was declared as x_process_xxx() in x_dnd.h. fixed.

2003-05-16 Araki Ken <arakiken@users.sf.net>

	* The font color of selected region remained reversed
	  when window was resized. Fixed.

2003-05-16 Araki Ken <arakiken@users.sf.net>

	* Cleaned up mlterm/ml_(edit|model|line).[ch].

2003-05-16  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_dnd.c: added a X error handler.

2003-05-15  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_dnd.h, xwindow/x_dnd.c,
	  xwindow/x_window.h,xwindow/x_window.c:
	Major rewrite of the DND subsystem.

2003-05-12  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_dnd.c: added another sanity check so that
	malicious dnd data will be ignored

	* xwindow/x_dnd.c: mlterm could be crashed
	if only one mime-type was provided for a dropped data.

2003-05-12  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_dnd.c: fixed typo

2003-05-11  MINAMI Hirokazu  <minami@mistfall.net>

	* doc/term/mlterm.tc: Removed u[6-9] to make the file smaller.

2003-05-10 Seiichi SATO <ssato@sh.rim.or.jp>

	* configure.in, kiklib/configure.in, mkf/configure.in: added
	  AC_LIBTOOL_WIN32_DLL macro.
	* kiklib/src/Makefile.in: MAJOR increment with a change of
	  kik_dl_open().


2003-05-06  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_dnd.c, xwindow/x_dnd.h : adopt XDnD v5 spec.
	
2003-05-06  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_term_manager.c: plugged memory leak.

2003-05-05  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_imagelib_gdk.c: minor code cleanup

2003-05-05  MINAMI Hirokazu  <minami@mistfall.net>

	* mlterm/ml_vt100_parser.c: The rxvt style background changing
	sequence "ESC ] 49 ; colorname BEL" was not working.

2003-05-05 Araki Ken <arakiken@users.sf.net>

	* Minor fixes around only_use_unicode_font and not_use_unicode_font options.

2003-04-14  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_imagelib_gdk.c:
	 - power of zero was used for color conversion. fixed.

2003-04-13 Seiichi SATO <ssato@sh.rim.or.jp>

	* x_term_manager.c: changed to be more compatible with xterm/rxvt.
	  If "--icon" option was not specified, title name is used for
	  WM_ICON_NAME,

2003-04-13 Seiichi SATO <ssato@sh.rim.or.jp>

	* kiklib/configure.in, kiklib/configure, kiklib/src/Makefile.in,
	  kiklib/src/kik_dlfcn.c, kiklib/src/kik_dlfcn.h,
	  xwindow/x_sb_view_factory.c:
	  - Removed obsolete AC_CYGWIN from kiklib/configure.in. (Thanks to
	    Sakai Masahiro san)
	  - Added AC_CANONICAL_HOST instead of AC_CYGWIN into
	    kiklib/configure.in.
	  - Removed all of "#ifdef __CYGWIN__".
	  - Added a test to define LIB_PREFIX and LIB_SUFFIX.
	  - Changed the arguments of kik_dl_open().

2003-04-10 Seiichi SATO <ssato@sh.rim.or.jp>

	* mkf/lib/Makefile.in, contrib/scrollbar/extra/Makefile.in,
	  contrib/tool/mlterm-menu/Makefile.in, kiklib/src/Makefile.in,
	  kiklib/src/kik_dlfcn.c, mlterm/Makefile.in,
	  scrollbar/sample/Makefile.in, tool/mlclient/Makefile.in,
	  tool/mlconfig/Makefile.in, xwindow/Makefile.in,
	  xwindow/x_sb_view_factory.c:
	  - To compile DLL on Cygwin environment, added "-no-undefined" to
	    libtool option.
	  - Added ".exe" suffix in "clean" target in Makefile.
	  - In case of Cygwin, the dynamic library name is "cygfoo.dll".
	    It's supported now.
	  (Thanks to Sakai Masahiro san)
	  NOTE: To compile mlterm with DLL support on Cygwin, recent libtool is
	  recommended. (--with-libtool=/usr/autotool/devel/bin/libtool)

2003-04-06 Tomohiro KUBOTA <kubota@debian.org>

	* kiklib/src/kik_conf_io.c kik_conf_write_open(): Could not
	  create config file, which caused [save&exit] button of
	  mlconfig could not save config if ~/.mlterm/main didn't
	  exist.
	* man/mlterm.1 and tool/mlconfig/mc_char_encoding.c: added
	  "cp1251" and "cp1255".

2003-04-06 Araki Ken <arakiken@users.sf.net>

	* Added "cp1251" and "cp1255" encodings.

2003-04-06 Araki Ken <arakiken@users.sf.net>

	* The message mlclient -P outputs is easier to understand.

2003-04-05 Tomohiro KUBOTA <kubota@debian.org>

	* Clean up mlterm/ml_vt100_parser.c config_protocol_save(),
	  removed a possibility of free(NULL).

2003-04-02  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_imagelib_gdk.c: fixed another color conversion bug...

2003-04-01  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_imagelib_gdk.c:
	 - last change caused a X error. reverted.
	 - fixed a bug in color conversion.
	
2003-04-01 Tomohiro KUBOTA <kubota@debian.org>

	* tool/mlconfig/mc_char_encoding.c: mlconfig supports "GEORGIAN-PS"
	  and "KOI8-T".
	* tool/mlconfig/main.c: write in the label that "font larger"
	  and "font smaller" doesn't modify (save) configuration files.
	* Updated "po" (gettext) files for the above modification.
	* man/mlterm.1: mentions these two encodings and
	  "-%" and "-$" options.

2003-03-31  MINAMI Hirokazu  <minami@mistfall.net>

	* xwindow/x_imagelib_gdk.c: minor code cleanup.

2003-03-30 Araki Ken <arakiken@users.sf.net>

	* Added "georgian-ps" and "koi8-t" encodings.

2003-03-30 Tomohiro KUBOTA <kubota@debian.org>

	* A patch contributed by Mike Fabian to fix unstability in
	  64 bit platforms, by changing "0" into "NULL".
	* $(SYSCONFDIR)/mlterm/menu was not read even when
	  $(HOME)/.mlterm/menu isn't available.  Fixed.

2003-03-29 Araki Ken <arakiken@users.sf.net>

	* Output cvs revision of ChangeLog by mlterm -v.

2003-03-28 Araki Ken <arakiken@users.sf.net>

	* If a shell exited in a screen, the screen could be closed
	  even if other background ptys left. Fixed.

2003-03-26 Araki Ken <arakiken@users.sf.net>

	* Mlterm died as soon as the shell exited while screen region being selected. Fixed.

2003-03-26 Tomohiro KUBOTA <kubota@debian.org>

	* Updated tool/mlconfig/po/de.po
	  (Thanks to Mike Fabian).

2003-03-25 Tomohiro KUBOTA <kubota@debian.org>

	* Fixed a bug that non-listed colors are not available.
	  (This bug was due to 2003-02-21's oversimplification.)

2003-03-24 Araki Ken <arakiken@users.sf.net>

	* Added -%/--class/app_class option.
	  Fixed the behavior of 'title' and 'name' option.
	  (Thanks to >>283)

2003-03-21 Tomohiro KUBOTA <kubota@debian.org>

	* tool/mlconfig/mc_color.[ch] simplification.
	* Color names are now translatable in mlconfig.
	* Japanese translation of above new translatable items.
	* Encoding change in tool/mlconfig/po/ja.po from UTF-8
	  to EUC-JP for easier editing.

2003-03-20  MINAMI Hirokazu  <minami@lissie.chem.s.u-tokyo.ac.jp>

	* fixed a pixmap cache corruption bug with gdk-pixbuf
	 (Thanks to Kato san and Kubota san)

2003-03-19 Tomohiro KUBOTA <kubota@debian.org>

	* mlconfig to have "save&exit", "apply&exit", "apply", and "cancel"
	  buttons instead of "OK", "apply", and "cancel" buttons.
	  (Thanks to "Nanashi"-san.)
	* Updated "po" (gettext) files for the above modification.

2003-03-16 Tomohiro KUBOTA <kubota@debian.org>

	* mlconfig shows window title of each ptys in pty list.

2003-03-15 Tomohiro KUBOTA <kubota@debian.org>

	* "configure --with-tools --with-scrollbars" didn't compile
	  any tools nor scroll bars.  Now it compiles all tools and
	  scroll bars.

2003-03-15 Araki Ken <arakiken@users.sf.net>

	* Changed doc/en/PROTOCOL format.
	  /dev/... can be specified before key(=value) now.
	* Forbidden config protocol 5380 because of security issues.

2003-03-10 Araki Ken <arakiken@users.sf.net>

	* Added --with-tools,--with-scrollbars options.

2003-03-09 Araki Ken <arakiken@users.sf.net>

	* -M/--menu option was bound to conf_menu_path_1 previously, but is to conf_menu_path_3 now.

2003-03-08 Araki Ken <arakiken@users.sf.net>

	* Removed --with-conf-menu option.
	* Added conf_menu_path_1,conf_menu_path_2,conf_menu_path3 options.
	* Ctrl+Left button launches mlterm-menu by default.

2003-03-08 Tomohiro KUBOTA <kubota@debian.org>

	* "wall_picture = none" in "main" configuration file now means
	  that the user doesn't use wall picture.  Previously, the same
	  configuration caused that mlterm complains "wall picture file
	  none is not found." (xwindow/x_term_manager.c, xwindow/x_screen.c)
	* mlconfig could not output the filename of the selected
	  wall paper, fixed (tool/mlconfig/x_wall_pic.[ch]).  This bug
	  might be introduced in 2003-03-01 and is my fault.
	* Cleaning up tool/mlconfig/mc_bgtype.c, using integer value
	  to store background type instead of string.

2003-03-08 Araki Ken <arakiken@users.sf.net>

	* Added --with-conf-menu option.
	* If Ctrl+F1 pressed continuously on FreeBSD, mlterm died. Fixed.
	  (Thanks to Konosuke Watanabe san)

2003-03-05 Tomohiro KUBOTA <kubota@debian.org>

	* The default BEL mode is "sound", not "none", at the help message.

2003-03-04 Tomohiro KUBOTA <kubota@debian.org>

	* mlconfig outputs "wall_picture = none" when background type
	  is transparent.
	* Added comments for "encoding" items of mlconfig and make these
	  comments and "auto" translatable.
	* Japanese translation of these translatable items.

2003-03-02 Araki Ken <arakiken@users.sf.net>

	* grantpt() could behave unexpectedly because SIGCHLD installed when
	  grantpt() execed. Fixed.

2003-03-02 Tomohiro KUBOTA <kubota@debian.org>

	* Added "New PTY" button for mlconfig.

2003-03-02 MINAMI Hirokazu <minami@mistfall.net>

	* Code cleanup in the gdk-pixbuf module.
	 (gave up "correct" color conversion scheme for the sake of simplicity)

2003-03-02 Araki Ken <arakiken@users.sf.net>

	* Removed is_active[] array in ml_term_manager.c, and each ml_term_t has
	  is_attached flag.

2003-03-02 MINAMI Hirokazu <minami@mistfall.net>

	* fixed a pixmap cache corruption with gdk-pixbuf
	 (Thanks to Sato san and Kubota san)
	
2003-03-02 Araki Ken <arakiken@users.sf.net>

	* The point where column width changed is regarded as the boundary of words.
	  (Now character set is not considered when the boundary of words is searched.)

2003-03-02 Araki Ken <arakiken@users.sf.net>

	* Unswitchable ptys were shown in PTY List of mlconfig. Fixed.

2003-03-02 Tomohiro KUBOTA <kubota@debian.org>

	* Forgot to define N_() in addition to _() in common/c_intl.h .
	  Thanks to Sakamoto Hironori san.

2003-03-02 Araki Ken <arakiken@users.sf.net>

	* Characters whose character sets are the same alone are regarded as one word.

2003-03-02 Araki Ken <arakiken@users.sf.net>

	* If ENCODING option not set, character encoding wasn't detected automatically. Fixed.
	  (Thanks to Kubota Tomohiro san)

2003-03-02 Tomohiro KUBOTA <kubota@debian.org>

	* Fixed tools/mlconfig/mc_flags.[ch] and tools/mlconfig/po/POTFILES.in
	  to enable translation (gettextization) of labels which are handled
	  in mc_flags.[ch] .
	* Updated po files in tools/mlconfig/po .

2003-03-02 Araki Ken <arakiken@users.sf.net>

	* If Backspace -> 0-9 or space pressed continuously, backspace was output twice
	  in some environment. Fixed.

2003-03-02 Araki Ken <arakiken@users.sf.net>

	* Added -$/--mc/click_interval option.
	* Updated libtool to 1.4.3.

2003-03-02 Araki Ken <arakiken@users.sf.net>

	* Mlterm/mlclient hung up if mlclient execed with no options. Fixed.
	  (Thanks to Nakada Nobuyoshi san)

2003-03-02 Seiichi SATO <ssato@sh.rim.or.jp>

	* When the font size is dynamically changed, Enlightenment and FVWM2
	  make an error in the calculation for window size (WMHints). Fixed.
	  (Thanks to Sakamoto Hironori san)

2003-03-02 Araki Ken <arakiken@users.sf.net>

	* Added PREV_PTY shortcut.
	  (Thanks to Minami Hirokazu san)

2003-03-01 Araki Ken <arakiken@users.sf.net>

	* Mlconfig writes changed configs alone to ~/.mlterm/main.
	  (Thanks to Kubota Tomohiro san)
	* Revived conf_menu_path option.
	  (Thanks to Nakada Nobuyoshi san)
	* Mlterm follows the change of _XROOTPMAP_ID.
	  (Thanks to Minami Hirokazu san)
	* "encoding" of mlterm configuration protocol accepts "auto".
	* Mlclient supports quoted string as arguments.
	* Each pty has its own window/icon title name.
	  (Thanks to Nanashi san)

2003-03-01 Tomohiro KUBOTA <kubota@debian.org>

	* Changed the way how to choose pty in mlconfig
	  from button array to combobox, in order to avoid
	  extremely wide mlconfig window when many ptys are
	  opened.

2003-02-27 Tomohiro KUBOTA <kubota@debian.org>

	* Added mc_flush() for buttons of font larger/smaller,
	  full reset, and pty select for mlconfig, so that the
	  change of the configuration is immediately accepted.

2003-02-23  MINAMI Hirokazu  <minami@mistfall.net>

	* REALLY fix the caching bug.

2003-02-23  MINAMI Hirokazu  <minami@mistfall.net>

	* Modifications to the background image were not applied
	  when the wallpaper had been changed.
	  (Thanks to KATO Kazuyoshi san)

2003-02-18 Seiichi SATO <ssato@sh.rim.or.jp>

	* mlclient failed to connect to the server. Fixed.
	  (Thanks to Nanashi san)

2003-02-16 Araki Ken <arakiken@users.sf.net>

	* Mlconfig couldn't apply configuration changes more than once. Fixed.

2003-02-16 Tomohiro KUBOTA <kubota@debian.org>

	* Update manpage (man/mlterm.1) for -0/-9/-@ options.
	* Update manpage for OK/Apply/Cancel buttons and PTY List of mlconfig.

2003-02-15 Araki Ken <arakiken@users.sf.net>

	* Terminals with Arabic,ISCII,vertical writing etc options can be switched
	  by NEXT_PTY in the same Window.

2003-02-15 Araki Ken <arakiken@users.sf.net>

	* Tuned up mlconfig.

2003-02-15 Araki Ken <arakiken@users.sf.net>

	* '\n','\t','\e' special characters can be specified in the value of init_str option.

2003-02-15 Araki Ken <arakiken@users.sf.net>

	* Added -#/--initstr/init_str option.
	  The string specified as this option's value is initially sent to pty.
	* Renamed mlclient prefix option "pty_list" to "-P" / "--ptylist".
	* If -e option is specified after "mlterm /dev/...", the command string
	  following "-e" is sent to the specified "/dev/..." pty.

2003-02-15 Araki Ken <arakiken@users.sf.net>

	* Mlconfig didn't deal with ISO8859-11(TIS620) correctly. Fixed.
	* Mlterm exit(1) if us ascii for the specified encoding not found.

2003-02-12  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Added a cache to x_imagelib_load_file in x_imagelib_gdk.c
	  so that the last used image can be re-generated
	  without reading from the image file again.
	  (for Seiichi SATO san)

2003-2-11 Araki Ken <arakiken@users.sf.net>

	* Mlterm died as soon as the pty in the last window closed even if
	  other background ptys exist. Fixed.
	  (Thanks to Nanashi san)

2003-2-11 Araki Ken <arakiken@users.sf.net>

	* Backscroll mode is automatically exitted if screen is scrolled to the bottom.
	  (Thanks to Murase Masaki san)
	* Mlconfig appears in the correct display even if it is called from the window
	  whose display is different from the default.
	  (Thanks to Minami Hirokazu san and Nakada Nobuyoshi san)

2003-2-11 Araki Ken <arakiken@users.sf.net>

	* mlclient wouldn't die until the new window which mlclient created dies. Fixed.
	  (Thanks to Nanashi san)

2003-2-11 Araki Ken <arakiken@users.sf.net>

	* mlclient accepts "pty_list" and "/dev/..." as the 1st argument.
	  If "pty_list" is specified, mlclient outputs pty lists which are opened.
	  If "/dev/..." is specified, a new window is opened with the specified pty.

2003-2-11 Araki Ken <arakiken@users.sf.net>

	* Renamed -P/--ptys/ptys option to -@/--screens/startup_screens, and
	  added -P/--ptys/startup_ptys option.
	* Added ESC [ 5379 ; select_pty = <dev name> ; BEL and
	  ESC [ 5380 ; pty_list = <dev name> ; BEL
	* Added PTY selection menu to mlconfig.

2003-2-9 Araki Ken <arakiken@users.sf.net>

	* Added zh_TW locale messages to mlconfig.
	  (Thanks to Yaun-Chen Cheng)

2003-2-9 Araki Ken <arakiken@users.sf.net>

	* If you pressed 'U' and 'Z' with arabic kbd, nothing output. Fixed.

2003-2-8 Araki Ken <arakiken@users.sf.net>

	* mlconfig saves configurations in ~/.mlterm/main if OK button pressed.

2003-2-5 MINAMI Hirokazu <minami@chem.s.u-tokyo.ac.jp>
	
	* Added support for depth 8 PseudoColor in gdkpixbuf
	  image processing module.
	
2003-2-3 Araki Ken <arakiken@users.sf.net>

	* Fixed a bug of cursor fg/bg colors.
	* Fixed arguments of ml_iscii_new_lang().
	  (Thanks to Sakamoto Hironori san)

2003-2-2 Araki Ken <arakiken@users.sf.net>

	* Added -9/--crfg/cursor_fg_color,-0/--crbg/cursor_bg_color options.
	  These options specify foreground/background colors of the cursor.
	  If not specified, cursor fg color is default bg color, and vice versa.

2003-2-2 Seiichi SATO <ssato@sh.rim.or.jp>

	* Fixed a bug in alloc_closest_xcolor_pseudo(). (diff_r -> diff_b)
	  (Thanks to Hirokazu Minami san)

2003-2-2 Araki Ken <arakiken@users.sf.net>

	* Added EXT_KBD shortcut in ~/.mlterm/key.
	  This shortcut activate or deactivate arabic or iscii input method.

2003-2-2 Araki Ken <arakiken@users.sf.net>

	* Added --without-map-table,--without-prop-table options to configure.
	  These options remove character mapping table and character property table.

2003-2-1 Araki Ken <arakiken@users.sf.net>

	* Even if log buffer is full, static backscrolling works.
	  (Thanks to Murase Masaki san)
	* Renamed x_keymap to x_shortcut.

2003-1-27 Araki Ken <arakiken@users.sf.net>

	* Mouse position reporting is enabled, selecting region is forced to stop.

2003-1-26 Araki Ken <arakiken@users.sf.net>

	* Each user can start his/her own mlterm server.
	  (Thanks to Nakda Nobuyoshi san)

2003-1-26 MINAMI hirokazu <minami@chem.s.u-tokyo.ac.jp>

	* Fixed a bug in gdk-pixbuf module which prevents gamma correction
	  with pseudo-transparency (Thanks to TAKAHASHI Tamotsu san)
	* Rewrited cache mechanism of background pictures for performance.
	
2003-1-26 Araki Ken <arakiken@users.sf.net>

	* Added -6/--stbs/static_backscroll_mode option, under which backscroll mode
	  isn't reset even if vt100 sequence is output from tty.
	* You can select region even while vt100 sequence is output from tty.

2003-1-13 Araki Ken <arakiken@users.sf.net>

	* config.h.in -> c_config.h.in

2003-1-13 Araki Ken <arakiken@users.sf.net>

	* ml_intl.h -> c_intl.h

2003-1-12 Araki Ken <arakiken@users.sf.net>

	* Multiple 'key=value' pairs separated by ';' can be specified
	  in "ESC ] 5379 ; .... BEL".
	* Newly added "ESC ] 5382 ; ... BEL sequence" and "ESC ] 5383 ; ... BEL sequence".
	  The former sequence saves specified key and value pairs in ~/.mlterm/main,
	  and the latter one sets and saves them at the same time.

2003-1-12 Araki Ken <arakiken@users.sf.net>

	* Cleaned up codes around arabic shaping.
	* Merged gettextize patch.
	  (Thanks to Mike Fabian and Koushi Takahashi san)

2003-1-12 Araki Ken <arakiken@users.sf.net>

	* 2.6.3 released.
	  (rel-2_6_3)

2002-12-16 Seiichi SATO <ssato@sh.rim.or.jp>

	* Applied Minami-san's Xft2 support patch.

2002-12-15 Araki Ken <arakiken@users.sf.net>

	* 2002-12-14 fix was incomplete, that is, copy&paste in the same window failed. fixed.
	  (Thanks to Martin Horcicka)

2002-12-14 Araki Ken <arakiken@users.sf.net>

	* Newline characters in pasted text are converted to carriage return characters.
	  (Thanks to Martin Horcicka)

2002-12-13 Araki Ken <arakiken@users.sf.net>

	* Fixed arabic combining problem.
	  (Thanks to Nadim Shaikli)

2002-12-13 Araki Ken <arakiken@users.sf.net>

	* Fixed a bug in ml_line_fill().
	  (Thanks to Sato Seiichi san)

2002-12-10 Araki Ken <arakiken@users.sf.net>

	* Fixed cursor highlight problem.
	  (Thanks to Martin Horcicka)
	* Added doc/en/FAQ.
	  (Thanks to Nadim Shaikli)

2002-12-6 Araki Ken <arakiken@users.sf.net>

	* utemper wasn't checked correctly in configure. fixed.
	  (Thanks to Mike Fabian)
	* dead key and multi key didn't work. fixed.
	  (Thanks to Martin Horcicka)

2002-11-26 Araki Ken <arakiken@users.sf.net>

	* Improved kik_map.

2002-11-21 Araki Ken <arakiken@users.sf.net>

	* ml_cursor_t::col_in_char was wrong in some situations. fixed.
	  (Thanks to Wang WenRui)

2002-11-16 Araki Ken <arakiken@users.sf.net>

	* Added mkf_utf16_conv.[ch] which generates UTF16 sequence.

2002-11-16 Araki Ken <arakiken@users.sf.net>

	* Added mkf_utf16_parser.[ch] which parses UTF16 sequence.

2002-11-15  MINAMI Hirokazu  <minami@lissie.chem.s.u-tokyo.ac.jp>

	* added support for some lazy WM which does only set a part of
	root image as _XROOTPMAP_ID.
	(Thanks to Wang WenRui)

2002-11-14 Araki Ken <arakiken@users.sf.net>

	* screen->xct_parser->is_eos is replaced by parser->is_eos in x_screen.c:key_pressed().
          (Thanks to Minami Hirokazu san)

2002-11-13  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* In XDND, drop via UCS2 (as "text/unicode") is supported.

2002-11-12  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* XDND code cleanup/separation. added x_dnd.(c|h) .

2002-11-11 Seiichi SATO <ssato@sh.rim.or.jp>

	* Updated config.guess and config.sub.(timestamp='2002-11-08')
	  (Thanks to Kubota Tomohiro san)

2002-11-08  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Rewrited XDND processiong code.
	- INCR (incremantal transfer of huge data) is supported.
	- cleaned up a bit for future separation.
	
2002-11-07 Araki Ken <arakiken@users.sf.net>

	* Default screen size is 80x24 instead of 80x30.
	  (Thanks to Sato Seiichi san)
	* Performance tuning of ml_edit.c.

2002-11-06  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* GBK parser became more robust againt invalid input.
	  (Thanks to Wang WenRui)

2002-11-04  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* UTF8_STRING and COMPOUND_TEXT are now accepted as XDND's mime type.
	
2002-10-16  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Major rewrite of x_imagelib_gdk.c.
	  Now it's only depends on gdk-pixbuf and not gdk-pixbuf-xlib.
	
2002-10-11 Araki Ken <arakiken@users.sf.net>

	* Transparency failed in some situations. fixed.
	  (Thanks to Nanashi san)
	* ml_line_fill() has a buffer overflow bug. fixed.

2002-10-08 Araki Ken <arakiken@users.sf.net>

	* 2.6.2 released
	  (rel-2_6_2)

2002-10-07 Araki Ken <arakiken@users.sf.net>

	* There was some interval between the time when Focus events available and when
	  window really mapped. fixed.
	  (Thanks to Nanashi san)

2002-10-06 Araki Ken <arakiken@users.sf.net>

	* Fixed a bug in deleting multi-byte characters by ESC [ P.

2002-10-06 Araki Ken <arakiken@users.sf.net>

	* ESC [ x sequence is supported.

2002-10-06 Araki Ken <arakiken@users.sf.net>

	* 2002-10-02 fix is discarded.
	  Scrollbar gets never smaller than the maximum possible height / 20.
	  (Thanks to Murase Masaki san)

2002-10-06 Araki Ken <arakiken@users.sf.net>

	* ESC [ S, ESC [ T sequences are supported.

2002-10-06 Araki Ken <arakiken@users.sf.net>

	* If screen was resized too small, it disappeared once, but resized smaller,
	  it appeared again drawn corruptly. fixed.

2002-10-06 Araki Ken <arakiken@users.sf.net>

	* copy_paste_via_ucs option is renamed to receive_string_via_ucs.
	  And if its value is true, strings from XIM as well as from X Selection are
	  converted to UCS once.
	* Even if the value of fade_ratio option was 100, screen was completely redrawn
	  when window focus is switched. fixed.

2002-10-05 Araki Ken <arakiken@users.sf.net>

	* Cleaned up size hint patch(see 2002-08-29) by Sato Seiichi san.
	* If window height was for only one line, where wraparound happened,
	  mlterm died. fixed.

2002-10-02 Araki Ken <arakiken@users.sf.net>

	* If line characters and RTL characters mixed in a line, screen corrupt.
	  Fixed a little.
	  (Thanks to Nadim Shaikli)

2002-10-02 Araki Ken <arakiken@users.sf.net>

	* Scrollbar never get too small even if the value of 'logsize' option
	  is huge.

2002-10-01 Araki Ken <arakiken@users.sf.net>

	* If more than 512 bytes were copy&pasted within a window, the 513th byte
	  was lost. fixed.
	  (Thanks to Nanashi san)

2002-09-29 Araki Ken <arakiken@users.sf.net>

	* Character encoding parser is reset by ESC c sequence.
	  (Thanks to Murase Masaki san)

2002-09-29 Araki Ken <arakiken@users.sf.net>

	* ESC [ I and ESC [ Z sequences are supported.

2002-09-28 Araki Ken <arakiken@users.sf.net>

	* If cursor was placed at a half-width char preceded by a full-width char and
	  the full-width char was deleted by "ESC [ 2 P", the half-width char was also
	  deleted. fixed.
	  (Thanks to Hideki EIRAKU san)

2002-09-28 Araki Ken <arakiken@users.sf.net>

	* "Full reset" button of mlconfig didn't work. fixed.
	  (Thanks to Murase Masaki san)

2002-09-28 Seiichi SATO <ssato@sh.rim.or.jp>

	* x_window_get_visible_geometry() returned width and height of no
	  visible window. fiexd.

2002-09-27 Araki Ken <arakiken@users.sf.net>

	* GDK_PIXBUF_CFLAGS and IMILB_CFLAGS are renamed to IMAGELIB_CFLAGS in
	  tool/mlconfig/Makefile.in.
	  (Thanks to Muto Kenshi san)

2002-09-27 Araki Ken <arakiken@users.sf.net>

	* The last character of a wraparound line was not deleted by BS + ' '. fixed.

2002-09-27 Araki Ken <arakiken@users.sf.net>

	* x_imagelib_*.o linked directly, not via x_imagelib.o.
	  (Thanks to Nobuyoshi Nakada san)

2002-09-20  Nobuyoshi Nakada  <nobu.nokada@softhome.net>

	* kiklib: link kik_pty_*.o and kik_utmp_*.o directly, not via
	  kik_pty.o and kik_utmp.o.

2002-09-17  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Renamed x_picdep_* to x_imagelib_*
	* When image has alpha channel, wallpapers can be patially translucent
	  with gdk-pixbuf imagelib module.
	  (unfinished and not updated poperly yet ...)

2002-09-16  Seiichi SATO <ssato@sh.rim.or.jp>

	* Cleaned up to get rid of compiler warning messages with gcc.

2002-09-16  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Major rewrite of icon handling
	 - Added new members (icon and mask) to struct x_window_t
	 - Actuall icon setting process is now done in x_window.c.
	 - remove icon cache from x_picture_gdk which seems not to be useful.
	
2002-09-15  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	*  x_picdep_load_icon( &data,&pixmap,&mask) is added
	  in gdk-pixbuf module.

2002-09-15 Araki Ken <arakiken@users.sf.net>

	* If cursor is located at the second byte of a multi-byte character,
	  cursor moves strangely, when bce is enabled. fixed.

2002-09-12 Araki Ken <arakiken@users.sf.net>

	* 2.6.1 released
	  (tag "rel-2_6_1")

2002-09-12 Araki Ken <arakiken@users.sf.net>

	* The right-end column was not drawn correctly under anti-alias mode. fixed.
	  (Thanks to Sato Seiichi san)
	* INCDIR macro was wrong. fixed.
	  (Thanks to Nakada Nobuyoshi asn)

2002-09-08 Araki Ken <arakiken@users.sf.net>

	* Screen of logged lines which contains multi byte characters got corrupt. fixed.
	* Tanween characters were ignored when arabic characters shaped. fixed.
	* Added doc/ja/README.confapp.

2002-09-08 Seiichi SATO <ssato@sh.rim.or.jp>

	* Added mlterm-icon-24colors-[12].png for low color depth.

2002-09-08 Araki Ken <arakiken@users.sf.net>

	* OPEN_PTY and OPEN_SCREEN shortcut keys were confused. fixed.
	* mkf_charset_t variable was passed to usascii_font_cs_changed()
	  in x_screen_attach(). fixed.
	* Added --with-imagelib option to mlterm/configure(.in) and
	  removed --enable-imlib, --enable-gdk-pixbuf.

2002-09-07 Araki Ken <arakiken@users.sf.net>

	* 2.6.0 released
	  (tag "rel-2_6_0")

2002-09-07 Araki Ken <arakiken@users.sf.net>

	* Added --with-imagelib=[imlib,gdk-pixbuf1,gdk-pixbuf2]
	  Removed --enable-imlib, --enable-gdk-pixbuf
	  (Thanks to Sato Seiichi san)
	* USPosition bit is set in XSizeHints.flags.
	  (Minami Hirokazu san)

2002-09-07  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* mlterm.tc is now non-shrinked version.
	  It's more accurate but may not compiled.
	  Please modify it to fit <1K .

2002-09-06  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Added mlterm.ti and  mlterm.tc under doc/term/ .

2002-09-06  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Mlterm's default behabior is changed as following
	 - mod_meta_mode is 8bit
	 - kD (sequence for DELETE) is \E[3~
	 - kb (sequence for BS) is ^?
	 - kh (sequence for HOME) is \EOH
	 - @7 (sequence for END) is \EOF

2002-09-05 Araki Ken <arakiken@users.sf.net>

	* Screen gets disordered when new line inserted. fixed.
	  (Thanks to Takahashi Tamotsu san, Sato Seiichi san)

2002-09-04 Araki Ken <arakiken@users.sf.net>

	* cursor moved to the end of line under insert mode. fixed.
	  (Thanks to Nobuyoshi Nakada san)
	
2002-09-04 Araki Ken <arakiken@users.sf.net>

	* String pointed by icon_path in x_term_manager.c is leaked. fixed.
	* doc/en/History is updated.

2002-09-04  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Added documentation of HOME/END support in README.ja and manpage.

2002-09-03 Seiichi SATO <ssato@sh.rim.or.jp>

	* The icons designed for various desktop environments / window managers,
	  such as GNOME, KDE, Window Maker, FVWM and twm, are added.
	  (contrib/icon/*.png)

2002-09-03 Araki Ken <arakiken@users.sf.net>

	* Even if imlib used, screen gets darker as gamma value greater like gdk-pixbuf.
	  (Thanks to Nobuyoshi Nakada san)
	* Documentation around OPEN_SCREEN,OPEN_PTY updated.

2002-09-03 Araki Ken <arakiken@users.sf.net>

	* ml_edit* module cleaned up.
	* some warnings in x_term_manager.c and x_window.c are suppressed.

2002-09-02  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* segmantation fault when no font is available for specified CS.
	  Inplemented woraround(fallback to old codeset)

2002-08-30  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Updated documents.

2002-08-30  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* initialize struct termios by zero because setting
	  random values may cause unexpectable results.

2002-08-29  Seiichi SATO <ssato@sh.rim.or.jp>

	* Fixed incorrect size hints.

2002-08-29  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Fixed possible access violation.

2002-08-29  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Plugged small memory leak.

2002-08-28  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Generalized XDND support. "text/uri-list" is now also accepted.
	
2002-08-28  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* emulate ANSY.SYS's save/restore cursor.
	  (Thanks to Wang WenRui)
	
2002-08-28  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Window icon support is added (require --enable-gdk-pixbuf).
	
2002-08-28  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Compilation failed on Linux glibc 2.1.x because of incomplete langinfo.h.
	  Built-in (dummy) kik_langinfo is now used when CODESET is not defined.
	  (Thanks to Kubota Tomohiro san)
	* background picture was not drawn when pseudo transparency had been
	  turned off. fixed.
	* winsize structure were not fully initialized during pty setup. fixed.
	  (Thanks to Nanashi san)
	* Fixed typos in Changelog.

2002-08-09  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Corrected path for gdk-pixbuf headers.
	* Gtk2's libs are now used by preference when gdk-pixbuf support is enabled.

2002-08-02  Araki Ken <arakiken@users.sf.net>

	* 2002-07-29 (*) problem not still fixed.
	  (Thanks to Minami Hirokazu san)

2002-07-29  Araki Ken <arakiken@users.sf.net>

	* If bce enabled in termcap config, mlterm hung up when multi-byte
	  characters were shown in screen. fixed. (*)
	* NEW_PTY short cut key is renamed to OPEN_SCREEN.
	* OPEN_PTY option is added.

2002-07-15  Tomohiro KUBOTA  <kubota@debian.org>

	* Update background/wall_picture/transparent handling in mlconfig.

2002-07-07  Tomohiro KUBOTA  <kubota@debian.org>

	* Update manpage for -M/-3/-4 command options.
	* Update mlconfig to support Wallpaper contrast and gamma.

2002-07-05  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Code cleanup (xwindow/x_picture_gdk.c).
	 - results of pow() are now cached.
	 - old transparency code is dropped.

2002-07-04  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Enabled command-line option for contrast/gamma
	 when configured with gdk-pixbuf. (Thanks to IWAMOTO Toshihiro san)

2002-07-03  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Added contrast/gamma support to gdk-pixbuf module.

2002-07-04 Araki Ken <arakiken@users.sf.net>

	* -3/--contrast,-4/--gamma options are added.
	  (Thanks to IWAMOTO Toshihiro san and Nakada Nobuyoshi san)
	* the last character of each line cannot be selected by mouse. fixed.

2002-07-03  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* HOME/END key support is added.

2002-07-02  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Minor code cleanup (xwindow/x_decsp_font.c).

2002-07-01  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Background of line characters did not drawn when
	  pseudo transparency is enabled. fixed.
	  (Thanks to Tomohiro KUBOTA san)

2002-06-30  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* Optimized drawing of line chars.

2002-06-29 Araki Ken <arakiken@users.sf.net>

	* -K,--metakey=[mod1-mod5,meta,alt,super,hyper] option is added.
	  This option works the same as rxvt's -mod option.

2002-06-29 Araki Ken <arakiken@users.sf.net>

	* Background of line characters can be transparent when -Y option is specified.

2002-06-28  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* XDnD session was not terminated properly. fixed.

2002-06-25 Araki Ken <arakiken@users.sf.net>

	* XDnD is supported. (Thanks to Minami Hirokazu san)

2002-06-23 Araki Ken <arakiken@users.sf.net>

	* the style of selecting characters in RTL lines is improved.

2002-06-19 Tomohiro KUBOTA <kubota@debian.org>

	* A debug message was displayed by mlconfig even if compiled
	  without DEBUG option; fixed.
	  (Thanks to MINAMI Hirokazu san)

2002-06-16 Araki Ken <arakiken@users.sf.net>

	* 2.5.0 is released.

2002-06-16 Araki Ken <arakiken@users.sf.net>

	* mlterm died if -Y option is specified with -A, -t or -P. fixed.
	  (Thanks to Minami Hirokazu san)

2002-06-15 Araki Ken <arakiken@users.sf.net>

	* if -E iscii was specified, mlterm died. fixed.
	* shaped characters were not shown correctly. fixed.

2002-06-14 Araki Ken <arakiken@users.sf.net>

	* w3mmlconfig is updated.
	* compilation never fails if --enable-utmp option is specified on Cygwin.
	  (Thanks to Sato Seiichi san)

2002-06-13 Araki Ken <arakiken@users.sf.net>

	* If use_dynamic_comb option was dynamically changed over twice, RTL lines
	  were shown correctly and even worse mlterm died. fixed.

2002-06-12 MINAMI Hirokazu <minami@chem.s.u-tokyo.ac.jp>

	* mlcc (new console based config tool) is added.

2002-06-12 Araki Ken <arakiken@users.sf.net>

	* "rows" and "cols" are added to ESC ] 5380 configuration protocol.

2002-06-11 Tomohiro KUBOTA <kubota@debian.org>

	* XIM server could not be changed by using mlconfig; fixed.
	* manpage update for mlconfig.
	* a new sample color configuration file.

2002-06-09 Araki Ken <arakiken@users.sf.net>

	* All characters in line were redrawn if it is modified even a little. fixed.

2002-06-08 Araki Ken <arakiken@users.sf.net>

	* Garbage could be left on the right side of screen.
	  (specially when ut is defined in termcap)
	  fixed.
	* "ESC [ Ps X VT100" sequence is supported.

2002-06-08 Tomohiro KUBOTA <kubota@debian.org>

	* Removed command options from mlconfig which are not
	  needed any more.

2002-06-06 Araki Ken <arakiken@users.sf.net>

	* -K/--maxptys option is removed.
	* Logged lines are not faded when screen is not focused.
	* If 0 is specified as value of -sl option, mlterm died. fixed.

2002-06-05 Tomohiro KUBOTA <kubota@debian.org>

	* renewal of mlconfig.

2002-06-04 Araki Ken <arakiken@users.sf.net>

	* mlterm version number is set as the value of "MLTERM" environmental variable.

2002-06-04 Tomohiro KUBOTA <kubota@debian.org>

	* Widgets for anti-alias and variable-font-width were not
	  displayed in mlconfig, fixed.

2002-06-03 Araki Ken <arakiken@users.sf.net>

	* mlconfig path didn't reflect configure prefix. fixed.
	* w3mmlconfig is updated. (Thanks to Sakamoto Hironori san)

2002-06-03 Araki Ken <arakiken@users.sf.net>

	* multi-column characters were not treated as multi-column in UTF-8 encoding. fixed.
	  (Thanks to Sakamoto Hironori san)
	* If Control Mask is set, mouse position is not reported.
	  (Thanks to Sakamoto Hironori san)
	* mlconfig and mlterm communicate through doc/en/PROTOCOL protocol.
	* mlconfig design is renewed. (Thanks to Kubota Tomohiro san)

2002-05-31 Tomohiro KUBOTA <kubota@debian.org>

	* rewrite manpage for 2002-05-30 changes.

2002-05-30 Araki Ken <arakiken@users.sf.net>

	* string to be output can be defined in ~/.mlterm/key like
	  Control+F1="foobar".
	* rgb of highlighted 8 colors can be defined as hl_{black|white|...}
	  in ~/.mlterm/color.

2002-05-26 Tomohiro KUBOTA <kubota@debian.org>

	* rewrite help message ("mlterm --help").
	* rewrite help message of ./configure script.

2002-05-20 Araki Ken <arakiken@users.sf.net>

	* VPATH was wrong in mlterm/Makefile.in xwindow/Makefile.in. fixed.
	  (Thanks to Nakada Nobuyoshi san)

2002-05-19 Seiichi SATO <ssato@sh.rim.or.jp>

	* x_color.c: alloc_closest_xcolor_pseudo() doesn't free the memory space
	  pointed to by all_colors. fixed.

2002-05-19 Araki Ken <arakiken@users.sf.net>

	* auto pointer was passed to putenv(). fixed.
	  (Thanks to Nakada Nobuyoshi san)

2002-05-19 Araki Ken <arakiken@users.sf.net>

	* display name specified by --display overwrites DISPLAY environment variable.

2002-05-19 Araki Ken <arakiken@users.sf.net>

	* combining characters were not shown with both -bi and -m options. fixed.

2002-05-19 Araki Ken <arakiken@users.sf.net>

	* Unicode characters except 0x00-0x7f could be shown incorrectly. fixed.

2002-05-19 Tomohiro KUBOTA <kubota@debian.org>

	* manpage update: explanations for -H, -J, -Q, -Z, and -q are
	  vastly modified.  Added a chapter of DAEMON MODE.  Keys which
	  are available only in -q mode are noted.
	* Added a new manpage of mlclient.1 .  (man/Makefile.in is also
	  modified to install this new page.)

2002-05-19 Araki Ken <arakiken@users.sf.net>

	* DEC_SPECIAL characters were not shown with -Y,--decsp option. fixed.
	  (Thanks to Kubota Tomohiro san)
	* "RRRRR-BBBBB-GGGG;" style is accepted in color config file for backward
	  compatibility with 2.4.0 or before.
	  (Thanks to Nanashi san)

2002-05-19 Araki Ken <arakiken@users.sf.net>

	* a bug of shaping arabic combining characters is fixed.
	* scrollbar's height was incorrect when screen was revived. fixed.

2002-05-18 Araki Ken <arakiken@users.sf.net>

	* compilation failed if ./configure is done with --disable-shared. fixed.
	  (Thanks to Nadim Shaikli)

2002-05-17 Araki Ken <arakiken@users.sf.net>

	* kik_pty_streams.c is improved.
	  (Thanks to Nadim Shaikli)
	* When base direction is changed from RTL to LTR, garbage is left in screen. fixed.
	  (Thanks to Nadim Shaikli)

2002-05-16 Araki Ken <arakiken@users.sf.net>

	* core dump when illegal color name is specified for fg/bg color. fixed.

2002-05-16 Araki Ken <arakiken@users.sf.net>

	* change of scrollbar foreground and background colors etc is not reflected
	  immediately. fixed.(2002-05-14 fix was incomplete)
        * #RRGGBB format is accepted in "color" config file.
	* ECHOE and ECHOCTL are added to termios.c_lflag.
	  (Thanks to Kitagawa Takurou san and Minami Hirokazu san)

2002-05-15 Araki Ken <arakiken@users.sf.net>

	* Ctrl-H as well as backspace key invokes ML_BACKSPACE shortcut key. fixed.

2002-05-14 Araki Ken <arakiken@users.sf.net>

        * change of fade ratio, fg color and bg color was not reflected immediately. fixed.
	* fg color and bg color are not highlighted by "\E[1m".

2002-05-14 Araki Ken <arakiken@users.sf.net>

	* vt100 core functions and GUI(x window system) functions are separated.
	  (vt100 core functions doesn't depend on any UI)

2002-05-09  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* utmp entry may be left unterminated when login() is used. fixed.

2002-05-07  MINAMI Hirokazu  <minami@chem.s.u-tokyo.ac.jp>

	* stopped dithering for root pixmap
	  which should be already dithered/quantized. (src/ml_picture_gdk.c)

2002-05-05 MINAMI Hirokazu <minami@chem.s.u-tokyo.ac.jp>

	* dithering support for PseudoColor (src/ml_picture_gdk.c).

2002-05-04 Seiichi SATO <ssato@sh.rim.or.jp>

	* Added a mechanism to find the closest color when visual class is
	  PseudoColor or GrayScale. (src/ml_color.c)

2002-05-02 Seiichi SATO <ssato@sh.rim.or.jp>

	* Fixed segfault when destroying a scrollbar in PseudoColor visual.
	  (Thanks to Minami Hirokazu san)

2002-05-01 Tomohiro KUBOTA <kutoba@debian.org>

	* manpage update: termcap file and -y option.

2002-04-30 Araki Ken <arakiken@users.sf.net>

	* etc/termcap format is changed and it is possible to define entries for
	  multiple terminals.
	* ut field(a.k.a bce in terminfo) is added to etc/termcap and --bce option
	  is removed.
	* -ldl is linked to libkik.so.

2002-04-29 MINAMI Hirokazu <minami@chem.s.u-tokyo.ac.jp>

	* Added documentations for background picture processing.
	  (doc/*/README.picdep)

2002-04-28 Tomohiro KUBOTA <kubota@debian.org>

	* Fixed several typos in the manpage.
	* Explanation on "-1" command option in more detail in the manpage.

2002-04-28 Araki Ken <arakiken@users.sf.net>

	* underline can be left as garbage on screen if line space is
	  odd number(1,3,5...). fixed.
	* configure fails with --with-libtool option. fixed.
	  (Thanks to Nakada Nobuyoshi san)

2002-04-27 Araki Ken <arakiken@users.sf.net>

	* kik_utmp_sysv.c patch is merged.
	  (Thanks to Nadim Shaikli)

2002-04-27 Araki Ken <arakiken@users.sf.net>

	* ml_term_model_t is dynamically plugged in ml_term_screen_t from outside,
	  instead of being internally created.
	* ml_sb_view_factory manages reference counter of each library so as not
	  to unload a library which is used by other terminals.
	  (Thanks to Sato Seiichi san)

2002-04-27 Araki Ken <arakiken@users.sf.net>

	* -3,--bce,use_bce=(true|false) option which enables or disables BCE support
	  is added.

2002-04-26 Seiichi SATO <ssato@sh.rim.or.jp>

	* Added stuff for new scrollbar libraries to configure script.

2002-04-26 Tomohiro KUBOTA <kubota@debian.org>

	* The manpage now mentions Sato-san's new scrollbar libraries.
	* Added whitespace after commas and before open parentheses
	  in the manpage.

2002-04-25 Tomohiro KUBOTA <kubota@debian.org>

	* "mlterm -Y" sometimes segfaulted, fixed.
	* Line-drawing characters in "mlterm -Y" had a gap, fixed.

2002-04-24 Tomohiro KUBOTA <kubota@debian.org>

	* Added a note on older changelog information to this file.

2002-04-23 Araki Ken <arakiken@users.sf.net>

	* if ${srcdir} is absolute path, configure fails. fixed.

2002-04-23 Araki Ken <arakiken@users.sf.net>

	* "configure ; make ; make install" process is possible in any directories
	  other than mlterm source directory.
	  (Thanks to Nobuyoshi Nakada san)
	* Please read doc/en/ChangeLog.old for previous changelog information.
	  (This term was written by Tomohiro KUBOTA in 2002-04-24.)

$Id$
